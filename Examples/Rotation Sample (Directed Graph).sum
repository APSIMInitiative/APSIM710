     ###     ######     #####   #   #     #   
    #   #    #     #   #        #   ##   ##   
   #     #   #     #   #        #   ##   ##   
   #######   ######     #####   #   # # # #   
   #     #   #              #   #   #  #  #   
   #     #   #         #####    #   #  #  #   
                                              
                                              
 The Agricultural Production Systems Simulator
             Copyright(c) APSRU               

Version                = 7.8
Title                  = Rotation Sample (Directed Graph)
   Component                        "clock" = %apsim%\Model\Clock.dll
   Component                          "met" = %apsim%\Model\Input.dll
Paddock:
   Component                   "outputfile" = %apsim%\Model\Report.dll
   Component                        "accum" = %apsim%\Model\Accum.dll
   Component                   "fertiliser" = %apsim%\Model\Fertiliser.dll
   Component                   "Soil Water" = %apsim%\Model\SoilWat.dll
   Component                "Soil Nitrogen" = %apsim%\Model\SoilN.dll
   Component                     "chickpea" = %apsim%\Model\Plant.dll
   Component                        "wheat" = %apsim%\Model\Plant.dll
   Component                       "cotton" = %apsim%\model\Cotton.dll
   Component                      "Manager" = %apsim%\Model\TclLink.dll

------- clock Initialisation --------------------------------------------------
     Sequencer phases:
        prepare
        init_step
        do_management
        run_one_step
        do_pasture_water
        process
        do_pasture_growth
        do_stock
        post
        end_step
     Simulation start date =  1/01/1940
     Simulation end date   = 31/12/1950
     Time step =           = 1440 (mins)

------- met Initialisation ----------------------------------------------------
     Sparse data is not allowed
     INPUT File name: %apsim%\Examples\MetFiles\Goond.met

------- outputfile Initialisation ---------------------------------------------
     Output frequency:
        harvesting
     Output variables:
        dd/mm/yyyy as Date
        yield
        biomass

     Output file = Rotation Sample (Directed Graph).out
     Format = normal

------- Paddock.accum Initialisation ------------------------------------------
     Initialising

------- Paddock.Soil Water Initialisation -------------------------------------
     
         - Reading constants
     
        - Reading Soil Property Parameters
     
        - Reading Soil Profile Parameters
     Initial soilwater distributed using "sw" parameter.
     
     
     
                      Soil Profile Properties
        ---------------------------------------------------------------------
              Depth  Air_Dry  LL15   Dul    Sat     Sw     BD   Runoff  SWCON
                mm     mm/mm  mm/mm  mm/mm  mm/mm  mm/mm  g/cc    wf
        ---------------------------------------------------------------------
            0.-  150.  0.105  0.210  0.390  0.440  0.390  1.400  0.762  0.300
          150.-  300.  0.189  0.210  0.390  0.440  0.390  1.390  0.190  0.300
          300.-  600.  0.220  0.220  0.400  0.450  0.400  1.370  0.048  0.300
          600.-  900.  0.250  0.250  0.410  0.460  0.410  1.360  0.000  0.300
          900.- 1200.  0.270  0.270  0.400  0.450  0.400  1.380  0.000  0.300
         1200.- 1500.  0.310  0.310  0.390  0.440  0.390  1.390  0.000  0.300
         1500.- 1800.  0.360  0.360  0.380  0.430  0.380  1.420  0.000  0.300
        ---------------------------------------------------------------------
     
     
     
                  Soil Water Holding Capacity
          ---------------------------------------------------------
              Depth    Unavailable Available  Max Avail.  Drainable
                          (LL15)   (SW-LL15)  (DUL-LL15)  (SAT-DUL)
                            mm        mm          mm         mm
          ---------------------------------------------------------
            0.-  150.      31.50      27.00      27.00       7.50
          150.-  300.      31.50      27.00      27.00       7.50
          300.-  600.      66.00      54.00      54.00      15.00
          600.-  900.      75.00      48.00      48.00      15.00
          900.- 1200.      81.00      39.00      39.00      15.00
         1200.- 1500.      93.00      24.00      24.00      15.00
         1500.- 1800.     108.00       6.00       6.00      15.00
          ---------------------------------------------------------
               Totals     486.00     225.00     225.00      90.00
          ---------------------------------------------------------
     
     
     
     
     
     
                  Initial Soil Parameters
          ---------------------------------------------------------
                 Insoil        Salb     Dif_Con   Dif_Slope
          ---------------------------------------------------------
                   0.00        0.13       40.00       16.00
          ---------------------------------------------------------
     
     
     
                  Runoff is predicted using scs curve number:
                Cn2  Cn_Red  Cn_Cov   H_Eff_Depth
                                           mm
          ---------------------------------------------------------
              73.00   20.00    0.80  450.00
          ---------------------------------------------------------
     
     
     
           Using Ritchie evaporation model
            Cuml evap (U):            6.00 (mm^0.5)
            CONA:                     3.50 ()
            Eo from priestly-taylor

------- Paddock.Soil Nitrogen Initialisation ----------------------------------
     
        - Reading Parameters
     
        - Reading Constants
     Using standard soil mineralisation for soil type Grey Vertosol
     
     
     
           TAV and AMP supplied externally
     
     
     
                      Soil Profile Properties
          ------------------------------------------------
           Layer    pH    OC     NO3     NH4    Urea
                         (%) (kg/ha) (kg/ha) (kg/ha)
          ------------------------------------------------
             1     7.00  1.24   13.65    1.26    0.00
             2     7.00  1.24    4.38    0.21    0.00
             3     7.00  1.25    8.63    0.41    0.00
             4     7.00  1.10    6.94    0.41    0.00
             5     7.00  0.71    7.04    0.41    0.00
             6     7.00  0.34    7.09    0.42    0.00
             7     7.00  0.26    7.24    0.43    0.00
          ------------------------------------------------
           Totals               54.96    3.54    0.00
          ------------------------------------------------
     
     
     
     
     
     
                  Initial Soil Organic Matter Status
          ---------------------------------------------------------
           Layer      Hum-C   Hum-N  Biom-C  Biom-N   FOM-C   FOM-N
                    (kg/ha) (kg/ha) (kg/ha) (kg/ha) (kg/ha) (kg/ha)
          ---------------------------------------------------------
             1      25584.9  2046.8   455.1    56.9    27.8     0.7
             2      25651.2  2052.1   202.8    25.3    21.6     0.5
             3      51273.3  4101.9   101.7    12.7    13.1     0.3
             4      44835.6  3586.8    44.4     5.6     8.0     0.2
             5      29379.4  2350.4    14.6     1.8     4.8     0.1
             6      14171.0  1133.7     7.0     0.9     2.9     0.1
             7      11070.5   885.6     5.5     0.7     1.8     0.0
          ---------------------------------------------------------
           Totals  201965.9 16157.3   831.1   103.9    80.0     2.0
          ---------------------------------------------------------


------- OZCOT Initialisation ----------------------------------

Manager: 
     Copyright (C) 1991-1994 The Regents of the University of California.
     Copyright (C) 1996-1997 Sun Microsystems, Inc.
     Copyright (C) 2001      ActiveState.
     --->Section: init

source $apsuite/UserInterface/APSFarm/RotationInitialisation.tcl
set state "WinterFallow"
package require struct
::struct::graph stateGraph
stateGraph node insert "SummerFallow2"
set colour(SummerFallow2) "-657956"
stateGraph node insert "Chickpea"
set colour(Chickpea) "-657956"
stateGraph node insert "Wheat"
set colour(Wheat) "-657956"
stateGraph node insert "WinterFallow"
set colour(WinterFallow) "-657956"
stateGraph node insert "SummerFallow1"
set colour(SummerFallow1) "-657956"
stateGraph node insert "F1"
set colour(F1) "-657956"
stateGraph node insert "Cotton"
set colour(Cotton) "-657956"
stateGraph arc insert "SummerFallow1" "WinterFallow" "arc2"
stateGraph arc lappend "arc2" actions {}
stateGraph arc lappend "arc2" rules {[apsimGet day]  == 192}
stateGraph arc insert "WinterFallow" "Cotton" "arc6"
stateGraph arc lappend "arc6" actions {sow_cotton}
stateGraph arc lappend "arc6" rules {[canPlant_cotton]}
stateGraph arc insert "Wheat" "SummerFallow2" "arc3"
stateGraph arc lappend "arc3" actions {apsimSendMessage wheat harvest}
stateGraph arc lappend "arc3" actions {apsimSendMessage wheat end_crop}
stateGraph arc lappend "arc3" rules {{[apsimGet wheat.stageName] == "harvest_ripe" || [apsimGet wheat.plant_status] == "dead"}}
stateGraph arc insert "F1" "SummerFallow1" "arc7"
stateGraph arc lappend "arc7" actions {}
stateGraph arc lappend "arc7" rules {[apsimGet day]  == 192}
stateGraph arc insert "F1" "Chickpea" "arc0"
stateGraph arc lappend "arc0" actions {sow_chickpea}
stateGraph arc lappend "arc0" rules {[canPlant_chickpea]}
stateGraph arc insert "Chickpea" "SummerFallow1" "arc8"
stateGraph arc lappend "arc8" actions {apsimSendMessage chickpea harvest}
stateGraph arc lappend "arc8" actions {apsimSendMessage chickpea end_crop}
stateGraph arc lappend "arc8" rules {{[apsimGet chickpea.stageName] == "harvest_ripe" || [apsimGet chickpea.plant_status] == "dead"}}
stateGraph arc insert "SummerFallow1" "Wheat" "arc1"
stateGraph arc lappend "arc1" actions {sow_wheat}
stateGraph arc lappend "arc1" rules {[canPlant_wheat]}
stateGraph arc insert "Cotton" "F1" "arc5"
stateGraph arc lappend "arc5" actions {apsimSendMessage cotton harvest}
stateGraph arc lappend "arc5" actions {apsimSendMessage cotton end_crop}
stateGraph arc lappend "arc5" rules {[apsimGet ozcot_status] > 0}
stateGraph arc insert "SummerFallow2" "WinterFallow" "arc9"
stateGraph arc lappend "arc9" actions {}
stateGraph arc lappend "arc9" rules {[apsimGet day]  == 74}
if {[info exists config(<self>,graphNames)]} {lappend config(<self>,graphNames) stateGraph} else {set config(<self>,graphNames) stateGraph}
set config(<self>,initialState) ""

# Support procedures
# Can we plant a crop today?
proc canPlant_cotton {} {
  if {"variable" == "variable"} {
     set year [apsimGet year]; set day [apsimGet day]
     set d1 [clock format [clock scan "15-oct-$year"] -format %j]
     set d2 [clock format [clock scan "15-dec-$year"] -format %j]

     if {"yes" == "yes" && $day == $d2} {return 1}

     if {$d1 > $d2} {
        set dateOK [expr $day >= $d1 || $day <= $d2]
     } else {
        set dateOK [expr $day >= $d1 && $day <= $d2]
     }
     set rainOK [expr [apsimGet rain\[3\]] >= 10]
     set eswOK [expr [apsimGet esw] >= 100]
     return [expr $dateOK && $rainOK && $eswOK]
  } elseif {"variable" == "fixed"} {
     set year [apsimGet year]; set day [apsimGet day]
     set d1 [clock format [clock scan "15-oct-$year"] -format %j]
     return [expr $day == $d1]
  } else {
     error "Unknown sowing criteria \"variable\"."
  }
  return "notreached"
}

# Plant a crop now
proc sow_cotton {} {
  if {"cotton" == "plant"} {
     apsimSendMessage cotton sow {plants 100} {sowing_depth 30} \
             {cultivar Siok} {row_spacing 1000} \
             {skipplant 0} {skiprow 0} {crop_class plant}
  } elseif {"cotton" == "cropmod"} {
     apsimSendMessage cotton sow {plants [density]} {sowing_depth [depth]} \
             {cultivar Siok} {row_spacing 1000} {skiprow 0}
  } elseif {"cotton" == "growth"} {
     apsimSendMessage cotton ???
  } elseif {"cotton" == "cotton"} {
     apsimSendMessage cotton sow {plants_pm 10} {sowing_depth 30} \
             {row_spacing 1000} {skiprow 0} {cultivar Siok}
  } elseif {"cotton" == "oryza"} {
     apsimSendMessage cotton sow {cultivar Siok}
  } elseif {"cotton" == "sorghum"} {
     apsimSendMessage cotton sow {plants 100} {sowing_depth 30} \
             {cultivar Siok} {row_spacing 1000} {skiprow 0} \
             {tiller_no_fertile [tiller_no_fertile]}
  } elseif {"cotton" == "sugar"} {
     apsimSendMessage cotton sow {plants 100} {cultivar Siok} {sowing_depth 30}
  } else {
    error "Unknown crop module \"cotton\"."
  }
}


# Support procedures
# Can we plant a crop today?
proc canPlant_chickpea {} {
  if {"variable" == "variable"} {
     set year [apsimGet year]; set day [apsimGet day]
     set d1 [clock format [clock scan "15-may-$year"] -format %j]
     set d2 [clock format [clock scan "10-jul-$year"] -format %j]

     if {"no" == "yes" && $day == $d2} {return 1}

     if {$d1 > $d2} {
        set dateOK [expr $day >= $d1 || $day <= $d2]
     } else {
        set dateOK [expr $day >= $d1 && $day <= $d2]
     }
     set rainOK [expr [apsimGet rain\[3\]] >= 15]
     set eswOK [expr [apsimGet esw] >= 50]
     return [expr $dateOK && $rainOK && $eswOK]
  } elseif {"variable" == "fixed"} {
     set year [apsimGet year]; set day [apsimGet day]
     set d1 [clock format [clock scan "15-may-$year"] -format %j]
     return [expr $day == $d1]
  } else {
     error "Unknown sowing criteria \"variable\"."
  }
  return "notreached"
}

# Plant a crop now
proc sow_chickpea {} {
  if {"plant" == "plant"} {
     apsimSendMessage chickpea sow {plants 25} {sowing_depth 30} \
             {cultivar amethyst} {row_spacing 500} \
             {skipplant 0} {skiprow 0} {crop_class plant}
  } elseif {"plant" == "cropmod"} {
     apsimSendMessage chickpea sow {plants [density]} {sowing_depth [depth]} \
             {cultivar amethyst} {row_spacing 500} {skiprow 0}
  } elseif {"plant" == "growth"} {
     apsimSendMessage chickpea ???
  } elseif {"plant" == "cotton"} {
     apsimSendMessage chickpea sow {plants_pm } {sowing_depth 30} \
             {row_spacing 500} {skiprow 0} {cultivar amethyst}
  } elseif {"plant" == "oryza"} {
     apsimSendMessage chickpea sow {cultivar amethyst}
  } elseif {"plant" == "sorghum"} {
     apsimSendMessage chickpea sow {plants 25} {sowing_depth 30} \
             {cultivar amethyst} {row_spacing 500} {skiprow 0} \
             {tiller_no_fertile [tiller_no_fertile]}
  } elseif {"plant" == "sugar"} {
     apsimSendMessage chickpea sow {plants 25} {cultivar amethyst} {sowing_depth 30}
  } else {
    error "Unknown crop module \"plant\"."
  }
}


# Support procedures
# Can we plant a crop today?
proc canPlant_wheat {} {
  if {"variable" == "variable"} {
     set year [apsimGet year]; set day [apsimGet day]
     set d1 [clock format [clock scan "15-may-$year"] -format %j]
     set d2 [clock format [clock scan "10-jul-$year"] -format %j]

     if {"no" == "yes" && $day == $d2} {return 1}

     if {$d1 > $d2} {
        set dateOK [expr $day >= $d1 || $day <= $d2]
     } else {
        set dateOK [expr $day >= $d1 && $day <= $d2]
     }
     set rainOK [expr [apsimGet rain\[3\]] >= 25]
     set eswOK [expr [apsimGet esw] >= 50]
     return [expr $dateOK && $rainOK && $eswOK]
  } elseif {"variable" == "fixed"} {
     set year [apsimGet year]; set day [apsimGet day]
     set d1 [clock format [clock scan "15-may-$year"] -format %j]
     return [expr $day == $d1]
  } else {
     error "Unknown sowing criteria \"variable\"."
  }
  return "notreached"
}

# Plant a crop now
proc sow_wheat {} {
  if {"plant" == "plant"} {
     apsimSendMessage wheat sow {plants 100} {sowing_depth 30} \
             {cultivar hartog} {row_spacing 250} \
             {skipplant 0} {skiprow 0} {crop_class plant}
  } elseif {"plant" == "cropmod"} {
     apsimSendMessage wheat sow {plants [density]} {sowing_depth [depth]} \
             {cultivar hartog} {row_spacing 250} {skiprow 0}
  } elseif {"plant" == "growth"} {
     apsimSendMessage wheat ???
  } elseif {"plant" == "cotton"} {
     apsimSendMessage wheat sow {plants_pm [plants_pm]} {sowing_depth 30} \
             {row_spacing 250} {skiprow 0} {cultivar hartog}
  } elseif {"plant" == "oryza"} {
     apsimSendMessage wheat sow {cultivar hartog}
  } elseif {"plant" == "sorghum"} {
     apsimSendMessage wheat sow {plants 100} {sowing_depth 30} \
             {cultivar hartog} {row_spacing 250} {skiprow 0} \
             {tiller_no_fertile [tiller_no_fertile]}
  } elseif {"plant" == "sugar"} {
     apsimSendMessage wheat sow {plants 100} {cultivar hartog} {sowing_depth 30}
  } else {
    error "Unknown crop module \"plant\"."
  }
}

     --->Section: process

checkSetup
doProcess

     --->End
------- Start of simulation  --------------------------------------------------

1 December 1940 (Day of year=336), cotton:  
      Sowing


        - Reading Cultivar Parameters
         ---------------------------------------
         Cultivar   =  SIOK
         percent_L  =  42.00
         scboll     =  4.5
         respcon    =  0.016
         sqcon      =  0.023
         fcutout    =  0.5411
         flai       =  0.5
         ddisq      =  420.0
         dlds_max   =  0.12
         popcon     =  0.03633
         acotyl     =  525.0
         rlai       =  0.010
         frudd      =  50  180  350  380  520  660  870  1100  
         bltme      =  0.00  0.00  0.00  0.07  0.21  0.33  0.55  1.00  
         wt         =  0.0104  0.0272  0.1441  0.0988  0.5042  0.9617  1.0000  0.5785  
         fburr      =  1.23
         rate_emergence       =  1.0
         background_retention =  0.90


         co2 at  350 ppm



                      Crop Sowing Data
         ------------------------------------------------
         Sowing  Depth  Plants   Spacing    Cultivar   Skip 
         Day no    mm     /m        mm        Name     Row  
         ---------------------------------------------------
           336    30.0    10.0    1000.0      SIOK      0
         ---------------------------------------------------



               Root Profile
        -----------------------------
            Layer          Lower 
            Depth          Limit 
             (cm)         (mm/mm) 
        -----------------------------
             15.0          0.210 
             15.0          0.210 
             30.0          0.220 
             30.0          0.250 
             30.0          0.270 
             30.0          0.310 
             30.0          0.360 
        -----------------------------


Cotton development to First Square using RateOfDevelopment 
6 December 1940 (Day of year=341), cotton:
    *** Crop emerged with 10.0 plants per m sq, 100% of target population of 10.0

29 April 1941 (Day of year=119), cotton: 
   Crop has reached the percent open bolls as defined for maturity. Crop mature.
11 June 1941 (Day of year=162), cotton: 
   *** crop with open bolls frosted:  crop stage forced to 'maturity'.

      Harvest


      Days after sowing      =   192
      bolls/m2               =   129.2        Lint (kg/ha)            =   1536.6
      N uptake (kg/ha)       =   149.6        bolls sc (g/boll)       =      2.8
      max squares das (days) =   86          max lai das (days)      =    91
      maximum squares/m2     =   179.0        maximum lai (m2/m2)     =      2.00
      Total above ground biomass (kg/ha) =  8970.7


      Total green biomass (g/m2) =  531.2
      Total sensced biomass (g/m2) =  0.0
      Total shed biomass (g/m2) =  165.3
      (Total fruit shed biomass (g/m2) =  44.3)
      Total harvested biomass (g/m2) =  365.9


 
 ** Cotton Component Reset 
 

15 December 1941 (Day of year=349), cotton:  
      Sowing


        - Reading Cultivar Parameters
         ---------------------------------------
         Cultivar   =  SIOK
         percent_L  =  42.00
         scboll     =  4.5
         respcon    =  0.016
         sqcon      =  0.023
         fcutout    =  0.5411
         flai       =  0.5
         ddisq      =  420.0
         dlds_max   =  0.12
         popcon     =  0.03633
         acotyl     =  525.0
         rlai       =  0.010
         frudd      =  50  180  350  380  520  660  870  1100  
         bltme      =  0.00  0.00  0.00  0.07  0.21  0.33  0.55  1.00  
         wt         =  0.0104  0.0272  0.1441  0.0988  0.5042  0.9617  1.0000  0.5785  
         fburr      =  1.23
         rate_emergence       =  1.0
         background_retention =  0.90


         co2 at  350 ppm



                      Crop Sowing Data
         ------------------------------------------------
         Sowing  Depth  Plants   Spacing    Cultivar   Skip 
         Day no    mm     /m        mm        Name     Row  
         ---------------------------------------------------
           349    30.0    10.0    1000.0      SIOK      0
         ---------------------------------------------------



               Root Profile
        -----------------------------
            Layer          Lower 
            Depth          Limit 
             (cm)         (mm/mm) 
        -----------------------------
             15.0          0.210 
             15.0          0.210 
             30.0          0.220 
             30.0          0.250 
             30.0          0.270 
             30.0          0.310 
             30.0          0.360 
        -----------------------------


Cotton development to First Square using RateOfDevelopment 
20 December 1941 (Day of year=354), cotton:
    *** Crop emerged with 10.0 plants per m sq, 100% of target population of 10.0

20 December 1941 (Day of year=354), cotton: 
         Crop failed - status 'dead'.
21 December 1941 (Day of year=355), cotton: 
         Crop failed - status 'dead'.
22 December 1941 (Day of year=356), cotton: 
         Crop failed - status 'dead'.
23 December 1941 (Day of year=357), cotton: 
         Crop failed - status 'dead'.
24 December 1941 (Day of year=358), cotton: 
         Crop failed - status 'dead'.
25 December 1941 (Day of year=359), cotton: 
         Crop failed - status 'dead'.
31 December 1950(Day of year=365), clock: 
     Simulation is terminating due to end criteria being met.

