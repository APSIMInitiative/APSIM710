     ###     ######     #####   #   #     #   
    #   #    #     #   #        #   ##   ##   
   #     #   #     #   #        #   ##   ##   
   #######   ######     #####   #   # # # #   
   #     #   #              #   #   #  #  #   
   #     #   #         #####    #   #  #  #   
                                              
                                              
 The Agricultural Production Systems Simulator
             Copyright(c) APSRU               

Version                = 7.5
Title                  = 25 intercrop 75 maize
   Component                        "clock" = %apsim%\Model\Clock.dll
   Component                          "met" = %apsim%\Model\Input.dll
   Component                        "accum" = %apsim%\Model\Accum.dll
   Component                   "Management" = %apsim%\Model\TclLink.dll
   Component                       "Labour" = %apsim%\Model\TclLink.dll
   Component                    "Economics" = %apsim%\Model\TclLink.dll
Paddock:
   Component                        "accum" = %apsim%\Model\Accum.dll
   Component                       "canopy" = %apsim%\Model\Canopy.dll
   Component                   "Fertiliser" = %apsim%\Model\Fertiliser.dll
   Component                   "Soil Water" = %apsim%\Model\SoilWat.dll
   Component       "Surface Organic Matter" = %apsim%\Model\SurfaceOM.dll
   Component                      "Erosion" = %apsim%\Model\Erosion.dll
   Component                "Soil Nitrogen" = %apsim%\Model\SoilN.dll
   Component                         "bean" = %apsim%\Model\Plant.dll
   Component                        "maize" = %apsim%\Model\Maize.dll
Paddock:
   Component                        "accum" = %apsim%\Model\Accum.dll
   Component                       "canopy" = %apsim%\Model\Canopy.dll
   Component                   "Fertiliser" = %apsim%\Model\Fertiliser.dll
   Component                   "Soil Water" = %apsim%\Model\SoilWat.dll
   Component       "Surface Organic Matter" = %apsim%\Model\SurfaceOM.dll
   Component                      "Erosion" = %apsim%\Model\Erosion.dll
   Component                "Soil Nitrogen" = %apsim%\Model\SoilN.dll
   Component                         "bean" = %apsim%\Model\Plant.dll
   Component                        "maize" = %apsim%\Model\Maize.dll

------- clock Initialisation --------------------------------------------------
     Sequencer phases:
        prepare
        init_step
        do_management
        run_one_step
        do_pasture_water
        process
        do_pasture_growth
        do_stock
        post
        end_step
     Using start date from the met file.
     Using end date from the met file.
     Simulation start date =  1/08/1979
     Simulation end date   = 31/12/2010
     Time step =           = 1440 (mins)

------- met Initialisation ----------------------------------------------------
     Sparse data is not allowed
     INPUT File name: %apsim%\Examples\MetFiles\Kakamega.met

------- accum Initialisation --------------------------------------------------
     Initialising
Management: 
     Copyright (C) 1991-1994 The Regents of the University of California.
     Copyright (C) 1996-1997 Sun Microsystems, Inc.
     Copyright (C) 2001      ActiveState.
     --->Section: end_simulation

          
close_annual_stuff


close_harvest_stuff


     --->Section: end_year

do_end_year
     --->Section: init

set config(paddocks) [list paddock1 paddock2]
set config(paddock1,area) 0.25
set config(paddock2,area) 0.75

# A list of crops in each paddock
set config(crops) [list maize bean]

foreach paddock $config(paddocks) {
  set config($paddock,initialState) Fallow
  set config($paddock,history) {}
  set config($paddock,graphNames) graph
  set state($paddock) {}
}

set simName [apsimGet title]
# Sow this crop
proc sow_LR_maize {paddock} {
  global config

  if {"yes" == "yes"} {
     doPresowTillage $paddock
  }

  # The apsim crop module
  apsimSendMessage $paddock.maize sow {plants 4.4} {sowing_depth 30} {cultivar  makueni} {row_spacing 750} {crop_class  plant}

  if {0 > 0} {
     apsimSendMessage $paddock.fertiliser apply {type no3_n} {amount 0}
     apsimSendMessage economics expenditure {category fertilisercost} "name  no3_n" \
               "rate 0" "area $config($paddock,area)"  "paddock $paddock" "fertiliser_type no3_n" \
               "fertiliser_rate 0" {incrop_cost {}} "crop maize" \
               "comment Fertiliser" 
  }

  if {"yes" == "yes"} {
     doSowingTillage $paddock
  }

  apsimSendMessage economics expenditure \
                   "cost [expr 42 * $config($paddock,area)]" \
                   "area $config($paddock,area)" \
                   "paddock $paddock" "costtype incrop_cost" {comment "sowing costs"} 
  set config(season) "LR"
}

# Can we sow a crop?
proc canSow_LR_maize {paddock} {
  if {[paddockIsFallow $paddock]} {
    if {[dateWithin 15-mar 15-may] } {
      if {( [apsimGet rain\[4\]] >= 20 ) ||
          ( "no" == "yes" && [dateIs '15-may'] ) } {
          return 1
      }
    }
  }
  return 0 
}

# Return whether any crop in our paddock is not "out"
proc paddockIsFallow {paddock} {
   global config
   foreach crop $config(crops) {
      set status [apsimGet $paddock.$crop.plant_status]
      if {$status != "out"} {
         return 0
      }
   }
   return 1
}

##########Date functions (general)
proc dateWithin {t0 t1} {
   set year [apsimGet year]
   set d0 [date2day $t0 $year]
   set d1 [date2day $t1 $year]
   return [dayWithin $d0 $d1]
}

proc dateIs {t} {
   set d [date2day $t [apsimGet year]]
   return [dayIs $d]
}

proc dayWithin {t0 t1} {
   set t [apsimGet day]
   if {$t0 > $t1} {
      return [expr $t >= $t0 || $t <= $t1]
   } else {
      return [expr $t >= $t0 && $t <= $t1]
   }
   # notreached
}

proc dayIs {t} {
   return [expr $t == [apsimGet day]]
}

proc leapyr {y} {
   return [expr ($y%4 == 0) && ($y%100 != 0) || ($y%400 == 0)]
}

proc date2day {date year} {
   foreach {mday month} [split $date "-"] {break}
   if {[leapyr $year]} {
      array set daysin {jan 0  feb 31 mar 58 apr 89 may 119 jun 150 jul 180 aug 211 sep 242 oct 272 nov 303 dec 333}
   } else {
      array set daysin {jan 0  feb 31 mar 59 apr 90 may 120 jun 151 jul 181 aug 212 sep 243 oct 273 nov 304 dec 334}
   }   
   return [expr $mday + $daysin($month)]
}



proc sow_SR_maize {paddock} {
  global config

  if {"yes" == "yes"} {
     doPresowTillage $paddock
  }

  # The apsim crop module
  apsimSendMessage $paddock.maize sow {plants 4.4} {sowing_depth 30} {cultivar  makueni} {row_spacing 750} {crop_class  plant}

  if {0 > 0} {
     apsimSendMessage $paddock.fertiliser apply {type no3_n} {amount 0}
     apsimSendMessage economics expenditure {category fertilisercost} "name  no3_n" \
               "rate 0" "area $config($paddock,area)"  "paddock $paddock" "fertiliser_type no3_n" \
               "fertiliser_rate 0" {incrop_cost {}} "crop maize" \
               "comment Fertiliser" 
  }

  if {"yes" == "yes"} {
     doSowingTillage $paddock
  }

  apsimSendMessage economics expenditure \
                   "cost [expr 20 * $config($paddock,area)]" \
                   "area $config($paddock,area)" \
                   "paddock $paddock" "costtype incrop_cost" {comment "sowing costs"} 

  set config(season) "SR"
}


# Can we sow a crop?
proc canSow_SR_maize {paddock} {
  if {[paddockIsFallow $paddock]} {
    if {[dateWithin 1-sep 15-oct] } {
      if {( [apsimGet rain\[4\]] >= 20 ) ||
          ( "no" == "yes" && [dateIs '15-oct'] ) } {
          return 1
      }
    }
  }
  return 0 
}

# Return whether any crop in our paddock is not "out"
proc paddockIsFallow {paddock} {
   global config
   foreach crop $config(crops) {
      set status [apsimGet $paddock.$crop.plant_status]
      if {$status != "out"} {
         return 0
      }
   }
   return 1
}

##########Date functions (general)
proc dateWithin {t0 t1} {
   set year [apsimGet year]
   set d0 [date2day $t0 $year]
   set d1 [date2day $t1 $year]
   return [dayWithin $d0 $d1]
}

proc dateIs {t} {
   set d [date2day $t [apsimGet year]]
   return [dayIs $d]
}

proc dayWithin {t0 t1} {
   set t [apsimGet day]
   if {$t0 > $t1} {
      return [expr $t >= $t0 || $t <= $t1]
   } else {
      return [expr $t >= $t0 && $t <= $t1]
   }
   # notreached
}

proc dayIs {t} {
   return [expr $t == [apsimGet day]]
}

proc leapyr {y} {
   return [expr ($y%4 == 0) && ($y%100 != 0) || ($y%400 == 0)]
}

proc date2day {date year} {
   foreach {mday month} [split $date "-"] {break}
   if {[leapyr $year]} {
      array set daysin {jan 0  feb 31 mar 58 apr 89 may 119 jun 150 jul 180 aug 211 sep 242 oct 272 nov 303 dec 333}
   } else {
      array set daysin {jan 0  feb 31 mar 59 apr 90 may 120 jun 151 jul 181 aug 212 sep 243 oct 273 nov 304 dec 334}
   }   
   return [expr $mday + $daysin($month)]
}



# Sow this crop
proc sow_maizebean {paddock} {
  global config
  
  if {"yes" == "yes"} {
     doPresowTillage $paddock
  }

  apsimSendMessage $paddock.maize sow {plants 4.4} {sowing_depth 30} {cultivar  katumani} {row_spacing 750} {crop_class  plant}

  apsimSendMessage $paddock.bean sow {plants 8.8} {sowing_depth 30} {cultivar  fiord} {row_spacing 750} {crop_class  plant}

  if {0 > 0} {
     apsimSendMessage $paddock.fertiliser apply {type no3_n} {amount 0}
     apsimSendMessage economics expenditure {category fertilisercost} "name  no3_n" \
               "rate 0" "area $config($paddock,area)"  "paddock $paddock" "fertiliser_type no3_n" \
               "fertiliser_rate 0" {incrop_cost {}} "crop maize" \
               "comment Fertiliser" 
  }
  
  apsimSendMessage economics expenditure \
                   "cost [expr 42 * $config($paddock,area)]" \
                   "area $config($paddock,area)" \
                   "paddock $paddock" "costtype incrop_cost" {comment "sowing costs"} 

  if {"yes" == "yes"} {
     doSowingTillage $paddock
  }
  set config(season) "LR"
}

# Can we sow a crop?
proc canSow_maizebean {paddock} {
  if {[paddockIsFallow $paddock]} {
    if {[dateWithin 15-mar 15-may] } {
      if {( [apsimGet rain\[4\]] >= 20 ) ||
          ( "no" == "yes" && [dateIs '15-may'] ) } {
          return 1
      }
    }
  }
  return 0 
}

# Return whether any crop in our paddock is not "out"
proc paddockIsFallow {paddock} {
   global config
   foreach crop $config(crops) {
      set status [apsimGet $paddock.$crop.plant_status]
      if {$status != "out"} {
         return 0
      }
   }
   return 1
}

##########Date functions (general)
proc dateWithin {t0 t1} {
   set year [apsimGet year]
   set d0 [date2day $t0 $year]
   set d1 [date2day $t1 $year]
   return [dayWithin $d0 $d1]
}

proc dateIs {t} {
   set d [date2day $t [apsimGet year]]
   return [dayIs $d]
}

proc dayWithin {t0 t1} {
   set t [apsimGet day]
   if {$t0 > $t1} {
      return [expr $t >= $t0 || $t <= $t1]
   } else {
      return [expr $t >= $t0 && $t <= $t1]
   }
   # notreached
}

proc dayIs {t} {
   return [expr $t == [apsimGet day]]
}

proc leapyr {y} {
   return [expr ($y%4 == 0) && ($y%100 != 0) || ($y%400 == 0)]
}

proc date2day {date year} {
   foreach {mday month} [split $date "-"] {break}
   if {[leapyr $year]} {
      array set daysin {jan 0  feb 31 mar 58 apr 89 may 119 jun 150 jul 180 aug 211 sep 242 oct 272 nov 303 dec 333}
   } else {
      array set daysin {jan 0  feb 31 mar 59 apr 90 may 120 jun 151 jul 181 aug 212 sep 243 oct 273 nov 304 dec 334}
   }   
   return [expr $mday + $daysin($month)]
}



proc canHarvest_maize {paddock} {
  return [expr [string equal [apsimGet $paddock.maize.StageName] "harvest_ripe"] || \
               [string equal [apsimGet $paddock.maize.plant_status] "dead"]]
}

proc harvest_maize {paddock} {

   global config daysSinceLastHarvest harvest
   apsimSendMessage labour operate "operator operator1" "implement harvesting"\
                   "area $config($paddock,area)" \
                   "paddock $paddock" "costtype incrop_cost"    

   set yield [expr [apsimGet .masterpm.$paddock.maize.yield]/1000.0]
   set biomass [apsimGet .masterpm.$paddock.maize.biomass]

   apsimSendMessage economics income {category cropprice} "name maize"  \
                          "yield $yield" \
                          "area $config($paddock,area)" "paddock $paddock" "crop maize" \
                          "SW_state [apsimGet $config($paddock,watBal).esw]" \
                          "NO3_state [apsimGet $config($paddock,nModule).no3()]"                       

   apsimSendMessage $paddock.maize  harvest
   apsimSendMessage $paddock.maize  end_crop

   set daysSinceLastHarvest($paddock) 0
   
   if {yes == "yes"} {
      set somWt [expr [apsimGet "$paddock.Surface Organic Matter.surfaceom_wt"] / 1000.0]

      apsimSendMessage economics income {category cropprice} "name maize_residue"  \
                          "yield $somWt" \
                          "area $config($paddock,area)" "paddock $paddock" 


      apsimSendMessage "$paddock.Surface Organic Matter" tillage {type user_defined} {f_incorp 1.0} {tillage_depth 0.0}
   }
   
   global annual
   set year [apsimGet year]
   set wetYield [expr ($yield * 100.0) / (100.0 - 12.0)] ;# 12% grain moisture
   if {[info exists annual($year,maize,harvest)]} {
     set annual($year,maize,harvest) [expr $annual($year,maize,harvest) + $wetYield * $config($paddock,area)]
   } else {
     set annual($year,maize,harvest)  [expr $wetYield * $config($paddock,area)]
   }
   lappend harvest [list [apsimGet dd/mm/yyyy] $config(season) $paddock maize \
      [format %.0f [expr 1000.0 * $yield]] [format %.0f $biomass]]
}

proc canHarvest_bean {paddock} {
  return [expr [string equal [apsimGet $paddock.bean.StageName] "harvest_ripe"] || \
               [string equal [apsimGet $paddock.bean.plant_status] "dead"]]
}

proc harvest_bean {paddock} {

   global config daysSinceLastHarvest harvest
   apsimSendMessage labour operate "operator operator1" "implement harvesting"\
                   "area $config($paddock,area)" \
                   "paddock $paddock" "costtype incrop_cost"    

   set yield [expr [apsimGet .masterpm.$paddock.bean.yield]/1000.0]
   set biomass [apsimGet .masterpm.$paddock.bean.biomass]

   apsimSendMessage economics income {category cropprice} "name bean"  \
                          "yield $yield" \
                          "area $config($paddock,area)" "paddock $paddock" "crop bean" \
                          "SW_state [apsimGet $config($paddock,watBal).esw]" \
                          "NO3_state [apsimGet $config($paddock,nModule).no3()]"                       

   apsimSendMessage $paddock.bean  harvest
   apsimSendMessage $paddock.bean  end_crop

   set daysSinceLastHarvest($paddock) 0
   
   global annual
   set year [apsimGet year]
   set wetYield [expr ($yield * 100.0) / (100.0 - 12.0)] ;# 12% grain moisture
   if {[info exists annual($year,bean,harvest)]} {
     set annual($year,bean,harvest) [expr $annual($year,bean,harvest) + $wetYield * $config($paddock,area)]
   } else {
     set annual($year,bean,harvest)  [expr $wetYield * $config($paddock,area)]
   }
   lappend harvest [list [apsimGet dd/mm/yyyy] $config(season) $paddock bean \
      [format %.0f [expr 1000.0 * $yield]] [format %.0f $biomass]]

}

# intercropping harvest rules 
proc canHarvest_maizebean {paddock} {
  # 2nd crop is harvested by default
  if { [canHarvest_bean $paddock] } {
      harvest_bean $paddock
  }

  return [canHarvest_maize $paddock]
}

proc harvest_maizebean {paddock} {

   # Make sure the intercrop is removed
   if {! [string equal [apsimGet $paddock.bean.plant_status] "out" ] } {
      harvest_bean $paddock
   }
   harvest_maize $paddock
}



proc doPresowTillage {paddock} {
   global config

   if {[string equal "user_defined" "user_defined"]} {
       apsimSendMessage "$paddock.Surface Organic Matter" tillage {type user_defined} {f_incorp 0.9} {tillage_depth 100}
   } else {
       apsimSendMessage "$paddock.Surface Organic Matter" tillage {type user_defined}
   }

   apsimSendMessage labour operate "operator operator1" "implement presow_till"\
                   "area $config($paddock,area)" \
                   "paddock $paddock" "costtype incrop_cost" {comment "Pre sowing tillage"} 
}



proc doSowingTillage {paddock} {
   global config

   if {[string equal "user_defined" "user_defined"]} {
       apsimSendMessage "$paddock.Surface Organic Matter" tillage {type user_defined} {f_incorp 0.1} {tillage_depth 100}
   } else {
       apsimSendMessage "$paddock.Surface Organic Matter" tillage {type user_defined}
   }

   apsimSendMessage labour operate "operator operator1" "implement sowing"\
                   "area $config($paddock,area)" \
                   "paddock $paddock" "costtype incrop_cost" {comment "Sowing tillage"} 
}



proc doIncropTillage {paddock} {
   global config

   if {[string equal "user_defined" "user_defined"]} {
       apsimSendMessage "$paddock.Surface Organic Matter" tillage {type user_defined} {f_incorp 0.9} {tillage_depth 100}
   } else {
       apsimSendMessage "$paddock.Surface Organic Matter" tillage {type user_defined}
   }

   apsimSendMessage labour operate "operator operator1" "implement weeding"\
                   "area $config($paddock,area)" \
                   "paddock $paddock" "costtype incrop_cost"  {comment "Incrop tillage"} 
}

proc doFallowTillage {paddock} {
   global config

   if {[string equal "user_defined" "user_defined"]} {
       apsimSendMessage "$paddock.Surface Organic Matter" tillage {type user_defined} {f_incorp 0.9} {tillage_depth 100}
   } else {
       apsimSendMessage "$paddock.Surface Organic Matter" tillage {type user_defined}
   }

   apsimSendMessage labour operate "operator operator1" "implement weeding"\
                   "area $config($paddock,area)" \
                   "paddock $paddock" "costtype incrop_cost" {comment "Fallow tillage"} 
}
# Return area (ha) planted to a crop
proc areaOf {crop} {
   global config
   if {[info exists config($crop,alias)]} {set crop $config($crop,alias)}
   set sum 0.0
   foreach paddock $config(cropPaddocks) {
      set state [currentState $paddock]
      if {[info exists config($state,alias)]} {set state $config($state,alias)}
      if {"$state" == "$crop"} {
        set sum [expr $sum + $config($paddock,area)]
      }
   }
   return $sum
}

proc areaPlantedOk {crop} {
   global config
   if {[info exists config($crop,alias)]} {set crop $config($crop,alias)}
   set f [expr [areaOf $crop] / $config(allCropArea)]

   return [expr $f < $config(maxFract,$crop)]
}

proc historyOk {paddock crop} {
   global config
   if {[info exists config($crop,alias)]} {set crop $config($crop,alias)}
   set max $config(maxContinuous,$crop)
   set n [llength $config($paddock,history)]
   for {set i $n} {$i >= $n - $max} {decr i} {
      if {[lindex $config($paddock,history)] != $crop} {return 1}
   }
   return 0
}



########### Support procedures

proc max {a b} { return [expr {($a > $b) ? $a : $b}] }
proc min {a b} { return [expr {($a > $b) ? $b : $a}] }

# Return the current state of the system
proc currentState {paddock} {
   global state
   return $state($paddock)
}

# Gather arguments (eg sowing depth, fert rate etc} from defaults array
# $action: the operation (sow, fert ...
# $what: the module (wheat, sorghum ...
proc gatherArgs {action what} {
   global defaults config

   # 1. "sow,..."
   foreach {index value} [array get defaults $action,*] {
      set args([lindex [split $index ","] end]) $value
   }
   # 2. override above with any "wheat,sow,..."
   foreach {index value} [array get defaults $what,$action,*] {
      set args([lindex [split $index ","] end]) $value
   }
   # 3. override above with any "SpringWheat,sow,..."
   if {[info exists config($what,alias)]} {
      foreach {index value} [array get defaults $config($what,alias),$action,*] {
         set args([lindex [split $index ","] end]) $value
      }
   }
   return [array get args]
}

# Mash a list into name/value pairs to pass via the apsim message system
proc mash {list} {
   set result {}
   foreach {name value} $list {lappend result [list $name $value]}
   return $result
}

# Sum a list
proc lsum {list} {
   set result 0.0
   foreach value $list {set result [expr $result + $value]}
   return $result
}

# Linear interpolation
proc linint {x_coords y_coords value} {
   set y  0.0

   if {[llength $x_coords] <= 0 || [llength $y_coords] <= 0 || [llength $x_coords] != [llength $y_coords]} {
      error "bad coordinates in linear_interp_real"
   }

   for {set indx 0} {$indx < [llength $x_coords]} {incr indx} {
      if {$value <= [lindex $x_coords $indx]} {
         if {$indx == 0} {
            set y [lindex $y_coords $indx]
         } else {
            if {abs($value - [lindex $x_coords $indx]) < 1.0E-4} {
               set y [lindex $y_coords $indx]
            } else  {
               set y_part [expr [lindex $y_coords $indx] - [lindex $y_coords [expr $indx-1]] ]
               set x_part [expr [lindex $x_coords $indx] - [lindex $x_coords [expr $indx-1]] ]
               set y [expr ($y_part/$x_part) * ($value - [lindex $x_coords [expr $indx - 1]]) + [lindex $y_coords [expr $indx- 1]] ]
            }
         break;
         }
      } elseif {$indx == [lindex $x_coords $indx]-1} {
         set y  [lindex $y_coords $indx]
      } else {
         set y  0.0
      }
   }
   return $y
}

#############################
############### The decision routine(s).
#############################
# Return the score for planting "what"
proc checkRules {thisPaddock} {
  global config

  uplevel #0 set paddock \"$thisPaddock\"
  set bestScore -1.0; set bestTarget {}; set bestArc {}; set bestGraph {}
  foreach graph $config($thisPaddock,graphNames) {
     foreach arc [$graph arcs -out [currentState $thisPaddock]] {
        set expr {}
        set target [$graph arc target $arc]
        foreach rule [$graph arc get $arc rules] {
           set value [uplevel #0 expr $rule]
           lappend expr $value
           if {$value == 0} {break} ;# no need to continue evaluating subsequent rules
        }
        if {[llength $expr] > 0} {
           set score [expr [join $expr "*"]]
           if {$score > $bestScore} {
              set bestScore  $score
              set bestTarget $target
              set bestArc    $arc
              set bestGraph  $graph
           }
        }
     }
  }   
  return [list  $bestScore $bestGraph $bestTarget $bestArc]
}

# A place holder function to monitor state transitions
proc logState {graph paddock state} {puts "$graph $paddock $state"}

# Change state to another
proc changeState {paddock graph arc} {
   global state
   uplevel #0 set paddock \"$paddock\"
   foreach action [$graph arc get $arc actions] { uplevel #0 $action }
   set state($paddock) [$graph arc target $arc]
   logState $graph $paddock $state($paddock)
}

# Do daily process at top level
proc doProcess {} {
   global date config daysSinceLastHarvest
   
   set date "[apsimGet day],[apsimGet year]"

   set more 1
   while {$more} {
      set more 0
      # 1. Find out what's possible
      set bestPaddock {}; set bestScore -1.0
      foreach paddock $config(paddocks) {
         foreach {score graph target arc} [checkRules $paddock] {break}
         if {$score > $bestScore} {
            set bestPaddock $paddock; set bestScore $score; set bestGraph $graph; set bestTarget $target; set bestArc $arc
         }
      }
      if {$bestScore > 0.0} {
         changeState $bestPaddock $bestGraph $bestArc
         set more 1
      }
   }
   
   foreach paddock $config(paddocks) {
      incr daysSinceLastHarvest($paddock)
   }   
}

# pass events to various output files
proc reportEvent {from what} {
   foreach {event args} [split $what "-"] {break}
}

puts "Done farm"
package require struct
::struct::graph graph
graph node insert "Fallow"
set colour(Fallow) "-657956"
graph node insert "SRMaize"
set colour(SRMaize) "-32768"
graph node insert "maizebean"
set colour(maizebean) "-16744448"
graph node insert "LRMaize"
set colour(LRMaize) "-32576"
graph arc insert "SRMaize" "Fallow" "arc1"
graph arc lappend "arc1" actions {harvest_maize $paddock}
graph arc lappend "arc1" rules {[canHarvest_maize $paddock ]}
graph arc insert "Fallow" "SRMaize" "arc3"
graph arc lappend "arc3" actions {sow_SR_maize $paddock}
graph arc lappend "arc3" rules {[canSow_SR_maize $paddock]}
graph arc insert "Fallow" "maizebean" "arc0"
graph arc lappend "arc0" actions {sow_maizebean $paddock}
graph arc lappend "arc0" rules {[canSow_maizebean $paddock]}
graph arc lappend "arc0" rules {[string equal $paddock  "paddock1"]}
graph arc insert "maizebean" "Fallow" "arc2"
graph arc lappend "arc2" actions {harvest_maizebean $paddock}
graph arc lappend "arc2" rules {[canHarvest_maizebean $paddock ]}
graph arc insert "LRMaize" "Fallow" "arc4"
graph arc lappend "arc4" actions {harvest_maize $paddock}
graph arc lappend "arc4" rules {[canHarvest_maize $paddock ]}
graph arc insert "Fallow" "LRMaize" "arc5"
graph arc lappend "arc5" actions {sow_LR_maize $paddock}
graph arc lappend "arc5" rules {[canSow_LR_maize $paddock]}
graph arc lappend "arc5" rules {! [string equal $paddock  "paddock1"]}
if {[info exists config(p1,graphNames)]} {lappend config(p1,graphNames) graph} else {set config(p1,graphNames) graph}
set config(p1,initialState) "Fallow"
if {[info exists config(p2,graphNames)]} {lappend config(p2,graphNames) graph} else {set config(p2,graphNames) graph}
set config(p2,initialState) "Fallow"
if {[info exists config(p3,graphNames)]} {lappend config(p3,graphNames) graph} else {set config(p3,graphNames) graph}
set config(p3,initialState) "Fallow"
if {[info exists config(p4,graphNames)]} {lappend config(p4,graphNames) graph} else {set config(p4,graphNames) graph}
set config(p4,initialState) "Fallow"
if {[info exists config(p5,graphNames)]} {lappend config(p5,graphNames) graph} else {set config(p5,graphNames) graph}
set config(p5,initialState) "Fallow"

# Annual summary of whole farm averages

proc open_annual_stuff {} {
   global annual annualcrop config
   set year [expr [apsimGet year] - 1 ]
   set annual(years) $year
   set annual(accRain) 0.0
   set annual($year,balance) [apsimGetOptional balance] 
   foreach {accumulator} {runoff drain soil_loss es } {
     foreach paddock $config(paddocks) {
        set annual($paddock,$accumulator) 0.0
     }   
   }
}

proc do_end_year {} {
   global config annual annualcrop

   set year [apsimGet year]

   foreach {accumulator} {runoff drain soil_loss es} {
     foreach paddock $config(paddocks) {
        set annual($year,$paddock,$accumulator) $annual($paddock,$accumulator)
        set annual($paddock,$accumulator) 0.0
     }
   }
   set annual($year,accRain) $annual(accRain)
   set annual(accRain) 0.0
   set annual($year,balance) [apsimGetOptional balance]
   lappend annual(years) $year
}

proc close_annual_stuff {} {
   global simName config annual annualcrop
   puts "close_annual_stuff called"

   # Heading
   set fp [open $simName.annual.out w]
   puts $fp "Title = $simName"
   puts $fp ""
   puts -nonewline $fp "year "
   foreach {accumulator} {runoff drain soil_loss es rain } {
      puts -nonewline $fp " $accumulator"
   }
   foreach crop $config(crops) {
      puts -nonewline $fp " ${crop}_harvest"
   }
   puts $fp " profit"

   puts -nonewline $fp "() "
   foreach {accumulator} {runoff drain soil_loss es rain } {
      puts -nonewline $fp " (mm)"
   }
   foreach crop $config(crops) {
      puts -nonewline $fp " (tonnes-wet)"
   }
   puts $fp " ($)"

   # Area weighted averages of environmental stuff
   set tfa 0.0
   foreach paddock $config(paddocks) {set tfa [expr $tfa + $config($paddock,area)]}

   foreach year [lrange $annual(years) 1 end] {
      puts -nonewline $fp "$year "
      foreach {accumulator} {runoff drain soil_loss es} {
         set s 0.0
         foreach paddock $config(paddocks) {
            set s [expr $s + $annual($year,$paddock,$accumulator) * $config($paddock,area) / $tfa]
         }
         puts -nonewline $fp " [format %.2f $s]"
      }
      puts -nonewline $fp " [format %.2f $annual($year,accRain)]"
   
      foreach crop $config(crops) {
         if {[info exists annual($year,$crop,harvest)]} {
           puts -nonewline $fp " [format %.3f $annual($year,$crop,harvest)]"
         } else {
           puts -nonewline $fp " *"
         }  
      }

      # profit = change in bank balance each year
      catch {
         puts -nonewline $fp " [format %.2f [expr $annual($year,balance) - $annual([expr $year-1],balance)]]"
      }
      puts $fp ""
   }
   close $fp
}




# Annual summary of whole farm averages

proc open_harvest_stuff {} {
   global harvest config
   set harvest {}
}


proc close_harvest_stuff {} {
   global simName config harvest
   puts "close_harvest_stuff called"

   # Heading
   set fp [open $simName.harvest.out w]
   puts $fp "Title = $simName"
   puts $fp ""
   puts $fp "Date         season paddock crop yield   biomass"
   puts $fp "(dd/mm/yyyy)     ()      ()   () (kg/ha) (kg/ha)"

   foreach line $harvest {
      puts $fp $line
   }
   close $fp
}




     --->Section: post

foreach paddock $config(paddocks) {
   if {[apsimGet $paddock.maize.DaysAfterSowing] == 30} {
      doIncropTillage $paddock
   }
}
   set annual(accRain) [expr $annual(accRain) + [apsimGet rain]]
   foreach {accumulator} {runoff drain es } {
      foreach paddock $config(paddocks) {
         if {$paddock != "toplevel"} {
            set annual($paddock,$accumulator) [expr $annual($paddock,$accumulator) + [apsimGet $config($paddock,watBal).$accumulator]]
         }
      }   
   }
   foreach {accumulator} {soil_loss} {
      foreach paddock $config(paddocks) {
         if {$paddock != "toplevel"} {
            set annual($paddock,$accumulator) [expr $annual($paddock,$accumulator) + [apsimGet .masterpm.$paddock.erosion.$accumulator]]
         }
      }   
   }

     --->Section: prepare

foreach paddock $config(paddocks) {
   if {$daysSinceLastHarvest($paddock) == 40} {
      doFallowTillage $paddock
   }
}
     --->Section: process

# Housekeeping
if {[catch {doProcess } msg]} {
   puts "$errorInfo"
   error "$msg\n$errorInfo"
}


     --->Section: start_simulation

foreach paddock $config(paddocks) {
  set state($paddock)         $config($paddock,initialState) ;# Should get this from xml
  set history($paddock)       $config($paddock,history)
  set daysSinceLastHarvest($paddock) 60
}

# All our soils are called "Soil.." 
foreach paddock $config(paddocks) {
   set config($paddock,watBal)   ".masterpm.$paddock.Soil Water"
   set config($paddock,nModule)  ".masterpm.$paddock.Soil Nitrogen"
}

set config(states) {}


catch {file delete $simName.annual.csv}

open_annual_stuff


catch {file delete $simName.harvest.out}

open_harvest_stuff


     --->End
Done farm
Labour: 
     --->Section: init

# Apsim Machinery (sub)Module
# Contains Tractors, Implements & Labour.

# Operations: 
# bool available(<config>)    ; See if a configuration can be used today (read)
# operate <config> <area>     ; Operate a configuration over an area until finished (event)

########################## Apsim interface code here
source $apsuite/Model/TclLink/CIDataTypes.tcl

# A trace handler for status. This handler is called whenever another module 
# asks us whether machinery is available.
#    NB. Careful! Errors in trace routines are not caught!!!
proc machinery:maProc {name1 name2 op} {
   if {$op == "read" } {
      global config $name1
      foreach {junk operator implement} [split $name1 "_"] { break }

      # Check they are known to us
      if {[lsearch $config(operators) $operator] < 0} {
         set msg "operator \"$operator\" is unknown - I only know about $config(operators)"
         error $msg
      }
      if {[lsearch $config(implements) $implement] < 0} {
         set msg "implement \"$implement\" is unknown - I only know about $config(implements)"
         error $msg
      }
      
      # Now see if they are busy
      set avail 1
      catch {
         global machinery:jobs
         foreach job ${machinery:jobs} {
            foreach {tid iid area paddock costtype} [split $job ","] {break}
            if {"$operator" == "$tid" || "$implement" == "$iid"} {set avail 0}
         }
      } msg
      if {$msg != ""} {apsimWriteToSummaryFile $msg; error $msg}
           
      # Set the variable - this is what is returned to apsim.
      set $name1 $avail
   }  
}

# An event handler. 
proc machinery:operateHandler {args} {
  global incomingVariant
  foreach {name value} [unpack_Variant $incomingVariant] {
     regsub -all "'" $name {} name
     regsub -all "'" $value {} value
     set [string tolower $name] [string tolower $value]
  }
  if {![info exists operator] || ![info exists implement] || ![info exists area]} {
     error "Must specify a operator, implement, and area to operate over."
  }
  if { ![info exists paddock] } {set paddock {}}
  if { ![info exists costtype] } {set costtype unknown}
  machinery:operate $operator $implement $area $paddock $costtype
}

# Now register the event handlers. 
apsimSubscribeVariant operate            "machinery:operateHandler"
apsimSubscribeNull process            "machinery:process"
apsimSubscribeNull end_financial_year "machinery:end_year"
########################## End apsim interface code

########################## Machinery configuration code
# Read in our configuration
proc machinery:initialise {} {
   global config
   if {![info exists config(operators)]} {set config(operators) {}}
   if {![info exists config(implements)]} {set config(implements) {}}
} 


# return the work rate for this combo can cover per hour
proc getCombo {operator implement thing} {
   global config
   if {![info exists config(machinery,$operator,$implement,$thing)]} {
      error "No $thing specified for $operator and $implement"
   }
   return $config(machinery,$operator,$implement,$thing)
}

proc getRate {tid iid} {
   return [getCombo $tid $iid workrate]
}

proc getValue {id thing} {
   global config
   if {![info exists config(machinery,$id,$thing)]} {
      error "No $thing for $id specified (get)"
   }
   return $config(machinery,$id,$thing)
}

# Return the cost of labour per hour
proc labourCost {} {
   global config
   if {![info exists config(machinery,labourCost)]} {
      error "No labourCost specified"
   }
   return $config(machinery,labourCost)
}

# return the labour cost this combo uses per hour 
proc getLabourCost {tid iid} {
   return [expr [getCombo $tid $iid workrate] * [labourCost]]
}

# Return the number of hours worked per day
proc getHoursPerDay {tid iid} {
   return [getCombo $tid $iid hoursperday]
}

proc setValue {id thing value} {
   global config
   if {![info exists config(machinery,$id,$thing)]} {
      error "No $thing for $id specified (set)"
   }
   set config(machinery,$id,$thing) $value
}

##############
# Operate a configuration over an area. Just add it to the job queue 
# and let process look after it.
proc machinery:operate {operator implement area paddock costtype} {
   if {![string is double -strict $area]} {
      error "Area should be a number (not $area)"
   }
   global machinery:jobs
   lappend machinery:jobs $operator,$implement,$area,$paddock,$costtype
   apsimWriteToSummaryFile "Machinery job \"$operator + $implement\" is queued"
}

# The daily process routine. Manages the job queue
proc machinery:process {} {
   global machinery:jobs
   set tomorrowsJobs {}
   # Go through each job. If an item is in use in any prior job, we can't do it today. 
   for {set ijob 0} {$ijob < [llength ${machinery:jobs}]} {incr ijob} {
      set job [lindex ${machinery:jobs} $ijob]
      foreach {tid iid area paddock costtype} [split $job ","] {break}
      set inuse 0
      for {set j 0} {$j < $ijob} {incr j} {
         foreach {Ttid Tiid Tarea Tpaddock Tcosttype} [split [lindex ${machinery:jobs} $j] ","] {break}
         if {$tid == $Ttid || $iid == $Tiid} {set inuse 1}
      }
      if {!$inuse} {
        # The job is running today. Work out how many hours, and then the costs
        set maxHours [getHoursPerDay $tid $iid]
        set rate [getRate $tid $iid]

        if {$maxHours * $rate <= $area} {
           set hours $maxHours
           set areaToday [expr $maxHours * $rate]
        } else {   
           set hours [expr $area / $rate]
           set areaToday [expr $hours * $rate]
        }   
        set cost [expr $hours * [getLabourCost $tid $iid]]
        apsimSendMessage "" expenditure [list hours $hours] [list cost $cost] [list comment "operating costs of $tid + $iid"] [list paddock $paddock] [list area $areaToday] [list $costtype {}]

        set rate [expr $hours * [getRate $tid $iid]]
        set area [expr $area - $rate]

        if {$area > 0} {
           lappend tomorrowsJobs $tid,$iid,$area,$paddock,$costtype
        } else {
           apsimWriteToSummaryFile "Labour job '$tid + $iid' in $paddock has finished"
        }
      } else {
        lappend tomorrowsJobs $job
      } 
   }
   set machinery:jobs $tomorrowsJobs
}

# The "end_year" routine. Do loan payments and replacement
proc machinery:end_year {} {
   global config
}

lappend config(operators) "operator1"
set config(machinery,operator1,age) "0"

set config(machinery,operator1,sowing,workrate) "0.5"
set config(machinery,operator1,sowing,hoursperday) "12"

set config(machinery,operator1,weeding,workrate) "0.8"
set config(machinery,operator1,weeding,hoursperday) "12"

set config(machinery,operator1,harvesting,workrate) "0.2"
set config(machinery,operator1,harvesting,hoursperday) "8"

set config(machinery,operator1,presow_till,workrate) "0.1"
set config(machinery,operator1,presow_till,hoursperday) "8"

set config(machinery,operator1,spraying,workrate) "0.1"
set config(machinery,operator1,spraying,hoursperday) "8"

set config(machinery,labourCost) "1.0"


     --->Section: start_simulation


# Finally, load our configuration database and initialise states
machinery:initialise 
set machinery:jobs {}

# Now tell apsim we own it, set up the trace variable we use to trigger when the variable is read
foreach tid $config(operators) {
  foreach iid $config(implements) {
     set v available_${tid}_${iid}
     set $v 0
     apsimRegisterGetSet $v
     trace add variable $v read "machinery:maProc"
  }
}

apsimWriteToSummaryFile "Labour:\nOperators=$config(operators)\nImplements=$config(implements)"


     --->End
Economics: 
     --->Section: init

# Apsim/Economics Cashbook (sub)module

# accepts messages:
#  cashbook income {amount 64000.0} {comment "description here"}
#  cashbook income {category cropprice} {name wheat} {yield 4000} {protein 12.3} {comment "description here"}
#  cashbook income {category cropprice} {name sorghum} {yield 6000} {comment "description here"}
#  cashbook expenditure {cost 42.0} {comment "description here"}
#  cashbook expenditure {category seed} {name wheat} {rate 120} {comment "description here"}
# Keeps a balance, writes a log.

########################## Apsim interface code here
source $apsuite/Model/TclLink/CIDataTypes.tcl

set balance [expr 0.0]
apsimRegisterGetSet balance
apsimSubscribeVariant  income      "cashbook:incomeHandler"
apsimSubscribeVariant  expenditure "cashbook:expenditureHandler"
apsimSubscribeNull  process     "cashbook:processHandler"
apsimSubscribeNull  end_simulation "cashbook:exitHandler"

# An event handler. 
#  cashbook income {amount 64000.0}                                              {comment "description here"}
#  cashbook income {category cropprice} {name wheat} {yield 4000} {protein 12.3} {comment "description here"}
#  cashbook income {category cropprice} {name sorghum} {yield 6000}              {comment "description here"}
proc cashbook:incomeHandler {args} {
   global config incomingVariant balance

   set names {}
   foreach {_name _value} [unpack_Variant $incomingVariant] {
      set $_name [string tolower $_value]
      lappend names $_name
   }
   if {![info exists comment]} { set comment "" }
   if {![info exists paddock]} { set paddock "" }
   if {![info exists protein]} { set protein "" }
   
   if {[info exists amount] && [string is double -strict $amount]} {
      set balance [expr $balance + $amount]
      cashbook:log income amount $amount comment $comment paddock $paddock

   } elseif {[info exists category] && [info exists name] && 
             [info exists yield] && [info exists area]} {
      set amount "NA"
      set price  "NA"
      if {![info exists config(economics,$category,$name)] } {
         foreach {n v} [array get config economics*] {apsimWriteToSummaryFile "economics $n=$v"}
         error "No price information for crop $name in $category"
      }
      if {![info exists config(economics,$category,$name,grain_moisture)] } {
         apsimWriteToSummaryFile "Warning!!!!\nNo grain moisture found for $name. Using 12%."
         set config(economics,$category,$name,grain_moisture) 12.0
      }
      if {$name != "wheat"} {
         set price $config(economics,$category,$name)
      } else {
         # oddball wheat pricing system..
         set proteins $config(economics,$category,$name,protein)
         set prices $config(economics,$category,$name)
         set price [lindex $prices 0]
         for {set i 0} {($i < [llength $proteins]) && 
             ($protein > [lindex $proteins $i])} {incr i} {
               set price [lindex $prices $i]
         }
      }  
      set wetYield [expr ($yield * 100.0) / (100.0 - $config(economics,$category,$name,grain_moisture))]
      set amount [expr  $price * $wetYield * $area]

      set comment "$category ($name)"
      apsimWriteToSummaryFile "Priced $name $category (price='$price', yield='$wetYield' wet) over '$area' ha = '$amount'"
      set balance [expr $balance + $amount]
      cashbook:log income amount $amount comment $comment \
                          income $amount crop_income $amount \
                          paddock $paddock area $area \
                          yield $wetYield protein $protein crop $name
   } else {
      error "cashbook:income: Must specify a either an numeric amount, or <category, name, price and area>."
   }
}

proc cashbook:expenditureHandler {args} {
  global incomingVariant config
  set _names {}

  set comment ""
  foreach {_name _value} [unpack_Variant $incomingVariant] { 
     set $_name [string tolower $_value]
     lappend _names $_name
  }

  if {[lsearch ${_names} comment] < 0} {lappend _names comment}

  if {[info exists cost]} {
     # Simple 
     global balance
     set balance [expr $balance - $cost]
  } elseif {[info exists category] && [info exists name] && [info exists rate] && [info exists area]} {
     # lookup this expense in our table of costs

     if {![info exists config(economics,$category,$name)] } {
        foreach {n v} [array get config economics*] {apsimWriteToSummaryFile "economics $n=$v"}
        error "No price information for $name in $category"
     }

     set price $config(economics,$category,$name)
     set cost [expr $price * $rate * $area]

     if {[lsearch ${_names} price] < 0} {lappend _names price}

     set comment "$category ($name)"
     apsimWriteToSummaryFile "Costed $name $category (rate=$rate, price=$price) over $area ha = $cost"
     
     global balance
     set balance [expr $balance - $cost]
  } else {
     error "cashbook:expenditure: Must specify a either a cost or a (category + name + rate + area)."
  }
  if {[info exists fallow_cost] && ![string is double -strict $fallow_cost]} {set fallow_cost $cost}
  if {[info exists incrop_cost] && ![string is double -strict $incrop_cost]} {set incrop_cost $cost}
  set cmd "cashbook:log expenditure cost $cost" 
  foreach _name ${_names} { lappend cmd ${_name} [set ${_name}] }
  eval $cmd
}

# Add up the annual farm overheads
proc cashbook:doFarmOverheads {} {
   global balance config
   set sum $config(economics,overheads)
      
   set balance [expr $balance - $sum]
   cashbook:log expenditure cost $sum comment "Farm Overheads"
}

# Work our repayments on initial investment
proc cashbook:doInitialCapital {} {
   global config balance

   if {![info exists config(economics,icapital,ivalue)] ||
       ![info exists config(economics,icapital,loanRate)] ||
       ![info exists config(economics,icapital,loanDuration)]} {
      return   
   }
       
   if {![info exists config(economics,icapital,loanPeriod)]} {
      set config(economics,icapital,loanPeriod) 1
   }
   
   if {$config(economics,icapital,loanRate) > 0.0} {
      if {$config(economics,icapital,loanPeriod) <=  $config(economics,icapital,loanDuration)} {
         #A = P(i(1+i)^n)/((1+i)^n - 1)
         set P $config(economics,icapital,ivalue)
         set i [expr $config(economics,icapital,loanRate)/100.0]
         set n $config(economics,icapital,loanDuration)
         
         set A [expr $P * ($i*pow(1+$i,$n))/(pow(1.0+$i,$n) - 1.0) ]
      
         set balance [expr $balance - $A]
         cashbook:log expenditure cost $A \
                                  interest_paid $A \
                                  comment "Loan repayments for initial capital outlay"
         
         set config(economics,icapital,loanPeriod) [expr 1 + $config(economics,icapital,loanPeriod)]
         if { $config(economics,icapital,loanPeriod) >  $config(economics,icapital,loanDuration) } {
             apsimWriteToSummaryFile "Loan for initial capital outlay is finished"
         }    
      }
   }
}
     


# Send an "end financial year" message when needed
proc cashbook:processHandler {args} {
  if {[apsimGet day] == 181} {
     cashbook:doFarmOverheads
     cashbook:doInitialCapital
     apsimSendMessage "" end_financial_year
  }
}

proc cashbook:log {what args} {
   global balance config 
   set date [apsimGet dd/mmm/yyyy]

   set _names {}
   foreach {_name _value} $args { 
      set ${_name} ${_value} 
      lappend _names $_name
   }

   if { [info exists config(economics,outputfp)] } {
      if {$what == "income"} {
         puts $config(economics,outputfp) "$date,$amount,,$balance,$comment"
      } elseif {$what == "expenditure"} {
         puts $config(economics,outputfp) "$date,,$cost,$balance,$comment"
      } else {
         error "Unknown cashbook operation '$what'"
      }
   }

   if {$what == "income"} {
      set cmd "cashbook:summary date $date $what $amount"
   } elseif {$what == "expenditure"} {
      set cmd "cashbook:summary date $date $what $cost "
   } else {
      error "Unknown cashbook operation '$what'"
   }
   foreach _name ${_names} { lappend cmd ${_name} [set ${_name}] }
   eval $cmd
}

proc cashbook:summary {args} {
   global balance config
   
   if { [info exists config(economics,summaryfp)]} {
      
      foreach {_name _value} $args {set ${_name} ${_value} }

      foreach v {date paddock area crop yield protein "fertiliser_type" \
               "fertiliser_rate" "interim_rainfall" "interim_runoff" "interim_drainage" \
               "interim_soil_loss" "SW_state" "NO3_state" "fallow_cost" "incrop_cost" "crop_income" \
               "interest_paid" "expenditure" "income" "comment"} {
         if {[info exists $v]} {
            puts -nonewline $config(economics,summaryfp) "[set $v],"
         } else {
            puts -nonewline $config(economics,summaryfp) ","
         }     
      }
      puts $config(economics,summaryfp) ""
   }
}
# Annual summaries. Re-read the event file we have written into a single array and
# write a cash flow summary
proc cashbook:exitHandler {} {
   global config

   puts "Cashbook: Writing summaries"

   if { [info exists config(economics,outputfp)] } { close $config(economics,outputfp) }
   if { [info exists config(economics,summaryfp)] } { close $config(economics,summaryfp) }

   if { ![info exists config(economics,cashSummaryName)] } { return }

   #1. Read and store event data
   set fp [open $config(economics,cashSummaryName) r]
   gets $fp header
   set columns [split $header ","]
   
   set minyear 3000; set maxyear 0; 
   set years {}; set paddocks {}; catch {unset A}
   
   while {[gets $fp line] >= 0} {
      foreach what {incrop_cost fallow_cost crop_income income expenditure interest_paid interest_earned} {catch {unset $what}}
      foreach $columns [split $line ","] {break}
      regsub -all "/" $date "-" date
      set now [clock scan $date]
      set endYear [clock scan "30-june-[clock format $now -format %Y]"]
   
      if {$now > $endYear} {
         set year [expr [clock format $now -format %Y]+1]
      } else {
         set year [clock format $now -format %Y]
      }
   
      if {$year < $minyear} {set minyear $year}
      if {$year > $maxyear} {set maxyear $year}
      if {[lsearch $years $year] < 0} {lappend years $year}
      if {$paddock != {} && $paddock != "livestock" && [lsearch $paddocks $paddock] < 0} {lappend paddocks $paddock}
      foreach what {incrop_cost fallow_cost crop_income} {
         if {[string is double -strict [set $what]]} {
            if {![info exists A($year,$paddock,$what)]} {
               set A($year,$paddock,$what) [set $what]
            } else {
               set A($year,$paddock,$what) [expr $A($year,$paddock,$what) + [set $what]]
            }
         }
      }
      
      foreach what {income expenditure interest_paid interest_earned} {
         if {$paddock == {} && 
             [info exists $what] && 
             [string is double -strict [set $what]]} {
            if {![info exists A($year,farm_$what)]} {
               set A($year,farm_$what) [set $what]
            } else {
               set A($year,farm_$what) [expr $A($year,farm_$what) + [set $what]]
            }
         }

         if {$paddock == "livestock" && 
             [info exists $what] && 
             [string is double -strict [set $what]]} {
            if {![info exists A($year,livestock_$what)]} {
               set A($year,livestock_$what) [set $what]
            } else {
               set A($year,livestock_$what) [expr $A($year,livestock_$what) + [set $what]]
            }
         }

      }
   }
   close $fp
   
   set paddocks [lsort $paddocks]
   
   #2. Write annual cash flow summary
   set fp [open $config(economics,annualSummaryName) w]

   foreach year $years {puts -nonewline $fp ",Year $year"}
   puts $fp "\nCrop income"
   foreach paddock $paddocks {
      puts -nonewline $fp "Paddock $paddock"
      foreach year $years {
         if {[info exists A($year,$paddock,crop_income)]} {
            puts -nonewline $fp ",[format "%.0f" $A($year,$paddock,crop_income)]"
         } else {
            puts -nonewline $fp ","
         }
      }
      puts $fp ""
   }
   
   puts -nonewline $fp "Livestock income"
   foreach year $years {
      if {[info exists A($year,livestock_income)]} {
         puts -nonewline $fp ",[format "%.0f" $A($year,livestock_income)]"
      } else {
         puts -nonewline $fp ","
      }
   }
   puts $fp ""
   puts -nonewline $fp "Other farm income"
   foreach year $years {
      if {[info exists A($year,farm_income)]} {
         puts -nonewline $fp ",[format "%.0f" $A($year,farm_income)]"
      } else {
         puts -nonewline $fp ","
      }
   }
   puts $fp ""
   puts -nonewline $fp "Interest Earned"
   foreach year $years {
      if {[info exists A($year,farm_interest_earned)]} {
         puts -nonewline $fp ",[format "%.0f" $A($year,farm_interest_earned)]"
      } else {
         puts -nonewline $fp ","
      }
   }
   puts $fp ""
   
   puts -nonewline $fp "Total income"
   foreach year $years {
      set sum 0.0
      foreach {name value} [array get A $year,*income] {
         set sum [expr $sum + $value]
      }   
      puts -nonewline $fp ",[format %.0f $sum]"
      set A($year,total_income) $sum
   }
   puts $fp "\n"
   
   puts $fp "Variable expenses"
   foreach what {incrop_cost fallow_cost} {
      foreach paddock $paddocks {
         puts -nonewline $fp "Paddock $paddock $what"
         foreach year $years {
            if {[info exists A($year,$paddock,$what)]} {
               puts -nonewline $fp ",[format "%.0f" $A($year,$paddock,$what)]"
            } else {
               puts -nonewline $fp ","
            }
         }
         puts $fp ""
      }
   }
   puts -nonewline $fp "Livestock expenses"
   foreach year $years {
      if {[info exists A($year,livestock_expenditure)]} {
         puts -nonewline $fp ",[format "%.0f" $A($year,livestock_expenditure)]"
      } else {
         puts -nonewline $fp ","
      }
   }
   puts $fp ""
   puts -nonewline $fp "Other expenses"
   foreach year $years {
      if {[info exists A($year,farm_expenditure)]} {
         puts -nonewline $fp ",[format "%.0f" $A($year,farm_expenditure)]"
      } else {
         puts -nonewline $fp ","
      }
   }
   puts $fp ""
   
   puts -nonewline $fp "Interest Paid"
   foreach year $years {
      if {[info exists A($year,farm_interest_paid)]} {
         puts -nonewline $fp ",[format "%.0f" $A($year,farm_interest_paid)]"
      } else {
         puts -nonewline $fp ","
      }
   }
   puts $fp ""
   
   puts -nonewline $fp "Total expenses"
   foreach year $years {
      set sum 0.0
      foreach {name value} [array get A $year,farm_expenditure] {
         set sum [expr $sum + $value]
      }   
      foreach {name value} [array get A $year,*cost] {
         set sum [expr $sum + $value]
      }   
      puts -nonewline $fp ",[format %.0f $sum]"
      set A($year,total_expenses) $sum
   }
   puts $fp "\n"

   puts -nonewline $fp "Annual Surplus/Deficit"
   foreach year $years {
      set sum [expr $A($year,total_income) - $A($year,total_expenses)]
      set A($year,surplus) $sum
      puts -nonewline $fp ",[format %.0f $sum]"
   }
   puts $fp "\n"

   puts -nonewline $fp "Cumulative Cash Flow"
   set year [expr [lindex $years 0]-1]
   set A($year,balance) $config(initialBalance)
   foreach year $years {
      set A($year,balance) [expr $A([expr $year-1],balance) + $A($year,surplus)]
      puts -nonewline $fp ",[format %.0f $A($year,balance)]"
   }
   puts $fp "\n"

   close $fp
}

# apsim 'strings' are returned as arrays of strings and may need this
proc unlist {list} {
   if {[llength $list] == 1} {return [lindex $list 0]}
   return $list
}

########################## End apsim interface code

apsimWriteToSummaryFile "     Cashbook initialised."
apsimWriteToSummaryFile ""


set config(economics,icapital,ivalue) "0"
set config(economics,icapital,loanRate) "0"
set config(economics,icapital,loanDuration) "0"
          
set runTitle [unlist [apsimGet title]]

if {"yes" != "no"} {
   set config(economics,outputfp) [open $runTitle.cashBook.csv w]
   puts $config(economics,outputfp) "date,income,expenditure,balance,comment"
}

if {"summaryfile" != "no"} {
   set config(economics,cashSummaryName) "$runTitle.cashSummary.csv"
   set config(economics,summaryfp) [open $config(economics,cashSummaryName) w]
   puts $config(economics,summaryfp) "date,paddock,area,crop,yield,protein,fertiliser_type,fertiliser_rate,\
interim_rainfall,interim_runoff,interim_drainage,\
interim_soil_loss,SW_state,NO3_state,fallow_cost,incrop_cost,crop_income,interest_paid,expenditure,income,comment"

   set config(economics,annualSummaryName) "$runTitle.cashSummary.Annual.csv"
   file delete -force $config(economics,annualSummaryName)
}

set config(initialBalance) "0"

          
set config(economics,cropprice,maize) "285.0"
set config(economics,cropprice,maize_residue) "20.0"
set config(economics,cropprice,bean) "420.0"
          
set config(economics,mzreq) 1.26
set config(economics,bnreq) 0.35
set config(economics,overheads) [expr $config(economics,cropprice,maize) * $config(economics,mzreq) + \
  $config(economics,cropprice,bean) * $config(economics,bnreq) + \
  100.0 ]
          
set config(economics,fertilisercost,map) "0.56"
set config(economics,fertilisercost,starter_z) "0.62"
set config(economics,fertilisercost,urea) "0.6"
set config(economics,fertilisercost,no3_n) "1.0"
          
     --->Section: start_simulation

set balance "0"
apsimWriteToSummaryFile "     Initial Balance = $balance"
          
     --->End
          Cashbook initialised.
     

------- accum Initialisation --------------------------------------------------
     Initialising

------- canopy Initialisation -------------------------------------------------
      Initialising
      Module rotation for intercropping :
     maize                           bean

------- Soil Water Initialisation ---------------------------------------------
     
         - Reading constants
     
        - Reading Soil Property Parameters
     
        - Reading Soil Profile Parameters
     Initial soilwater distributed using "sw" parameter.
     
     
     
                      Soil Profile Properties
        ---------------------------------------------------------------------
              Depth  Air_Dry  LL15   Dul    Sat     Sw     BD   Runoff  SWCON
                mm     mm/mm  mm/mm  mm/mm  mm/mm  mm/mm  g/cc    wf
        ---------------------------------------------------------------------
            0.-  150.  0.110  0.150  0.280  0.320  0.280  1.280  0.762  0.500
          150.-  300.  0.120  0.150  0.280  0.320  0.280  1.270  0.190  0.500
          300.-  600.  0.170  0.170  0.285  0.340  0.285  1.340  0.048  0.500
          600.-  900.  0.170  0.170  0.270  0.330  0.270  1.330  0.000  0.300
          900.- 1200.  0.170  0.170  0.270  0.330  0.270  1.310  0.000  0.300
         1200.- 1500.  0.170  0.170  0.270  0.330  0.270  1.310  0.000  0.300
        ---------------------------------------------------------------------
     
     
     
                  Soil Water Holding Capacity
          ---------------------------------------------------------
              Depth    Unavailable Available  Max Avail.  Drainable
                          (LL15)   (SW-LL15)  (DUL-LL15)  (SAT-DUL)
                            mm        mm          mm         mm
          ---------------------------------------------------------
            0.-  150.      22.50      19.50      19.50       6.00
          150.-  300.      22.50      19.50      19.50       6.00
          300.-  600.      51.00      34.50      34.50      16.50
          600.-  900.      51.00      30.00      30.00      18.00
          900.- 1200.      51.00      30.00      30.00      18.00
         1200.- 1500.      51.00      30.00      30.00      18.00
          ---------------------------------------------------------
               Totals     249.00     163.50     163.50      82.50
          ---------------------------------------------------------
     
     
     
     
     
     
                  Initial Soil Parameters
          ---------------------------------------------------------
                 Insoil        Salb     Dif_Con   Dif_Slope
          ---------------------------------------------------------
                   0.00        0.13       88.00       32.00
          ---------------------------------------------------------
     
     
     
                  Runoff is predicted using scs curve number:
                Cn2  Cn_Red  Cn_Cov   H_Eff_Depth
                                           mm
          ---------------------------------------------------------
              80.00   20.00    0.80  450.00
          ---------------------------------------------------------
     
     
     
           Using Ritchie evaporation model
            Cuml evap (U):            5.00 (mm^0.5)
            CONA:                     5.00 ()
            Eo from priestly-taylor

------- Surface Organic Matter Initialisation ---------------------------------
     
         - Reading constants
     
         - Reading parameters
     
     
     
                         Initial Surface Organic Matter Data
         ----------------------------------------------------------------------
            Name   Type        Dry matter   C        N        P    Cover  Standing_fr
                                (kg/ha)  (kg/ha)  (kg/ha)  (kg/ha) (0-1)     (0-1)
         ----------------------------------------------------------------------
          maize_stubmaize          100.0    40.0     0.5     0.0   0.039     0.0
         ----------------------------------------------------------------------
     
                      Effective Cover from Surface Materials =   0.0
     

------- Erosion Initialisation ------------------------------------------------
      Initialising:
     
        - Reading Parameters
     
     
     
                      Erosion Parameters
          -----------------------------------------------
           Profile reduction:                     off
           Freebairn cover-sediment concentration model
     
           LS factor:                             1.0954
     
           K factor:                              0.4000
     
           P factor:                              1.0000
     
          -----------------------------------------------

------- Soil Nitrogen Initialisation ------------------------------------------
     
        - Reading Parameters
     
        - Reading Constants
     
     
     
           TAV and AMP supplied externally
     
     
     
                      Soil Profile Properties
          ------------------------------------------------
           Layer    pH    OC     NO3     NH4    Urea
                         (%) (kg/ha) (kg/ha) (kg/ha)
          ------------------------------------------------
             1     6.00  1.39    2.25    0.38    0.00
             2     6.00  1.00    0.85    0.13    0.00
             3     6.20  0.80    0.34    0.02    0.00
             4     6.40  0.46    0.34    0.02    0.00
             5     6.50  0.43    0.33    0.02    0.00
             6     6.50  0.29    0.33    0.02    0.00
          ------------------------------------------------
           Totals                4.44    0.57    0.00
          ------------------------------------------------
     
     
     
     
     
     
                  Initial Soil Organic Matter Status
          ---------------------------------------------------------
           Layer      Hum-C   Hum-N  Biom-C  Biom-N   FOM-C   FOM-N
                    (kg/ha) (kg/ha) (kg/ha) (kg/ha) (kg/ha) (kg/ha)
          ---------------------------------------------------------
             1      26426.4  2642.6   261.6    32.7    62.5     1.4
             2      18979.6  1898.0    70.4     8.8    46.3     1.0
             3      32128.2  3212.8    31.8     4.0    25.4     0.6
             4      18352.2  1835.2     1.8     0.2    13.9     0.3
             5      16897.3  1689.7     1.7     0.2     7.7     0.2
             6      11395.9  1139.6     1.1     0.1     4.2     0.1
          ---------------------------------------------------------
           Totals  124179.5 12418.0   368.5    46.1   160.0     3.6
          ---------------------------------------------------------

------- maize Initialisation --------------------------------------------------
      Initialising, V1.0 2000.01.21
     
         - Reading constants
     
         - Reading constants

------- accum Initialisation --------------------------------------------------
     Initialising

------- canopy Initialisation -------------------------------------------------
      Initialising
      Module rotation for intercropping :
     maize                           bean

------- Soil Water Initialisation ---------------------------------------------
     
         - Reading constants
     
        - Reading Soil Property Parameters
     
        - Reading Soil Profile Parameters
     Initial soilwater distributed using "sw" parameter.
     
     
     
                      Soil Profile Properties
        ---------------------------------------------------------------------
              Depth  Air_Dry  LL15   Dul    Sat     Sw     BD   Runoff  SWCON
                mm     mm/mm  mm/mm  mm/mm  mm/mm  mm/mm  g/cc    wf
        ---------------------------------------------------------------------
            0.-  150.  0.110  0.150  0.280  0.320  0.280  1.280  0.762  0.500
          150.-  300.  0.120  0.150  0.280  0.320  0.280  1.270  0.190  0.500
          300.-  600.  0.170  0.170  0.285  0.340  0.285  1.340  0.048  0.500
          600.-  900.  0.170  0.170  0.270  0.330  0.270  1.330  0.000  0.300
          900.- 1200.  0.170  0.170  0.270  0.330  0.270  1.310  0.000  0.300
         1200.- 1500.  0.170  0.170  0.270  0.330  0.270  1.310  0.000  0.300
        ---------------------------------------------------------------------
     
     
     
                  Soil Water Holding Capacity
          ---------------------------------------------------------
              Depth    Unavailable Available  Max Avail.  Drainable
                          (LL15)   (SW-LL15)  (DUL-LL15)  (SAT-DUL)
                            mm        mm          mm         mm
          ---------------------------------------------------------
            0.-  150.      22.50      19.50      19.50       6.00
          150.-  300.      22.50      19.50      19.50       6.00
          300.-  600.      51.00      34.50      34.50      16.50
          600.-  900.      51.00      30.00      30.00      18.00
          900.- 1200.      51.00      30.00      30.00      18.00
         1200.- 1500.      51.00      30.00      30.00      18.00
          ---------------------------------------------------------
               Totals     249.00     163.50     163.50      82.50
          ---------------------------------------------------------
     
     
     
     
     
     
                  Initial Soil Parameters
          ---------------------------------------------------------
                 Insoil        Salb     Dif_Con   Dif_Slope
          ---------------------------------------------------------
                   0.00        0.13       88.00       32.00
          ---------------------------------------------------------
     
     
     
                  Runoff is predicted using scs curve number:
                Cn2  Cn_Red  Cn_Cov   H_Eff_Depth
                                           mm
          ---------------------------------------------------------
              80.00   20.00    0.80  450.00
          ---------------------------------------------------------
     
     
     
           Using Ritchie evaporation model
            Cuml evap (U):            5.00 (mm^0.5)
            CONA:                     5.00 ()
            Eo from priestly-taylor

------- Surface Organic Matter Initialisation ---------------------------------
     
         - Reading constants
     
         - Reading parameters
     
     
     
                         Initial Surface Organic Matter Data
         ----------------------------------------------------------------------
            Name   Type        Dry matter   C        N        P    Cover  Standing_fr
                                (kg/ha)  (kg/ha)  (kg/ha)  (kg/ha) (0-1)     (0-1)
         ----------------------------------------------------------------------
          maize_stubmaize          100.0    40.0     0.5     0.0   0.039     0.0
         ----------------------------------------------------------------------
     
                      Effective Cover from Surface Materials =   0.0
     

------- Erosion Initialisation ------------------------------------------------
      Initialising:
     
        - Reading Parameters
     
     
     
                      Erosion Parameters
          -----------------------------------------------
           Profile reduction:                     off
           Freebairn cover-sediment concentration model
     
           LS factor:                             1.0954
     
           K factor:                              0.4000
     
           P factor:                              1.0000
     
          -----------------------------------------------

------- Soil Nitrogen Initialisation ------------------------------------------
     
        - Reading Parameters
     
        - Reading Constants
     
     
     
           TAV and AMP supplied externally
     
     
     
                      Soil Profile Properties
          ------------------------------------------------
           Layer    pH    OC     NO3     NH4    Urea
                         (%) (kg/ha) (kg/ha) (kg/ha)
          ------------------------------------------------
             1     6.00  1.39    2.25    0.38    0.00
             2     6.00  1.00    0.85    0.13    0.00
             3     6.20  0.80    0.34    0.02    0.00
             4     6.40  0.46    0.34    0.02    0.00
             5     6.50  0.43    0.33    0.02    0.00
             6     6.50  0.29    0.33    0.02    0.00
          ------------------------------------------------
           Totals                4.44    0.57    0.00
          ------------------------------------------------
     
     
     
     
     
     
                  Initial Soil Organic Matter Status
          ---------------------------------------------------------
           Layer      Hum-C   Hum-N  Biom-C  Biom-N   FOM-C   FOM-N
                    (kg/ha) (kg/ha) (kg/ha) (kg/ha) (kg/ha) (kg/ha)
          ---------------------------------------------------------
             1      26426.4  2642.6   261.6    32.7    62.5     1.4
             2      18979.6  1898.0    70.4     8.8    46.3     1.0
             3      32128.2  3212.8    31.8     4.0    25.4     0.6
             4      18352.2  1835.2     1.8     0.2    13.9     0.3
             5      16897.3  1689.7     1.7     0.2     7.7     0.2
             6      11395.9  1139.6     1.1     0.1     4.2     0.1
          ---------------------------------------------------------
           Totals  124179.5 12418.0   368.5    46.1   160.0     3.6
          ---------------------------------------------------------

------- maize Initialisation --------------------------------------------------
      Initialising, V1.0 2000.01.21
     
         - Reading constants
     
         - Reading constants
------- Start of simulation  --------------------------------------------------
     Labour:
Operators=operator1
Implements=
          Initial Balance = 0
8 September 1979(Day of year=251), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
8 September 1979(Day of year=251), Labour: 
     Machinery job "operator1 + presow_till" is queued
8 September 1979(Day of year=251), maize: 
     Sowing initiate
     
     
     
                      Crop Sowing Data
         -------------------------------------------------------
         Sowing   Depth  Plants Spacing Skiprow Cultivar    FTN
         Day no    mm      m^2    m      code     name       no
         -------------------------------------------------------
            251   30.0    4.4    0.8    0.0   makueni       0.00
         -------------------------------------------------------
     
        - Reading root profile parameters
     Uptake of NO3 and water calculated by maize
     
     
     
     
                         Root Profile
         ------------------------------------------------
           Layer      Kl      Lower Exploration
           Depth              limit   Factor
           (mm)       ()     (mm/mm)    ()
         ------------------------------------------------
          150.000    0.080    0.150    1.000
          150.000    0.080    0.150    1.000
          300.000    0.080    0.170    1.000
          300.000    0.080    0.170    1.000
          300.000    0.060    0.170    1.000
          300.000    0.040    0.170    1.000
          ------------------------------------------------
     
            Crop factor for bounding water use is set to  100.0  times eo.
     
     
     
     
        - Reading Cultivar Parameters
         ------------------------------------------------
         Cultivar                 = makueni
         est_days_endjuv_to_init  =      20
         tt_emerg_to_endjuv       =  150.00
         tt_flower_to_maturity    =  660.00
         head_grain_no_max        =  480.00
         grain_gth_rate           =    9.50
         tt_flag_to_flower        =   10.00
         tt_flower_to_start_grain =  120.00
         tt_maturity_to_ripe      =    1.00
         x_stem_wt      =     0.0   80.0
         y_height      =     0.0 2000.0
         ------------------------------------------------
     
     
     
     Residue removed using user_defined
                                             Fraction Incorporated =     0.10
                                             Incorporated Depth    =   100.00
     Machinery job "operator1 + sowing" is queued
graph paddock1 SRMaize
8 September 1979(Day of year=251), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
     Machinery job "operator1 + presow_till" is queued
8 September 1979(Day of year=251), maize: 
     Sowing initiate
     
     
     
                      Crop Sowing Data
         -------------------------------------------------------
         Sowing   Depth  Plants Spacing Skiprow Cultivar    FTN
         Day no    mm      m^2    m      code     name       no
         -------------------------------------------------------
            251   30.0    4.4    0.8    0.0   makueni       0.00
         -------------------------------------------------------
     
        - Reading root profile parameters
     Uptake of NO3 and water calculated by maize
     
     
     
     
                         Root Profile
         ------------------------------------------------
           Layer      Kl      Lower Exploration
           Depth              limit   Factor
           (mm)       ()     (mm/mm)    ()
         ------------------------------------------------
          150.000    0.080    0.150    1.000
          150.000    0.080    0.150    1.000
          300.000    0.080    0.170    1.000
          300.000    0.080    0.170    1.000
          300.000    0.060    0.170    1.000
          300.000    0.040    0.170    1.000
          ------------------------------------------------
     
            Crop factor for bounding water use is set to  100.0  times eo.
     
     
     
     
        - Reading Cultivar Parameters
         ------------------------------------------------
         Cultivar                 = makueni
         est_days_endjuv_to_init  =      20
         tt_emerg_to_endjuv       =  150.00
         tt_flower_to_maturity    =  660.00
         head_grain_no_max        =  480.00
         grain_gth_rate           =    9.50
         tt_flag_to_flower        =   10.00
         tt_flower_to_start_grain =  120.00
         tt_maturity_to_ripe      =    1.00
         x_stem_wt      =     0.0   80.0
         y_height      =     0.0 2000.0
         ------------------------------------------------
     
     
     
     Residue removed using user_defined
                                             Fraction Incorporated =     0.10
                                             Incorporated Depth    =   100.00
     Machinery job "operator1 + sowing" is queued
graph paddock2 SRMaize
     Labour job 'operator1 + presow_till' in paddock1 has finished
9 September 1979(Day of year=252), Labour: 
     Labour job 'operator1 + sowing' in paddock1 has finished
9 September 1979(Day of year=252), maize: 
      stage    2.0 germination
9 September 1979(Day of year=252), maize: 
      stage    2.0 germination
10 September 1979(Day of year=253), Labour: 
     Labour job 'operator1 + presow_till' in paddock2 has finished
11 September 1979(Day of year=254), Labour: 
     Labour job 'operator1 + sowing' in paddock2 has finished
11 September 1979(Day of year=254), maize: 
      stage    3.0 emergence
                          biomass =          0.8800000E-01   lai =    0.1672000E-02
                          stover N conc =    4.400000       extractable sw =    14.96382
11 September 1979(Day of year=254), maize: 
      stage    3.0 emergence
                          biomass =          0.8800000E-01   lai =    0.1672000E-02
                          stover N conc =    4.400000       extractable sw =    14.96382
23 September 1979(Day of year=266), maize: 
      stage    4.0 end_of_juvenile
                          biomass =           1.710758       lai =    0.2455527E-01
                          stover N conc =    3.249906       extractable sw =    33.98603
23 September 1979(Day of year=266), maize: 
      stage    4.0 end_of_juvenile
                          biomass =           1.710758       lai =    0.2455527E-01
                          stover N conc =    3.249906       extractable sw =    33.98603
24 September 1979(Day of year=267), maize: 
      stage    5.0 floral_initiation
                          biomass =           2.148563       lai =    0.3371674E-01
                          stover N conc =    2.568585       extractable sw =    39.51103
24 September 1979(Day of year=267), maize: 
      stage    5.0 floral_initiation
                          biomass =           2.148563       lai =    0.3371674E-01
                          stover N conc =    2.568585       extractable sw =    39.51103
7 October 1979(Day of year=280), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
7 October 1979(Day of year=280), Labour: 
     Machinery job "operator1 + weeding" is queued
7 October 1979(Day of year=280), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
     Machinery job "operator1 + weeding" is queued
8 October 1979(Day of year=281), Labour: 
     Labour job 'operator1 + weeding' in paddock1 has finished
9 October 1979(Day of year=282), Labour: 
     Labour job 'operator1 + weeding' in paddock2 has finished
23 October 1979(Day of year=296), maize: 
      stage    6.0 flag_leaf
                          biomass =           157.3135       lai =     1.139831
                          stover N conc =   0.9703777       extractable sw =    122.8981
23 October 1979(Day of year=296), maize: 
      stage    6.0 flag_leaf
                          biomass =           157.3135       lai =     1.139831
                          stover N conc =   0.9703777       extractable sw =    122.8981
24 October 1979(Day of year=297), maize: 
      stage    7.0 flowering
                          biomass =           163.5200       lai =     1.139030
                          stover N conc =   0.9466771       extractable sw =    119.0990
24 October 1979(Day of year=297), maize: 
      stage    7.0 flowering
                          biomass =           163.5200       lai =     1.139030
                          stover N conc =   0.9466771       extractable sw =    119.0990
1 November 1979(Day of year=305), maize: 
      stage    8.0 start_grain_fill
                          biomass =           210.0842       lai =     1.128101
                          stover N conc =   0.8224514       extractable sw =    109.1829
1 November 1979(Day of year=305), maize: 
      stage    8.0 start_grain_fill
                          biomass =           210.0842       lai =     1.128101
                          stover N conc =   0.8224514       extractable sw =    109.1829
11 December 1979(Day of year=345), maize: 
      stage    9.0 end_grain_fill
                          biomass =           331.2261       lai =     1.000438
                          stover N conc =   0.7860891       extractable sw =    137.1333
11 December 1979(Day of year=345), maize: 
      stage    9.0 end_grain_fill
                          biomass =           331.2261       lai =     1.000438
                          stover N conc =   0.7860891       extractable sw =    137.1333
12 December 1979(Day of year=346), maize: 
      stage   10.0 maturity
                          biomass =           333.7955       lai =    0.9922729
                          stover N conc =   0.7860711       extractable sw =    135.4385
12 December 1979(Day of year=346), maize: 
      stage   10.0 maturity
                          biomass =           333.7955       lai =    0.9922729
                          stover N conc =   0.7860711       extractable sw =    135.4385
13 December 1979(Day of year=347), maize: 
      stage   11.0 harvest_ripe
                          biomass =           333.7955       lai =    0.1671672E-02
                          stover N conc =   0.8347251       extractable sw =    134.9922
13 December 1979(Day of year=347), maize: 
      stage   11.0 harvest_ripe
                          biomass =           333.7955       lai =    0.1671672E-02
                          stover N conc =   0.8347251       extractable sw =    134.9922
14 December 1979(Day of year=348), Labour: 
     Machinery job "operator1 + harvesting" is queued
14 December 1979(Day of year=348), Economics: 
     Warning!!!!
No grain moisture found for maize. Using 12%.
     Priced maize cropprice (price='285.0', yield='1.4205741193181818' wet) over '0.25' ha = '101.21590600142045'
14 December 1979(Day of year=348), maize: 
     
     
     
     flowering (DAS) =   47                                maturity (DAS)  =      96
      flowering day  =  297                                 stover (kg/ha) =    2087.8
      maturity day        =  346                            grain yield (kg/ha) =    1250.1
      grain % water content   =   15.5                      grain yield wet (kg/ha) =    1479.4
      grain wt (g) =     0.337                              grains/m^2   =   371.393
      grains/head =  84.4                                   maximum lai = 1.142
      total above ground biomass (kg/ha) =    3338.0
      live above ground biomass (kg/ha) =    3338.0
      green above ground biomass (kg/ha) =    2785.3
      senesced above ground biomass (kg/ha) =     552.7
      dead above ground biomass (kg/ha) =       0.0
      number of leaves =  13.5
      grain N percent =      1.26                           total N content (kg/ha) =     26.01
      grain N uptake (kg/ha) =     15.77                    senesced N content (kg/ha) =      2.76
      green N content (kg/ha) =      7.48                   dead N content (kg/ha) =      0.00
     
     
      Average Stress Indices:                          Water Photo  Water Expan  N Photo      N grain conc
         emergence           to end_of_juvenile         0.000        0.000        0.000        0.163
         end_of_juvenile     to floral_initiation       0.000        0.000        0.000        0.077
         floral_initiation   to flag_leaf               0.000        0.000        0.229        0.369
         flag_leaf           to flowering               0.000        0.000        0.615        0.692
         flowering           to start_grain_fill        0.000        0.000        0.641        0.713
         start_grain_fill    to end_grain_fill          0.000        0.000        0.765        0.812
     
     Crop harvested.
         Organic matter removed from system:-      From Tops               From Roots
                          DM (kg/ha) =               1250.11                    0.00
                          N  (kg/ha) =                 15.77                    0.00
     
         Crop ended. Yield (dw) =     0.0
         Organic matter from crop:-      Tops to surface residue     Roots to soil FOM
                          DM (kg/ha) =               2087.85                  507.02
                          N  (kg/ha) =                 10.24                    3.45
                          P  (kg/ha) =                  0.00                    0.00
     
     Warning!!!!
No grain moisture found for maize_residue. Using 12%.
     Priced maize_residue cropprice (price='20.0', yield='2.372583285227272' wet) over '0.25' ha = '11.86291642613636'
14 December 1979(Day of year=348), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     1.00
                                             Incorporated Depth    =     0.00
graph paddock1 Fallow
     Machinery job "operator1 + harvesting" is queued
     Priced maize cropprice (price='285.0', yield='1.4205741193181818' wet) over '0.75' ha = '303.6477180042614'
14 December 1979(Day of year=348), maize: 
     
     
     
     flowering (DAS) =   47                                maturity (DAS)  =      96
      flowering day  =  297                                 stover (kg/ha) =    2087.8
      maturity day        =  346                            grain yield (kg/ha) =    1250.1
      grain % water content   =   15.5                      grain yield wet (kg/ha) =    1479.4
      grain wt (g) =     0.337                              grains/m^2   =   371.393
      grains/head =  84.4                                   maximum lai = 1.142
      total above ground biomass (kg/ha) =    3338.0
      live above ground biomass (kg/ha) =    3338.0
      green above ground biomass (kg/ha) =    2785.3
      senesced above ground biomass (kg/ha) =     552.7
      dead above ground biomass (kg/ha) =       0.0
      number of leaves =  13.5
      grain N percent =      1.26                           total N content (kg/ha) =     26.01
      grain N uptake (kg/ha) =     15.77                    senesced N content (kg/ha) =      2.76
      green N content (kg/ha) =      7.48                   dead N content (kg/ha) =      0.00
     
     
      Average Stress Indices:                          Water Photo  Water Expan  N Photo      N grain conc
         emergence           to end_of_juvenile         0.000        0.000        0.000        0.163
         end_of_juvenile     to floral_initiation       0.000        0.000        0.000        0.077
         floral_initiation   to flag_leaf               0.000        0.000        0.229        0.369
         flag_leaf           to flowering               0.000        0.000        0.615        0.692
         flowering           to start_grain_fill        0.000        0.000        0.641        0.713
         start_grain_fill    to end_grain_fill          0.000        0.000        0.765        0.812
     
     Crop harvested.
         Organic matter removed from system:-      From Tops               From Roots
                          DM (kg/ha) =               1250.11                    0.00
                          N  (kg/ha) =                 15.77                    0.00
     
         Crop ended. Yield (dw) =     0.0
         Organic matter from crop:-      Tops to surface residue     Roots to soil FOM
                          DM (kg/ha) =               2087.85                  507.02
                          N  (kg/ha) =                 10.24                    3.45
                          P  (kg/ha) =                  0.00                    0.00
     
     Priced maize_residue cropprice (price='20.0', yield='2.372583285227272' wet) over '0.75' ha = '35.58874927840908'
14 December 1979(Day of year=348), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     1.00
                                             Incorporated Depth    =     0.00
graph paddock2 Fallow
     Labour job 'operator1 + harvesting' in paddock1 has finished
15 December 1979(Day of year=349), Labour: 
     Labour job 'operator1 + harvesting' in paddock2 has finished
23 January 1980(Day of year=23), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
23 January 1980(Day of year=23), Labour: 
     Machinery job "operator1 + weeding" is queued
23 January 1980(Day of year=23), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
     Machinery job "operator1 + weeding" is queued
     Labour job 'operator1 + weeding' in paddock1 has finished
24 January 1980(Day of year=24), Labour: 
     Labour job 'operator1 + weeding' in paddock2 has finished
8 April 1980(Day of year=99), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
8 April 1980(Day of year=99), Labour: 
     Machinery job "operator1 + presow_till" is queued
8 April 1980(Day of year=99), maize: 
     Sowing initiate
     
     
     
                      Crop Sowing Data
         -------------------------------------------------------
         Sowing   Depth  Plants Spacing Skiprow Cultivar    FTN
         Day no    mm      m^2    m      code     name       no
         -------------------------------------------------------
             99   30.0    4.4    0.8    0.0   katumani      0.00
         -------------------------------------------------------
     
        - Reading root profile parameters
     Uptake of NO3 and water calculated by maize
     
     
     
     
                         Root Profile
         ------------------------------------------------
           Layer      Kl      Lower Exploration
           Depth              limit   Factor
           (mm)       ()     (mm/mm)    ()
         ------------------------------------------------
          150.000    0.080    0.150    1.000
          150.000    0.080    0.150    1.000
          300.000    0.080    0.170    1.000
          300.000    0.080    0.170    1.000
          300.000    0.060    0.170    1.000
          300.000    0.040    0.170    1.000
          ------------------------------------------------
     
            Crop factor for bounding water use is set to  100.0  times eo.
     
     
     
     
        - Reading Cultivar Parameters
         ------------------------------------------------
         Cultivar                 = katumani
         est_days_endjuv_to_init  =      20
         tt_emerg_to_endjuv       =  150.00
         tt_flower_to_maturity    =  660.00
         head_grain_no_max        =  450.00
         grain_gth_rate           =   10.50
         tt_flag_to_flower        =   10.00
         tt_flower_to_start_grain =  120.00
         tt_maturity_to_ripe      =    1.00
         x_stem_wt      =     0.0   80.0
         y_height      =     0.0 2000.0
         ------------------------------------------------
     
     
     
8 April 1980(Day of year=99), bean: 
     Crop Sow
        ------------------------------------------------
        cultivar                   = fiord
        Phases:
           out
           sowing
           germination
              shoot_lag                  =      15 (dd)
              shoot_rate                 =       4 (dd/mm)
           emergence
              cumvd_emergence            =       0     100 (vd)
              tt_emergence               =     438     438 (dd)
           end_of_juvenile
              x_pp_end_of_juvenile       =     9.6    14.3 (h)
              y_tt_end_of_juvenile       =     381       1 (dd)
           floral_initiation
              x_pp_floral_initiation     =     9.6    14.3 (h)
              y_tt_floral_initiation     =      16      16 (dd)
           flowering
              x_pp_flowering             =    12.5      14 (h)
              y_tt_flowering             =     500     100 (dd)
           start_grain_fill
              x_pp_start_grain_fill      =    12.5      14 (h)
              y_tt_start_grain_fill      =    1300     100 (dd)
           end_grain_fill
              tt_end_grain_fill          =      60 (dd)
           maturity
              tt_maturity                =       1 (dd)
           harvest_ripe
              tt_harvest_ripe            =       1 (dd)
           end_crop
     
        x_pp_hi_incr               =       1.00      24.00
        y_hi_incr                  =     0.0100     0.0100
        x_hi_max_pot_stress        =       0.50       1.00
        y_hi_max_pot               =       0.47       0.47
        ------------------------------------------------
     
     
                        Root Profile
         -----------------------------------------------
          Layer       Kl           Lower    Exploration
          Depth     Factor         Limit      Factor
          (mm)         ()        (mm/mm)       (0-1)
         -----------------------------------------------
         150.0     0.080          0.150       1.000
         150.0     0.080          0.150       1.000
         300.0     0.080          0.170       1.000
         300.0     0.080          0.170       1.000
         300.0     0.060          0.170       1.000
         300.0     0.040          0.170       1.000
         -----------------------------------------------
         Extractable SW:   164mm in  1500mm total depth ( 11%).
         Crop factor for bounding water use is set to 100.0 times eo.
      stage 1.0 sowing
     
                      Crop Sowing Data
         ------------------------------------------------
         Sowing  Depth Plants Spacing Skip  Skip  Cultivar
         Day no   mm     m^2     mm   row   plant name
         ------------------------------------------------
             99   30.0    8.8  750.0   0.0   0.0 fiord
         ------------------------------------------------
     
     Residue removed using user_defined
                                             Fraction Incorporated =     0.10
                                             Incorporated Depth    =   100.00
     Machinery job "operator1 + sowing" is queued
graph paddock1 maizebean
8 April 1980(Day of year=99), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
     Machinery job "operator1 + presow_till" is queued
8 April 1980(Day of year=99), maize: 
     Sowing initiate
     
     
     
                      Crop Sowing Data
         -------------------------------------------------------
         Sowing   Depth  Plants Spacing Skiprow Cultivar    FTN
         Day no    mm      m^2    m      code     name       no
         -------------------------------------------------------
             99   30.0    4.4    0.8    0.0   makueni       0.00
         -------------------------------------------------------
     
        - Reading root profile parameters
     Uptake of NO3 and water calculated by maize
     
     
     
     
                         Root Profile
         ------------------------------------------------
           Layer      Kl      Lower Exploration
           Depth              limit   Factor
           (mm)       ()     (mm/mm)    ()
         ------------------------------------------------
          150.000    0.080    0.150    1.000
          150.000    0.080    0.150    1.000
          300.000    0.080    0.170    1.000
          300.000    0.080    0.170    1.000
          300.000    0.060    0.170    1.000
          300.000    0.040    0.170    1.000
          ------------------------------------------------
     
            Crop factor for bounding water use is set to  100.0  times eo.
     
     
     
     
        - Reading Cultivar Parameters
         ------------------------------------------------
         Cultivar                 = makueni
         est_days_endjuv_to_init  =      20
         tt_emerg_to_endjuv       =  150.00
         tt_flower_to_maturity    =  660.00
         head_grain_no_max        =  480.00
         grain_gth_rate           =    9.50
         tt_flag_to_flower        =   10.00
         tt_flower_to_start_grain =  120.00
         tt_maturity_to_ripe      =    1.00
         x_stem_wt      =     0.0   80.0
         y_height      =     0.0 2000.0
         ------------------------------------------------
     
     
     
     Residue removed using user_defined
                                             Fraction Incorporated =     0.10
                                             Incorporated Depth    =   100.00
     Machinery job "operator1 + sowing" is queued
graph paddock2 LRMaize
     Labour job 'operator1 + presow_till' in paddock1 has finished
9 April 1980(Day of year=100), Labour: 
     Labour job 'operator1 + sowing' in paddock1 has finished
9 April 1980(Day of year=100), bean: 
      stage 2.0 germination
9 April 1980(Day of year=100), maize: 
      stage    2.0 germination
9 April 1980(Day of year=100), maize: 
      stage    2.0 germination
10 April 1980(Day of year=101), Labour: 
     Labour job 'operator1 + presow_till' in paddock2 has finished
11 April 1980(Day of year=102), Labour: 
     Labour job 'operator1 + sowing' in paddock2 has finished
11 April 1980(Day of year=102), maize: 
      stage    3.0 emergence
                          biomass =          0.8800000E-01   lai =    0.1672000E-02
                          stover N conc =    4.400000       extractable sw =    12.41439
11 April 1980(Day of year=102), maize: 
      stage    3.0 emergence
                          biomass =          0.8800000E-01   lai =    0.1672000E-02
                          stover N conc =    4.400000       extractable sw =    12.41439
16 April 1980(Day of year=107), bean: 
      stage 3.0 emergence
                     biomass =           0.35 (g/m^2)   lai          =   0.009 (m^2/m^2)
                     stover N conc =     7.00 (%)    extractable sw =   33.12 (mm)
22 April 1980(Day of year=113), maize: 
      stage    4.0 end_of_juvenile
                          biomass =           1.268247       lai =    0.1845256E-01
                          stover N conc =    3.341941       extractable sw =    27.84204
22 April 1980(Day of year=113), maize: 
      stage    4.0 end_of_juvenile
                          biomass =           1.275545       lai =    0.1844529E-01
                          stover N conc =    3.340136       extractable sw =    27.98616
23 April 1980(Day of year=114), maize: 
      stage    5.0 floral_initiation
                          biomass =           1.668545       lai =    0.2535600E-01
                          stover N conc =    3.178177       extractable sw =    26.74792
23 April 1980(Day of year=114), maize: 
      stage    5.0 floral_initiation
                          biomass =           1.681573       lai =    0.2534357E-01
                          stover N conc =    3.177332       extractable sw =    27.07331
7 May 1980(Day of year=128), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
7 May 1980(Day of year=128), Labour: 
     Machinery job "operator1 + weeding" is queued
7 May 1980(Day of year=128), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
     Machinery job "operator1 + weeding" is queued
8 May 1980(Day of year=129), Labour: 
     Labour job 'operator1 + weeding' in paddock1 has finished
9 May 1980(Day of year=130), Labour: 
     Labour job 'operator1 + weeding' in paddock2 has finished
13 May 1980(Day of year=134), bean: 
      stage 4.0 end_of_juvenile
                     biomass =          69.67 (g/m^2)   lai          =   1.049 (m^2/m^2)
                     stover N conc =     3.38 (%)    extractable sw =  106.30 (mm)
20 May 1980(Day of year=141), bean: 
      stage 5.0 floral_initiation
                     biomass =         137.19 (g/m^2)   lai          =   1.998 (m^2/m^2)
                     stover N conc =     2.98 (%)    extractable sw =  116.07 (mm)
21 May 1980(Day of year=142), bean: 
      stage 6.0 flowering
                     biomass =         149.24 (g/m^2)   lai          =   2.093 (m^2/m^2)
                     stover N conc =     2.97 (%)    extractable sw =  128.85 (mm)
23 May 1980(Day of year=144), maize: 
      stage    6.0 flag_leaf
                          biomass =           119.8714       lai =     1.319676
                          stover N conc =    1.334499       extractable sw =    192.5939
23 May 1980(Day of year=144), maize: 
      stage    6.0 flag_leaf
                          biomass =           232.6802       lai =     1.412196
                          stover N conc =    1.254498       extractable sw =    189.0705
24 May 1980(Day of year=145), maize: 
      stage    7.0 flowering
                          biomass =           123.3636       lai =     1.318919
                          stover N conc =    1.312196       extractable sw =    209.0790
24 May 1980(Day of year=145), maize: 
      stage    7.0 flowering
                          biomass =           245.1096       lai =     1.411439
                          stover N conc =    1.206153       extractable sw =    203.8655
3 June 1980(Day of year=155), maize: 
      stage    8.0 start_grain_fill
                          biomass =           146.6799       lai =     1.306346
                          stover N conc =    1.201586       extractable sw =    158.4803
3 June 1980(Day of year=155), maize: 
      stage    8.0 start_grain_fill
                          biomass =           343.3346       lai =     1.398872
                          stover N conc =   0.9407978       extractable sw =    171.7852
13 June 1980(Day of year=165), bean: 
      stage 7.0 start_grain_fill
                     biomass =         682.44 (g/m^2)   lai          =   3.801 (m^2/m^2)
                     stover N conc =     2.31 (%)    extractable sw =  112.03 (mm)
16 July 1980(Day of year=198), maize: 
      stage    9.0 end_grain_fill
                          biomass =           237.9579       lai =     1.177949
                          stover N conc =   0.8137133       extractable sw =    141.1285
16 July 1980(Day of year=198), maize: 
      stage    9.0 end_grain_fill
                          biomass =           527.9029       lai =     1.270499
                          stover N conc =   0.7446490       extractable sw =    160.3368
17 July 1980(Day of year=199), maize: 
      stage   10.0 maturity
                          biomass =           242.5943       lai =     1.171238
                          stover N conc =   0.7988601       extractable sw =    138.7389
17 July 1980(Day of year=199), maize: 
      stage   10.0 maturity
                          biomass =           530.1132       lai =     1.263803
                          stover N conc =   0.7439217       extractable sw =    156.8794
18 July 1980(Day of year=200), maize: 
      stage   11.0 harvest_ripe
                          biomass =           242.5943       lai =    0.1671910E-02
                          stover N conc =   0.8610125       extractable sw =    127.1237
18 July 1980(Day of year=200), maize: 
      stage   11.0 harvest_ripe
                          biomass =           530.1132       lai =    0.1671433E-02
                          stover N conc =   0.7757943       extractable sw =    153.8880
19 July 1980(Day of year=201), Labour: 
     Machinery job "operator1 + harvesting" is queued
19 July 1980(Day of year=201), Economics: 
     Warning!!!!
No grain moisture found for bean. Using 12%.
     Priced bean cropprice (price='420.0', yield='5.5940052375' wet) over '0.25' ha = '587.3705499375001'
19 July 1980(Day of year=201), bean: 
     
      flowering day          =  142                           stover (kg/ha)         =     8095.5
      maturity day           =    0                           grain yield (kg/ha)    =     4922.7
      grain % water content  =   12.5                         grain yield wet (kg/ha)=     5626.0
      grain wt (g)           =    0.000                       grains/m^2             =        0.0
      grains/plant           =    0.0                         maximum lai            =      3.849
      total above ground biomass (kg/ha)    =    13018.2
      live above ground biomass (kg/ha)     =    13018.2
      green above ground biomass (kg/ha)    =    12704.0
      senesced above ground biomass (kg/ha) =      314.3
      number of leaves       =    413.6
      DM Root:Shoot ratio    =     0.32                       Harvest Index          =       0.38
      Stover C:N ratio       =    20.65                       Root C:N ratio         =      16.00
      grain N percent        =     4.50                       total N content (kg/ha)=     378.31
      grain N uptake (kg/ha) =   221.52                       senesced N content (kg/ha)=    3.14
      green N content (kg/ha)=   153.65
     
      Average Stress Indices:                          Water Photo  Water Expan  N Photo      N grain conc
         emergence            to end_of_juvenile         0.000        0.007        0.126        0.273
         end_of_juvenile      to floral_initiation       0.000        0.199        0.415        0.532
         floral_initiation    to flowering               0.000        0.098        0.437        0.550
         flowering            to start_grain_fill        0.000        0.663        0.035        0.111
     
     
     Crop harvested.
         Organic matter from crop:-      Tops to surface residue      Roots to soil FOM
                          DM (kg/ha) =                8092.0                     0.0
                          N  (kg/ha) =                 156.54                    0.00
     
         Organic matter removed from system:-      From Tops               From Roots
                          DM (kg/ha) =                4922.7                     0.0
                          N  (kg/ha) =                 221.52                    0.00
     
      stage 11.0 end_crop
     Crop ended. Yield (dw) =     0.0  (kg/ha)
         Organic matter from crop:-      Tops to surface residue      Roots to soil FOM
                          DM (kg/ha) =                   3.5                  4183.8
                          N  (kg/ha) =                   0.25                  104.60
     
     Machinery job "operator1 + harvesting" is queued
     Priced maize cropprice (price='285.0', yield='0.04387833409090909' wet) over '0.25' ha = '3.1263313039772727'
19 July 1980(Day of year=201), maize: 
     
     
     
     flowering (DAS) =   47                                maturity (DAS)  =     100
      flowering day  =  145                                 stover (kg/ha) =    2387.3
      maturity day        =  199                            grain yield (kg/ha) =      38.6
      grain % water content   =   15.5                      grain yield wet (kg/ha) =      45.7
      grain wt (g) =     0.394                              grains/m^2   =     9.799
      grains/head =   2.2                                   maximum lai = 1.321
      total above ground biomass (kg/ha) =    2425.9
      live above ground biomass (kg/ha) =    2425.9
      green above ground biomass (kg/ha) =    1959.9
      senesced above ground biomass (kg/ha) =     466.0
      dead above ground biomass (kg/ha) =       0.0
      number of leaves =  13.5
      grain N percent =      1.65                           total N content (kg/ha) =     19.21
      grain N uptake (kg/ha) =      0.64                    senesced N content (kg/ha) =      2.33
      green N content (kg/ha) =     16.24                   dead N content (kg/ha) =      0.00
     
     
      Average Stress Indices:                          Water Photo  Water Expan  N Photo      N grain conc
         emergence           to end_of_juvenile         0.000        0.000        0.000        0.158
         end_of_juvenile     to floral_initiation       0.000        0.000        0.000        0.151
         floral_initiation   to flag_leaf               0.000        0.000        0.128        0.283
         flag_leaf           to flowering               0.000        0.000        0.366        0.493
         flowering           to start_grain_fill        0.000        0.000        0.366        0.493
         start_grain_fill    to end_grain_fill          0.000        0.000        0.202        0.362
     
     Crop harvested.
         Organic matter removed from system:-      From Tops               From Roots
                          DM (kg/ha) =                 38.61                    0.00
                          N  (kg/ha) =                  0.64                    0.00
     
         Crop ended. Yield (dw) =     0.0
         Organic matter from crop:-      Tops to surface residue     Roots to soil FOM
                          DM (kg/ha) =               2387.33                  372.20
                          N  (kg/ha) =                 18.57                    2.43
                          P  (kg/ha) =                  0.00                    0.00
     
     Priced maize_residue cropprice (price='20.0', yield='12.68277033068182' wet) over '0.25' ha = '63.4138516534091'
19 July 1980(Day of year=201), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     1.00
                                             Incorporated Depth    =     0.00
graph paddock1 Fallow
     Machinery job "operator1 + harvesting" is queued
     Priced maize cropprice (price='285.0', yield='2.7403739238636367' wet) over '0.75' ha = '585.7549262258524'
19 July 1980(Day of year=201), maize: 
     
     
     
     flowering (DAS) =   47                                maturity (DAS)  =     100
      flowering day  =  145                                 stover (kg/ha) =    2889.6
      maturity day        =  199                            grain yield (kg/ha) =    2411.5
      grain % water content   =   15.5                      grain yield wet (kg/ha) =    2853.9
      grain wt (g) =     0.296                              grains/m^2   =   816.000
      grains/head = 185.5                                   maximum lai = 1.414
      total above ground biomass (kg/ha) =    5301.1
      live above ground biomass (kg/ha) =    5301.1
      green above ground biomass (kg/ha) =    4614.6
      senesced above ground biomass (kg/ha) =     686.6
      dead above ground biomass (kg/ha) =       0.0
      number of leaves =  13.5
      grain N percent =      1.08                           total N content (kg/ha) =     39.23
      grain N uptake (kg/ha) =     26.14                    senesced N content (kg/ha) =      3.43
      green N content (kg/ha) =      9.66                   dead N content (kg/ha) =      0.00
     
     
      Average Stress Indices:                          Water Photo  Water Expan  N Photo      N grain conc
         emergence           to end_of_juvenile         0.000        0.000        0.000        0.158
         end_of_juvenile     to floral_initiation       0.000        0.000        0.000        0.151
         floral_initiation   to flag_leaf               0.000        0.000        0.087        0.243
         flag_leaf           to flowering               0.000        0.000        0.421        0.537
         flowering           to start_grain_fill        0.000        0.000        0.500        0.600
         start_grain_fill    to end_grain_fill          0.000        0.000        0.725        0.780
     
     Crop harvested.
         Organic matter removed from system:-      From Tops               From Roots
                          DM (kg/ha) =               2411.53                    0.00
                          N  (kg/ha) =                 26.14                    0.00
     
         Crop ended. Yield (dw) =     0.0
         Organic matter from crop:-      Tops to surface residue     Roots to soil FOM
                          DM (kg/ha) =               2889.60                  761.69
                          N  (kg/ha) =                 13.09                    4.96
                          P  (kg/ha) =                  0.00                    0.00
     
     Priced maize_residue cropprice (price='20.0', yield='3.2836392488636363' wet) over '0.75' ha = '49.254588732954545'
19 July 1980(Day of year=201), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     1.00
                                             Incorporated Depth    =     0.00
graph paddock2 Fallow
     Labour job 'operator1 + harvesting' in paddock1 has finished
20 July 1980(Day of year=202), Labour: 
     Labour job 'operator1 + harvesting' in paddock1 has finished
21 July 1980(Day of year=203), Labour: 
     Labour job 'operator1 + harvesting' in paddock2 has finished
28 August 1980(Day of year=241), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
28 August 1980(Day of year=241), Labour: 
     Machinery job "operator1 + weeding" is queued
28 August 1980(Day of year=241), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
     Machinery job "operator1 + weeding" is queued
     Labour job 'operator1 + weeding' in paddock1 has finished
29 August 1980(Day of year=242), Labour: 
     Labour job 'operator1 + weeding' in paddock2 has finished
31 August 1980(Day of year=244), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
31 August 1980(Day of year=244), Labour: 
     Machinery job "operator1 + presow_till" is queued
31 August 1980(Day of year=244), maize: 
     Sowing initiate
     
     
     
                      Crop Sowing Data
         -------------------------------------------------------
         Sowing   Depth  Plants Spacing Skiprow Cultivar    FTN
         Day no    mm      m^2    m      code     name       no
         -------------------------------------------------------
            244   30.0    4.4    0.8    0.0   makueni       0.00
         -------------------------------------------------------
     
        - Reading root profile parameters
     Uptake of NO3 and water calculated by maize
     
     
     
     
                         Root Profile
         ------------------------------------------------
           Layer      Kl      Lower Exploration
           Depth              limit   Factor
           (mm)       ()     (mm/mm)    ()
         ------------------------------------------------
          150.000    0.080    0.150    1.000
          150.000    0.080    0.150    1.000
          300.000    0.080    0.170    1.000
          300.000    0.080    0.170    1.000
          300.000    0.060    0.170    1.000
          300.000    0.040    0.170    1.000
          ------------------------------------------------
     
            Crop factor for bounding water use is set to  100.0  times eo.
     
     
     
     
        - Reading Cultivar Parameters
         ------------------------------------------------
         Cultivar                 = makueni
         est_days_endjuv_to_init  =      20
         tt_emerg_to_endjuv       =  150.00
         tt_flower_to_maturity    =  660.00
         head_grain_no_max        =  480.00
         grain_gth_rate           =    9.50
         tt_flag_to_flower        =   10.00
         tt_flower_to_start_grain =  120.00
         tt_maturity_to_ripe      =    1.00
         x_stem_wt      =     0.0   80.0
         y_height      =     0.0 2000.0
         ------------------------------------------------
     
     
     
     Residue removed using user_defined
                                             Fraction Incorporated =     0.10
                                             Incorporated Depth    =   100.00
     Machinery job "operator1 + sowing" is queued
graph paddock1 SRMaize
31 August 1980(Day of year=244), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
     Machinery job "operator1 + presow_till" is queued
31 August 1980(Day of year=244), maize: 
     Sowing initiate
     
     
     
                      Crop Sowing Data
         -------------------------------------------------------
         Sowing   Depth  Plants Spacing Skiprow Cultivar    FTN
         Day no    mm      m^2    m      code     name       no
         -------------------------------------------------------
            244   30.0    4.4    0.8    0.0   makueni       0.00
         -------------------------------------------------------
     
        - Reading root profile parameters
     Uptake of NO3 and water calculated by maize
     
     
     
     
                         Root Profile
         ------------------------------------------------
           Layer      Kl      Lower Exploration
           Depth              limit   Factor
           (mm)       ()     (mm/mm)    ()
         ------------------------------------------------
          150.000    0.080    0.150    1.000
          150.000    0.080    0.150    1.000
          300.000    0.080    0.170    1.000
          300.000    0.080    0.170    1.000
          300.000    0.060    0.170    1.000
          300.000    0.040    0.170    1.000
          ------------------------------------------------
     
            Crop factor for bounding water use is set to  100.0  times eo.
     
     
     
     
        - Reading Cultivar Parameters
         ------------------------------------------------
         Cultivar                 = makueni
         est_days_endjuv_to_init  =      20
         tt_emerg_to_endjuv       =  150.00
         tt_flower_to_maturity    =  660.00
         head_grain_no_max        =  480.00
         grain_gth_rate           =    9.50
         tt_flag_to_flower        =   10.00
         tt_flower_to_start_grain =  120.00
         tt_maturity_to_ripe      =    1.00
         x_stem_wt      =     0.0   80.0
         y_height      =     0.0 2000.0
         ------------------------------------------------
     
     
     
     Residue removed using user_defined
                                             Fraction Incorporated =     0.10
                                             Incorporated Depth    =   100.00
     Machinery job "operator1 + sowing" is queued
graph paddock2 SRMaize
     Labour job 'operator1 + presow_till' in paddock1 has finished
1 September 1980(Day of year=245), Labour: 
     Labour job 'operator1 + sowing' in paddock1 has finished
1 September 1980(Day of year=245), maize: 
      stage    2.0 germination
1 September 1980(Day of year=245), maize: 
      stage    2.0 germination
2 September 1980(Day of year=246), Labour: 
     Labour job 'operator1 + presow_till' in paddock2 has finished
3 September 1980(Day of year=247), Labour: 
     Labour job 'operator1 + sowing' in paddock2 has finished
3 September 1980(Day of year=247), maize: 
      stage    3.0 emergence
                          biomass =          0.8800000E-01   lai =    0.1672000E-02
                          stover N conc =    4.400000       extractable sw =    11.05014
3 September 1980(Day of year=247), maize: 
      stage    3.0 emergence
                          biomass =          0.8800000E-01   lai =    0.1672000E-02
                          stover N conc =    4.400000       extractable sw =    11.05018
15 September 1980(Day of year=259), maize: 
      stage    4.0 end_of_juvenile
                          biomass =           1.648864       lai =    0.1965577E-01
                          stover N conc =    3.337839       extractable sw =    25.90351
15 September 1980(Day of year=259), maize: 
      stage    4.0 end_of_juvenile
                          biomass =           1.636409       lai =    0.1946043E-01
                          stover N conc =    3.311326       extractable sw =    25.90509
16 September 1980(Day of year=260), maize: 
      stage    5.0 floral_initiation
                          biomass =           2.077193       lai =    0.2712008E-01
                          stover N conc =    2.834357       extractable sw =    25.27631
16 September 1980(Day of year=260), maize: 
      stage    5.0 floral_initiation
                          biomass =           2.060500       lai =    0.2692545E-01
                          stover N conc =    2.808514       extractable sw =    25.27837
29 September 1980(Day of year=273), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
29 September 1980(Day of year=273), Labour: 
     Machinery job "operator1 + weeding" is queued
29 September 1980(Day of year=273), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
     Machinery job "operator1 + weeding" is queued
30 September 1980(Day of year=274), Labour: 
     Labour job 'operator1 + weeding' in paddock1 has finished
1 October 1980(Day of year=275), Labour: 
     Labour job 'operator1 + weeding' in paddock2 has finished
16 October 1980(Day of year=290), maize: 
      stage    6.0 flag_leaf
                          biomass =           253.3027       lai =     1.382583
                          stover N conc =    1.359794       extractable sw =    144.1192
16 October 1980(Day of year=290), maize: 
      stage    6.0 flag_leaf
                          biomass =           113.4091       lai =    0.9192499
                          stover N conc =   0.8889847       extractable sw =    164.0573
17 October 1980(Day of year=291), maize: 
      stage    7.0 flowering
                          biomass =           266.6427       lai =     1.381785
                          stover N conc =    1.325707       extractable sw =    144.8693
17 October 1980(Day of year=291), maize: 
      stage    7.0 flowering
                          biomass =           118.1455       lai =    0.9184613
                          stover N conc =   0.8739761       extractable sw =    165.5149
26 October 1980(Day of year=300), maize: 
      stage    8.0 start_grain_fill
                          biomass =           381.9363       lai =     1.370212
                          stover N conc =    1.070421       extractable sw =    137.8552
26 October 1980(Day of year=300), maize: 
      stage    8.0 start_grain_fill
                          biomass =           159.9555       lai =    0.9069844
                          stover N conc =   0.7545218       extractable sw =    157.0557
6 December 1980(Day of year=341), maize: 
      stage    9.0 end_grain_fill
                          biomass =           645.0720       lai =     1.238330
                          stover N conc =   0.8589546       extractable sw =    132.9671
6 December 1980(Day of year=341), maize: 
      stage    9.0 end_grain_fill
                          biomass =           256.8077       lai =    0.7769879
                          stover N conc =   0.7489718       extractable sw =    139.1855
7 December 1980(Day of year=342), maize: 
      stage   10.0 maturity
                          biomass =           647.7814       lai =     1.231444
                          stover N conc =   0.8596877       extractable sw =    132.0958
7 December 1980(Day of year=342), maize: 
      stage   10.0 maturity
                          biomass =           258.1862       lai =    0.7704506
                          stover N conc =   0.7506292       extractable sw =    138.3118
8 December 1980(Day of year=343), maize: 
      stage   11.0 harvest_ripe
                          biomass =           647.7814       lai =    0.1671791E-02
                          stover N conc =   0.9021586       extractable sw =    132.8151
8 December 1980(Day of year=343), maize: 
      stage   11.0 harvest_ripe
                          biomass =           258.1862       lai =    0.1671731E-02
                          stover N conc =   0.7941360       extractable sw =    138.7049
9 December 1980(Day of year=344), Labour: 
     Machinery job "operator1 + harvesting" is queued
9 December 1980(Day of year=344), Economics: 
     Priced maize cropprice (price='285.0', yield='3.7257598874999998' wet) over '0.25' ha = '265.460391984375'
9 December 1980(Day of year=344), maize: 
     
     
     
     flowering (DAS) =   47                                maturity (DAS)  =      98
      flowering day  =  291                                 stover (kg/ha) =    3199.1
      maturity day        =  342                            grain yield (kg/ha) =    3278.7
      grain % water content   =   15.5                      grain yield wet (kg/ha) =    3880.1
      grain wt (g) =     0.294                              grains/m^2   =  1116.341
      grains/head = 253.7                                   maximum lai = 1.384
      total above ground biomass (kg/ha) =    6477.8
      live above ground biomass (kg/ha) =    6477.8
      green above ground biomass (kg/ha) =    5707.1
      senesced above ground biomass (kg/ha) =     770.7
      dead above ground biomass (kg/ha) =       0.0
      number of leaves =  13.5
      grain N percent =      1.21                           total N content (kg/ha) =     55.34
      grain N uptake (kg/ha) =     39.54                    senesced N content (kg/ha) =      3.85
      green N content (kg/ha) =     11.95                   dead N content (kg/ha) =      0.00
     
     
      Average Stress Indices:                          Water Photo  Water Expan  N Photo      N grain conc
         emergence           to end_of_juvenile         0.000        0.000        0.002        0.164
         end_of_juvenile     to floral_initiation       0.000        0.000        0.000        0.047
         floral_initiation   to flag_leaf               0.000        0.000        0.092        0.248
         flag_leaf           to flowering               0.000        0.000        0.350        0.480
         flowering           to start_grain_fill        0.000        0.000        0.400        0.520
         start_grain_fill    to end_grain_fill          0.000        0.000        0.588        0.670
     
     Crop harvested.
         Organic matter removed from system:-      From Tops               From Roots
                          DM (kg/ha) =               3278.67                    0.00
                          N  (kg/ha) =                 39.54                    0.00
     
         Crop ended. Yield (dw) =     0.0
         Organic matter from crop:-      Tops to surface residue     Roots to soil FOM
                          DM (kg/ha) =               3199.15                  841.29
                          N  (kg/ha) =                 15.80                    6.88
                          P  (kg/ha) =                  0.00                    0.00
     
     Priced maize_residue cropprice (price='20.0', yield='3.6353923454545454' wet) over '0.25' ha = '18.176961727272726'
9 December 1980(Day of year=344), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     1.00
                                             Incorporated Depth    =     0.00
graph paddock1 Fallow
     Machinery job "operator1 + harvesting" is queued
     Priced maize cropprice (price='285.0', yield='0.9491520272727272' wet) over '0.75' ha = '202.88124582954543'
9 December 1980(Day of year=344), maize: 
     
     
     
     flowering (DAS) =   47                                maturity (DAS)  =      98
      flowering day  =  291                                 stover (kg/ha) =    1746.6
      maturity day        =  342                            grain yield (kg/ha) =     835.3
      grain % water content   =   15.5                      grain yield wet (kg/ha) =     988.5
      grain wt (g) =     0.346                              grains/m^2   =   241.414
      grains/head =  54.9                                   maximum lai = 0.921
      total above ground biomass (kg/ha) =    2581.9
      live above ground biomass (kg/ha) =    2581.9
      green above ground biomass (kg/ha) =    2131.7
      senesced above ground biomass (kg/ha) =     450.2
      dead above ground biomass (kg/ha) =       0.0
      number of leaves =  13.5
      grain N percent =      1.30                           total N content (kg/ha) =     19.18
      grain N uptake (kg/ha) =     10.83                    senesced N content (kg/ha) =      2.25
      green N content (kg/ha) =      6.10                   dead N content (kg/ha) =      0.00
     
     
      Average Stress Indices:                          Water Photo  Water Expan  N Photo      N grain conc
         emergence           to end_of_juvenile         0.000        0.000        0.003        0.171
         end_of_juvenile     to floral_initiation       0.000        0.000        0.000        0.050
         floral_initiation   to flag_leaf               0.000        0.000        0.350        0.471
         flag_leaf           to flowering               0.000        0.000        0.685        0.748
         flowering           to start_grain_fill        0.000        0.000        0.702        0.762
         start_grain_fill    to end_grain_fill          0.000        0.000        0.791        0.833
     
     Crop harvested.
         Organic matter removed from system:-      From Tops               From Roots
                          DM (kg/ha) =                835.25                    0.00
                          N  (kg/ha) =                 10.83                    0.00
     
         Crop ended. Yield (dw) =     0.0
         Organic matter from crop:-      Tops to surface residue     Roots to soil FOM
                          DM (kg/ha) =               1746.61                  371.75
                          N  (kg/ha) =                  8.35                    2.48
                          P  (kg/ha) =                  0.00                    0.00
     
     Priced maize_residue cropprice (price='20.0', yield='1.984781993181818' wet) over '0.75' ha = '29.77172989772727'
9 December 1980(Day of year=344), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     1.00
                                             Incorporated Depth    =     0.00
graph paddock2 Fallow
     Labour job 'operator1 + harvesting' in paddock1 has finished
10 December 1980(Day of year=345), Labour: 
     Labour job 'operator1 + harvesting' in paddock2 has finished
18 January 1981(Day of year=18), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
18 January 1981(Day of year=18), Labour: 
     Machinery job "operator1 + weeding" is queued
18 January 1981(Day of year=18), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
     Machinery job "operator1 + weeding" is queued
     Labour job 'operator1 + weeding' in paddock1 has finished
19 January 1981(Day of year=19), Labour: 
     Labour job 'operator1 + weeding' in paddock2 has finished
15 March 1981(Day of year=74), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
15 March 1981(Day of year=74), Labour: 
     Machinery job "operator1 + presow_till" is queued
15 March 1981(Day of year=74), maize: 
     Sowing initiate
     
     
     
                      Crop Sowing Data
         -------------------------------------------------------
         Sowing   Depth  Plants Spacing Skiprow Cultivar    FTN
         Day no    mm      m^2    m      code     name       no
         -------------------------------------------------------
             74   30.0    4.4    0.8    0.0   katumani      0.00
         -------------------------------------------------------
     
        - Reading root profile parameters
     Uptake of NO3 and water calculated by maize
     
     
     
     
                         Root Profile
         ------------------------------------------------
           Layer      Kl      Lower Exploration
           Depth              limit   Factor
           (mm)       ()     (mm/mm)    ()
         ------------------------------------------------
          150.000    0.080    0.150    1.000
          150.000    0.080    0.150    1.000
          300.000    0.080    0.170    1.000
          300.000    0.080    0.170    1.000
          300.000    0.060    0.170    1.000
          300.000    0.040    0.170    1.000
          ------------------------------------------------
     
            Crop factor for bounding water use is set to  100.0  times eo.
     
     
     
     
        - Reading Cultivar Parameters
         ------------------------------------------------
         Cultivar                 = katumani
         est_days_endjuv_to_init  =      20
         tt_emerg_to_endjuv       =  150.00
         tt_flower_to_maturity    =  660.00
         head_grain_no_max        =  450.00
         grain_gth_rate           =   10.50
         tt_flag_to_flower        =   10.00
         tt_flower_to_start_grain =  120.00
         tt_maturity_to_ripe      =    1.00
         x_stem_wt      =     0.0   80.0
         y_height      =     0.0 2000.0
         ------------------------------------------------
     
     
     
15 March 1981(Day of year=74), bean: 
     Crop Sow
        ------------------------------------------------
        cultivar                   = fiord
        Phases:
           out
           sowing
           germination
              shoot_lag                  =      15 (dd)
              shoot_rate                 =       4 (dd/mm)
           emergence
              cumvd_emergence            =       0     100 (vd)
              tt_emergence               =     438     438 (dd)
           end_of_juvenile
              x_pp_end_of_juvenile       =     9.6    14.3 (h)
              y_tt_end_of_juvenile       =     381       1 (dd)
           floral_initiation
              x_pp_floral_initiation     =     9.6    14.3 (h)
              y_tt_floral_initiation     =      16      16 (dd)
           flowering
              x_pp_flowering             =    12.5      14 (h)
              y_tt_flowering             =     500     100 (dd)
           start_grain_fill
              x_pp_start_grain_fill      =    12.5      14 (h)
              y_tt_start_grain_fill      =    1300     100 (dd)
           end_grain_fill
              tt_end_grain_fill          =      60 (dd)
           maturity
              tt_maturity                =       1 (dd)
           harvest_ripe
              tt_harvest_ripe            =       1 (dd)
           end_crop
     
        x_pp_hi_incr               =       1.00      24.00
        y_hi_incr                  =     0.0100     0.0100
        x_hi_max_pot_stress        =       0.50       1.00
        y_hi_max_pot               =       0.47       0.47
        ------------------------------------------------
     
     
                        Root Profile
         -----------------------------------------------
          Layer       Kl           Lower    Exploration
          Depth     Factor         Limit      Factor
          (mm)         ()        (mm/mm)       (0-1)
         -----------------------------------------------
         150.0     0.080          0.150       1.000
         150.0     0.080          0.150       1.000
         300.0     0.080          0.170       1.000
         300.0     0.080          0.170       1.000
         300.0     0.060          0.170       1.000
         300.0     0.040          0.170       1.000
         -----------------------------------------------
         Extractable SW:   164mm in  1500mm total depth ( 11%).
         Crop factor for bounding water use is set to 100.0 times eo.
      stage 1.0 sowing
     
                      Crop Sowing Data
         ------------------------------------------------
         Sowing  Depth Plants Spacing Skip  Skip  Cultivar
         Day no   mm     m^2     mm   row   plant name
         ------------------------------------------------
             74   30.0    8.8  750.0   0.0   0.0 fiord
         ------------------------------------------------
     
     Residue removed using user_defined
                                             Fraction Incorporated =     0.10
                                             Incorporated Depth    =   100.00
     Machinery job "operator1 + sowing" is queued
graph paddock1 maizebean
15 March 1981(Day of year=74), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
     Machinery job "operator1 + presow_till" is queued
15 March 1981(Day of year=74), maize: 
     Sowing initiate
     
     
     
                      Crop Sowing Data
         -------------------------------------------------------
         Sowing   Depth  Plants Spacing Skiprow Cultivar    FTN
         Day no    mm      m^2    m      code     name       no
         -------------------------------------------------------
             74   30.0    4.4    0.8    0.0   makueni       0.00
         -------------------------------------------------------
     
        - Reading root profile parameters
     Uptake of NO3 and water calculated by maize
     
     
     
     
                         Root Profile
         ------------------------------------------------
           Layer      Kl      Lower Exploration
           Depth              limit   Factor
           (mm)       ()     (mm/mm)    ()
         ------------------------------------------------
          150.000    0.080    0.150    1.000
          150.000    0.080    0.150    1.000
          300.000    0.080    0.170    1.000
          300.000    0.080    0.170    1.000
          300.000    0.060    0.170    1.000
          300.000    0.040    0.170    1.000
          ------------------------------------------------
     
            Crop factor for bounding water use is set to  100.0  times eo.
     
     
     
     
        - Reading Cultivar Parameters
         ------------------------------------------------
         Cultivar                 = makueni
         est_days_endjuv_to_init  =      20
         tt_emerg_to_endjuv       =  150.00
         tt_flower_to_maturity    =  660.00
         head_grain_no_max        =  480.00
         grain_gth_rate           =    9.50
         tt_flag_to_flower        =   10.00
         tt_flower_to_start_grain =  120.00
         tt_maturity_to_ripe      =    1.00
         x_stem_wt      =     0.0   80.0
         y_height      =     0.0 2000.0
         ------------------------------------------------
     
     
     
     Residue removed using user_defined
                                             Fraction Incorporated =     0.10
                                             Incorporated Depth    =   100.00
     Machinery job "operator1 + sowing" is queued
graph paddock2 LRMaize
     Labour job 'operator1 + presow_till' in paddock1 has finished
16 March 1981(Day of year=75), Labour: 
     Labour job 'operator1 + sowing' in paddock1 has finished
16 March 1981(Day of year=75), maize: 
      stage    2.0 germination
16 March 1981(Day of year=75), bean: 
      stage 2.0 germination
16 March 1981(Day of year=75), maize: 
      stage    2.0 germination
17 March 1981(Day of year=76), Labour: 
     Labour job 'operator1 + presow_till' in paddock2 has finished
18 March 1981(Day of year=77), Labour: 
     Labour job 'operator1 + sowing' in paddock2 has finished
18 March 1981(Day of year=77), maize: 
      stage    3.0 emergence
                          biomass =          0.8800000E-01   lai =    0.1672000E-02
                          stover N conc =    4.400000       extractable sw =    18.43493
18 March 1981(Day of year=77), maize: 
      stage    3.0 emergence
                          biomass =          0.8800000E-01   lai =    0.1672000E-02
                          stover N conc =    4.400000       extractable sw =    18.43493
23 March 1981(Day of year=82), bean: 
      stage 3.0 emergence
                     biomass =           0.35 (g/m^2)   lai          =   0.009 (m^2/m^2)
                     stover N conc =     7.00 (%)    extractable sw =   39.17 (mm)
30 March 1981(Day of year=89), maize: 
      stage    4.0 end_of_juvenile
                          biomass =           1.096352       lai =    0.1892740E-01
                          stover N conc =    3.437577       extractable sw =    42.12681
30 March 1981(Day of year=89), maize: 
      stage    4.0 end_of_juvenile
                          biomass =           1.099571       lai =    0.1887580E-01
                          stover N conc =    3.433103       extractable sw =    42.06420
31 March 1981(Day of year=90), maize: 
      stage    5.0 floral_initiation
                          biomass =           1.393551       lai =    0.2508897E-01
                          stover N conc =    3.189713       extractable sw =    36.83503
31 March 1981(Day of year=90), maize: 
      stage    5.0 floral_initiation
                          biomass =           1.400005       lai =    0.2502669E-01
                          stover N conc =    3.183902       extractable sw =    36.79792
13 April 1981(Day of year=103), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
13 April 1981(Day of year=103), Labour: 
     Machinery job "operator1 + weeding" is queued
13 April 1981(Day of year=103), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
     Machinery job "operator1 + weeding" is queued
14 April 1981(Day of year=104), Labour: 
     Labour job 'operator1 + weeding' in paddock1 has finished
15 April 1981(Day of year=105), Labour: 
     Labour job 'operator1 + weeding' in paddock2 has finished
17 April 1981(Day of year=107), bean: 
      stage 4.0 end_of_juvenile
                     biomass =          37.17 (g/m^2)   lai          =   0.561 (m^2/m^2)
                     stover N conc =     3.50 (%)    extractable sw =  126.98 (mm)
24 April 1981(Day of year=114), bean: 
      stage 5.0 floral_initiation
                     biomass =          83.43 (g/m^2)   lai          =   1.255 (m^2/m^2)
                     stover N conc =     2.89 (%)    extractable sw =  114.99 (mm)
25 April 1981(Day of year=115), bean: 
      stage 6.0 flowering
                     biomass =          90.11 (g/m^2)   lai          =   1.306 (m^2/m^2)
                     stover N conc =     2.91 (%)    extractable sw =  111.59 (mm)
1 May 1981(Day of year=121), maize: 
      stage    6.0 flag_leaf
                          biomass =           125.4301       lai =     1.269563
                          stover N conc =    1.289044       extractable sw =    175.2647
1 May 1981(Day of year=121), maize: 
      stage    6.0 flag_leaf
                          biomass =           162.4024       lai =     1.162907
                          stover N conc =   0.9989539       extractable sw =    177.5131
2 May 1981(Day of year=122), maize: 
      stage    7.0 flowering
                          biomass =           129.1727       lai =     1.268724
                          stover N conc =    1.277539       extractable sw =    162.7396
2 May 1981(Day of year=122), maize: 
      stage    7.0 flowering
                          biomass =           169.3136       lai =     1.162070
                          stover N conc =   0.9767083       extractable sw =    170.0613
11 May 1981(Day of year=131), maize: 
      stage    8.0 start_grain_fill
                          biomass =           151.8146       lai =     1.256625
                          stover N conc =    1.289832       extractable sw =    159.9211
11 May 1981(Day of year=131), maize: 
      stage    8.0 start_grain_fill
                          biomass =           219.0740       lai =     1.150000
                          stover N conc =   0.8836425       extractable sw =    172.9936
19 May 1981(Day of year=139), bean: 
      stage 7.0 start_grain_fill
                     biomass =         548.73 (g/m^2)   lai          =   3.876 (m^2/m^2)
                     stover N conc =     2.33 (%)    extractable sw =  162.54 (mm)
23 June 1981(Day of year=174), maize: 
      stage    9.0 end_grain_fill
                          biomass =           252.2596       lai =     1.122491
                          stover N conc =   0.9332816       extractable sw =    46.44109
23 June 1981(Day of year=174), maize: 
      stage    9.0 end_grain_fill
                          biomass =           361.4892       lai =     1.016400
                          stover N conc =   0.7419085       extractable sw =    142.7779
24 June 1981(Day of year=175), maize: 
      stage   10.0 maturity
                          biomass =           254.9283       lai =     1.115597
                          stover N conc =   0.9245390       extractable sw =    48.97638
24 June 1981(Day of year=175), maize: 
      stage   10.0 maturity
                          biomass =           362.9777       lai =     1.009545
                          stover N conc =   0.7434308       extractable sw =    144.0316
25 June 1981(Day of year=176), maize: 
      stage   11.0 harvest_ripe
                          biomass =           254.9283       lai =    0.1672387E-02
                          stover N conc =    1.008022       extractable sw =    43.00611
25 June 1981(Day of year=176), maize: 
      stage   11.0 harvest_ripe
                          biomass =           362.9777       lai =    0.1671910E-02
                          stover N conc =   0.7824014       extractable sw =    141.5246
26 June 1981(Day of year=177), Labour: 
     Machinery job "operator1 + harvesting" is queued
26 June 1981(Day of year=177), Economics: 
     Priced bean cropprice (price='420.0', yield='6.093625155681818' wet) over '0.25' ha = '639.8306413465909'
26 June 1981(Day of year=177), bean: 
     
      flowering day          =  115                           stover (kg/ha)         =     8349.0
      maturity day           =    0                           grain yield (kg/ha)    =     5362.4
      grain % water content  =   12.5                         grain yield wet (kg/ha)=     6128.4
      grain wt (g)           =    0.000                       grains/m^2             =        0.0
      grains/plant           =    0.0                         maximum lai            =      3.897
      total above ground biomass (kg/ha)    =    13711.4
      live above ground biomass (kg/ha)     =    13711.4
      green above ground biomass (kg/ha)    =    13478.9
      senesced above ground biomass (kg/ha) =      232.5
      number of leaves       =    422.6
      DM Root:Shoot ratio    =     0.30                       Harvest Index          =       0.39
      Stover C:N ratio       =    20.40                       Root C:N ratio         =      15.93
      grain N percent        =     4.50                       total N content (kg/ha)=     404.99
      grain N uptake (kg/ha) =   241.31                       senesced N content (kg/ha)=    2.33
      green N content (kg/ha)=   161.36
     
      Average Stress Indices:                          Water Photo  Water Expan  N Photo      N grain conc
         emergence            to end_of_juvenile         0.000        0.000        0.047        0.185
         end_of_juvenile      to floral_initiation       0.000        0.038        0.409        0.527
         floral_initiation    to flowering               0.000        0.000        0.515        0.612
         flowering            to start_grain_fill        0.000        0.515        0.074        0.155
     
     
     Crop harvested.
         Organic matter from crop:-      Tops to surface residue      Roots to soil FOM
                          DM (kg/ha) =                8345.5                     0.0
                          N  (kg/ha) =                 163.44                    0.00
     
         Organic matter removed from system:-      From Tops               From Roots
                          DM (kg/ha) =                5362.4                     0.0
                          N  (kg/ha) =                 241.31                    0.00
     
      stage 11.0 end_crop
     Crop ended. Yield (dw) =     0.0  (kg/ha)
         Organic matter from crop:-      Tops to surface residue      Roots to soil FOM
                          DM (kg/ha) =                   3.5                  4134.2
                          N  (kg/ha) =                   0.25                  103.80
     
     Machinery job "operator1 + harvesting" is queued
     Priced maize cropprice (price='285.0', yield='0.13787131704545452' wet) over '0.25' ha = '9.823331339488634'
26 June 1981(Day of year=177), maize: 
     
     
     
     flowering (DAS) =   48                                maturity (DAS)  =     101
      flowering day  =  122                                 stover (kg/ha) =    2428.0
      maturity day        =  175                            grain yield (kg/ha) =     121.3
      grain % water content   =   15.5                      grain yield wet (kg/ha) =     143.6
      grain wt (g) =     0.393                              grains/m^2   =    30.909
      grains/head =   7.0                                   maximum lai = 1.271
      total above ground biomass (kg/ha) =    2549.3
      live above ground biomass (kg/ha) =    2549.3
      green above ground biomass (kg/ha) =    2077.3
      senesced above ground biomass (kg/ha) =     472.0
      dead above ground biomass (kg/ha) =       0.0
      number of leaves =  13.5
      grain N percent =      1.70                           total N content (kg/ha) =     23.30
      grain N uptake (kg/ha) =      2.06                    senesced N content (kg/ha) =      2.36
      green N content (kg/ha) =     18.88                   dead N content (kg/ha) =      0.00
     
     
      Average Stress Indices:                          Water Photo  Water Expan  N Photo      N grain conc
         emergence           to end_of_juvenile         0.000        0.000        0.000        0.147
         end_of_juvenile     to floral_initiation       0.000        0.000        0.000        0.099
         floral_initiation   to flag_leaf               0.000        0.000        0.145        0.297
         flag_leaf           to flowering               0.000        0.000        0.398        0.518
         flowering           to start_grain_fill        0.000        0.000        0.347        0.477
         start_grain_fill    to end_grain_fill          0.000        0.000        0.111        0.275
     
     Crop harvested.
         Organic matter removed from system:-      From Tops               From Roots
                          DM (kg/ha) =                121.33                    0.00
                          N  (kg/ha) =                  2.06                    0.00
     
         Crop ended. Yield (dw) =     0.0
         Organic matter from crop:-      Tops to surface residue     Roots to soil FOM
                          DM (kg/ha) =               2427.96                  387.83
                          N  (kg/ha) =                 21.24                    3.12
                          P  (kg/ha) =                  0.00                    0.00
     
     Priced maize_residue cropprice (price='20.0', yield='12.636629971590908' wet) over '0.25' ha = '63.18314985795454'
26 June 1981(Day of year=177), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     1.00
                                             Incorporated Depth    =     0.00
graph paddock1 Fallow
     Machinery job "operator1 + harvesting" is queued
     Priced maize cropprice (price='285.0', yield='1.3955211295454548' wet) over '0.75' ha = '298.29264144034096'
26 June 1981(Day of year=177), maize: 
     
     
     
     flowering (DAS) =   48                                maturity (DAS)  =     101
      flowering day  =  122                                 stover (kg/ha) =    2401.7
      maturity day        =  175                            grain yield (kg/ha) =    1228.1
      grain % water content   =   15.5                      grain yield wet (kg/ha) =    1453.3
      grain wt (g) =     0.355                              grains/m^2   =   345.787
      grains/head =  78.6                                   maximum lai = 1.165
      total above ground biomass (kg/ha) =    3629.8
      live above ground biomass (kg/ha) =    3629.8
      green above ground biomass (kg/ha) =    3057.6
      senesced above ground biomass (kg/ha) =     572.1
      dead above ground biomass (kg/ha) =       0.0
      number of leaves =  13.5
      grain N percent =      1.27                           total N content (kg/ha) =     26.78
      grain N uptake (kg/ha) =     15.54                    senesced N content (kg/ha) =      2.86
      green N content (kg/ha) =      8.38                   dead N content (kg/ha) =      0.00
     
     
      Average Stress Indices:                          Water Photo  Water Expan  N Photo      N grain conc
         emergence           to end_of_juvenile         0.000        0.000        0.000        0.149
         end_of_juvenile     to floral_initiation       0.000        0.000        0.000        0.100
         floral_initiation   to flag_leaf               0.000        0.000        0.213        0.354
         flag_leaf           to flowering               0.000        0.000        0.602        0.681
         flowering           to start_grain_fill        0.000        0.000        0.612        0.689
         start_grain_fill    to end_grain_fill          0.000        0.000        0.782        0.826
     
     Crop harvested.
         Organic matter removed from system:-      From Tops               From Roots
                          DM (kg/ha) =               1228.06                    0.00
                          N  (kg/ha) =                 15.54                    0.00
     
         Crop ended. Yield (dw) =     0.0
         Organic matter from crop:-      Tops to surface residue     Roots to soil FOM
                          DM (kg/ha) =               2401.72                  517.13
                          N  (kg/ha) =                 11.24                    3.34
                          P  (kg/ha) =                  0.00                    0.00
     
     Priced maize_residue cropprice (price='20.0', yield='2.7292261295454545' wet) over '0.75' ha = '40.93839194318181'
26 June 1981(Day of year=177), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     1.00
                                             Incorporated Depth    =     0.00
graph paddock2 Fallow
     Labour job 'operator1 + harvesting' in paddock1 has finished
27 June 1981(Day of year=178), Labour: 
     Labour job 'operator1 + harvesting' in paddock1 has finished
28 June 1981(Day of year=179), Labour: 
     Labour job 'operator1 + harvesting' in paddock2 has finished
5 August 1981(Day of year=217), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
5 August 1981(Day of year=217), Labour: 
     Machinery job "operator1 + weeding" is queued
5 August 1981(Day of year=217), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
     Machinery job "operator1 + weeding" is queued
     Labour job 'operator1 + weeding' in paddock1 has finished
6 August 1981(Day of year=218), Labour: 
     Labour job 'operator1 + weeding' in paddock2 has finished
1 September 1981(Day of year=244), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
1 September 1981(Day of year=244), Labour: 
     Machinery job "operator1 + presow_till" is queued
1 September 1981(Day of year=244), maize: 
     Sowing initiate
     
     
     
                      Crop Sowing Data
         -------------------------------------------------------
         Sowing   Depth  Plants Spacing Skiprow Cultivar    FTN
         Day no    mm      m^2    m      code     name       no
         -------------------------------------------------------
            244   30.0    4.4    0.8    0.0   makueni       0.00
         -------------------------------------------------------
     
        - Reading root profile parameters
     Uptake of NO3 and water calculated by maize
     
     
     
     
                         Root Profile
         ------------------------------------------------
           Layer      Kl      Lower Exploration
           Depth              limit   Factor
           (mm)       ()     (mm/mm)    ()
         ------------------------------------------------
          150.000    0.080    0.150    1.000
          150.000    0.080    0.150    1.000
          300.000    0.080    0.170    1.000
          300.000    0.080    0.170    1.000
          300.000    0.060    0.170    1.000
          300.000    0.040    0.170    1.000
          ------------------------------------------------
     
            Crop factor for bounding water use is set to  100.0  times eo.
     
     
     
     
        - Reading Cultivar Parameters
         ------------------------------------------------
         Cultivar                 = makueni
         est_days_endjuv_to_init  =      20
         tt_emerg_to_endjuv       =  150.00
         tt_flower_to_maturity    =  660.00
         head_grain_no_max        =  480.00
         grain_gth_rate           =    9.50
         tt_flag_to_flower        =   10.00
         tt_flower_to_start_grain =  120.00
         tt_maturity_to_ripe      =    1.00
         x_stem_wt      =     0.0   80.0
         y_height      =     0.0 2000.0
         ------------------------------------------------
     
     
     
     Residue removed using user_defined
                                             Fraction Incorporated =     0.10
                                             Incorporated Depth    =   100.00
     Machinery job "operator1 + sowing" is queued
graph paddock1 SRMaize
1 September 1981(Day of year=244), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
     Machinery job "operator1 + presow_till" is queued
1 September 1981(Day of year=244), maize: 
     Sowing initiate
     
     
     
                      Crop Sowing Data
         -------------------------------------------------------
         Sowing   Depth  Plants Spacing Skiprow Cultivar    FTN
         Day no    mm      m^2    m      code     name       no
         -------------------------------------------------------
            244   30.0    4.4    0.8    0.0   makueni       0.00
         -------------------------------------------------------
     
        - Reading root profile parameters
     Uptake of NO3 and water calculated by maize
     
     
     
     
                         Root Profile
         ------------------------------------------------
           Layer      Kl      Lower Exploration
           Depth              limit   Factor
           (mm)       ()     (mm/mm)    ()
         ------------------------------------------------
          150.000    0.080    0.150    1.000
          150.000    0.080    0.150    1.000
          300.000    0.080    0.170    1.000
          300.000    0.080    0.170    1.000
          300.000    0.060    0.170    1.000
          300.000    0.040    0.170    1.000
          ------------------------------------------------
     
            Crop factor for bounding water use is set to  100.0  times eo.
     
     
     
     
        - Reading Cultivar Parameters
         ------------------------------------------------
         Cultivar                 = makueni
         est_days_endjuv_to_init  =      20
         tt_emerg_to_endjuv       =  150.00
         tt_flower_to_maturity    =  660.00
         head_grain_no_max        =  480.00
         grain_gth_rate           =    9.50
         tt_flag_to_flower        =   10.00
         tt_flower_to_start_grain =  120.00
         tt_maturity_to_ripe      =    1.00
         x_stem_wt      =     0.0   80.0
         y_height      =     0.0 2000.0
         ------------------------------------------------
     
     
     
     Residue removed using user_defined
                                             Fraction Incorporated =     0.10
                                             Incorporated Depth    =   100.00
     Machinery job "operator1 + sowing" is queued
graph paddock2 SRMaize
     Labour job 'operator1 + presow_till' in paddock1 has finished
2 September 1981(Day of year=245), Labour: 
     Labour job 'operator1 + sowing' in paddock1 has finished
2 September 1981(Day of year=245), maize: 
      stage    2.0 germination
2 September 1981(Day of year=245), maize: 
      stage    2.0 germination
3 September 1981(Day of year=246), Labour: 
     Labour job 'operator1 + presow_till' in paddock2 has finished
4 September 1981(Day of year=247), Labour: 
     Labour job 'operator1 + sowing' in paddock2 has finished
4 September 1981(Day of year=247), maize: 
      stage    3.0 emergence
                          biomass =          0.8800000E-01   lai =    0.1672000E-02
                          stover N conc =    4.400000       extractable sw =    18.36518
4 September 1981(Day of year=247), maize: 
      stage    3.0 emergence
                          biomass =          0.8800000E-01   lai =    0.1672000E-02
                          stover N conc =    4.400000       extractable sw =    18.36518
17 September 1981(Day of year=260), maize: 
      stage    4.0 end_of_juvenile
                          biomass =           1.715295       lai =    0.2412014E-01
                          stover N conc =    3.315426       extractable sw =    23.78807
17 September 1981(Day of year=260), maize: 
      stage    4.0 end_of_juvenile
                          biomass =           1.704730       lai =    0.2392328E-01
                          stover N conc =    3.294647       extractable sw =    23.78932
18 September 1981(Day of year=261), maize: 
      stage    5.0 floral_initiation
                          biomass =           2.128109       lai =    0.3218623E-01
                          stover N conc =    2.653217       extractable sw =    31.59475
18 September 1981(Day of year=261), maize: 
      stage    5.0 floral_initiation
                          biomass =           2.114194       lai =    0.3198989E-01
                          stover N conc =    2.637585       extractable sw =    31.59541
30 September 1981(Day of year=273), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
30 September 1981(Day of year=273), Labour: 
     Machinery job "operator1 + weeding" is queued
30 September 1981(Day of year=273), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
     Machinery job "operator1 + weeding" is queued
1 October 1981(Day of year=274), Labour: 
     Labour job 'operator1 + weeding' in paddock1 has finished
2 October 1981(Day of year=275), Labour: 
     Labour job 'operator1 + weeding' in paddock2 has finished
19 October 1981(Day of year=292), maize: 
      stage    6.0 flag_leaf
                          biomass =           292.0193       lai =     1.487150
                          stover N conc =    1.525908       extractable sw =    118.6972
19 October 1981(Day of year=292), maize: 
      stage    6.0 flag_leaf
                          biomass =           148.5663       lai =     1.062303
                          stover N conc =   0.9789684       extractable sw =    140.3285
20 October 1981(Day of year=293), maize: 
      stage    7.0 flowering
                          biomass =           310.9713       lai =     1.486338
                          stover N conc =    1.466786       extractable sw =    113.9293
20 October 1981(Day of year=293), maize: 
      stage    7.0 flowering
                          biomass =           155.8978       lai =     1.061499
                          stover N conc =   0.9511268       extractable sw =    135.9203
29 October 1981(Day of year=302), maize: 
      stage    8.0 start_grain_fill
                          biomass =           424.8445       lai =     1.474768
                          stover N conc =    1.253857       extractable sw =    152.1034
29 October 1981(Day of year=302), maize: 
      stage    8.0 start_grain_fill
                          biomass =           200.7026       lai =     1.049994
                          stover N conc =   0.8488522       extractable sw =    181.8835
9 December 1981(Day of year=343), maize: 
      stage    9.0 end_grain_fill
                          biomass =           788.0598       lai =     1.343415
                          stover N conc =   0.9091876       extractable sw =    106.0769
9 December 1981(Day of year=343), maize: 
      stage    9.0 end_grain_fill
                          biomass =           333.7179       lai =    0.9200425
                          stover N conc =   0.7366068       extractable sw =    133.3487
10 December 1981(Day of year=344), maize: 
      stage   10.0 maturity
                          biomass =           794.3268       lai =     1.335674
                          stover N conc =   0.9060057       extractable sw =    104.2103
10 December 1981(Day of year=344), maize: 
      stage   10.0 maturity
                          biomass =           336.1515       lai =    0.9123839
                          stover N conc =   0.7360308       extractable sw =    132.2914
11 December 1981(Day of year=345), maize: 
      stage   11.0 harvest_ripe
                          biomass =           794.3268       lai =    0.1672029E-02
                          stover N conc =   0.9525145       extractable sw =    102.3376
11 December 1981(Day of year=345), maize: 
      stage   11.0 harvest_ripe
                          biomass =           336.1515       lai =    0.1672029E-02
                          stover N conc =   0.7741978       extractable sw =    131.2210
12 December 1981(Day of year=346), Labour: 
     Machinery job "operator1 + harvesting" is queued
12 December 1981(Day of year=346), Economics: 
     Priced maize cropprice (price='285.0', yield='4.458539095454546' wet) over '0.25' ha = '317.6709105511364'
12 December 1981(Day of year=346), maize: 
     
     
     
     flowering (DAS) =   50                                maturity (DAS)  =     101
      flowering day  =  293                                 stover (kg/ha) =    4019.8
      maturity day        =  344                            grain yield (kg/ha) =    3923.5
      grain % water content   =   15.5                      grain yield wet (kg/ha) =    4643.2
      grain wt (g) =     0.342                              grains/m^2   =  1147.190
      grains/head = 260.7                                   maximum lai = 1.490
      total above ground biomass (kg/ha) =    7943.3
      live above ground biomass (kg/ha) =    7943.3
      green above ground biomass (kg/ha) =    7036.1
      senesced above ground biomass (kg/ha) =     907.2
      dead above ground biomass (kg/ha) =       0.0
      number of leaves =  13.5
      grain N percent =      1.29                           total N content (kg/ha) =     71.56
      grain N uptake (kg/ha) =     50.61                    senesced N content (kg/ha) =      4.54
      green N content (kg/ha) =     16.41                   dead N content (kg/ha) =      0.00
     
     
      Average Stress Indices:                          Water Photo  Water Expan  N Photo      N grain conc
         emergence           to end_of_juvenile         0.000        0.000        0.000        0.159
         end_of_juvenile     to floral_initiation       0.000        0.000        0.000        0.068
         floral_initiation   to flag_leaf               0.000        0.000        0.033        0.190
         flag_leaf           to flowering               0.000        0.000        0.218        0.374
         flowering           to start_grain_fill        0.000        0.000        0.263        0.411
         start_grain_fill    to end_grain_fill          0.000        0.000        0.513        0.610
     
     Crop harvested.
         Organic matter removed from system:-      From Tops               From Roots
                          DM (kg/ha) =               3923.51                    0.00
                          N  (kg/ha) =                 50.61                    0.00
     
         Crop ended. Yield (dw) =     0.0
         Organic matter from crop:-      Tops to surface residue     Roots to soil FOM
                          DM (kg/ha) =               4019.75                  956.99
                          N  (kg/ha) =                 20.94                    8.46
                          P  (kg/ha) =                  0.00                    0.00
     
     Priced maize_residue cropprice (price='20.0', yield='4.567902721590909' wet) over '0.25' ha = '22.839513607954544'
12 December 1981(Day of year=346), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     1.00
                                             Incorporated Depth    =     0.00
graph paddock1 Fallow
     Machinery job "operator1 + harvesting" is queued
     Priced maize cropprice (price='285.0', yield='1.1455775170454545' wet) over '0.75' ha = '244.86719426846594'
12 December 1981(Day of year=346), maize: 
     
     
     
     flowering (DAS) =   50                                maturity (DAS)  =     101
      flowering day  =  293                                 stover (kg/ha) =    2353.4
      maturity day        =  344                            grain yield (kg/ha) =    1008.1
      grain % water content   =   15.5                      grain yield wet (kg/ha) =    1193.0
      grain wt (g) =     0.342                              grains/m^2   =   294.759
      grains/head =  67.0                                   maximum lai = 1.065
      total above ground biomass (kg/ha) =    3361.5
      live above ground biomass (kg/ha) =    3361.5
      green above ground biomass (kg/ha) =    2821.4
      senesced above ground biomass (kg/ha) =     540.1
      dead above ground biomass (kg/ha) =       0.0
      number of leaves =  13.5
      grain N percent =      1.33                           total N content (kg/ha) =     24.54
      grain N uptake (kg/ha) =     13.44                    senesced N content (kg/ha) =      2.70
      green N content (kg/ha) =      8.41                   dead N content (kg/ha) =      0.00
     
     
      Average Stress Indices:                          Water Photo  Water Expan  N Photo      N grain conc
         emergence           to end_of_juvenile         0.000        0.000        0.001        0.164
         end_of_juvenile     to floral_initiation       0.000        0.000        0.000        0.071
         floral_initiation   to flag_leaf               0.000        0.000        0.269        0.403
         flag_leaf           to flowering               0.000        0.000        0.613        0.691
         flowering           to start_grain_fill        0.000        0.000        0.629        0.703
         start_grain_fill    to end_grain_fill          0.000        0.000        0.767        0.814
     
     Crop harvested.
         Organic matter removed from system:-      From Tops               From Roots
                          DM (kg/ha) =               1008.11                    0.00
                          N  (kg/ha) =                 13.44                    0.00
     
         Crop ended. Yield (dw) =     0.0
         Organic matter from crop:-      Tops to surface residue     Roots to soil FOM
                          DM (kg/ha) =               2353.41                  478.04
                          N  (kg/ha) =                 11.11                    3.12
                          P  (kg/ha) =                  0.00                    0.00
     
     Priced maize_residue cropprice (price='20.0', yield='2.674326115909091' wet) over '0.75' ha = '40.114891738636366'
12 December 1981(Day of year=346), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     1.00
                                             Incorporated Depth    =     0.00
graph paddock2 Fallow
     Labour job 'operator1 + harvesting' in paddock1 has finished
13 December 1981(Day of year=347), Labour: 
     Labour job 'operator1 + harvesting' in paddock2 has finished
21 January 1982(Day of year=21), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
21 January 1982(Day of year=21), Labour: 
     Machinery job "operator1 + weeding" is queued
21 January 1982(Day of year=21), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
     Machinery job "operator1 + weeding" is queued
     Labour job 'operator1 + weeding' in paddock1 has finished
22 January 1982(Day of year=22), Labour: 
     Labour job 'operator1 + weeding' in paddock2 has finished
23 March 1982(Day of year=82), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
23 March 1982(Day of year=82), Labour: 
     Machinery job "operator1 + presow_till" is queued
23 March 1982(Day of year=82), maize: 
     Sowing initiate
     
     
     
                      Crop Sowing Data
         -------------------------------------------------------
         Sowing   Depth  Plants Spacing Skiprow Cultivar    FTN
         Day no    mm      m^2    m      code     name       no
         -------------------------------------------------------
             82   30.0    4.4    0.8    0.0   katumani      0.00
         -------------------------------------------------------
     
        - Reading root profile parameters
     Uptake of NO3 and water calculated by maize
     
     
     
     
                         Root Profile
         ------------------------------------------------
           Layer      Kl      Lower Exploration
           Depth              limit   Factor
           (mm)       ()     (mm/mm)    ()
         ------------------------------------------------
          150.000    0.080    0.150    1.000
          150.000    0.080    0.150    1.000
          300.000    0.080    0.170    1.000
          300.000    0.080    0.170    1.000
          300.000    0.060    0.170    1.000
          300.000    0.040    0.170    1.000
          ------------------------------------------------
     
            Crop factor for bounding water use is set to  100.0  times eo.
     
     
     
     
        - Reading Cultivar Parameters
         ------------------------------------------------
         Cultivar                 = katumani
         est_days_endjuv_to_init  =      20
         tt_emerg_to_endjuv       =  150.00
         tt_flower_to_maturity    =  660.00
         head_grain_no_max        =  450.00
         grain_gth_rate           =   10.50
         tt_flag_to_flower        =   10.00
         tt_flower_to_start_grain =  120.00
         tt_maturity_to_ripe      =    1.00
         x_stem_wt      =     0.0   80.0
         y_height      =     0.0 2000.0
         ------------------------------------------------
     
     
     
23 March 1982(Day of year=82), bean: 
     Crop Sow
        ------------------------------------------------
        cultivar                   = fiord
        Phases:
           out
           sowing
           germination
              shoot_lag                  =      15 (dd)
              shoot_rate                 =       4 (dd/mm)
           emergence
              cumvd_emergence            =       0     100 (vd)
              tt_emergence               =     438     438 (dd)
           end_of_juvenile
              x_pp_end_of_juvenile       =     9.6    14.3 (h)
              y_tt_end_of_juvenile       =     381       1 (dd)
           floral_initiation
              x_pp_floral_initiation     =     9.6    14.3 (h)
              y_tt_floral_initiation     =      16      16 (dd)
           flowering
              x_pp_flowering             =    12.5      14 (h)
              y_tt_flowering             =     500     100 (dd)
           start_grain_fill
              x_pp_start_grain_fill      =    12.5      14 (h)
              y_tt_start_grain_fill      =    1300     100 (dd)
           end_grain_fill
              tt_end_grain_fill          =      60 (dd)
           maturity
              tt_maturity                =       1 (dd)
           harvest_ripe
              tt_harvest_ripe            =       1 (dd)
           end_crop
     
        x_pp_hi_incr               =       1.00      24.00
        y_hi_incr                  =     0.0100     0.0100
        x_hi_max_pot_stress        =       0.50       1.00
        y_hi_max_pot               =       0.47       0.47
        ------------------------------------------------
     
     
                        Root Profile
         -----------------------------------------------
          Layer       Kl           Lower    Exploration
          Depth     Factor         Limit      Factor
          (mm)         ()        (mm/mm)       (0-1)
         -----------------------------------------------
         150.0     0.080          0.150       1.000
         150.0     0.080          0.150       1.000
         300.0     0.080          0.170       1.000
         300.0     0.080          0.170       1.000
         300.0     0.060          0.170       1.000
         300.0     0.040          0.170       1.000
         -----------------------------------------------
         Extractable SW:   164mm in  1500mm total depth ( 11%).
         Crop factor for bounding water use is set to 100.0 times eo.
      stage 1.0 sowing
     
                      Crop Sowing Data
         ------------------------------------------------
         Sowing  Depth Plants Spacing Skip  Skip  Cultivar
         Day no   mm     m^2     mm   row   plant name
         ------------------------------------------------
             82   30.0    8.8  750.0   0.0   0.0 fiord
         ------------------------------------------------
     
     Residue removed using user_defined
                                             Fraction Incorporated =     0.10
                                             Incorporated Depth    =   100.00
     Machinery job "operator1 + sowing" is queued
graph paddock1 maizebean
23 March 1982(Day of year=82), Surface Organic Matter: 
     Residue removed using user_defined
                                             Fraction Incorporated =     0.90
                                             Incorporated Depth    =   100.00
     Machinery job "operator1 + presow_till" is queued
23 March 1982(Day of year=82), maize: 
     Sowing initiate
     
     
     
                      Crop Sowing Data
         -------------------------------------------------------
         Sowing   Depth  Plants Spacing Skiprow Cultivar    FTN
         Day no    mm      m^2    m      code     name       no
         -------------------------------------------------------
             82   30.0    4.4    0.8    0.0   makueni       0.00
         -------------------------------------------------------
     
        - Reading root profile parameters
     Uptake of NO3 and water calculated by maize
     
     
     
     
                         Root Profile
         ------------------------------------------------
           Layer      Kl      Lower Exploration
           Depth              limit   Factor
           (mm)       ()     (mm/mm)    ()
         ------------------------------------------------
          150.000    0.080    0.150    1.000
          150.000    0.080    0.150    1.000
          300.000    0.080    0.170    1.000
          300.000    0.080    0.170    1.000
          300.000    0.060    0.170    1.000
          300.000    0.040    0.170    1.000
          ------------------------------------------------
     
            Crop factor for bounding water use is set to  100.0  times eo.
     
     
     
     
        - Reading Cultivar Parameters
         ------------------------------------------------
         Cultivar                 = makueni
         est_days_endjuv_to_init  =      20
         tt_emerg_to_endjuv       =  150.00
         tt_flower_to_maturity    =  660.00
         head_grain_no_max        =  480.00
         grain_gth_rate           =    9.50
         tt_flag_to_flower        =   10.00
         tt_flower_to_start_grain =  120.00
         tt_maturity_to_ripe      =    1.00
         x_stem_wt      =     0.0   80.0
         y_height      =     0.0 2000.0
         ------------------------------------------------
     
     
     
     Residue removed using user_defined
                                             Fraction Incorporated =     0.10
                                             Incorporated Depth    =   100.00
     Machinery job "operator1 + sowing" is queued
graph paddock2 LRMaize
     Labour job 'operator1 + presow_till' in paddock1 has finished
24 March 1982(Day of year=83), Labour: 
     Labour job 'operator1 + sowing' in paddock1 has finished
24 March 1982(Day of year=83), bean: 
      stage 2.0 germination
24 March 1982(Day of year=83), maize: 
      stage    2.0 germination
24 March 1982(Day of year=83), maize: 
      stage    2.0 germination
25 March 1982(Day of year=84), Labour: 
     Labour job 'operator1 + presow_till' in paddock2 has finished
