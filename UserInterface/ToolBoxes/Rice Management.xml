<folder version="27" name="Rice">
  <folder name="Manager">
    <manager name="Reset watertable">
      <script>
        <text>water_table = 2000
</text>
        <event>init</event>
      </script>
      <script>
        <text> 
    if DWT= -1.0 then                                                      !Use water table values
    else
            water_table = DWT*1000 - para_height
    endif
</text>
        <event>start_of_day</event>
      </script>
      <script>
        <text>
        </text>
        <event>end_of_day</event>
      </script>
    </manager>
    <manager name="Pond_depth">
      <ui>
        <category description="Manage pond depth " type="category" />
        <soilmodule type="modulename" description="Name of your soil module : ">BholaSouthBalia06</soilmodule>
        <date1 type="ddmmmdate" description="Start date for ponding (dd-mmm)">1-dec</date1>
        <date2 type="ddmmmdate" description="End date for ponding (dd-mmm)">30-nov</date2>
        <max_dop type="text" description="Maximum depth of pond (mm)">100</max_dop>
        <min_dop type="text" description="Minimum depth of pond for irrigation trigger">20</min_dop>
        <category description="Enable irrigation - to top up pond " type="category" />
        <irrig_yes type="yesno" description="Enable irrigation (yes/no)">yes</irrig_yes>
        <date3 type="ddmmmdate" description="Start date for irrigation (dd-mmm)">1-jan</date3>
        <date4 type="ddmmmdate" description="End date for irrigation (dd-mmm)">15-may</date4>
        <irrig_number type="text" description="Maximum number of irrigations allowed">10</irrig_number>
      </ui>
      <script>
        <text>                                                                                                                                ! Pond  on/off
   if (date_within('[date1], [date2]') = 1) then
            '[soilmodule] Water' set max_pond = [max_dop]
    else
            '[soilmodule] Water' set max_pond = 0
    endif

   if '[irrig_yes]' = 'yes' then                                                                                ! Enable irrigation
     if (date_within('[date3], [date4]') = 1) then                                             ! Enable irrigation
            if rice.plant_status = 'alive' and pond &lt; [min_dop] and count &lt;= [irrig_number] then          ! Top up pond 
                irrig_amount = [max_dop] - pond
                irrigation apply amount = irrig_amount 
                tot_irrig = tot_irrig + irrig_amount
                count = count + 1
            endif
      endif
   endif

    if today = date('[date4]') then                                                                   ! Reset irrigation counter
        count = 0
    endif </text>
        <event>start_of_day</event>
      </script>
      <script>
        <text>
count = 0
irrig_amount = 0
max_dop = 100
min_dop = 20</text>
        <event>Init</event>
      </script>
    </manager>
    <manager name="Pond_depth_with rice">
      <ui>
        <category description="Manage pond depth " type="category" />
        <soilmodule type="modulename" description="Name of your soil module : ">BholaSouthBalia06</soilmodule>
        <date1 type="ddmmmdate" description="Start date for ponding (dd-mmm)">1-dec</date1>
        <date2 type="ddmmmdate" description="End date for ponding (dd-mmm)">30-nov</date2>
        <max_dop type="text" description="Maximum depth of pond (mm)">100</max_dop>
        <min_dop type="text" description="Minimum depth of pond for irrigation trigger">20</min_dop>
        <category description="Enable irrigation - to top up pond " type="category" />
        <irrig_yes type="yesno" description="Enable irrigation (yes/no)">yes</irrig_yes>
        <date3 type="ddmmmdate" description="Start date for irrigation (dd-mmm)">1-jan</date3>
        <date4 type="ddmmmdate" description="End date for irrigation (dd-mmm)">15-may</date4>
        <irrig_number type="text" description="Maximum number of irrigations allowed">10</irrig_number>
      </ui>
      <script>
        <text>                                                                                                                                ! Pond  on/off
   if (date_within('[date1], [date2]') = 1) then
                                         
        if rice.plant_status = 'alive' then
            '[soilmodule] Water' set max_pond = [max_dop]
       else 
            '[soilmodule] Water' set max_pond = 0
       endif
    else
            '[soilmodule] Water' set max_pond = 0
    endif

   if '[irrig_yes]' = 'yes' then                                                                                ! Enable irrigation
     if (date_within('[date3], [date4]') = 1) then                                             ! Enable irrigation
            if rice.plant_status = 'alive' and pond &lt; [min_dop] and count &lt;= [irrig_number] then          ! Top up pond 
                irrig_amount = [max_dop] - pond
                irrigation apply amount = irrig_amount 
                tot_irrig = tot_irrig + irrig_amount
                count = count + 1
            endif
      endif
   endif

    if today = date('[date4]') then                                                                   ! Reset irrigation counter
        count = 0
    endif </text>
        <event>start_of_day</event>
      </script>
      <script>
        <text>
count = 0
irrig_amount = 0
max_dop = 100
min_dop = 20</text>
        <event>Init</event>
      </script>
    </manager>
    <manager name="Rice-Transplant-Cambodia">
      <ui>
        <category type="category" description="Sowing criteria" />
        <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-jul</date1>
        <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">15-jul</date2>
        <must_sow type="yesno" description="Must sow? : ">yes</must_sow>
        <raincrit type="text" description="Amount of rainfall : ">20</raincrit>
        <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
        <esw_amount type="text" description="Enter minimum allowable available soil water (mm) : ">20</esw_amount>
        <category type="category" description="Crop parameters" />
        <ricemodule type="modulename" description="Name of your soil module : ">rice</ricemodule>
        <ricecultivar type="list" listvalues="Malis_Sral, Sen_Pidao, Phka_Rumdoul, Krasang_Teab" description="Cultivar"> Phka_Rumdoul</ricecultivar>
        <r_sbdur type="text" description="Duration of seedbed">26</r_sbdur>
        <r_nplh type="text" description="Number of plants on hills">11</r_nplh>
        <r_nh type="text" description="Number of hills">25</r_nh>
        <r_nplsb type="text" description="Number of plants per seed bed">1000</r_nplsb>
        <ferttype type="text" description="Fertilizer type">urea</ferttype>
        <sowfert type="text" description="Amount of fertilizer at transplant">0</sowfert>
        <topfert type="text" description="Amount of fertilizer for topdress ">0</topfert>
      </ui>
      <script>
        <text>                                                                                                                                                                     !Transplanted Rice                
                                    
  if (paddock_is_fallow() = 1  and date_within('[date1], [date2]') = 1) then    
        if (rain[[rainnumdays]] &gt;= [raincrit] AND esw &gt;= [esw_amount]) OR
              ('[must_sow]' = 'yes' AND today = date('[date2]')))    then 
                                                                                                                                                                      !sbdur= duration of seedbed
                                                                                                                                                                      !nplh= number of plants on hills
                                                                                                                                                                      !nh= number of hills
                 [ricemodule] sow cultivar = [ricecultivar], establishment = transplant, sbdur = [r_sbdur], nplh = [r_nplh], nh = [r_nh], nplsb = [r_nplsb]
                 fertiliser apply amount = [sowfert], type=[ferttype]              !Inital fertilizer
                 top_dress = 0
                 tot_irrig = 0
         endif
   endif

   if rice.dvs &gt; 0.3 and top_dress = 0 then                                                                                          ! Add top dress fertilizer 
          fertiliser apply amount = [topfert], type = urea
          top_dress = 1
   endif

   if rice.plant_status = 'dead' then                                                                                                       ! Harvest Rice crop
         rice  end_crop
   endif
 
</text>
        <event>start_of_day</event>
      </script>
      <script>
        <text>
top_dress = 0
tot_irrig = 0
</text>
        <event>Init</event>
      </script>
    </manager>
    <manager name="Rice-Transplant Aman">
      <ui>
        <category type="category" description="Sowing criteria" />
        <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">1-aug</date1>
        <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">1-sep</date2>
        <must_sow type="yesno" description="Must sow? : ">yes</must_sow>
        <raincrit type="text" description="Amount of rainfall : ">20</raincrit>
        <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
        <esw_amount type="text" description="Enter minimum allowable available soil water (mm) : ">20</esw_amount>
        <category type="category" description="Crop parameters" />
        <ricemodule type="modulename" description="Name of your rice module : ">rice</ricemodule>
        <ricecultivar type="text" description="Cultivar">BR23</ricecultivar>
        <r_sbdur type="text" description="Duration of seedbed">32</r_sbdur>
        <r_nplh type="text" description="Number of plants on hills">1</r_nplh>
        <r_nh type="text" description="Number of hills">25</r_nh>
        <r_nplsb type="text" description="Number of plants per seed bed">1000</r_nplsb>
        <ferttype type="text" description="Fertilizer type">urea</ferttype>
        <sowfert type="text" description="Amount of fertilizer at transplant">100</sowfert>
      </ui>
      <script>
        <text>                                                                                                                                                                     !Transplanted Rice                
                                    
  if (paddock_is_fallow() = 1  and date_within('[date1], [date2]') = 1) then    
        if (rain[[rainnumdays]] &gt;= [raincrit] AND esw &gt;= [esw_amount]) OR
              ('[must_sow]' = 'yes' AND today = date('[date2]')))    then 
                                                                                                                                                                      !sbdur= duration of seedbed
                                                                                                                                                                      !nplh= number of plants on hills
                                                                                                                                                                      !nh= number of hills
                 [ricemodule] sow cultivar = [ricecultivar], establishment = transplant, sbdur = [r_sbdur], nplh = [r_nplh], nh = [r_nh], nplsb = [r_nplsb]
                 fertiliser apply amount = [sowfert], type=[ferttype]              !Inital fertilizer
                 top_dress = 0
                 tot_irrig = 0
         endif
   endif

   if rice.plant_status = 'dead' then                                                                                                       ! Harvest Rice crop
         rice  end_crop
   endif
 
</text>
        <event>start_of_day</event>
      </script>
      <script>
        <text>
top_dress = 0
tot_irrig = 0
</text>
        <event>Init</event>
      </script>
    </manager>
    <manager name="Rice-Transplant Aus">
      <ui>
        <category type="category" description="Sowing criteria" />
        <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">1-apr</date1>
        <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">30-apr</date2>
        <must_sow type="yesno" description="Must sow? : ">yes</must_sow>
        <raincrit type="text" description="Amount of rainfall : ">20</raincrit>
        <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
        <esw_amount type="text" description="Enter minimum allowable available soil water (mm) : ">20</esw_amount>
        <category type="category" description="Crop parameters" />
        <ricemodule type="modulename" description="Name of your soil module : ">rice</ricemodule>
        <ricecultivar type="text" description="Cultivar">BR23</ricecultivar>
        <r_sbdur type="text" description="Duration of seedbed">32</r_sbdur>
        <r_nplh type="text" description="Number of plants on hills">1</r_nplh>
        <r_nh type="text" description="Number of hills">25</r_nh>
        <r_nplsb type="text" description="Number of plants per seed bed">1000</r_nplsb>
        <ferttype type="text" description="Fertilizer type">urea</ferttype>
        <sowfert type="text" description="Amount of fertilizer at transplant">100</sowfert>
      </ui>
      <script>
        <text>                                                                                                                                                                     !Transplanted Rice                
                                    
  if (paddock_is_fallow() = 1  and date_within('[date1], [date2]') = 1) then    
        if (rain[[rainnumdays]] &gt;= [raincrit] AND esw &gt;= [esw_amount]) OR
              ('[must_sow]' = 'yes' AND today = date('[date2]')))    then 
                                                                                                                                                                      !sbdur= duration of seedbed
                                                                                                                                                                      !nplh= number of plants on hills
                                                                                                                                                                      !nh= number of hills
                 [ricemodule] sow cultivar = [ricecultivar], establishment = transplant, sbdur = [r_sbdur], nplh = [r_nplh], nh = [r_nh], nplsb = [r_nplsb]
                 fertiliser apply amount = [sowfert], type=[ferttype]              !Inital fertilizer
                 top_dress = 0
                 tot_irrig = 0
         endif
   endif

   if rice.plant_status = 'dead' then                                                                                                       ! Harvest Rice crop
         rice  end_crop
   endif
 
</text>
        <event>start_of_day</event>
      </script>
      <script>
        <text>
top_dress = 0
tot_irrig = 0
</text>
        <event>Init</event>
      </script>
    </manager>
    <manager name="Rice-Transplant Boro">
      <ui>
        <category type="category" description="Sowing criteria" />
        <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">1-jan</date1>
        <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">15-jan</date2>
        <must_sow type="yesno" description="Must sow? : ">yes</must_sow>
        <raincrit type="text" description="Amount of rainfall : ">20</raincrit>
        <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
        <esw_amount type="text" description="Enter minimum allowable available soil water (mm) : ">20</esw_amount>
        <category type="category" description="Crop parameters" />
        <ricemodule type="modulename" description="Name of your soil module : ">rice</ricemodule>
        <ricecultivar type="text" description="Cultivar">BR23</ricecultivar>
        <r_sbdur type="text" description="Duration of seedbed">32</r_sbdur>
        <r_nplh type="text" description="Number of plants on hills">1</r_nplh>
        <r_nh type="text" description="Number of hills">25</r_nh>
        <r_nplsb type="text" description="Number of plants per seed bed">1000</r_nplsb>
        <ferttype type="text" description="Fertilizer type">urea</ferttype>
        <sowfert type="text" description="Amount of fertilizer at transplant">100</sowfert>
      </ui>
      <script>
        <text>                                                                                                                                                                     !Transplanted Rice                
                                    
  if (paddock_is_fallow() = 1  and date_within('[date1], [date2]') = 1) then    
        if (rain[[rainnumdays]] &gt;= [raincrit] AND esw &gt;= [esw_amount]) OR
              ('[must_sow]' = 'yes' AND today = date('[date2]')))    then 
                                                                                                                                                                      !sbdur= duration of seedbed
                                                                                                                                                                      !nplh= number of plants on hills
                                                                                                                                                                      !nh= number of hills
                 [ricemodule] sow cultivar = [ricecultivar], establishment = transplant, sbdur = [r_sbdur], nplh = [r_nplh], nh = [r_nh], nplsb = [r_nplsb]
                 fertiliser apply amount = [sowfert], type=[ferttype]              !Inital fertilizer
                 top_dress = 0
                 tot_irrig = 0
         endif
   endif

   if rice.plant_status = 'dead' then                                                                                                       ! Harvest Rice crop
         rice  end_crop
   endif
 
</text>
        <event>start_of_day</event>
      </script>
      <script>
        <text>
top_dress = 0
tot_irrig = 0
</text>
        <event>Init</event>
      </script>
    </manager>
    <manager name="Rice-Direct seeding">
      <ui>
        <category type="category" description="Sowing criteria" />
        <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-Jul</date1>
        <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">15-jul</date2>
        <must_sow type="yesno" description="Must sow? : ">yes</must_sow>
        <raincrit type="text" description="Amount of rainfall : ">20</raincrit>
        <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
        <esw_amount type="text" description="Enter minimum allowable available soil water (mm) : ">20</esw_amount>
        <category type="category" description="Crop parameters" />
        <ricemodule type="modulename" description="Name of your rice module : ">rice</ricemodule>
        <ricecultivar type="text" description="Cultivar">local</ricecultivar>
        <r_nplds type="text" description="Number of plants per seed bed (plants/m2)">180</r_nplds>
        <ferttype type="text" description="Fertilizer type">urea</ferttype>
        <sowfert type="text" description="Amount of fertilizer at sowing">0</sowfert>
      </ui>
      <script>
        <text>                                                                                                                                                                     !Transplanted Rice                
                                    
  if (paddock_is_fallow() = 1  and date_within('[date1], [date2]') = 1) then    
        if (rain[[rainnumdays]] &gt;= [raincrit] AND esw &gt;= [esw_amount]) OR
              ('[must_sow]' = 'yes' AND today = date('[date2]')))    then 
                                                                                                            !sbdur= duration of seedbed                                                                                                                                                             !nplh= number of plants on hills
                                                                                                            !nh= number of hills
                 [ricemodule] sow cultivar = [ricecultivar], establishment = direct-seed, nplds = [r_nplds]
                 fertiliser apply amount = [sowfert], type=[ferttype]              !Inital fertilizer
                 top_dress = 0
                 tot_irrig = 0
         endif
   endif

   if rice.plant_status = 'dead' then                                                                                                       ! Harvest Rice crop
         rice  end_crop
   endif
 
</text>
        <event>start_of_day</event>
      </script>
      <script>
        <text>
top_dress = 0
tot_irrig = 0
</text>
        <event>Init</event>
      </script>
    </manager>
    <manager name="Fertilise on growth stage">
      <ui>
        <category type="category" />
        <fert_criteria type="text" description="Don't add fertiliser if N in top 2 layers exceeds (kg/ha) : ">1000</fert_criteria>
        <category type="category" />
        <fertmodule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</fertmodule>
        <rice_dvs type="text" description="Rice growth stage to apply fertiliser (0-2) dvs =0.3">0.3</rice_dvs>
        <fert_amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">100</fert_amount>
        <fert_type type="list" listvalues="NO3_N, NH4_N, NH4NO3, urea_N, urea_no3, urea, nh4so4_n, rock_p, banded_p, broadcast_p" description="Fertiliser type : ">NO3_N</fert_type>
      </ui>
      <script>
        <text>
  
            N_topsoil = no3(1) + nh4(1) + no3(2) + nh4(2)
            if (N_topsoil &lt; [fert_criteria]) then
                  if rice.dvs &gt; [rice_dvs] and  top_dress = 0 then                                                                                          ! Add top dress fertilizer 
                     [fertmodule] apply amount = [fert_amount] (kg/ha), depth = 50 (mm), type = [fert_type] ()
                     top_dress = 1
                  endif
            endif
    </text>
        <event>start_of_day</event>
      </script>
      <script>
        <text>top_dress = 0</text>
        <event>init</event>
      </script>
    </manager>
    <manager name="Fertilise and Irrigate Rabi crop">
      <ui>
        <croptype type="crop" description="Crop type">mungbean</croptype>
        <cropdas type="text" description="DAS to apply fertiliser and irrigation">20</cropdas>
        <category description="Fertiliser application details" type="category" />
        <fertmodule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</fertmodule>
        <fert_amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">0</fert_amount>
        <fert_type type="list" listvalues="NO3_N, NH4_N, NH4NO3, urea_N, urea_no3, urea" description="Fertiliser type : ">urea_N</fert_type>
        <category description="Irrigation application details" type="category" />
        <irrig_amount type="text" description="Amount of irrigation to apply">0</irrig_amount>
      </ui>
      <script>
        <text>
   if [croptype].daysaftersowing = [cropdas] then        
         [fertmodule] apply amount = [fert_amount] (kg/ha), depth = 50 (mm), type = [fert_type] (mm)
         irrigation apply amount = [irrig_amount] (mm) 
         tot_irrig = 0              
    endif

    tot_irrig = tot_irrig + irrig_amount
</text>
        <event>start_of_day</event>
      </script>
    </manager>
    <manager name="Fertilise on date">
      <ui>
        <category type="category" />
        <fert_date type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">13-sep</fert_date>
        <fert_criteria type="text" description="Don't add fertiliser if N in top 2 layers exceeds (kg/ha) : ">1000</fert_criteria>
        <category type="category" />
        <fertmodule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</fertmodule>
        <fert_amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">18</fert_amount>
        <fert_type type="list" listvalues="NO3_N, NH4_N, NH4NO3, urea_N, urea_no3, urea, nh4so4_n, rock_p, banded_p, broadcast_p" description="Fertiliser type : "> urea</fert_type>
      </ui>
      <script>
        <text>
         if (today = date('[fert_date]') then
            N_topsoil = no3(1) + nh4(1) + no3(2) + nh4(2)
            if (N_topsoil &lt; [fert_criteria]) then
               [fertmodule] apply amount = [fert_amount] (kg/ha), depth = 50 (mm), type = [fert_type] ()
            endif
         endif </text>
        <event>start_of_day</event>
      </script>
    </manager>
    <manager name="Irrigate on date">
      <ui>
        <category type="category" />
        <irrigate_date type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">06-Sep</irrigate_date>
        <category type="category" />
        <irrigate_module type="modulename" description="Module used to apply the irrigation : ">Irrigation</irrigate_module>
        <irrigate_amount type="text" description="Amount of irrigation to apply (mm) : ">60</irrigate_amount>
        <irrigate_efficiency type="text" description="Irrigation efficiency (0-1) : ">1.0</irrigate_efficiency>
      </ui>
      <script>
        <text>
            if (today = date('[irrigate_date]')) then
               '[irrigate_module]' set irrigation_efficiency = [irrigate_efficiency]
               '[irrigate_module]' apply amount = [irrigate_amount] (mm)
            endif </text>
        <event>start_of_day</event>
      </script>
    </manager>
    <manager name="automatic crop irrigation">
      <ui>
        <croptype type="crop" description="Crop type">rice</croptype>
        <cropdas type="text" description="DAS to start irrigation window">20</cropdas>
        <irrig type="list" listvalues="on , off" description="Automatic irrigation (on/noff)"> off</irrig>
        <irrig_fr type="text" description="Critical fraction for irrigation to be applied (0-1)">.99</irrig_fr>
        <irrig_depth type="text" description="Depth for soil water fraction (mm)">100</irrig_depth>
      </ui>
      <script>
        <text>
 
    if [croptype].dae = [cropdas] then         
      irrigation set automatic_irrigation = [irrig]
      irrigation set crit_fr_asw = [irrig_fr]
      irrigation set asw_depth = [irrig_depth]
      count = count + 1
   endif


</text>
        <event>start_of_day</event>
      </script>
    </manager>
    <manager name="Rice residue">
      <ui>
        <category description="When should tillage be performed" type="category" />
        <modulename type="modulename" description="The module the event come from : ">rice</modulename>
        <eventname type="text" description="On which event should tillage be done : ">harvesting</eventname>
        <category description="Tillage details" type="category" />
        <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
        <tillage_type type="list" listvalues="user_defined, chisel, disc, planter, burn, burn_90, graze, scarifier, rip, blade, tine" description="Tillage type : ">user_defined</tillage_type>
        <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">0</tillage_depth>
        <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.85</tillage_f_incorp>
      </ui>
      <script>
        <text> if day &gt; 213 then       ! 1-August------------- 40% residue left after Aus compared to 15% after Aman
            '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
 else
            '[surfaceommodule]' tillage type = [tillage_type], f_incorp = 0.60 (), tillage_depth = [tillage_depth]
endif  </text>
        <event>[modulename].[eventname]</event>
      </script>
    </manager>
    <manager name="Rabi residue">
      <ui>
        <category description="When should tillage be performed" type="category" />
        <modulename type="modulename" description="The module the event come from : ">wheat</modulename>
        <eventname type="text" description="On which event should tillage be done : ">harvesting</eventname>
        <category description="Tillage details" type="category" />
        <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
        <tillage_type type="list" listvalues="user_defined, chisel, disc, planter, burn, burn_90, graze, scarifier, rip, blade, tine" description="Tillage type : ">user_defined</tillage_type>
        <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">0</tillage_depth>
        <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.88</tillage_f_incorp>
      </ui>
      <script>
        <text>
            '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
      </text>
        <event>[modulename].[eventname]</event>
      </script>
    </manager>
    <manager name="Fertilise on DAE">
      <ui>
        <category type="category" />
        <fert_criteria type="text" description="Don't add fertiliser if N in top 2 layers exceeds (kg/ha) : ">1000</fert_criteria>
        <category type="category" />
        <fertmodule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</fertmodule>
        <rice_dae type="text" description="Days after emergence">20</rice_dae>
        <fert_amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">100</fert_amount>
        <fert_type type="list" listvalues="NO3_N, NH4_N, NH4NO3, urea_N, urea_no3, urea, nh4so4_n, rock_p, banded_p, broadcast_p" description="Fertiliser type : ">NO3_N</fert_type>
      </ui>
      <script>
        <text>
  
            N_topsoil = no3(1) + nh4(1) + no3(2) + nh4(2)
            if (N_topsoil &lt; [fert_criteria]) then
                  if rice.dae &gt; [rice_dae] and  top_dress = 0 then                                                                                          ! Add top dress fertilizer 
                     [fertmodule] apply amount = [fert_amount] (kg/ha), depth = 50 (mm), type = [fert_type] ()
                     top_dress = 1
                  endif
            endif
    </text>
        <event>start_of_day</event>
      </script>
      <script>
        <text>top_dress = 0</text>
        <event>init</event>
      </script>
    </manager>
  </folder>
</folder>