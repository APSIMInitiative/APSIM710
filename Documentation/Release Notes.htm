<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      
      <title>APSIM 7.10 Release Notes</title><link href="ApsimWebStyle.css" rel="stylesheet" type="text/css"></head>
   <body>
    <h1>APSIM 7.10 release notes</h1>
    <p>29th March 2018</p>

		
	<h2>New MAIZE model</h2>
<p>The APSIM Maize model has been rewritten and enhanced. The N routines are similar to those used in the Sorghum model with N content per unit leaf area as a key driver of N demand. Biomass production and partitioning as well as yield components are modelled similarly to those in the Sorghum model. Canopy dynamics are modelled using a simplified bell shaped curve to describe leaf size per node.</p>

<a href="https://www.sciencedirect.com/science/article/pii/S1161030117301880">A paper has been published describing the N dynamics model and can be found here</a>

<p>The model has been tested and validated nationally and internationally.</p>

<p>Please note that rather than values for each stage, a single value is given for the Radiation Use Efficiency factor and for the Transpiration Efficiency Coefficient.</p>
	
	<h2>Ausfarm STOCK model now included in APSIM</h2>
	The
AusFarm stock model can now run in APSIM in it's standard form as
distributed with AusFarm. This means that the previous work that was
called the StockScienceConverter is no longer needed. AusFarm Pasture
and Supplement are also functioning this way now. This means that when
they are in a simulation they have a detailed data entry user interface
for setting the initialisation values. <br>Stock communicates with Plant and SurfaceOM using the new specification as found at: &nbsp;<a href="http://www.apsim.info/Documentation/TechnicalandDevelopment/APSIMcomponentcommunications.aspx">APSIM Documentation</a>.<br>There is an example simulation called <span style="font-style: italic;">Wether pasture crop rotation</span>. It contains a typical fattening enterprise running wethers on pasture with winter crop and stubble feeding.<br><br><span style="font-weight: bold;">Compatibility with the previous StockScienceConverter:<span style="font-weight: bold;"><br><span style="font-weight: bold;"></span></span></span>To
continue using simulations that were developed with the
StockScienceConverter you will need to add an extra component to your
simulation. This is the Plugins component found in the Standard Toolbox
| Structural folder. Drop this component in the top level of the
simulation and ensure that the plugin; <span style="font-style: italic;">%apsim%\UserInterface\Ausfarm.xml</span>
is enabled. Within this component, disable or remove the other AusFarm
plugins; AFGeneric, AFManager, AFPasture, AFStock, and AFSupplement.
You may need to then save and reopen your simulation.<span style="font-weight: bold;"><span style="font-weight: bold;"><br></span></span><br><br>
	
    <h2>APSIM's compute cluster decommissioned</h2>
The shared computing resources of the APSIM JV have been
decommissioned, replaced by each hosting organisations own
capabilities. The "Run on Cluster" button in the GUI has changed to
"Generate Simulation" - which will generate simulation packages that
can run on a variety of clusters. The CSIRO uses a modification of the
condor .submit file. UQ uses the PBSPro batch execution environment,
which uses a modiufication of the .pbs file. <h2>Container architectures</h2>
    Rather than compiling apsim for the native OS of each cluster, APSIM's build tree has scripts to build in both <a href="http://singularity.lbl.gov/">Singularity</a> and <a href="https://www.docker.com/">Docker</a>.
Running apsim in a container architecture avoids the need to compile
apsim and its support libraries for each underlying OS. Mounting the
container over NFS is more efficient than copying and unpacking the
installation. Apsim execution times are the same whether compiled
native or containered. Versioning is simple - one version per
container. <h2>List of all changes and fixed defects</h2>
    <p><a href="http://www.apsim.info/BugTracker/bugs.aspx?qu_id=32">The complete list of changes to APSIM can be found here</a></p>
         
		 
		 
    <h1>APSIM 7.9 release notes</h1>
      <p>3rd May 2017</p>
      <h2>APSIM changed to use Microsoft Visual C++ 2015</h2>
      <p>APSIM
has been changed to use Microsoft Visual C++ 2015. The implications for
users is that the installation process can be more complicated. The
APSIM Installer will check for Microsoft Visual C++ 2015 and attempt to
install it if required. On versions of Windows before Windows 10 (i.e.
Windows 7, 8, and 8.1) it may be necessary for the user to manually
install Microsot KB2999226 (Update for Universal C Runtime in Windows).
</p>
      <p><a href="https://support.microsoft.com/en-us/help/2999226/update-for-universal-c-runtime-in-windows">This update can be found here</a></p>
      <p>For this to succeed though, it may be necessary to update Windows via Windows Update. For example on Windows 7, we have 
         found it necessary to install Windows 7 service pack before installing the above update.</p>
      
      <h2>Enhancements to the root development routines and water extraction routine in APSIM-Cotton</h2>
      <p>APSIM-Cotton
is extensively based on the OZCOT (Hearn, 1994) cotton model. OZCOT was
designed with a very empirical approach to root development. The
equations used were developed for the heavy clay soils at Myall Vale,
NSW Australia and the only variables that are used to estimate rooting
depth are the depth of the soil profile and the Days After Sowing
(DAS). Plant growth, environmental conditions and soil hospitality for
root growth play no part in the root development. This was a legacy of
the OZCOT model and was not consistent with the approach used for other
models in APSIM. In order to implement the standardised APSIM
approaches for soil water uptake and root development which utilise the
"kl" extraction factors and "xf" soil constraint factors for each soil
layer, the cotton model required modifications.</p>
      <a href="http://www.apsim.info/Documentation/Model,CropandSoil/Cotton.aspx">Click here for more detail.</a>      

      <h2>New biochar model for APSIM</h2>
      <p>A
biochar model has been developed and incorporated into APSIM by Iowa
State University. This can be found by clicking on "New" in the APSIM
user interface, selectng the Biochar folder and opening the .apsim
file. For more information read: </p>
      <p>Archontoulis,
S.V., Huber, I., Miguez, F.E., Thorburn, P.J., Rogovska, N., Laird,
D.A., 2016. A model for mechanistic and system assessments of biochar
effects on soils and crops and trade-offs. GCB Bioenergy 8,
1028â&#8364;&#8220;1045. doi:10.1111/gcbb.12314</p>
      
      <h2>Changes to command line programs</h2>
      <p>The
syntax of several command line programs has been extended to allow
specification of factorial instances. These instances are additions to
the simulation path argument, of the form</p><p><code>Simulation=/path/to/simulation<i>@factorial=factor1=level1;factor2=level2</i> </code></p>
      <p>The
program Apsim.exe accepts multiple .apsim, .con and .sim filenames, one
optional simulation argument, and optional doAllFactors=(bool), and
MaxOutputLines=(int) arguments. If the simulation arguments first
character is the "@" character, it is interpreted as a filename
containing a list of simulations to perform - one per line.</p>
      <p>The
program ApsimToSim.exe accepts the first argument as an apsim file for
conversion, and one optional simulation argument. It writes the name of
the output file written to standard error.</p>
      <p>The program
ApsimModel.exe accepts the first argument as an .apsim or .sim file,
and one optional simulation argument. If no simulation argument is
given, only the first simulation will be run. The standard output
stream is the summary information of that simulation, which Apsim.exe
usually saves.</p>
      <p>Apsim.exe attempts to convert (via
ApsimToSim) and run (via ApsimModel) simulations in parallel. The
number of parallel instances is determined by the environment variable
NUMBER_OF_PROCESSORS.</p>
      <p>The program BundleApsim.exe creates
a zipfile for submission to remote batch processors such as condor or
PBS. Its default parameters are taken from the GUI's "Run On Cluster"
form. Inside are a .sub file for condor, and a .pbs file for PBS, both
may require hand edits for the local installation.</p>

      <h2>List of all changes and fixed defects</h2>
      <p><a href="http://www.apsim.info/BugTracker/bugs.aspx?qu_id=31">The complete list of changes to APSIM can be found here</a></p>


      <h1>APSIM 7.8 release notes</h1>
      <p>24th March 2016</p>
      <h2>Enhancements and bug fixes to the cotton model</h2>
      <p>Cotton.dll replaces both OZCOT.dll and mvOZCOT.dll and is installed by default.</p>
      <p>Crop stages are now reported by 'stageName'  or  numerically by 'stage'.</p>
      <table>
        <tbody><tr><td>Stage</td><td>Description</td></tr>
        <tr><td>1 = germination  </td><td>period from sowing to emergence</td></tr>
        <tr><td>2 = presquaring  </td><td>emergence to first square</td></tr>
        <tr><td>3 = squaring     </td><td>first square to first flower</td></tr>
        <tr><td>4 = flowering    </td><td>first flower to first open boll</td></tr>
        <tr><td>5 = openbolls    </td><td>first open boll to %OpenBolls marking maturity (default= 60% boll open)</td></tr>
        <tr><td>6 = mature       </td><td>%OpenBolls to end of leaf drop (defoliation period)</td></tr>
        <tr><td>7 = harvest_ripe </td><td>crop defoliated and ready to harvest</td></tr>
      </tbody></table>
      <p>           
        Use of crop stages removes the necessity to monitor 'ozcot_status &gt; 0' to determine when a crop is ready to harvest
        and improves management and reporting flexibility.			
      </p>
      <p>
        Cotton manager scripts now need to explicitly call 'defoliate' as well as 'harvest' and 'end_crop'. E.G.
      </p>
      <code>
         if ('[crop]' = 'cotton') then<br>
         &nbsp;&nbsp;&nbsp;!!  cotton defoliation<br>
         &nbsp;&nbsp;&nbsp;if ([crop].stageName = 'mature'  and  [crop].defol_das = 0) then<br>
         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[crop] defoliate<br>
         &nbsp;&nbsp;&nbsp;endif<br>
          <br>
          &nbsp;&nbsp;&nbsp;!! cotton harvest<br>
          &nbsp;&nbsp;&nbsp;if ([crop].stageName = 'harvest_ripe' or [crop].PlantStatus = 'dead') then<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!!report_harvest do_output<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[crop] harvest<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[crop] end_crop<br>
          &nbsp;&nbsp;&nbsp;endif<br>
         endif<br>
       </code>
       <p>PlantStatus = 'dead'  has been added  as well as a 'kill_crop' event.</p>
       <p>Bug fixes:</p>
       <p>(<a href="http://www.apsim.info/BugTracker/edit_bug.aspx?id=2023">Task 2023</a>) 'ep' plant transpiration matches expected value reported as 'ozcot_rwu' (root water use).</p>
       <p>(<a href="http://www.apsim.info/BugTracker/edit_bug.aspx?id=2025">Task 2025</a>) Max rooting depth of crop limited to value of 'rtdep_max'.</p>
       <p>(<a href="http://www.apsim.info/BugTracker/edit_bug.aspx?id=2026">Task 2026</a>) plant_status = 'dead'  added.</p>
       <p>(<a href="http://www.apsim.info/BugTracker/edit_bug.aspx?id=2074">Task 2074</a>) crop height now estimated from a function based on crop LAI (based on traditional cotton growing regions in Australia).</p>
       <p>(<a href="http://www.apsim.info/BugTracker/edit_bug.aspx?id=4088">Task 4088</a>) surfaceOM_wt_cotton reports dry weight pool from cotton based on crop_type = 'cotton'.</p>
       <p>(<a href="http://www.apsim.info/BugTracker/edit_bug.aspx?id=4095">Task 4095</a>) Above ground biomass reported in Summary file corrected to exclude dry weight of roots.</p>


       <h2>CO2</h2>
       <p>The ownership of CO2 has moved to the Input (Met) module. If no CO2 is specified in the weather file then a 
          value of 350ppm is assumed. If a value is supplied in the weather file then that will replace the default value. 
          The CO2 value in input is settable from other modules e.g. manager script. If CO2 is set from another module then 
          it's value only lasts for the day that it is set. At the beginning of the next day the value is reset to the value 
          in the file or the default value if none was supplied.</p>

       <p>The
result of this change is that CO2 is ALWAYS present in every
simulation. The crop modules check to see if the CO2 value is different
from 350ppm. If it is and the crop doesn't have a CO2 parameterisation,
an error is given to that effect. This is the same behavour as
previously. All values of co2_default have been removed from all crop
XML files.</p>
       
       <h2>Changes to "Run on Cluster" form</h2>
       <p>Cluster
jobs have been rearranged. Instead of running "one simulation per CPU",
the system attempts to run several simulations in parallel, using all
available CPUs on a single machine, significantly reducing the amount
of network traffic for each job. This changes the interpretation of
"number of simulations per job" - as the throughput is now related to
the number of CPU cores as well as their speed. On the toowoomba
cluster, Linux hosts have 8 or 16 CPUs per machine, the Windows hosts
have 12, so simply multiplying the existing number by 12 or 16 should
suffice to keep runtime the same. The general principle is that the
longer a job runs, the higher its throughput - as less time is spent
setting up and tearing down the job. However, longer running jobs have
a higher chance of being interrupted if a higher priority user enters
the queue.</p>
        <p>More detail is in the <a href="http://www.apsim.info/Documentation/TechnicalandDevelopment/RunningJobsOntheAPSRUCluster.aspx#march2016"> online documentation</a>.
        </p>

       <p><a href="http://www.apsim.info/BugTracker/bugs.aspx?qu_id=30">The complete list of changes to APSIM can be found here</a></p>
      <hr>
      <h1>APSIM 7.7 release notes</h1>
   
     <h2>Stability release</h2>
     <p>This release of APSIM fixes many issues found in APSIM 7.6. No major new functionality has been added.
     </p>
     <p><a href="http://www.apsim.info/BugTracker/bugs.aspx?qu_id=29">The complete list of defects fixed can be found here</a>.
     </p>
   
   
      <hr>
      <h1>APSIM 7.6 release notes</h1>
      <p>21st March 2014</p>

     <h2>SWIM 3 included</h2>
     <p>Swim version 2 has been in APSIM for many years, however various elements of it's complex parameterisation 
        have precluded it from incorporation into the GUI. Swim version 3 has been developed from V2. 
        The approach taken in V3 enables SWIM3 to run using properties as provided in the APSoil database.  
     </p>
     <p>This model was meant to be released in APSIM 7.5 but a key .dll file was missing. That has been fixed.</p>

     <h2>New Oil Palm module</h2>
     <p>The APSIM-Oil Palm model simulates the growth, frond development and bunch dynamics of oil palm 
        and the water, carbon and nitrogen cycling within a plantation. The model also provides a 
        simple capability for simulating an understory cover crop.</p>
     
     <h2>New RLink module</h2>
     <p>An RLink module has been added that links the apsim framework to the R dll. 
        The RLink module is a pluggable component that provides users with
        the ability to write R script.</p>

     <h2>Defects fixed for non-admin users</h2>
     <p>When APSIM 7.5 was run on a computer where the user didn't have administrative privileges,
        the user interface would produce errors when toolboxes were selected. This has
        now been fixed.</p>

     <h2>Changed "Run on Cluster" form</h2>
     <p>The Apsim JV computing cluster has been upgraded and several things have changed.
</p><ul><li>The pool is accessible via the internet
</li><li>The condor version is now 8.0.6.
</li><li>There are now 64 bit Linux and Windows execute nodes in the pool (it was all 32bit windows).
</li></ul> To use it, open the ApsimUI to submit a job via the "run on
cluster" button. Enter your username/password. Later on, open
ftp://&lt;username&gt;:&lt;password&gt;@apsrunet.apsim.info: and look
for an .out.zip file.
<p></p><p>
More detail is <a href="http://www.apsim.info/Documentation/TechnicalandDevelopment/RunningJobsOntheAPSRUCluster.aspx#march2014"> in the documentation</a>.
</p>

     <h2>Changes to "user_defined" tillage</h2>
	  <p>The SurfaceOM and Soilwat modules treat arguments to the tillage event slightly differently. Both modules
	    accept an optional "type" parameter that can be used as a key in a lookup table of tillage parameters. To now, 
	    if this key was defined and had an entry in the table, then the optional parameters (f_incorp, cn_red etc)
	    were used as overides if they were defined. Using structures in these events instead of 
	    ApsimVariants loses the ability to define optional parameters. So now, if the key is defined, it must 
	    specify a valid section in the table, or the special key "user_defined" which will skip reading the table, and 
	    the module will use whatever parameters the user specifies. Any parameter that isnt defined it is either zero 
	    or blank.</p>
	  <p>.NET and CI2 modules that use structures (cf. ApsimVariant) to pass the message have no way to specify
	    optional parameters, and are unaffected.
	  </p>
      
      <h2>Improvements to user interface factorials</h2>
      <p>Factorials in APSIM 7.6 are now more flexible. A list of weather files or station numbers can 
      now be provided in a grid, making it easier to specify a large number of files or numbers. 
      In addition, Initial Water components can be part of a factorial. Numerous 
      defects have also been fixed.      
      </p>

     <h3><a href="http://www.apsim.info/BugTracker/bugs.aspx?qu_id=28">The complete list of defects fixed can be found here</a></h3>
   </body></html>