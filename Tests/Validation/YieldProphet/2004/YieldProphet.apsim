<folder version="15" name="Simulations">
  <simulation name="Paddock1">
    <clock name="Clock" />
    <metfile name="met">
      <filename>79075.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">A and R Weidemann^Wep 1.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">06-Jun</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">06-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">11</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('06-Jun')
StationNumber=79075
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">30-Jul</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">38</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^A and R Weidemann^Wep 1</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.174</bd>
            <ll15>0.250</ll15>
            <airdry>0.125</airdry>
            <dul>0.426</dul>
            <sat>0.527</sat>
            <swcon>0.700</swcon>
            <oc>1.365</oc>
            <ph>8.200</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.175</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.174</bd>
            <ll15>0.253</ll15>
            <airdry>0.202</airdry>
            <dul>0.407</dul>
            <sat>0.527</sat>
            <swcon>0.300</swcon>
            <oc>0.585</oc>
            <ph>8.500</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.253</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.174</bd>
            <ll15>0.253</ll15>
            <airdry>0.253</airdry>
            <dul>0.407</dul>
            <sat>0.527</sat>
            <swcon>0.300</swcon>
            <oc>0.585</oc>
            <ph>8.500</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.253</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.136</bd>
            <ll15>0.277</ll15>
            <airdry>0.277</airdry>
            <dul>0.428</dul>
            <sat>0.541</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>9</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.277</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.424</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.136</bd>
            <ll15>0.277</ll15>
            <airdry>0.277</airdry>
            <dul>0.428</dul>
            <sat>0.541</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>9</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.277</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.424</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.187</bd>
            <ll15>0.305</ll15>
            <airdry>0.305</airdry>
            <dul>0.466</dul>
            <sat>0.522</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>9.200</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.305</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.198</bd>
            <ll15>0.337</ll15>
            <airdry>0.337</airdry>
            <dul>0.447</dul>
            <sat>0.518</sat>
            <swcon>0.300</swcon>
            <oc>0.325</oc>
            <ph>8.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.337</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.204</bd>
            <ll15>0.390</ll15>
            <airdry>0.390</airdry>
            <dul>0.466</dul>
            <sat>0.516</sat>
            <swcon>0.300</swcon>
            <oc>0.325</oc>
            <ph>8.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.390</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">1</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>40</DiffusConst>
        <DiffusSlope>16</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.17</sw>
              <no3>14</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.25</sw>
              <no3>6</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.31</sw>
              <no3>6</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.33</sw>
              <no3>4</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <ph>7.6</ph>
              <ec>0.2</ec>
              <esp>1.69749</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.8</ph>
              <ec>0.3</ec>
              <esp>5.24898</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8</ph>
              <ec>0.4</ec>
              <esp>10.5257</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.3</ph>
              <ec>0.6</ec>
              <esp>14.272</esp>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock2">
    <clock name="Clock" />
    <metfile name="met">
      <filename>53115.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Andrew Hansen^Willow Dam.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">12-May</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">09-Jun</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Bellaroi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">09-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">69</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('12-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('09-Jun')
StationNumber=53115
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">30-Aug</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">35</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Andrew Hansen^Willow Dam</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>150</thickness>
            <bd>1.140</bd>
            <ll15>0.272</ll15>
            <airdry>0.136</airdry>
            <dul>0.505</dul>
            <sat>0.555</sat>
            <swcon>0.300</swcon>
            <oc>1.56</oc>
            <ph>7.500</ph>
            <fbiom>0.020</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.272</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.100</bd>
            <ll15>0.272</ll15>
            <airdry>0.218</airdry>
            <dul>0.505</dul>
            <sat>0.555</sat>
            <swcon>0.300</swcon>
            <oc>1.04</oc>
            <ph>7.600</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.272</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.120</bd>
            <ll15>0.297</ll15>
            <airdry>0.297</airdry>
            <dul>0.496</dul>
            <sat>0.546</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7.750</ph>
            <fbiom>0.010</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.297</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.160</bd>
            <ll15>0.284</ll15>
            <airdry>0.284</airdry>
            <dul>0.483</dul>
            <sat>0.533</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>7.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.284</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.210</bd>
            <ll15>0.315</ll15>
            <airdry>0.315</airdry>
            <dul>0.462</dul>
            <sat>0.512</sat>
            <swcon>0.300</swcon>
            <oc>0.26</oc>
            <ph>8</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.315</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.250</bd>
            <ll15>0.345</ll15>
            <airdry>0.345</airdry>
            <dul>0.449</dul>
            <sat>0.499</sat>
            <swcon>0.300</swcon>
            <oc>0.13</oc>
            <ph>8</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.345</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.280</bd>
            <ll15>0.398</ll15>
            <airdry>0.398</airdry>
            <dul>0.436</dul>
            <sat>0.486</sat>
            <swcon>0.300</swcon>
            <oc>0.13</oc>
            <ph>8.200</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.398</ll>
            <kl name="wheat">0.010</kl>
            <xf name="wheat">1</xf>
          </layer>
        </profile>
        <Cona>3.5</Cona>
        <DiffusConst>40</DiffusConst>
        <DiffusSlope>16</DiffusSlope>
        <U>6</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>40</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>150</thickness>
              <sw>0.49</sw>
              <no3>42</no3>
            </layer>
            <layer>
              <thickness>150</thickness>
              <sw>0.51</sw>
              <no3>8</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.5</sw>
              <no3>8</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.48</sw>
              <no3>4</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.41</sw>
              <no3>1</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.4</sw>
              <no3>1</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.34</sw>
              <no3>0</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>150</thickness>
              <ph>7.5</ph>
              <ec>0.4</ec>
            </layer>
            <layer>
              <thickness>150</thickness>
              <ph>7.8</ph>
              <ec>0.3</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.1</ph>
              <ec>0.4</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.2</ph>
              <ec>0.6</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.1</ph>
              <ec>0.7</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.2</ph>
              <ec>0.7</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.2</ph>
              <ec>0.7</ec>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock3">
    <clock name="Clock" />
    <metfile name="met">
      <filename>53018.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Angus Wilson^Wisemans.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">12-May</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">19-May</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Babbler</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">08-Feb</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">55</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('12-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('19-May')
StationNumber=53018
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">18-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">4.5</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Angus Wilson^Wisemans</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>150</thickness>
            <bd>1.330</bd>
            <ll15>0.221</ll15>
            <airdry>0.111</airdry>
            <dul>0.429</dul>
            <sat>0.479</sat>
            <swcon>0.300</swcon>
            <oc>1.56</oc>
            <ph>7.500</ph>
            <fbiom>0.020</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.221</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.300</bd>
            <ll15>0.223</ll15>
            <airdry>0.178</airdry>
            <dul>0.429</dul>
            <sat>0.479</sat>
            <swcon>0.300</swcon>
            <oc>1.04</oc>
            <ph>7.600</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.223</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.320</bd>
            <ll15>0.240</ll15>
            <airdry>0.240</airdry>
            <dul>0.422</dul>
            <sat>0.472</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7.750</ph>
            <fbiom>0.010</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.240</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.350</bd>
            <ll15>0.253</ll15>
            <airdry>0.253</airdry>
            <dul>0.410</dul>
            <sat>0.460</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>7.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.253</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.370</bd>
            <ll15>0.290</ll15>
            <airdry>0.290</airdry>
            <dul>0.404</dul>
            <sat>0.454</sat>
            <swcon>0.300</swcon>
            <oc>0.26</oc>
            <ph>8</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.290</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.380</bd>
            <ll15>0.323</ll15>
            <airdry>0.323</airdry>
            <dul>0.400</dul>
            <sat>0.450</sat>
            <swcon>0.300</swcon>
            <oc>0.13</oc>
            <ph>8</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.323</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.380</bd>
            <ll15>0.384</ll15>
            <airdry>0.384</airdry>
            <dul>0.401</dul>
            <sat>0.451</sat>
            <swcon>0.300</swcon>
            <oc>0.13</oc>
            <ph>8.200</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.384</ll>
            <kl name="wheat">0.010</kl>
            <xf name="wheat">1</xf>
          </layer>
        </profile>
        <Cona>3.5</Cona>
        <DiffusConst>40</DiffusConst>
        <DiffusSlope>16</DiffusSlope>
        <U>6</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>40</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>150</thickness>
              <sw>0.42</sw>
              <no3>12</no3>
            </layer>
            <layer>
              <thickness>150</thickness>
              <sw>0.43</sw>
              <no3>10</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.42</sw>
              <no3>8</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.41</sw>
              <no3>12</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.37</sw>
              <no3>9</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.38</sw>
              <no3>8</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.4</sw>
              <no3>9</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>150</thickness>
              <oc>0.3</oc>
              <ph>7.5</ph>
              <ec>0.3</ec>
            </layer>
            <layer>
              <thickness>150</thickness>
              <ph>7.8</ph>
              <ec>0.3</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.1</ph>
              <ec>0.4</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.2</ph>
              <ec>0.5</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.1</ph>
              <ec>0.8</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.7</ph>
              <ec>1.1</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>6.7</ph>
              <ec>1.1</ec>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock4">
    <clock name="Clock" />
    <metfile name="met">
      <filename>78072.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Anthony Patton^House.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">21-Jun</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Lorikeet</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">21-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">30</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('21-Jun')
StationNumber=78072
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Anthony Patton^House</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.173</bd>
            <ll15>0.200</ll15>
            <airdry>0.120</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>1.3</oc>
            <ph>7</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.200</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.231</bd>
            <ll15>0.190</ll15>
            <airdry>0.170</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.190</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.231</bd>
            <ll15>0.200</ll15>
            <airdry>0.200</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.700</finert>
            <ll name="wheat">0.200</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.175</bd>
            <ll15>0.240</ll15>
            <airdry>0.240</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.240</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.960</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.175</bd>
            <ll15>0.270</ll15>
            <airdry>0.270</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.850</finert>
            <ll name="wheat">0.270</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.917</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.201</bd>
            <ll15>0.280</ll15>
            <airdry>0.280</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.280</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.809</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.252</bd>
            <ll15>0.321</ll15>
            <airdry>0.321</airdry>
            <dul>0.400</dul>
            <sat>0.480</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.321</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.791</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.278</bd>
            <ll15>0.332</ll15>
            <airdry>0.332</airdry>
            <dul>0.400</dul>
            <sat>0.480</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.332</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.679</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>40</DiffusConst>
        <DiffusSlope>16</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.13</sw>
              <no3>12</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.19</sw>
              <no3>6</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.27</sw>
              <no3>8</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.29</sw>
              <no3>7</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <ph>7.8</ph>
              <ec>0.3</ec>
              <esp>1.44367</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.8</ph>
              <ec>0.2</ec>
              <esp>4.54171</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.1</ph>
              <ec>0.3</ec>
              <esp>9.72894</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.1</ph>
              <ec>0.6</ec>
              <esp>14.6643</esp>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock5">
    <clock name="Clock" />
    <metfile name="met">
      <filename>78005.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Brad Martin^P13.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">07-May</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">07-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">5</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('07-May')
StationNumber=78005
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">02-Aug</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">22</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Brad Martin^P13</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.450</bd>
            <ll15>0.140</ll15>
            <airdry>0.075</airdry>
            <dul>0.334</dul>
            <sat>0.414</sat>
            <swcon>0.700</swcon>
            <oc>1.365</oc>
            <ph>8.500</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.125</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.260</bd>
            <ll15>0.152</ll15>
            <airdry>0.122</airdry>
            <dul>0.341</dul>
            <sat>0.421</sat>
            <swcon>0.300</swcon>
            <oc>0.585</oc>
            <ph>8.800</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.152</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.260</bd>
            <ll15>0.152</ll15>
            <airdry>0.152</airdry>
            <dul>0.341</dul>
            <sat>0.421</sat>
            <swcon>0.300</swcon>
            <oc>0.585</oc>
            <ph>8.800</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.152</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.281</bd>
            <ll15>0.165</ll15>
            <airdry>0.165</airdry>
            <dul>0.352</dul>
            <sat>0.432</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>8.900</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.165</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.355</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.281</bd>
            <ll15>0.165</ll15>
            <airdry>0.165</airdry>
            <dul>0.350</dul>
            <sat>0.430</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>8.900</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.165</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.355</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.243</bd>
            <ll15>0.271</ll15>
            <airdry>0.271</airdry>
            <dul>0.351</dul>
            <sat>0.431</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>8.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.271</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.323</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.242</bd>
            <ll15>0.271</ll15>
            <airdry>0.271</airdry>
            <dul>0.350</dul>
            <sat>0.430</sat>
            <swcon>0.300</swcon>
            <oc>0.325</oc>
            <ph>8.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.271</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.323</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.338</bd>
            <ll15>0.316</ll15>
            <airdry>0.316</airdry>
            <dul>0.344</dul>
            <sat>0.424</sat>
            <swcon>0.300</swcon>
            <oc>0.325</oc>
            <ph>8.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.316</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.323</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>88</DiffusConst>
        <DiffusSlope>35.4</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.07</sw>
              <no3>14</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.17</sw>
              <no3>6</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.2</sw>
              <no3>3</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.21</sw>
              <no3>2</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <ph>7.2</ph>
              <ec>0.2</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.9</ph>
              <ec>0.46</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.2</ph>
              <ec>0.5</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.2</ph>
              <ec>0.63</ec>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock6">
    <clock name="Clock" />
    <metfile name="met">
      <filename>77052.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">C and J Kelly ^Galvins.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">10-Jun</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">10-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">4</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('10-Jun')
StationNumber=77052
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^C and J Kelly ^Galvins</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.490</bd>
            <ll15>0.190</ll15>
            <airdry>0.095</airdry>
            <dul>0.219</dul>
            <sat>0.353</sat>
            <swcon>0.700</swcon>
            <oc>1.365</oc>
            <ph>8.500</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.145</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.446</bd>
            <ll15>0.190</ll15>
            <airdry>0.152</airdry>
            <dul>0.227</dul>
            <sat>0.361</sat>
            <swcon>0.300</swcon>
            <oc>0.585</oc>
            <ph>9.200</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.190</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.446</bd>
            <ll15>0.190</ll15>
            <airdry>0.190</airdry>
            <dul>0.227</dul>
            <sat>0.361</sat>
            <swcon>0.300</swcon>
            <oc>0.585</oc>
            <ph>9.200</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.190</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.388</bd>
            <ll15>0.190</ll15>
            <airdry>0.190</airdry>
            <dul>0.244</dul>
            <sat>0.377</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>9.700</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.190</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.434</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.388</bd>
            <ll15>0.190</ll15>
            <airdry>0.190</airdry>
            <dul>0.244</dul>
            <sat>0.377</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>9.600</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.190</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.387</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.476</bd>
            <ll15>0.190</ll15>
            <airdry>0.190</airdry>
            <dul>0.257</dul>
            <sat>0.378</sat>
            <swcon>0.300</swcon>
            <oc>0.325</oc>
            <ph>8.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.190</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.387</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.556</bd>
            <ll15>0.205</ll15>
            <airdry>0.205</airdry>
            <dul>0.259</dul>
            <sat>0.375</sat>
            <swcon>0.300</swcon>
            <oc>0.325</oc>
            <ph>8.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.205</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.387</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.562</bd>
            <ll15>0.240</ll15>
            <airdry>0.240</airdry>
            <dul>0.269</dul>
            <sat>0.367</sat>
            <swcon>0.300</swcon>
            <oc>0.325</oc>
            <ph>8.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.240</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.387</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>220</DiffusConst>
        <DiffusSlope>22</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.05</sw>
              <no3>9</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.12</sw>
              <no3>9</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.26</sw>
              <no3>5</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.3</sw>
              <no3>2</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <ph>7.8</ph>
              <ec>0.1</ec>
              <esp>1.15485</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8</ph>
              <ec>0.2</ec>
              <esp>4.12615</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.2</ph>
              <ec>0.5</ec>
              <esp>14.0815</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.2</ph>
              <ec>0.7</ec>
              <esp>18.7205</esp>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock7">
    <clock name="Clock" />
    <metfile name="met">
      <filename>77014.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Cameron Warne^Arnolds W2.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">03-Jun</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">03-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('03-Jun')
StationNumber=77014
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">13-Aug</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">23</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Cameron Warne^Arnolds W2</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.360</bd>
            <ll15>0.150</ll15>
            <airdry>0.075</airdry>
            <dul>0.334</dul>
            <sat>0.487</sat>
            <swcon>0.700</swcon>
            <oc>1.365</oc>
            <ph>8.500</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.125</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.293</bd>
            <ll15>0.192</ll15>
            <airdry>0.154</airdry>
            <dul>0.341</dul>
            <sat>0.512</sat>
            <swcon>0.300</swcon>
            <oc>0.585</oc>
            <ph>8.900</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.192</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.293</bd>
            <ll15>0.192</ll15>
            <airdry>0.192</airdry>
            <dul>0.341</dul>
            <sat>0.512</sat>
            <swcon>0.300</swcon>
            <oc>0.585</oc>
            <ph>8.900</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.192</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.374</bd>
            <ll15>0.217</ll15>
            <airdry>0.217</airdry>
            <dul>0.352</dul>
            <sat>0.482</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>9.100</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.217</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.374</bd>
            <ll15>0.217</ll15>
            <airdry>0.217</airdry>
            <dul>0.350</dul>
            <sat>0.482</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>9.100</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.217</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.412</bd>
            <ll15>0.217</ll15>
            <airdry>0.217</airdry>
            <dul>0.351</dul>
            <sat>0.467</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>5.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.217</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.423</bd>
            <ll15>0.217</ll15>
            <airdry>0.217</airdry>
            <dul>0.350</dul>
            <sat>0.463</sat>
            <swcon>0.300</swcon>
            <oc>0.325</oc>
            <ph>8.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.217</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.455</bd>
            <ll15>0.228</ll15>
            <airdry>0.228</airdry>
            <dul>0.344</dul>
            <sat>0.451</sat>
            <swcon>0.300</swcon>
            <oc>0.325</oc>
            <ph>8.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.228</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">1</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>88</DiffusConst>
        <DiffusSlope>35.4</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.05</sw>
              <no3>9</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.17</sw>
              <no3>5</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.25</sw>
              <no3>5</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.26</sw>
              <no3>3</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <ph>8</ph>
              <ec>0.15</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.2</ph>
              <ec>0.2</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.5</ph>
              <ec>0.46</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.6</ph>
              <ec>0.61</ec>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock8">
    <clock name="Clock" />
    <metfile name="met">
      <filename>8051.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Clancy Michael^Michael.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">15-Jun</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">23-May</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Annuello</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">26-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">10</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('15-Jun')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('23-May')
StationNumber=8051
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">17-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">46.2000007629395</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Clancy Michael^Michael</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>150</thickness>
            <bd>1.600</bd>
            <ll15>0.080</ll15>
            <airdry>0.040</airdry>
            <dul>0.250</dul>
            <sat>0.370</sat>
            <swcon>0.700</swcon>
            <oc>1.079</oc>
            <ph>6.500</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.080</ll>
            <kl name="wheat">0.080</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.640</bd>
            <ll15>0.080</ll15>
            <airdry>0.072</airdry>
            <dul>0.300</dul>
            <sat>0.350</sat>
            <swcon>0.700</swcon>
            <oc>0.728</oc>
            <ph>7</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.080</ll>
            <kl name="wheat">0.080</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.540</bd>
            <ll15>0.130</ll15>
            <airdry>0.130</airdry>
            <dul>0.340</dul>
            <sat>0.390</sat>
            <swcon>0.700</swcon>
            <oc>0.455</oc>
            <ph>7.700</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.130</ll>
            <kl name="wheat">0.080</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.650</bd>
            <ll15>0.140</ll15>
            <airdry>0.140</airdry>
            <dul>0.300</dul>
            <sat>0.350</sat>
            <swcon>0.700</swcon>
            <oc>0.312</oc>
            <ph>8.400</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.140</ll>
            <kl name="wheat">0.080</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.690</bd>
            <ll15>0.200</ll15>
            <airdry>0.200</airdry>
            <dul>0.280</dul>
            <sat>0.330</sat>
            <swcon>0.700</swcon>
            <oc>0.234</oc>
            <ph>8.700</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.200</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.650</bd>
            <ll15>0.210</ll15>
            <airdry>0.210</airdry>
            <dul>0.300</dul>
            <sat>0.350</sat>
            <swcon>0.700</swcon>
            <oc>0.182</oc>
            <ph>8.700</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.210</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.640</bd>
            <ll15>0.220</ll15>
            <airdry>0.220</airdry>
            <dul>0.300</dul>
            <sat>0.350</sat>
            <swcon>0.700</swcon>
            <oc>0.169</oc>
            <ph>8.700</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.220</ll>
            <kl name="wheat">0.030</kl>
            <xf name="wheat">1</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>88</DiffusConst>
        <DiffusSlope>35</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.15</sw>
              <no3>31</no3>
              <nh4>0.01</nh4>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.1</sw>
              <no3>10</no3>
              <nh4>0.01</nh4>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.1</sw>
              <no3>3</no3>
              <nh4>0.01</nh4>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.17</sw>
              <no3>3</no3>
              <nh4>0.01</nh4>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.21</sw>
              <no3>1</no3>
              <nh4>0.01</nh4>
            </layer>
            <layer>
              <thickness>500</thickness>
              <sw>0.22</sw>
              <no3>1</no3>
              <nh4>0.01</nh4>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <ph>5.9</ph>
              <ec>0.1</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>6.2</ph>
              <ec>0.1</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.1</ph>
              <ec>0.2</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.3</ph>
              <ec>0.3</ec>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock9">
    <clock name="Clock" />
    <metfile name="met">
      <filename>77008.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">David Smith^Paddock 1.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">31-May</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">11-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">14</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('31-May')
StationNumber=77008
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">31-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">4</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^David Smith^Paddock 1</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.360</bd>
            <ll15>0.123</ll15>
            <airdry>0.073</airdry>
            <dul>0.334</dul>
            <sat>0.487</sat>
            <swcon>0.300</swcon>
            <oc>1.3</oc>
            <ph>7</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.123</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.293</bd>
            <ll15>0.172</ll15>
            <airdry>0.146</airdry>
            <dul>0.341</dul>
            <sat>0.512</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.172</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">0.912</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.293</bd>
            <ll15>0.173</ll15>
            <airdry>0.165</airdry>
            <dul>0.341</dul>
            <sat>0.512</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.700</finert>
            <ll name="wheat">0.173</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.912</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.374</bd>
            <ll15>0.206</ll15>
            <airdry>0.206</airdry>
            <dul>0.352</dul>
            <sat>0.482</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.206</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.671</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.374</bd>
            <ll15>0.210</ll15>
            <airdry>0.210</airdry>
            <dul>0.350</dul>
            <sat>0.482</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.850</finert>
            <ll name="wheat">0.210</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.671</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.412</bd>
            <ll15>0.238</ll15>
            <airdry>0.238</airdry>
            <dul>0.351</dul>
            <sat>0.467</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.238</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.484</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.423</bd>
            <ll15>0.249</ll15>
            <airdry>0.249</airdry>
            <dul>0.350</dul>
            <sat>0.463</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.249</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.486</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.455</bd>
            <ll15>0.276</ll15>
            <airdry>0.276</airdry>
            <dul>0.344</dul>
            <sat>0.451</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.276</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.382</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>88</DiffusConst>
        <DiffusSlope>35.4</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.09</sw>
              <no3>9</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.15</sw>
              <no3>4</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.21</sw>
              <no3>3</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.25</sw>
              <no3>3</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <ph>7.7</ph>
              <ec>0.3</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.2</ph>
              <ec>0.5</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.5</ph>
              <ec>1</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.6</ph>
              <ec>1.4</ec>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock10">
    <clock name="Clock" />
    <metfile name="met">
      <filename>80024.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">G and B Hunt^Paddock 4.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">19-Apr</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">13-May</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">13-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">3.90000009536743</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('19-Apr')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('13-May')
StationNumber=80024
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^G and B Hunt^Paddock 4</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.400</bd>
            <ll15>0.220</ll15>
            <airdry>0.110</airdry>
            <dul>0.304</dul>
            <sat>0.442</sat>
            <swcon>0.700</swcon>
            <oc>1.365</oc>
            <ph>8.200</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.160</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.370</bd>
            <ll15>0.221</ll15>
            <airdry>0.177</airdry>
            <dul>0.310</dul>
            <sat>0.453</sat>
            <swcon>0.300</swcon>
            <oc>0.585</oc>
            <ph>8.600</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.221</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.370</bd>
            <ll15>0.221</ll15>
            <airdry>0.221</airdry>
            <dul>0.310</dul>
            <sat>0.453</sat>
            <swcon>0.300</swcon>
            <oc>0.585</oc>
            <ph>8.600</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.221</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.530</bd>
            <ll15>0.209</ll15>
            <airdry>0.209</airdry>
            <dul>0.310</dul>
            <sat>0.393</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>9.500</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.209</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.434</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.530</bd>
            <ll15>0.209</ll15>
            <airdry>0.209</airdry>
            <dul>0.310</dul>
            <sat>0.393</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>9.500</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.209</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.434</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.572</bd>
            <ll15>0.196</ll15>
            <airdry>0.196</airdry>
            <dul>0.327</dul>
            <sat>0.377</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>9.800</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.196</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.371</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.586</bd>
            <ll15>0.196</ll15>
            <airdry>0.196</airdry>
            <dul>0.322</dul>
            <sat>0.372</sat>
            <swcon>0.300</swcon>
            <oc>0.325</oc>
            <ph>8.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.196</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.371</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.586</bd>
            <ll15>0.196</ll15>
            <airdry>0.196</airdry>
            <dul>0.322</dul>
            <sat>0.372</sat>
            <swcon>0.300</swcon>
            <oc>0.325</oc>
            <ph>8.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.196</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.371</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>88</DiffusConst>
        <DiffusSlope>35.4</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.07</sw>
              <no3>28</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.16</sw>
              <no3>8</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.26</sw>
              <no3>4</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.25</sw>
              <no3>4</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <oc>1.2</oc>
              <ph>7.5</ph>
              <ec>0.2</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.9</ph>
              <ec>0.2</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.1</ph>
              <ec>0.5</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.3</ph>
              <ec>0.8</ec>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock11">
    <clock name="Clock" />
    <metfile name="met">
      <filename>80006.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Gavin Sait^Mahers.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">15-May</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Lorikeet</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">15-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">23.5</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('15-May')
StationNumber=80006
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">01-Sep</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">9.39999961853027</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Gavin Sait^Mahers</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.350</bd>
            <ll15>0.120</ll15>
            <airdry>0.070</airdry>
            <dul>0.300</dul>
            <sat>0.491</sat>
            <swcon>0.700</swcon>
            <oc>1.3</oc>
            <ph>7</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.120</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.369</bd>
            <ll15>0.130</ll15>
            <airdry>0.111</airdry>
            <dul>0.330</dul>
            <sat>0.483</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.130</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.369</bd>
            <ll15>0.140</ll15>
            <airdry>0.140</airdry>
            <dul>0.370</dul>
            <sat>0.483</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.700</finert>
            <ll name="wheat">0.140</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.383</bd>
            <ll15>0.150</ll15>
            <airdry>0.150</airdry>
            <dul>0.370</dul>
            <sat>0.478</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.150</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.893</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.383</bd>
            <ll15>0.250</ll15>
            <airdry>0.250</airdry>
            <dul>0.370</dul>
            <sat>0.478</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.850</finert>
            <ll name="wheat">0.250</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.893</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.375</bd>
            <ll15>0.270</ll15>
            <airdry>0.270</airdry>
            <dul>0.370</dul>
            <sat>0.481</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.270</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.865</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.384</bd>
            <ll15>0.270</ll15>
            <airdry>0.270</airdry>
            <dul>0.370</dul>
            <sat>0.478</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.270</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.865</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.391</bd>
            <ll15>0.342</ll15>
            <airdry>0.342</airdry>
            <dul>0.370</dul>
            <sat>0.475</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.342</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.828</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>88</DiffusConst>
        <DiffusSlope>35.4</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>84</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.07</sw>
              <no3>14</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.11</sw>
              <no3>3</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.23</sw>
              <no3>2</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.26</sw>
              <no3>4</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <ph>6.3</ph>
              <ec>0.1</ec>
              <esp>1.80817</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.3</ph>
              <ec>0.2</ec>
              <esp>3.58578</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.9</ph>
              <ec>0.3</ec>
              <esp>8.24977</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.3</ph>
              <ec>0.4</ec>
              <esp>10.7312</esp>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock12">
    <clock name="Clock" />
    <metfile name="met">
      <filename>89032.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Graeme McCrow^WSM pdk.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">24-Jun</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">20-May</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Kelallac</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">20-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">10</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('24-Jun')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('20-May')
StationNumber=89032
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">15-Jul</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">30</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise2">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">13-Sep</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">23</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Graeme McCrow^WSM pdk</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.300</bd>
            <ll15>0.193</ll15>
            <airdry>0.096</airdry>
            <dul>0.377</dul>
            <sat>0.450</sat>
            <swcon>0.700</swcon>
            <oc>1.365</oc>
            <ph>6</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.193</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.472</bd>
            <ll15>0.253</ll15>
            <airdry>0.215</airdry>
            <dul>0.390</dul>
            <sat>0.440</sat>
            <swcon>0.300</swcon>
            <oc>0.585</oc>
            <ph>6.600</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.253</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.472</bd>
            <ll15>0.236</ll15>
            <airdry>0.225</airdry>
            <dul>0.393</dul>
            <sat>0.440</sat>
            <swcon>0.300</swcon>
            <oc>0.585</oc>
            <ph>6.600</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.236</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.500</bd>
            <ll15>0.273</ll15>
            <airdry>0.273</airdry>
            <dul>0.410</dul>
            <sat>0.433</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>7.300</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.273</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.450</bd>
            <ll15>0.273</ll15>
            <airdry>0.273</airdry>
            <dul>0.420</dul>
            <sat>0.450</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>7.300</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.273</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.400</bd>
            <ll15>0.306</ll15>
            <airdry>0.306</airdry>
            <dul>0.432</dul>
            <sat>0.470</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>9</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.306</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.400</bd>
            <ll15>0.340</ll15>
            <airdry>0.340</airdry>
            <dul>0.432</dul>
            <sat>0.470</sat>
            <swcon>0.300</swcon>
            <oc>0.325</oc>
            <ph>9</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.340</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.400</bd>
            <ll15>0.380</ll15>
            <airdry>0.380</airdry>
            <dul>0.432</dul>
            <sat>0.470</sat>
            <swcon>0.300</swcon>
            <oc>0.325</oc>
            <ph>9</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.380</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">1</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>88</DiffusConst>
        <DiffusSlope>35.4</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.3</sw>
              <no3>30</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.23</sw>
              <no3>11</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.29</sw>
              <no3>3</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.31</sw>
              <no3>2</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <ph>5.6</ph>
              <ec>0.2</ec>
              <esp>4.2</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>5.5</ph>
              <ec>0</ec>
              <esp>8.2</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>5.9</ph>
              <ec>0.1</ec>
              <esp>16.1</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.8</ph>
              <ec>0.3</ec>
              <esp>20.1</esp>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock13">
    <clock name="Clock" />
    <metfile name="met">
      <filename>78072.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Harold Flett^Evans 7.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">16-Jun</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Mitre</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">08-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">34.5</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('16-Jun')
StationNumber=78072
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">16-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">5.5</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Harold Flett^Evans 7</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.173</bd>
            <ll15>0.200</ll15>
            <airdry>0.120</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>1.3</oc>
            <ph>7</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.200</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.231</bd>
            <ll15>0.190</ll15>
            <airdry>0.170</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.190</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.231</bd>
            <ll15>0.200</ll15>
            <airdry>0.200</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.700</finert>
            <ll name="wheat">0.200</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.175</bd>
            <ll15>0.240</ll15>
            <airdry>0.240</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.240</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.960</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.175</bd>
            <ll15>0.270</ll15>
            <airdry>0.270</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.850</finert>
            <ll name="wheat">0.270</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.917</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.201</bd>
            <ll15>0.280</ll15>
            <airdry>0.280</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.280</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.809</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.252</bd>
            <ll15>0.321</ll15>
            <airdry>0.321</airdry>
            <dul>0.400</dul>
            <sat>0.480</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.321</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.791</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.278</bd>
            <ll15>0.332</ll15>
            <airdry>0.332</airdry>
            <dul>0.400</dul>
            <sat>0.480</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.332</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.679</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>40</DiffusConst>
        <DiffusSlope>16</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.12</sw>
              <no3>10</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.19</sw>
              <no3>4</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.23</sw>
              <no3>3</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.28</sw>
              <no3>3</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <ph>7.6</ph>
              <ec>0.2</ec>
              <esp>2.35393</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.8</ph>
              <ec>0.2</ec>
              <esp>5.49994</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.1</ph>
              <ec>0.3</ec>
              <esp>11.1511</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.2</ph>
              <ec>1</ec>
              <esp>15.7518</esp>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock14">
    <clock name="Clock" />
    <metfile name="met">
      <filename>21015.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">hart^Hart APSIM Site.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">15-Jun</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">15-Jun</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">06-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">11</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('15-Jun')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('15-Jun')
StationNumber=21015
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^hart^Hart APSIM Site</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.200</bd>
            <ll15>0.050</ll15>
            <airdry>0.030</airdry>
            <dul>0.350</dul>
            <sat>0.400</sat>
            <swcon>0.300</swcon>
            <oc>1.755</oc>
            <ph>8.200</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.050</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.400</bd>
            <ll15>0.070</ll15>
            <airdry>0.050</airdry>
            <dul>0.320</dul>
            <sat>0.380</sat>
            <swcon>0.300</swcon>
            <oc>0.845</oc>
            <ph>9</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.070</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.400</bd>
            <ll15>0.090</ll15>
            <airdry>0.070</airdry>
            <dul>0.320</dul>
            <sat>0.380</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>9</ph>
            <fbiom>0.015</fbiom>
            <finert>0.700</finert>
            <ll name="wheat">0.090</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.380</bd>
            <ll15>0.090</ll15>
            <airdry>0.090</airdry>
            <dul>0.300</dul>
            <sat>0.350</sat>
            <swcon>0.300</swcon>
            <oc>0.52</oc>
            <ph>9.300</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.090</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.360</bd>
            <ll15>0.090</ll15>
            <airdry>0.090</airdry>
            <dul>0.280</dul>
            <sat>0.320</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>9.300</ph>
            <fbiom>0.010</fbiom>
            <finert>0.850</finert>
            <ll name="wheat">0.090</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.330</bd>
            <ll15>0.090</ll15>
            <airdry>0.090</airdry>
            <dul>0.280</dul>
            <sat>0.320</sat>
            <swcon>0.300</swcon>
            <oc>0.26</oc>
            <ph>9.600</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.090</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.330</bd>
            <ll15>0.110</ll15>
            <airdry>0.090</airdry>
            <dul>0.280</dul>
            <sat>0.320</sat>
            <swcon>0.300</swcon>
            <oc>0.26</oc>
            <ph>9.600</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.110</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">1</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>88</DiffusConst>
        <DiffusSlope>35.4</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.13</sw>
              <no3>19</no3>
              <nh4>4</nh4>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.14</sw>
              <no3>2</no3>
              <nh4>2</nh4>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.15</sw>
              <no3>2</no3>
              <nh4>2</nh4>
            </layer>
            <layer>
              <thickness>200</thickness>
              <sw>0.15</sw>
              <no3>2</no3>
              <nh4>1</nh4>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <oc>1.4</oc>
              <ph>7.4</ph>
              <ec>0.2</ec>
              <esp>2.1</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.9</ph>
              <ec>0.2</ec>
              <esp>5.7</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.9</ph>
              <ec>0.3</ec>
              <esp>13.2</esp>
            </layer>
            <layer>
              <thickness>200</thickness>
              <ph>7.9</ph>
              <ec>0.7</ec>
              <esp>23.7</esp>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock15">
    <clock name="Clock" />
    <metfile name="met">
      <filename>21033.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">hart^Mintaro APSIM Site.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">29-May</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Frame</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">06-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">11</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('29-May')
StationNumber=21033
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^hart^Mintaro APSIM Site</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.300</bd>
            <ll15>0.080</ll15>
            <airdry>0.040</airdry>
            <dul>0.340</dul>
            <sat>0.420</sat>
            <swcon>0.300</swcon>
            <oc>1.729</oc>
            <ph>7</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.080</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.300</bd>
            <ll15>0.140</ll15>
            <airdry>0.119</airdry>
            <dul>0.340</dul>
            <sat>0.420</sat>
            <swcon>0.300</swcon>
            <oc>0.845</oc>
            <ph>7</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.140</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.300</bd>
            <ll15>0.146</ll15>
            <airdry>0.135</airdry>
            <dul>0.340</dul>
            <sat>0.420</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.700</finert>
            <ll name="wheat">0.146</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.300</bd>
            <ll15>0.160</ll15>
            <airdry>0.160</airdry>
            <dul>0.340</dul>
            <sat>0.420</sat>
            <swcon>0.300</swcon>
            <oc>0.52</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.160</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.300</bd>
            <ll15>0.180</ll15>
            <airdry>0.180</airdry>
            <dul>0.340</dul>
            <sat>0.420</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.850</finert>
            <ll name="wheat">0.180</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.300</bd>
            <ll15>0.230</ll15>
            <airdry>0.230</airdry>
            <dul>0.400</dul>
            <sat>0.480</sat>
            <swcon>0.300</swcon>
            <oc>0.26</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.230</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.300</bd>
            <ll15>0.260</ll15>
            <airdry>0.260</airdry>
            <dul>0.400</dul>
            <sat>0.480</sat>
            <swcon>0.300</swcon>
            <oc>0.26</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.260</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">1</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>88</DiffusConst>
        <DiffusSlope>35.4</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>200</thickness>
              <sw>0.09</sw>
              <no3>6</no3>
              <nh4>3</nh4>
            </layer>
            <layer>
              <thickness>200</thickness>
              <sw>0.07</sw>
            </layer>
            <layer>
              <thickness>200</thickness>
              <sw>0.13</sw>
            </layer>
            <layer>
              <thickness>200</thickness>
              <sw>0.11</sw>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <oc>1.3</oc>
              <ph>6.5</ph>
              <ec>0.2</ec>
              <esp>1.3</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.2</ph>
              <ec>0.1</ec>
              <esp>1.5</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.7</ph>
              <ec>0.2</ec>
              <esp>4.4</esp>
            </layer>
            <layer>
              <thickness>200</thickness>
              <ph>8</ph>
              <ec>0.2</ec>
              <esp>9.6</esp>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock16">
    <clock name="Clock" />
    <metfile name="met">
      <filename>55049.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Ian Carter^Paddock 14.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">18-May</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">28-Jun</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Hybrid_meteor</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">28-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">146</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('18-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('28-Jun')
StationNumber=55049
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Ian Carter^Paddock 14</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>150</thickness>
            <bd>1.150</bd>
            <ll15>0.213</ll15>
            <airdry>0.107</airdry>
            <dul>0.485</dul>
            <sat>0.535</sat>
            <swcon>0.300</swcon>
            <oc>1.56</oc>
            <ph>7.500</ph>
            <fbiom>0.020</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.213</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.150</bd>
            <ll15>0.249</ll15>
            <airdry>0.199</airdry>
            <dul>0.485</dul>
            <sat>0.535</sat>
            <swcon>0.300</swcon>
            <oc>1.04</oc>
            <ph>7.600</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.249</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.120</bd>
            <ll15>0.299</ll15>
            <airdry>0.299</airdry>
            <dul>0.497</dul>
            <sat>0.547</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7.750</ph>
            <fbiom>0.010</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.299</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.130</bd>
            <ll15>0.296</ll15>
            <airdry>0.296</airdry>
            <dul>0.493</dul>
            <sat>0.543</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>7.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.296</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.130</bd>
            <ll15>0.357</ll15>
            <airdry>0.357</airdry>
            <dul>0.495</dul>
            <sat>0.545</sat>
            <swcon>0.300</swcon>
            <oc>0.26</oc>
            <ph>8</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.357</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.140</bd>
            <ll15>0.397</ll15>
            <airdry>0.397</airdry>
            <dul>0.488</dul>
            <sat>0.538</sat>
            <swcon>0.300</swcon>
            <oc>0.13</oc>
            <ph>8</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.397</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.180</bd>
            <ll15>0.453</ll15>
            <airdry>0.453</airdry>
            <dul>0.474</dul>
            <sat>0.524</sat>
            <swcon>0.300</swcon>
            <oc>0.13</oc>
            <ph>8.200</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.453</ll>
            <kl name="wheat">0.010</kl>
            <xf name="wheat">1</xf>
          </layer>
        </profile>
        <Cona>3.5</Cona>
        <DiffusConst>40</DiffusConst>
        <DiffusSlope>16</DiffusSlope>
        <U>6</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>40</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>150</thickness>
              <sw>0.48</sw>
              <no3>27</no3>
            </layer>
            <layer>
              <thickness>150</thickness>
              <sw>0.48</sw>
              <no3>20</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.5</sw>
              <no3>16</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.49</sw>
              <no3>14</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.5</sw>
              <no3>7</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.49</sw>
              <no3>2</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.47</sw>
              <no3>2</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>150</thickness>
              <oc>1.1</oc>
              <ph>7.7</ph>
              <ec>0.2</ec>
            </layer>
            <layer>
              <thickness>150</thickness>
              <ph>8</ph>
              <ec>0.2</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.2</ph>
              <ec>0.4</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.4</ph>
              <ec>0.6</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.2</ph>
              <ec>1.2</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.1</ph>
              <ec>1.6</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.2</ph>
              <ec>1.4</ec>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock17">
    <clock name="Clock" />
    <metfile name="met">
      <filename>77008.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Ian McClelland^Clovers.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">26-Jun</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">04-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">3</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('26-Jun')
StationNumber=77008
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">14-Aug</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Ian McClelland^Clovers</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.330</bd>
            <ll15>0.150</ll15>
            <airdry>0.075</airdry>
            <dul>0.320</dul>
            <sat>0.468</sat>
            <swcon>0.700</swcon>
            <oc>1.365</oc>
            <ph>8.300</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.125</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.375</bd>
            <ll15>0.154</ll15>
            <airdry>0.123</airdry>
            <dul>0.324</dul>
            <sat>0.451</sat>
            <swcon>0.300</swcon>
            <oc>0.585</oc>
            <ph>9.300</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.154</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">0.342</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.375</bd>
            <ll15>0.154</ll15>
            <airdry>0.154</airdry>
            <dul>0.324</dul>
            <sat>0.451</sat>
            <swcon>0.300</swcon>
            <oc>0.585</oc>
            <ph>9.300</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.154</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.342</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.424</bd>
            <ll15>0.265</ll15>
            <airdry>0.265</airdry>
            <dul>0.330</dul>
            <sat>0.439</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>9.600</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.265</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.195</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.424</bd>
            <ll15>0.265</ll15>
            <airdry>0.265</airdry>
            <dul>0.330</dul>
            <sat>0.439</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>9.600</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.265</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.195</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.419</bd>
            <ll15>0.284</ll15>
            <airdry>0.284</airdry>
            <dul>0.320</dul>
            <sat>0.436</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>9.400</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.284</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.157</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.400</bd>
            <ll15>0.284</ll15>
            <airdry>0.284</airdry>
            <dul>0.310</dul>
            <sat>0.442</sat>
            <swcon>0.300</swcon>
            <oc>0.325</oc>
            <ph>8.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.284</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.157</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.400</bd>
            <ll15>0.284</ll15>
            <airdry>0.284</airdry>
            <dul>0.310</dul>
            <sat>0.442</sat>
            <swcon>0.300</swcon>
            <oc>0.325</oc>
            <ph>8.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.284</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.157</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>88</DiffusConst>
        <DiffusSlope>35.4</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.08</sw>
              <no3>15</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.18</sw>
              <no3>3</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.26</sw>
              <no3>2</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.3</sw>
              <no3>3</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <ph>8.1</ph>
              <ec>0.2</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.5</ph>
              <ec>0.5</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.8</ph>
              <ec>0.9</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.9</ph>
              <ec>1.2</ec>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock18">
    <clock name="Clock" />
    <metfile name="met">
      <filename>77005.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Jamie Simpson^B7.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">15-Jun</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">20-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">18</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('15-Jun')
StationNumber=77005
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">15-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">5</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Jamie Simpson^B7</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.360</bd>
            <ll15>0.123</ll15>
            <airdry>0.073</airdry>
            <dul>0.334</dul>
            <sat>0.487</sat>
            <swcon>0.300</swcon>
            <oc>1.3</oc>
            <ph>7</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.123</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.293</bd>
            <ll15>0.172</ll15>
            <airdry>0.146</airdry>
            <dul>0.341</dul>
            <sat>0.512</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.172</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">0.912</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.293</bd>
            <ll15>0.173</ll15>
            <airdry>0.165</airdry>
            <dul>0.341</dul>
            <sat>0.512</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.700</finert>
            <ll name="wheat">0.173</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.912</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.374</bd>
            <ll15>0.206</ll15>
            <airdry>0.206</airdry>
            <dul>0.352</dul>
            <sat>0.482</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.206</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.671</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.374</bd>
            <ll15>0.210</ll15>
            <airdry>0.210</airdry>
            <dul>0.350</dul>
            <sat>0.482</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.850</finert>
            <ll name="wheat">0.210</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.671</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.412</bd>
            <ll15>0.238</ll15>
            <airdry>0.238</airdry>
            <dul>0.351</dul>
            <sat>0.467</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.238</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.484</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.423</bd>
            <ll15>0.249</ll15>
            <airdry>0.249</airdry>
            <dul>0.350</dul>
            <sat>0.463</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.249</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.486</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.455</bd>
            <ll15>0.276</ll15>
            <airdry>0.276</airdry>
            <dul>0.344</dul>
            <sat>0.451</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.276</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.382</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>88</DiffusConst>
        <DiffusSlope>35.4</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.09</sw>
              <no3>9</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.19</sw>
              <no3>4</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.21</sw>
              <no3>3</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.25</sw>
              <no3>4</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <ph>8</ph>
              <ec>0.2</ec>
              <esp>2.39809</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.3</ph>
              <ec>0.4</ec>
              <esp>8.20599</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.7</ph>
              <ec>0.7</ec>
              <esp>15.2108</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.9</ph>
              <ec>0.9</ec>
              <esp>19.9756</esp>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock19">
    <clock name="Clock" />
    <metfile name="met">
      <filename>55006.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Jim Arnott^Receiving Paddock 1.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">18-May</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">20-Jul</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">H45</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">20-Jul</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">50</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('18-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('20-Jul')
StationNumber=55006
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">30-Sep</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">50.5999984741211</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Jim Arnott^Receiving Paddock 1</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>150</thickness>
            <bd>1.070</bd>
            <ll15>0.240</ll15>
            <airdry>0.120</airdry>
            <dul>0.510</dul>
            <sat>0.560</sat>
            <swcon>0.300</swcon>
            <oc>1.56</oc>
            <ph>7.500</ph>
            <fbiom>0.020</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.240</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.110</bd>
            <ll15>0.240</ll15>
            <airdry>0.192</airdry>
            <dul>0.500</dul>
            <sat>0.550</sat>
            <swcon>0.300</swcon>
            <oc>1.04</oc>
            <ph>7.600</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.240</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.120</bd>
            <ll15>0.271</ll15>
            <airdry>0.271</airdry>
            <dul>0.500</dul>
            <sat>0.550</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7.750</ph>
            <fbiom>0.010</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.271</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.120</bd>
            <ll15>0.292</ll15>
            <airdry>0.292</airdry>
            <dul>0.500</dul>
            <sat>0.550</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>7.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.292</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.120</bd>
            <ll15>0.343</ll15>
            <airdry>0.343</airdry>
            <dul>0.500</dul>
            <sat>0.550</sat>
            <swcon>0.300</swcon>
            <oc>0.26</oc>
            <ph>8</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.343</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.120</bd>
            <ll15>0.385</ll15>
            <airdry>0.385</airdry>
            <dul>0.500</dul>
            <sat>0.550</sat>
            <swcon>0.300</swcon>
            <oc>0.13</oc>
            <ph>8</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.385</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.140</bd>
            <ll15>0.450</ll15>
            <airdry>0.450</airdry>
            <dul>0.480</dul>
            <sat>0.530</sat>
            <swcon>0.300</swcon>
            <oc>0.13</oc>
            <ph>8.200</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.450</ll>
            <kl name="wheat">0.010</kl>
            <xf name="wheat">1</xf>
          </layer>
        </profile>
        <Cona>3.5</Cona>
        <DiffusConst>40</DiffusConst>
        <DiffusSlope>16</DiffusSlope>
        <U>6</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>40</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>150</thickness>
              <sw>0.23</sw>
              <no3>8</no3>
            </layer>
            <layer>
              <thickness>150</thickness>
              <sw>0.4</sw>
              <no3>6</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.4</sw>
              <no3>8</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.37</sw>
              <no3>5</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.34</sw>
              <no3>4</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.39</sw>
              <no3>5</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.45</sw>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>150</thickness>
              <ph>6.1</ph>
              <ec>0.1</ec>
            </layer>
            <layer>
              <thickness>150</thickness>
              <ph>6.6</ph>
              <ec>0.1</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.2</ph>
              <ec>0.1</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.7</ph>
              <ec>0.2</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.9</ph>
              <ec>0.2</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.8</ph>
              <ec>0.2</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock20">
    <clock name="Clock" />
    <metfile name="met">
      <filename>55006.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Jim Arnott^Receiving Paddock 2.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">18-May</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">22-Jul</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">H45</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">22-Jul</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">100</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('18-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('22-Jul')
StationNumber=55006
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Jim Arnott^Receiving Paddock 2</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>150</thickness>
            <bd>1.070</bd>
            <ll15>0.240</ll15>
            <airdry>0.120</airdry>
            <dul>0.510</dul>
            <sat>0.560</sat>
            <swcon>0.300</swcon>
            <oc>1.56</oc>
            <ph>7.500</ph>
            <fbiom>0.020</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.240</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.110</bd>
            <ll15>0.240</ll15>
            <airdry>0.192</airdry>
            <dul>0.500</dul>
            <sat>0.550</sat>
            <swcon>0.300</swcon>
            <oc>1.04</oc>
            <ph>7.600</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.240</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.120</bd>
            <ll15>0.271</ll15>
            <airdry>0.271</airdry>
            <dul>0.500</dul>
            <sat>0.550</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7.750</ph>
            <fbiom>0.010</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.271</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.120</bd>
            <ll15>0.292</ll15>
            <airdry>0.292</airdry>
            <dul>0.500</dul>
            <sat>0.550</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>7.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.292</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.120</bd>
            <ll15>0.343</ll15>
            <airdry>0.343</airdry>
            <dul>0.500</dul>
            <sat>0.550</sat>
            <swcon>0.300</swcon>
            <oc>0.26</oc>
            <ph>8</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.343</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.120</bd>
            <ll15>0.385</ll15>
            <airdry>0.385</airdry>
            <dul>0.500</dul>
            <sat>0.550</sat>
            <swcon>0.300</swcon>
            <oc>0.13</oc>
            <ph>8</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.385</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.140</bd>
            <ll15>0.450</ll15>
            <airdry>0.450</airdry>
            <dul>0.480</dul>
            <sat>0.530</sat>
            <swcon>0.300</swcon>
            <oc>0.13</oc>
            <ph>8.200</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.450</ll>
            <kl name="wheat">0.010</kl>
            <xf name="wheat">1</xf>
          </layer>
        </profile>
        <Cona>3.5</Cona>
        <DiffusConst>40</DiffusConst>
        <DiffusSlope>16</DiffusSlope>
        <U>6</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>40</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>150</thickness>
              <sw>0.36</sw>
              <no3>3</no3>
            </layer>
            <layer>
              <thickness>150</thickness>
              <sw>0.37</sw>
              <no3>0</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.4</sw>
              <no3>0</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.33</sw>
              <no3>0</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.34</sw>
              <no3>0</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.39</sw>
              <no3>0</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.45</sw>
              <no3>0</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>150</thickness>
              <ph>7.3</ph>
              <ec>0.3</ec>
            </layer>
            <layer>
              <thickness>150</thickness>
              <ph>7.5</ph>
              <ec>0.2</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.6</ph>
              <ec>0.2</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.9</ph>
              <ec>0.2</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8</ph>
              <ec>0.2</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.9</ph>
              <ec>0.2</ec>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock21">
    <clock name="Clock" />
    <metfile name="met">
      <filename>18052.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Jim Egan^South 6E.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">29-Jun</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">15-Jun</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">15-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">12</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('29-Jun')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('15-Jun')
StationNumber=18052
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Jim Egan^South 6E</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.250</bd>
            <ll15>0.093</ll15>
            <airdry>0.050</airdry>
            <dul>0.244</dul>
            <sat>0.320</sat>
            <swcon>0.300</swcon>
            <oc>1.274</oc>
            <ph>8.200</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.093</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.330</bd>
            <ll15>0.143</ll15>
            <airdry>0.110</airdry>
            <dul>0.289</dul>
            <sat>0.320</sat>
            <swcon>0.300</swcon>
            <oc>0.013</oc>
            <ph>9</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.143</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.280</bd>
            <ll15>0.149</ll15>
            <airdry>0.120</airdry>
            <dul>0.290</dul>
            <sat>0.320</sat>
            <swcon>0.300</swcon>
            <oc>0.481</oc>
            <ph>9</ph>
            <fbiom>0.015</fbiom>
            <finert>0.700</finert>
            <ll name="wheat">0.149</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.260</bd>
            <ll15>0.169</ll15>
            <airdry>0.169</airdry>
            <dul>0.283</dul>
            <sat>0.320</sat>
            <swcon>0.300</swcon>
            <oc>0.429</oc>
            <ph>9.300</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.169</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.260</bd>
            <ll15>0.169</ll15>
            <airdry>0.169</airdry>
            <dul>0.283</dul>
            <sat>0.320</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>9.300</ph>
            <fbiom>0.010</fbiom>
            <finert>0.850</finert>
            <ll name="wheat">0.169</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.230</bd>
            <ll15>0.162</ll15>
            <airdry>0.162</airdry>
            <dul>0.280</dul>
            <sat>0.320</sat>
            <swcon>0.300</swcon>
            <oc>0.169</oc>
            <ph>9.600</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.162</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.330</bd>
            <ll15>0.171</ll15>
            <airdry>0.171</airdry>
            <dul>0.292</dul>
            <sat>0.320</sat>
            <swcon>0.300</swcon>
            <oc>0.117</oc>
            <ph>9.600</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.171</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>88</DiffusConst>
        <DiffusSlope>35.4</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.12</sw>
              <no3>16</no3>
              <nh4>7</nh4>
            </layer>
            <layer>
              <thickness>150</thickness>
              <sw>0.11</sw>
              <no3>28</no3>
              <nh4>3</nh4>
            </layer>
            <layer>
              <thickness>170</thickness>
              <sw>0.11</sw>
              <no3>16</no3>
              <nh4>3</nh4>
            </layer>
            <layer>
              <thickness>280</thickness>
              <sw>0.14</sw>
              <no3>10</no3>
              <nh4>1</nh4>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <oc>1.5</oc>
              <ph>7.9</ph>
              <ec>0.1</ec>
              <esp>0.8</esp>
            </layer>
            <layer>
              <thickness>150</thickness>
              <oc>0.9</oc>
              <ph>8</ph>
              <ec>0.3</ec>
              <esp>1.1</esp>
            </layer>
            <layer>
              <thickness>170</thickness>
              <oc>0.6</oc>
              <ph>8</ph>
              <ec>0.8</ec>
              <esp>2.5</esp>
            </layer>
            <layer>
              <thickness>280</thickness>
              <oc>0.5</oc>
              <ph>8.1</ph>
              <ec>1.1</ec>
              <esp>7.2</esp>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock22">
    <clock name="Clock" />
    <metfile name="met">
      <filename>55049.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Jim McDonald^South West Creek.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">18-May</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">24-Jun</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Hybrid_meteor</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">15-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">96</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('18-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('24-Jun')
StationNumber=55049
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">24-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">9</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Jim McDonald^South West Creek</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>150</thickness>
            <bd>1.100</bd>
            <ll15>0.273</ll15>
            <airdry>0.137</airdry>
            <dul>0.506</dul>
            <sat>0.556</sat>
            <swcon>0.300</swcon>
            <oc>1.56</oc>
            <ph>7.500</ph>
            <fbiom>0.020</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.273</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.100</bd>
            <ll15>0.273</ll15>
            <airdry>0.218</airdry>
            <dul>0.506</dul>
            <sat>0.556</sat>
            <swcon>0.300</swcon>
            <oc>1.04</oc>
            <ph>7.600</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.273</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.100</bd>
            <ll15>0.310</ll15>
            <airdry>0.310</airdry>
            <dul>0.506</dul>
            <sat>0.556</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7.750</ph>
            <fbiom>0.010</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.310</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.090</bd>
            <ll15>0.313</ll15>
            <airdry>0.313</airdry>
            <dul>0.507</dul>
            <sat>0.557</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>7.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.313</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.100</bd>
            <ll15>0.371</ll15>
            <airdry>0.371</airdry>
            <dul>0.506</dul>
            <sat>0.556</sat>
            <swcon>0.300</swcon>
            <oc>0.26</oc>
            <ph>8</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.371</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.120</bd>
            <ll15>0.410</ll15>
            <airdry>0.410</airdry>
            <dul>0.498</dul>
            <sat>0.548</sat>
            <swcon>0.300</swcon>
            <oc>0.13</oc>
            <ph>8</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.410</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.130</bd>
            <ll15>0.486</ll15>
            <airdry>0.486</airdry>
            <dul>0.495</dul>
            <sat>0.545</sat>
            <swcon>0.300</swcon>
            <oc>0.13</oc>
            <ph>8.200</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.486</ll>
            <kl name="wheat">0.010</kl>
            <xf name="wheat">1</xf>
          </layer>
        </profile>
        <Cona>3.5</Cona>
        <DiffusConst>40</DiffusConst>
        <DiffusSlope>16</DiffusSlope>
        <U>6</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>40</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>150</thickness>
              <sw>0.45</sw>
              <no3>11</no3>
            </layer>
            <layer>
              <thickness>150</thickness>
              <sw>0.54</sw>
              <no3>9</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.51</sw>
              <no3>10</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.51</sw>
              <no3>7</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.51</sw>
              <no3>4</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.5</sw>
              <no3>2</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.5</sw>
              <no3>1</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>150</thickness>
              <oc>1.3</oc>
              <ph>7.8</ph>
              <ec>0.2</ec>
              <esp>1.2</esp>
            </layer>
            <layer>
              <thickness>150</thickness>
              <oc>0.8</oc>
              <ph>7.8</ph>
              <ec>0.2</ec>
              <esp>1.9</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <oc>0.7</oc>
              <ph>8.1</ph>
              <ec>0.3</ec>
              <esp>4.2</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <oc>0.7</oc>
              <ph>8.4</ph>
              <ec>0.4</ec>
              <esp>8.8</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.5</ph>
              <ec>0.5</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.4</ph>
              <ec>0.9</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.2</ph>
              <ec>1.1</ec>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock23">
    <clock name="Clock" />
    <metfile name="met">
      <filename>77014.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">John Ferrier^John South 26.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">16-Jun</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">16-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">4</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('16-Jun')
StationNumber=77014
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^John Ferrier^John South 26</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.360</bd>
            <ll15>0.123</ll15>
            <airdry>0.073</airdry>
            <dul>0.334</dul>
            <sat>0.487</sat>
            <swcon>0.300</swcon>
            <oc>1.3</oc>
            <ph>7</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.123</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.293</bd>
            <ll15>0.172</ll15>
            <airdry>0.146</airdry>
            <dul>0.341</dul>
            <sat>0.512</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.172</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">0.912</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.293</bd>
            <ll15>0.173</ll15>
            <airdry>0.165</airdry>
            <dul>0.341</dul>
            <sat>0.512</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.700</finert>
            <ll name="wheat">0.173</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.912</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.374</bd>
            <ll15>0.206</ll15>
            <airdry>0.206</airdry>
            <dul>0.352</dul>
            <sat>0.482</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.206</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.671</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.374</bd>
            <ll15>0.210</ll15>
            <airdry>0.210</airdry>
            <dul>0.350</dul>
            <sat>0.482</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.850</finert>
            <ll name="wheat">0.210</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.671</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.412</bd>
            <ll15>0.238</ll15>
            <airdry>0.238</airdry>
            <dul>0.351</dul>
            <sat>0.467</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.238</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.484</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.423</bd>
            <ll15>0.249</ll15>
            <airdry>0.249</airdry>
            <dul>0.350</dul>
            <sat>0.463</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.249</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.486</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.455</bd>
            <ll15>0.276</ll15>
            <airdry>0.276</airdry>
            <dul>0.344</dul>
            <sat>0.451</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.276</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.382</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>88</DiffusConst>
        <DiffusSlope>35.4</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.1</sw>
              <no3>11</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.17</sw>
              <no3>4</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.23</sw>
              <no3>4</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.23</sw>
              <no3>5</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <ph>7.5</ph>
              <ec>0.2</ec>
              <esp>2.7</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.9</ph>
              <ec>0.3</ec>
              <esp>6.2</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.4</ph>
              <ec>0.4</ec>
              <esp>12.4</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.4</ph>
              <ec>0.7</ec>
              <esp>17.5</esp>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock24">
    <clock name="Clock" />
    <metfile name="met">
      <filename>80006.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Jon Whykes^Whites West.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">01-May</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">31-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">5</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('01-May')
StationNumber=80006
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Jon Whykes^Whites West</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.173</bd>
            <ll15>0.200</ll15>
            <airdry>0.120</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>1.3</oc>
            <ph>7</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.200</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.231</bd>
            <ll15>0.190</ll15>
            <airdry>0.170</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.190</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.231</bd>
            <ll15>0.200</ll15>
            <airdry>0.200</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.700</finert>
            <ll name="wheat">0.200</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.175</bd>
            <ll15>0.240</ll15>
            <airdry>0.240</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.240</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.960</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.175</bd>
            <ll15>0.270</ll15>
            <airdry>0.270</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.850</finert>
            <ll name="wheat">0.270</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.917</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.201</bd>
            <ll15>0.280</ll15>
            <airdry>0.280</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.280</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.809</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.252</bd>
            <ll15>0.321</ll15>
            <airdry>0.321</airdry>
            <dul>0.400</dul>
            <sat>0.480</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.321</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.791</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.278</bd>
            <ll15>0.332</ll15>
            <airdry>0.332</airdry>
            <dul>0.400</dul>
            <sat>0.480</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.332</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.679</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>40</DiffusConst>
        <DiffusSlope>16</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.13</sw>
              <no3>10</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.21</sw>
              <no3>6</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.26</sw>
              <no3>5</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.29</sw>
              <no3>4</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <ph>7.1</ph>
              <ec>0.2</ec>
              <esp>4.4</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.7</ph>
              <ec>0.3</ec>
              <esp>8.8</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.2</ph>
              <ec>0.6</ec>
              <esp>13.8</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.2</ph>
              <ec>0.9</ec>
              <esp>16.5</esp>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock25">
    <clock name="Clock" />
    <metfile name="met">
      <filename>78005.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Lindsay Martin^Paddock 6.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">04-Jun</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Bellaroi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">12-Apr</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">46</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('04-Jun')
StationNumber=78005
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">04-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">5</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Lindsay Martin^Paddock 6</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.360</bd>
            <ll15>0.123</ll15>
            <airdry>0.073</airdry>
            <dul>0.334</dul>
            <sat>0.487</sat>
            <swcon>0.300</swcon>
            <oc>1.3</oc>
            <ph>7</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.123</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.293</bd>
            <ll15>0.172</ll15>
            <airdry>0.146</airdry>
            <dul>0.341</dul>
            <sat>0.512</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.172</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">0.912</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.293</bd>
            <ll15>0.173</ll15>
            <airdry>0.165</airdry>
            <dul>0.341</dul>
            <sat>0.512</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.700</finert>
            <ll name="wheat">0.173</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.912</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.374</bd>
            <ll15>0.206</ll15>
            <airdry>0.206</airdry>
            <dul>0.352</dul>
            <sat>0.482</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.206</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.671</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.374</bd>
            <ll15>0.210</ll15>
            <airdry>0.210</airdry>
            <dul>0.350</dul>
            <sat>0.482</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.850</finert>
            <ll name="wheat">0.210</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.671</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.412</bd>
            <ll15>0.238</ll15>
            <airdry>0.238</airdry>
            <dul>0.351</dul>
            <sat>0.467</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.238</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.484</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.423</bd>
            <ll15>0.249</ll15>
            <airdry>0.249</airdry>
            <dul>0.350</dul>
            <sat>0.463</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.249</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.486</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.455</bd>
            <ll15>0.276</ll15>
            <airdry>0.276</airdry>
            <dul>0.344</dul>
            <sat>0.451</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.276</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.382</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>88</DiffusConst>
        <DiffusSlope>35.4</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.05</sw>
              <no3>12</no3>
              <nh4>16.3</nh4>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.13</sw>
              <no3>4</no3>
              <nh4>15.5</nh4>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.26</sw>
              <no3>3</no3>
              <nh4>12.3</nh4>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.23</sw>
              <no3>3</no3>
              <nh4>12.7</nh4>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
            </layer>
            <layer>
              <thickness>150</thickness>
            </layer>
            <layer>
              <thickness>150</thickness>
            </layer>
            <layer>
              <thickness>150</thickness>
            </layer>
            <layer>
              <thickness>150</thickness>
            </layer>
            <layer>
              <thickness>300</thickness>
            </layer>
            <layer>
              <thickness>300</thickness>
            </layer>
            <layer>
              <thickness>300</thickness>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock26">
    <clock name="Clock" />
    <metfile name="met">
      <filename>77056.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Malcolm Knight^Cotnells.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">20-Apr</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">05-Jun</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">06-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">11</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('20-Apr')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('05-Jun')
StationNumber=77056
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Malcolm Knight^Cotnells</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.330</bd>
            <ll15>0.150</ll15>
            <airdry>0.075</airdry>
            <dul>0.320</dul>
            <sat>0.468</sat>
            <swcon>0.700</swcon>
            <oc>1.365</oc>
            <ph>8.300</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.125</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.375</bd>
            <ll15>0.154</ll15>
            <airdry>0.123</airdry>
            <dul>0.324</dul>
            <sat>0.451</sat>
            <swcon>0.300</swcon>
            <oc>0.585</oc>
            <ph>9.300</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.154</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">0.342</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.375</bd>
            <ll15>0.154</ll15>
            <airdry>0.154</airdry>
            <dul>0.324</dul>
            <sat>0.451</sat>
            <swcon>0.300</swcon>
            <oc>0.585</oc>
            <ph>9.300</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.154</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.342</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.424</bd>
            <ll15>0.265</ll15>
            <airdry>0.265</airdry>
            <dul>0.330</dul>
            <sat>0.439</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>9.600</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.265</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.195</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.424</bd>
            <ll15>0.265</ll15>
            <airdry>0.265</airdry>
            <dul>0.330</dul>
            <sat>0.439</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>9.600</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.265</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.195</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.419</bd>
            <ll15>0.284</ll15>
            <airdry>0.284</airdry>
            <dul>0.320</dul>
            <sat>0.436</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>9.400</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.284</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.157</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.400</bd>
            <ll15>0.284</ll15>
            <airdry>0.284</airdry>
            <dul>0.310</dul>
            <sat>0.442</sat>
            <swcon>0.300</swcon>
            <oc>0.325</oc>
            <ph>8.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.284</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.157</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.400</bd>
            <ll15>0.284</ll15>
            <airdry>0.284</airdry>
            <dul>0.310</dul>
            <sat>0.442</sat>
            <swcon>0.300</swcon>
            <oc>0.325</oc>
            <ph>8.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.284</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.157</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>88</DiffusConst>
        <DiffusSlope>35.4</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.14</sw>
              <no3>31</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.24</sw>
              <no3>13</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.31</sw>
              <no3>5</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.29</sw>
              <no3>3</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <ph>7.5</ph>
              <ec>0.19</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8</ph>
              <ec>0.41</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.4</ph>
              <ec>0.91</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.3</ph>
              <ec>1.05</ec>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock27">
    <clock name="Clock" />
    <metfile name="met">
      <filename>53115.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Manchee^Gil Gil South.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">19-Apr</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">20-Apr</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Sunbrook</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">06-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">11</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('19-Apr')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('20-Apr')
StationNumber=53115
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Manchee^Gil Gil South</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>150</thickness>
            <bd>1.360</bd>
            <ll15>0.217</ll15>
            <airdry>0.109</airdry>
            <dul>0.409</dul>
            <sat>0.459</sat>
            <swcon>0.300</swcon>
            <oc>1.56</oc>
            <ph>7.500</ph>
            <fbiom>0.020</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.217</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.400</bd>
            <ll15>0.220</ll15>
            <airdry>0.176</airdry>
            <dul>0.392</dul>
            <sat>0.442</sat>
            <swcon>0.300</swcon>
            <oc>1.04</oc>
            <ph>7.600</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.220</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.400</bd>
            <ll15>0.226</ll15>
            <airdry>0.226</airdry>
            <dul>0.391</dul>
            <sat>0.441</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7.750</ph>
            <fbiom>0.010</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.226</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.390</bd>
            <ll15>0.242</ll15>
            <airdry>0.242</airdry>
            <dul>0.389</dul>
            <sat>0.439</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>7.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.242</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.370</bd>
            <ll15>0.290</ll15>
            <airdry>0.290</airdry>
            <dul>0.404</dul>
            <sat>0.454</sat>
            <swcon>0.300</swcon>
            <oc>0.26</oc>
            <ph>8</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.290</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.360</bd>
            <ll15>0.328</ll15>
            <airdry>0.328</airdry>
            <dul>0.408</dul>
            <sat>0.458</sat>
            <swcon>0.300</swcon>
            <oc>0.13</oc>
            <ph>8</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.328</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.340</bd>
            <ll15>0.396</ll15>
            <airdry>0.396</airdry>
            <dul>0.415</dul>
            <sat>0.465</sat>
            <swcon>0.300</swcon>
            <oc>0.13</oc>
            <ph>8.200</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.396</ll>
            <kl name="wheat">0.010</kl>
            <xf name="wheat">1</xf>
          </layer>
        </profile>
        <Cona>3.5</Cona>
        <DiffusConst>40</DiffusConst>
        <DiffusSlope>16</DiffusSlope>
        <U>6</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>40</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>150</thickness>
              <sw>0.35</sw>
              <no3>19.8</no3>
            </layer>
            <layer>
              <thickness>150</thickness>
              <sw>0.36</sw>
              <no3>10.8</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.36</sw>
              <no3>15.1</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.34</sw>
              <no3>16.4</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.33</sw>
              <no3>6.1</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.29</sw>
              <no3>3.5</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.3</sw>
              <no3>3.8</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>150</thickness>
              <oc>0.5</oc>
              <ph>7.3</ph>
              <ec>0</ec>
            </layer>
            <layer>
              <thickness>150</thickness>
              <ph>7.9</ph>
              <ec>0.2</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
            </layer>
            <layer>
              <thickness>300</thickness>
            </layer>
            <layer>
              <thickness>300</thickness>
            </layer>
            <layer>
              <thickness>300</thickness>
            </layer>
            <layer>
              <thickness>300</thickness>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock28">
    <clock name="Clock" />
    <metfile name="met">
      <filename>8051.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Mark Appleyard^Appleyard.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">02-Jun</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">15-May</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Annuello</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">15-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">20</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('02-Jun')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('15-May')
StationNumber=8051
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">15-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">30</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise2">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">14-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">50</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise3">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">05-Jul</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">28</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Mark Appleyard^Appleyard</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>150</thickness>
            <bd>1.600</bd>
            <ll15>0.080</ll15>
            <airdry>0.040</airdry>
            <dul>0.250</dul>
            <sat>0.370</sat>
            <swcon>0.700</swcon>
            <oc>1.079</oc>
            <ph>6.500</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.080</ll>
            <kl name="wheat">0.080</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.640</bd>
            <ll15>0.080</ll15>
            <airdry>0.072</airdry>
            <dul>0.300</dul>
            <sat>0.350</sat>
            <swcon>0.700</swcon>
            <oc>0.728</oc>
            <ph>7</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.080</ll>
            <kl name="wheat">0.080</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.540</bd>
            <ll15>0.130</ll15>
            <airdry>0.130</airdry>
            <dul>0.340</dul>
            <sat>0.390</sat>
            <swcon>0.700</swcon>
            <oc>0.455</oc>
            <ph>7.700</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.130</ll>
            <kl name="wheat">0.080</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.650</bd>
            <ll15>0.140</ll15>
            <airdry>0.140</airdry>
            <dul>0.300</dul>
            <sat>0.350</sat>
            <swcon>0.700</swcon>
            <oc>0.312</oc>
            <ph>8.400</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.140</ll>
            <kl name="wheat">0.080</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.690</bd>
            <ll15>0.200</ll15>
            <airdry>0.200</airdry>
            <dul>0.280</dul>
            <sat>0.330</sat>
            <swcon>0.700</swcon>
            <oc>0.234</oc>
            <ph>8.700</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.200</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.650</bd>
            <ll15>0.210</ll15>
            <airdry>0.210</airdry>
            <dul>0.300</dul>
            <sat>0.350</sat>
            <swcon>0.700</swcon>
            <oc>0.182</oc>
            <ph>8.700</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.210</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.640</bd>
            <ll15>0.220</ll15>
            <airdry>0.220</airdry>
            <dul>0.300</dul>
            <sat>0.350</sat>
            <swcon>0.700</swcon>
            <oc>0.169</oc>
            <ph>8.700</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.220</ll>
            <kl name="wheat">0.030</kl>
            <xf name="wheat">1</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>88</DiffusConst>
        <DiffusSlope>35</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.13</sw>
              <no3>22</no3>
              <nh4>0.1</nh4>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.16</sw>
              <no3>8</no3>
              <nh4>0.1</nh4>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.13</sw>
              <no3>3</no3>
              <nh4>0.1</nh4>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.13</sw>
              <no3>2</no3>
              <nh4>0.1</nh4>
            </layer>
            <layer>
              <thickness>500</thickness>
              <sw>0.21</sw>
              <no3>1</no3>
              <nh4>0.1</nh4>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.22</sw>
              <no3>1</no3>
              <nh4>0.1</nh4>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <oc>0.7</oc>
              <ph>6</ph>
              <ec>0.1</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>5.7</ph>
              <ec>0.1</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>6.9</ph>
              <ec>0.1</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.5</ph>
              <ec>0.1</ec>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock29">
    <clock name="Clock" />
    <metfile name="met">
      <filename>81013.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Mark Harmer^Yabba 8.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">27-May</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">04-Jun</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Whistler</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">04-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">37</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('27-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('04-Jun')
StationNumber=81013
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">05-Sep</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">30</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Mark Harmer^Yabba 8</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.480</bd>
            <ll15>0.110</ll15>
            <airdry>0.055</airdry>
            <dul>0.288</dul>
            <sat>0.350</sat>
            <swcon>0.500</swcon>
            <oc>1.3</oc>
            <ph>6</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.110</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.500</bd>
            <ll15>0.132</ll15>
            <airdry>0.110</airdry>
            <dul>0.269</dul>
            <sat>0.335</sat>
            <swcon>0.400</swcon>
            <oc>0.65</oc>
            <ph>6</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.132</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.450</bd>
            <ll15>0.147</ll15>
            <airdry>0.132</airdry>
            <dul>0.252</dul>
            <sat>0.323</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>6</ph>
            <fbiom>0.015</fbiom>
            <finert>0.700</finert>
            <ll name="wheat">0.147</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.370</bd>
            <ll15>0.170</ll15>
            <airdry>0.170</airdry>
            <dul>0.285</dul>
            <sat>0.355</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>6</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.170</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.893</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.430</bd>
            <ll15>0.186</ll15>
            <airdry>0.186</airdry>
            <dul>0.292</dul>
            <sat>0.352</sat>
            <swcon>0.200</swcon>
            <oc>0.65</oc>
            <ph>6</ph>
            <fbiom>0.010</fbiom>
            <finert>0.850</finert>
            <ll name="wheat">0.186</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.893</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.550</bd>
            <ll15>0.222</ll15>
            <airdry>0.222</airdry>
            <dul>0.310</dul>
            <sat>0.342</sat>
            <swcon>0.100</swcon>
            <oc>0.65</oc>
            <ph>6</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.222</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.865</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.670</bd>
            <ll15>0.257</ll15>
            <airdry>0.257</airdry>
            <dul>0.314</dul>
            <sat>0.339</sat>
            <swcon>0.100</swcon>
            <oc>0.65</oc>
            <ph>6</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.257</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.865</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.620</bd>
            <ll15>0.275</ll15>
            <airdry>0.275</airdry>
            <dul>0.319</dul>
            <sat>0.353</sat>
            <swcon>0.100</swcon>
            <oc>0.65</oc>
            <ph>6</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.275</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.828</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>44</DiffusConst>
        <DiffusSlope>16</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>84</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.14</sw>
              <no3>25</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.08</sw>
              <no3>3</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.15</sw>
              <no3>3</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.19</sw>
              <no3>3</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <ph>5.1</ph>
              <ec>0.1</ec>
              <esp>1.2</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>5.2</ph>
              <ec>0</ec>
              <esp>0.8</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>6.5</ph>
              <ec>0.1</ec>
              <esp>2.5</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>6.6</ph>
              <ec>0.1</ec>
              <esp>3.5</esp>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock30">
    <clock name="Clock" />
    <metfile name="met">
      <filename>77056.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Mary Paula Williamson^Cannie Turnoff.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">28-May</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">28-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">5</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('28-May')
StationNumber=77056
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Mary Paula Williamson^Cannie Turnoff</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.360</bd>
            <ll15>0.123</ll15>
            <airdry>0.073</airdry>
            <dul>0.334</dul>
            <sat>0.487</sat>
            <swcon>0.300</swcon>
            <oc>1.3</oc>
            <ph>7</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.123</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.293</bd>
            <ll15>0.172</ll15>
            <airdry>0.146</airdry>
            <dul>0.341</dul>
            <sat>0.512</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.172</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">0.912</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.293</bd>
            <ll15>0.173</ll15>
            <airdry>0.165</airdry>
            <dul>0.341</dul>
            <sat>0.512</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.700</finert>
            <ll name="wheat">0.173</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.912</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.374</bd>
            <ll15>0.206</ll15>
            <airdry>0.206</airdry>
            <dul>0.352</dul>
            <sat>0.482</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.206</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.671</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.374</bd>
            <ll15>0.210</ll15>
            <airdry>0.210</airdry>
            <dul>0.350</dul>
            <sat>0.482</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.850</finert>
            <ll name="wheat">0.210</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.671</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.412</bd>
            <ll15>0.238</ll15>
            <airdry>0.238</airdry>
            <dul>0.351</dul>
            <sat>0.467</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.238</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.484</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.423</bd>
            <ll15>0.249</ll15>
            <airdry>0.249</airdry>
            <dul>0.350</dul>
            <sat>0.463</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.249</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.486</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.455</bd>
            <ll15>0.276</ll15>
            <airdry>0.276</airdry>
            <dul>0.344</dul>
            <sat>0.451</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.276</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.382</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>88</DiffusConst>
        <DiffusSlope>35.4</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.08</sw>
              <no3>15</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.2</sw>
              <no3>5</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.28</sw>
              <no3>3</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.32</sw>
              <no3>2</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <ph>7.3</ph>
              <ec>0.19</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8</ph>
              <ec>0.31</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.5</ph>
              <ec>0.5</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.6</ph>
              <ec>0.73</ec>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock31">
    <clock name="Clock" />
    <metfile name="met">
      <filename>79035.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Nathan Gellatly^Leahs.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">20-Jun</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Mitre</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">20-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">5</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('20-Jun')
StationNumber=79035
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Nathan Gellatly^Leahs</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.173</bd>
            <ll15>0.200</ll15>
            <airdry>0.120</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>1.3</oc>
            <ph>7</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.200</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.231</bd>
            <ll15>0.190</ll15>
            <airdry>0.170</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.190</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.231</bd>
            <ll15>0.200</ll15>
            <airdry>0.200</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.700</finert>
            <ll name="wheat">0.200</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.175</bd>
            <ll15>0.240</ll15>
            <airdry>0.240</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.240</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.960</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.175</bd>
            <ll15>0.270</ll15>
            <airdry>0.270</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.850</finert>
            <ll name="wheat">0.270</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.917</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.201</bd>
            <ll15>0.280</ll15>
            <airdry>0.280</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.280</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.809</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.252</bd>
            <ll15>0.321</ll15>
            <airdry>0.321</airdry>
            <dul>0.400</dul>
            <sat>0.480</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.321</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.791</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.278</bd>
            <ll15>0.332</ll15>
            <airdry>0.332</airdry>
            <dul>0.400</dul>
            <sat>0.480</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.332</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.679</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>40</DiffusConst>
        <DiffusSlope>16</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.17</sw>
              <no3>14</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.18</sw>
              <no3>7</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.23</sw>
              <no3>5</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.27</sw>
              <no3>6</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <ph>6.9</ph>
              <ec>0.2</ec>
              <esp>1.75208</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.4</ph>
              <ec>0.2</ec>
              <esp>3.86366</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.7</ph>
              <ec>0.2</ec>
              <esp>8.13497</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.2</ph>
              <ec>0.4</ec>
              <esp>10.9359</esp>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock32">
    <clock name="Clock" />
    <metfile name="met">
      <filename>78005.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Peter Martin^prickle 3.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">04-Jun</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">06-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">11</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('04-Jun')
StationNumber=78005
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Peter Martin^prickle 3</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.450</bd>
            <ll15>0.140</ll15>
            <airdry>0.075</airdry>
            <dul>0.334</dul>
            <sat>0.414</sat>
            <swcon>0.700</swcon>
            <oc>1.365</oc>
            <ph>8.500</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.125</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.260</bd>
            <ll15>0.152</ll15>
            <airdry>0.122</airdry>
            <dul>0.341</dul>
            <sat>0.421</sat>
            <swcon>0.300</swcon>
            <oc>0.585</oc>
            <ph>8.800</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.152</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.260</bd>
            <ll15>0.152</ll15>
            <airdry>0.152</airdry>
            <dul>0.341</dul>
            <sat>0.421</sat>
            <swcon>0.300</swcon>
            <oc>0.585</oc>
            <ph>8.800</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.152</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.281</bd>
            <ll15>0.165</ll15>
            <airdry>0.165</airdry>
            <dul>0.352</dul>
            <sat>0.432</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>8.900</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.165</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.355</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.281</bd>
            <ll15>0.165</ll15>
            <airdry>0.165</airdry>
            <dul>0.350</dul>
            <sat>0.430</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>8.900</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.165</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.355</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.243</bd>
            <ll15>0.271</ll15>
            <airdry>0.271</airdry>
            <dul>0.351</dul>
            <sat>0.431</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>8.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.271</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.323</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.242</bd>
            <ll15>0.271</ll15>
            <airdry>0.271</airdry>
            <dul>0.350</dul>
            <sat>0.430</sat>
            <swcon>0.300</swcon>
            <oc>0.325</oc>
            <ph>8.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.271</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.323</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.338</bd>
            <ll15>0.316</ll15>
            <airdry>0.316</airdry>
            <dul>0.344</dul>
            <sat>0.424</sat>
            <swcon>0.300</swcon>
            <oc>0.325</oc>
            <ph>8.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.316</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.323</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>88</DiffusConst>
        <DiffusSlope>35.4</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.08</sw>
              <no3>15</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.14</sw>
              <no3>16</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.17</sw>
              <no3>10</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.21</sw>
              <no3>5</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <ph>7.9</ph>
              <ec>0.21</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.4</ph>
              <ec>0.5</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.6</ph>
              <ec>0.72</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.8</ph>
              <ec>1.02</ec>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock33">
    <clock name="Clock" />
    <metfile name="met">
      <filename>78005.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Peter Quick^TQ02.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">26-Jun</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">27-Apr</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">41</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('26-Jun')
StationNumber=78005
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">26-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">5.5</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Peter Quick^TQ02</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.360</bd>
            <ll15>0.123</ll15>
            <airdry>0.073</airdry>
            <dul>0.334</dul>
            <sat>0.487</sat>
            <swcon>0.300</swcon>
            <oc>1.3</oc>
            <ph>7</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.123</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.293</bd>
            <ll15>0.172</ll15>
            <airdry>0.146</airdry>
            <dul>0.341</dul>
            <sat>0.512</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.172</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">0.912</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.293</bd>
            <ll15>0.173</ll15>
            <airdry>0.165</airdry>
            <dul>0.341</dul>
            <sat>0.512</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.700</finert>
            <ll name="wheat">0.173</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.912</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.374</bd>
            <ll15>0.206</ll15>
            <airdry>0.206</airdry>
            <dul>0.352</dul>
            <sat>0.482</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.206</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.671</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.374</bd>
            <ll15>0.210</ll15>
            <airdry>0.210</airdry>
            <dul>0.350</dul>
            <sat>0.482</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.850</finert>
            <ll name="wheat">0.210</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.671</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.412</bd>
            <ll15>0.238</ll15>
            <airdry>0.238</airdry>
            <dul>0.351</dul>
            <sat>0.467</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.238</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.484</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.423</bd>
            <ll15>0.249</ll15>
            <airdry>0.249</airdry>
            <dul>0.350</dul>
            <sat>0.463</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.249</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.486</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.455</bd>
            <ll15>0.276</ll15>
            <airdry>0.276</airdry>
            <dul>0.344</dul>
            <sat>0.451</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.276</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.382</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>88</DiffusConst>
        <DiffusSlope>35.4</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.09</sw>
              <no3>6</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.17</sw>
              <no3>3</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.23</sw>
              <no3>2</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.3</sw>
              <no3>3</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <ph>7.9</ph>
              <ec>0.22</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.3</ph>
              <ec>0.51</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.7</ph>
              <ec>1.02</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.8</ph>
              <ec>1.58</ec>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock34">
    <clock name="Clock" />
    <metfile name="met">
      <filename>79028.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Peter Taylor^Sheepyards.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">20-Apr</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">08-Jun</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Frame</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">01-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">30</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('20-Apr')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('08-Jun')
StationNumber=79028
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">08-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">5</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise2">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">29-Aug</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">40</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Peter Taylor^Sheepyards</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.230</bd>
            <ll15>0.270</ll15>
            <airdry>0.135</airdry>
            <dul>0.396</dul>
            <sat>0.506</sat>
            <swcon>0.700</swcon>
            <oc>1.365</oc>
            <ph>7.800</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.185</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">0.420</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.510</bd>
            <ll15>0.266</ll15>
            <airdry>0.213</airdry>
            <dul>0.357</dul>
            <sat>0.400</sat>
            <swcon>0.300</swcon>
            <oc>0.585</oc>
            <ph>8.100</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.266</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.510</bd>
            <ll15>0.266</ll15>
            <airdry>0.266</airdry>
            <dul>0.357</dul>
            <sat>0.400</sat>
            <swcon>0.300</swcon>
            <oc>0.585</oc>
            <ph>8.100</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.266</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.286</bd>
            <ll15>0.361</ll15>
            <airdry>0.361</airdry>
            <dul>0.435</dul>
            <sat>0.485</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>8.100</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.361</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.286</bd>
            <ll15>0.361</ll15>
            <airdry>0.361</airdry>
            <dul>0.435</dul>
            <sat>0.485</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>8.100</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.361</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.272</bd>
            <ll15>0.311</ll15>
            <airdry>0.311</airdry>
            <dul>0.436</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>8.200</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.311</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.341</bd>
            <ll15>0.294</ll15>
            <airdry>0.294</airdry>
            <dul>0.392</dul>
            <sat>0.464</sat>
            <swcon>0.300</swcon>
            <oc>0.325</oc>
            <ph>8.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.294</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.427</bd>
            <ll15>0.294</ll15>
            <airdry>0.294</airdry>
            <dul>0.382</dul>
            <sat>0.432</sat>
            <swcon>0.300</swcon>
            <oc>0.325</oc>
            <ph>8.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.294</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">1</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>40</DiffusConst>
        <DiffusSlope>16</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.13</sw>
              <no3>19</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.11</sw>
              <no3>4</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.22</sw>
              <no3>3</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.24</sw>
              <no3>2</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <ph>7.3</ph>
              <ec>0.2</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.7</ph>
              <ec>0.3</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.1</ph>
              <ec>0.6</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.2</ph>
              <ec>0.8</ec>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock35">
    <clock name="Clock" />
    <metfile name="met">
      <filename>76064.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Peter Walch^Mat W.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">14-Jun</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">06-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">11</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('14-Jun')
StationNumber=76064
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Peter Walch^Mat W</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.621</bd>
            <ll15>0.110</ll15>
            <airdry>0.055</airdry>
            <dul>0.139</dul>
            <sat>0.358</sat>
            <swcon>0.700</swcon>
            <oc>1.365</oc>
            <ph>8.500</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.105</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.608</bd>
            <ll15>0.107</ll15>
            <airdry>0.086</airdry>
            <dul>0.183</dul>
            <sat>0.363</sat>
            <swcon>0.300</swcon>
            <oc>0.585</oc>
            <ph>8.800</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.107</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.608</bd>
            <ll15>0.107</ll15>
            <airdry>0.107</airdry>
            <dul>0.183</dul>
            <sat>0.363</sat>
            <swcon>0.300</swcon>
            <oc>0.585</oc>
            <ph>8.800</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.107</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.631</bd>
            <ll15>0.105</ll15>
            <airdry>0.105</airdry>
            <dul>0.183</dul>
            <sat>0.363</sat>
            <swcon>0.300</swcon>
            <oc>0.585</oc>
            <ph>8.800</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.105</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.631</bd>
            <ll15>0.105</ll15>
            <airdry>0.105</airdry>
            <dul>0.183</dul>
            <sat>0.363</sat>
            <swcon>0.300</swcon>
            <oc>0.585</oc>
            <ph>8.800</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.105</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.695</bd>
            <ll15>0.137</ll15>
            <airdry>0.137</airdry>
            <dul>0.236</dul>
            <sat>0.330</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>8.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.137</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.700</bd>
            <ll15>0.222</ll15>
            <airdry>0.222</airdry>
            <dul>0.236</dul>
            <sat>0.330</sat>
            <swcon>0.300</swcon>
            <oc>0.325</oc>
            <ph>8.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.222</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.700</bd>
            <ll15>0.222</ll15>
            <airdry>0.222</airdry>
            <dul>0.236</dul>
            <sat>0.330</sat>
            <swcon>0.300</swcon>
            <oc>0.325</oc>
            <ph>8.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.222</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">1</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>220</DiffusConst>
        <DiffusSlope>22</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.03</sw>
              <no3>8</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.08</sw>
              <no3>4</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.16</sw>
              <no3>2</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.15</sw>
              <no3>4</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <ph>7.2</ph>
              <ec>0.1</ec>
              <esp>0.686905</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.7</ph>
              <ec>0.1</ec>
              <esp>0.897282</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.1</ph>
              <ec>0.1</ec>
              <esp>4.27253</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.9</ph>
              <ec>0.1</ec>
              <esp>1.73025</esp>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock36">
    <clock name="Clock" />
    <metfile name="met">
      <filename>80006.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">R and J Postlethwaite^River.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">05-Jul</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Annuello</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">04-Jul</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">37.7999992370605</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('05-Jul')
StationNumber=80006
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^R and J Postlethwaite^River</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.350</bd>
            <ll15>0.130</ll15>
            <airdry>0.065</airdry>
            <dul>0.300</dul>
            <sat>0.491</sat>
            <swcon>0.700</swcon>
            <oc>1.365</oc>
            <ph>8.500</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.115</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.369</bd>
            <ll15>0.152</ll15>
            <airdry>0.122</airdry>
            <dul>0.330</dul>
            <sat>0.483</sat>
            <swcon>0.300</swcon>
            <oc>0.585</oc>
            <ph>8.800</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.152</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.369</bd>
            <ll15>0.152</ll15>
            <airdry>0.152</airdry>
            <dul>0.370</dul>
            <sat>0.483</sat>
            <swcon>0.300</swcon>
            <oc>0.585</oc>
            <ph>8.800</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.152</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.383</bd>
            <ll15>0.308</ll15>
            <airdry>0.308</airdry>
            <dul>0.370</dul>
            <sat>0.478</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>8.900</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.308</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.383</bd>
            <ll15>0.308</ll15>
            <airdry>0.308</airdry>
            <dul>0.370</dul>
            <sat>0.478</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>8.900</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.308</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.375</bd>
            <ll15>0.324</ll15>
            <airdry>0.324</airdry>
            <dul>0.370</dul>
            <sat>0.481</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>8.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.324</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.384</bd>
            <ll15>0.330</ll15>
            <airdry>0.330</airdry>
            <dul>0.370</dul>
            <sat>0.478</sat>
            <swcon>0.300</swcon>
            <oc>0.325</oc>
            <ph>8.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.330</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.391</bd>
            <ll15>0.330</ll15>
            <airdry>0.330</airdry>
            <dul>0.370</dul>
            <sat>0.475</sat>
            <swcon>0.300</swcon>
            <oc>0.325</oc>
            <ph>8.900</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.330</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">1</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>88</DiffusConst>
        <DiffusSlope>35.4</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>84</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.04</sw>
              <no3>16</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.06</sw>
              <no3>3</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.19</sw>
              <no3>3</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.24</sw>
              <no3>6</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <ph>5.9</ph>
              <ec>0.1</ec>
              <esp>1.6</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>6.6</ph>
              <ec>0.1</ec>
              <esp>1.7</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.1</ph>
              <ec>0.1</ec>
              <esp>2.4</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.4</ph>
              <ec>0.1</ec>
              <esp>3.7</esp>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock37">
    <clock name="Clock" />
    <metfile name="met">
      <filename>74034.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Roger Matthews^Veslos-George.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">27-Apr</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">29-Apr</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Whistler</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">29-Apr</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">12</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('27-Apr')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('29-Apr')
StationNumber=74034
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">03-Aug</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">36.5</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Roger Matthews^Veslos-George</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.480</bd>
            <ll15>0.110</ll15>
            <airdry>0.055</airdry>
            <dul>0.288</dul>
            <sat>0.350</sat>
            <swcon>0.500</swcon>
            <oc>1.3</oc>
            <ph>6</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.110</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.500</bd>
            <ll15>0.132</ll15>
            <airdry>0.110</airdry>
            <dul>0.269</dul>
            <sat>0.335</sat>
            <swcon>0.400</swcon>
            <oc>0.65</oc>
            <ph>6</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.132</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.450</bd>
            <ll15>0.147</ll15>
            <airdry>0.132</airdry>
            <dul>0.252</dul>
            <sat>0.323</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>6</ph>
            <fbiom>0.015</fbiom>
            <finert>0.700</finert>
            <ll name="wheat">0.147</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.370</bd>
            <ll15>0.170</ll15>
            <airdry>0.170</airdry>
            <dul>0.285</dul>
            <sat>0.355</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>6</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.170</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.893</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.430</bd>
            <ll15>0.186</ll15>
            <airdry>0.186</airdry>
            <dul>0.292</dul>
            <sat>0.352</sat>
            <swcon>0.200</swcon>
            <oc>0.65</oc>
            <ph>6</ph>
            <fbiom>0.010</fbiom>
            <finert>0.850</finert>
            <ll name="wheat">0.186</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.893</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.550</bd>
            <ll15>0.222</ll15>
            <airdry>0.222</airdry>
            <dul>0.310</dul>
            <sat>0.342</sat>
            <swcon>0.100</swcon>
            <oc>0.65</oc>
            <ph>6</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.222</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.865</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.670</bd>
            <ll15>0.257</ll15>
            <airdry>0.257</airdry>
            <dul>0.314</dul>
            <sat>0.339</sat>
            <swcon>0.100</swcon>
            <oc>0.65</oc>
            <ph>6</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.257</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.865</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.620</bd>
            <ll15>0.275</ll15>
            <airdry>0.275</airdry>
            <dul>0.319</dul>
            <sat>0.353</sat>
            <swcon>0.100</swcon>
            <oc>0.65</oc>
            <ph>6</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.275</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.828</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>44</DiffusConst>
        <DiffusSlope>16</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>84</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.15</sw>
              <no3>13</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.08</sw>
              <no3>7</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.21</sw>
              <no3>9</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.23</sw>
              <no3>6</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <ph>5.2</ph>
              <ec>0.1</ec>
              <esp>0.4</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>5.4</ph>
              <ec>0</ec>
              <esp>1.7</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7</ph>
              <ec>0.1</ec>
              <esp>3.5</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.7</ph>
              <ec>0.1</ec>
              <esp>5</esp>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock38">
    <clock name="Clock" />
    <metfile name="met">
      <filename>78029.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Rolf Hedt^Kalkee nth-sth.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">09-Jun</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">07-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25.6000003814697</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('09-Jun')
StationNumber=78029
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Rolf Hedt^Kalkee nth-sth</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.173</bd>
            <ll15>0.200</ll15>
            <airdry>0.120</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>1.3</oc>
            <ph>7</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.200</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.231</bd>
            <ll15>0.190</ll15>
            <airdry>0.170</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.190</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.231</bd>
            <ll15>0.200</ll15>
            <airdry>0.200</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.700</finert>
            <ll name="wheat">0.200</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.175</bd>
            <ll15>0.240</ll15>
            <airdry>0.240</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.240</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.960</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.175</bd>
            <ll15>0.270</ll15>
            <airdry>0.270</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.850</finert>
            <ll name="wheat">0.270</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.917</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.201</bd>
            <ll15>0.280</ll15>
            <airdry>0.280</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.280</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.809</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.252</bd>
            <ll15>0.321</ll15>
            <airdry>0.321</airdry>
            <dul>0.400</dul>
            <sat>0.480</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.321</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.791</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.278</bd>
            <ll15>0.332</ll15>
            <airdry>0.332</airdry>
            <dul>0.400</dul>
            <sat>0.480</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.332</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.679</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>40</DiffusConst>
        <DiffusSlope>16</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.08</sw>
              <no3>15</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.17</sw>
              <no3>4</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.24</sw>
              <no3>5</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.24</sw>
              <no3>5</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <ph>7.5</ph>
              <ec>0.2</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.9</ph>
              <ec>0.2</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.1</ph>
              <ec>0.5</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.3</ph>
              <ec>0.8</ec>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock39">
    <clock name="Clock" />
    <metfile name="met">
      <filename>80024.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Ron and Deid Schlitz^Uondo 9.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">19-Apr</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">23-Jun</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">07-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">14</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('19-Apr')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('23-Jun')
StationNumber=80024
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">30-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">50</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise2">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">01-Jul</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">30</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Ron and Deid Schlitz^Uondo 9</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.360</bd>
            <ll15>0.123</ll15>
            <airdry>0.073</airdry>
            <dul>0.334</dul>
            <sat>0.487</sat>
            <swcon>0.300</swcon>
            <oc>1.3</oc>
            <ph>7</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.123</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.293</bd>
            <ll15>0.172</ll15>
            <airdry>0.146</airdry>
            <dul>0.341</dul>
            <sat>0.512</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.172</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">0.912</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.293</bd>
            <ll15>0.173</ll15>
            <airdry>0.165</airdry>
            <dul>0.341</dul>
            <sat>0.512</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.700</finert>
            <ll name="wheat">0.173</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.912</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.374</bd>
            <ll15>0.206</ll15>
            <airdry>0.206</airdry>
            <dul>0.352</dul>
            <sat>0.482</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.206</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.671</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.374</bd>
            <ll15>0.210</ll15>
            <airdry>0.210</airdry>
            <dul>0.350</dul>
            <sat>0.482</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.850</finert>
            <ll name="wheat">0.210</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.671</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.412</bd>
            <ll15>0.238</ll15>
            <airdry>0.238</airdry>
            <dul>0.351</dul>
            <sat>0.467</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.238</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.484</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.423</bd>
            <ll15>0.249</ll15>
            <airdry>0.249</airdry>
            <dul>0.350</dul>
            <sat>0.463</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.249</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.486</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.455</bd>
            <ll15>0.276</ll15>
            <airdry>0.276</airdry>
            <dul>0.344</dul>
            <sat>0.451</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.276</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.382</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>88</DiffusConst>
        <DiffusSlope>35.4</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.1</sw>
              <no3>4</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.19</sw>
              <no3>2</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.24</sw>
              <no3>2</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.28</sw>
              <no3>2</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <ph>8</ph>
              <ec>0.2</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.4</ph>
              <ec>0.5</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.6</ph>
              <ec>0.8</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.7</ph>
              <ec>1.2</ec>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock40">
    <clock name="Clock" />
    <metfile name="met">
      <filename>79075.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Russell Dunlop^Barneys.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">26-Apr</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">05-Jun</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">22-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('26-Apr')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('05-Jun')
StationNumber=79075
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">05-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">6</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise2">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">22-Jul</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">30</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Russell Dunlop^Barneys</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.173</bd>
            <ll15>0.200</ll15>
            <airdry>0.120</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>1.3</oc>
            <ph>7</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.200</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.231</bd>
            <ll15>0.190</ll15>
            <airdry>0.170</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.190</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.231</bd>
            <ll15>0.200</ll15>
            <airdry>0.200</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.700</finert>
            <ll name="wheat">0.200</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.175</bd>
            <ll15>0.240</ll15>
            <airdry>0.240</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.240</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.960</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.175</bd>
            <ll15>0.270</ll15>
            <airdry>0.270</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.850</finert>
            <ll name="wheat">0.270</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.917</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.201</bd>
            <ll15>0.280</ll15>
            <airdry>0.280</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.280</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.809</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.252</bd>
            <ll15>0.321</ll15>
            <airdry>0.321</airdry>
            <dul>0.400</dul>
            <sat>0.480</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.321</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.791</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.278</bd>
            <ll15>0.332</ll15>
            <airdry>0.332</airdry>
            <dul>0.400</dul>
            <sat>0.480</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.332</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.679</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>40</DiffusConst>
        <DiffusSlope>16</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.12</sw>
              <no3>11</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.2</sw>
              <no3>4</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.27</sw>
              <no3>3</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.29</sw>
              <no3>4</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <ph>7.6</ph>
              <ec>0.2</ec>
              <esp>1.47218</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.7</ph>
              <ec>0.2</ec>
              <esp>3.6355</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8</ph>
              <ec>0.3</ec>
              <esp>8.81746</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.2</ph>
              <ec>0.5</ec>
              <esp>12.4833</esp>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock41">
    <clock name="Clock" />
    <metfile name="met">
      <filename>18087.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Steve Nankevill^Paddock 9.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-Apr</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">02-Jul</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Silverstar</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">02-Jul</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">11</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-Apr')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('02-Jul')
StationNumber=18087
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Steve Nankevill^Paddock 9</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.300</bd>
            <ll15>0.053</ll15>
            <airdry>0.027</airdry>
            <dul>0.133</dul>
            <sat>0.200</sat>
            <swcon>0.300</swcon>
            <oc>1.976</oc>
            <ph>8.200</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.053</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.300</bd>
            <ll15>0.072</ll15>
            <airdry>0.036</airdry>
            <dul>0.133</dul>
            <sat>0.200</sat>
            <swcon>0.300</swcon>
            <oc>0.91</oc>
            <ph>9</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.072</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.300</bd>
            <ll15>0.104</ll15>
            <airdry>0.063</airdry>
            <dul>0.153</dul>
            <sat>0.210</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>9</ph>
            <fbiom>0.015</fbiom>
            <finert>0.700</finert>
            <ll name="wheat">0.104</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.500</bd>
            <ll15>0.127</ll15>
            <airdry>0.079</airdry>
            <dul>0.223</dul>
            <sat>0.280</sat>
            <swcon>0.300</swcon>
            <oc>0.52</oc>
            <ph>9.300</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.127</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.500</bd>
            <ll15>0.182</ll15>
            <airdry>0.089</airdry>
            <dul>0.260</dul>
            <sat>0.320</sat>
            <swcon>0.300</swcon>
            <oc>0.39</oc>
            <ph>9.300</ph>
            <fbiom>0.010</fbiom>
            <finert>0.850</finert>
            <ll name="wheat">0.182</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.500</bd>
            <ll15>0.183</ll15>
            <airdry>0.162</airdry>
            <dul>0.260</dul>
            <sat>0.320</sat>
            <swcon>0.300</swcon>
            <oc>0.26</oc>
            <ph>9.600</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.183</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.500</bd>
            <ll15>0.183</ll15>
            <airdry>0.171</airdry>
            <dul>0.260</dul>
            <sat>0.320</sat>
            <swcon>0.300</swcon>
            <oc>0.26</oc>
            <ph>9.600</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.183</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">1</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>220</DiffusConst>
        <DiffusSlope>22</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.03</sw>
              <no3>32.3</no3>
              <nh4>9</nh4>
            </layer>
            <layer>
              <thickness>100</thickness>
              <sw>0.04</sw>
              <no3>32.3</no3>
              <nh4>9</nh4>
            </layer>
            <layer>
              <thickness>100</thickness>
              <sw>0.03</sw>
              <no3>32.3</no3>
              <nh4>9</nh4>
            </layer>
            <layer>
              <thickness>100</thickness>
              <sw>0.06</sw>
              <no3>4.4</no3>
              <nh4>2</nh4>
            </layer>
            <layer>
              <thickness>100</thickness>
              <sw>0.08</sw>
              <no3>3.8</no3>
              <nh4>2</nh4>
            </layer>
            <layer>
              <thickness>100</thickness>
              <sw>0.09</sw>
              <no3>3.8</no3>
              <nh4>2</nh4>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <oc>1.5</oc>
              <ec>0.1</ec>
            </layer>
            <layer>
              <thickness>100</thickness>
              <ec>0.1</ec>
            </layer>
            <layer>
              <thickness>100</thickness>
              <ec>0.1</ec>
            </layer>
            <layer>
              <thickness>100</thickness>
              <ec>0.3</ec>
            </layer>
            <layer>
              <thickness>100</thickness>
              <ec>0.5</ec>
            </layer>
            <layer>
              <thickness>100</thickness>
              <ec>0.8</ec>
            </layer>
            <layer>
              <thickness>100</thickness>
              <ec>0.7</ec>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock42">
    <clock name="Clock" />
    <metfile name="met">
      <filename>76025.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Stuart McQueen^PERS.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">19-Apr</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">01-Jun</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">01-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">15.6000003814697</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('19-Apr')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('01-Jun')
StationNumber=76025
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">16-Jul</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">23</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Stuart McQueen^PERS</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.716</bd>
            <ll15>0.114</ll15>
            <airdry>0.064</airdry>
            <dul>0.219</dul>
            <sat>0.352</sat>
            <swcon>0.500</swcon>
            <oc>1.3</oc>
            <ph>7</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.114</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.694</bd>
            <ll15>0.131</ll15>
            <airdry>0.111</airdry>
            <dul>0.227</dul>
            <sat>0.361</sat>
            <swcon>0.500</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.131</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.694</bd>
            <ll15>0.131</ll15>
            <airdry>0.125</airdry>
            <dul>0.227</dul>
            <sat>0.361</sat>
            <swcon>0.500</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.700</finert>
            <ll name="wheat">0.131</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.650</bd>
            <ll15>0.146</ll15>
            <airdry>0.146</airdry>
            <dul>0.244</dul>
            <sat>0.377</sat>
            <swcon>0.500</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.146</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.924</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.650</bd>
            <ll15>0.146</ll15>
            <airdry>0.146</airdry>
            <dul>0.244</dul>
            <sat>0.377</sat>
            <swcon>0.500</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.850</finert>
            <ll name="wheat">0.146</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.867</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.647</bd>
            <ll15>0.164</ll15>
            <airdry>0.164</airdry>
            <dul>0.257</dul>
            <sat>0.378</sat>
            <swcon>0.500</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.164</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.679</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.657</bd>
            <ll15>0.208</ll15>
            <airdry>0.208</airdry>
            <dul>0.259</dul>
            <sat>0.375</sat>
            <swcon>0.500</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.208</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.679</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.677</bd>
            <ll15>0.235</ll15>
            <airdry>0.235</airdry>
            <dul>0.269</dul>
            <sat>0.367</sat>
            <swcon>0.500</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.235</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.587</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>220</DiffusConst>
        <DiffusSlope>22</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.03</sw>
              <no3>7</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.17</sw>
              <no3>3</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.21</sw>
              <no3>3</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.22</sw>
              <no3>7</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <ph>8.3</ph>
              <ec>0.45</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.2</ph>
              <ec>0.15</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.4</ph>
              <ec>0.29</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.6</ph>
              <ec>0.54</ec>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock43">
    <clock name="Clock" />
    <metfile name="met">
      <filename>78010.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Tony Gregson^Paddock 14.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">15-Apr</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">11-Jun</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Mitre</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">16-Apr</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">42</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('15-Apr')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('11-Jun')
StationNumber=78010
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">11-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">4</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Tony Gregson^Paddock 14</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.173</bd>
            <ll15>0.200</ll15>
            <airdry>0.120</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>1.3</oc>
            <ph>7</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.200</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.231</bd>
            <ll15>0.190</ll15>
            <airdry>0.170</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.190</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.231</bd>
            <ll15>0.200</ll15>
            <airdry>0.200</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.700</finert>
            <ll name="wheat">0.200</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.175</bd>
            <ll15>0.240</ll15>
            <airdry>0.240</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.240</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.960</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.175</bd>
            <ll15>0.270</ll15>
            <airdry>0.270</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.850</finert>
            <ll name="wheat">0.270</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.917</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.201</bd>
            <ll15>0.280</ll15>
            <airdry>0.280</airdry>
            <dul>0.410</dul>
            <sat>0.490</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.280</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.809</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.252</bd>
            <ll15>0.321</ll15>
            <airdry>0.321</airdry>
            <dul>0.400</dul>
            <sat>0.480</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.321</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.791</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.278</bd>
            <ll15>0.332</ll15>
            <airdry>0.332</airdry>
            <dul>0.400</dul>
            <sat>0.480</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.332</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.679</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>40</DiffusConst>
        <DiffusSlope>16</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>73</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.09</sw>
              <no3>3</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.18</sw>
              <no3>1</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.27</sw>
              <no3>1</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.29</sw>
              <no3>2</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <ph>7.8</ph>
              <ec>0.2</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.1</ph>
              <ec>0.2</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.4</ph>
              <ec>0.5</ec>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8.6</ph>
              <ec>0.6</ec>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock44">
    <clock name="Clock" />
    <metfile name="met">
      <filename>80051.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Trevor James^1 East.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile">
      <filename name="filename">Continuous Wheat Simulation.sum</filename>
    </summaryfile>
    <area name="Paddock">
      <registrations name="global" />
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertilizer > 0)then
      Cost = [FertiliserCost] * fertilizer + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or today = SowDate) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">19-May</sowdate>
            <category description="Sowing parameters" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Chara</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] <= [UpperBound2]) then
             act_mods [EventName]
          endif]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">19-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">6</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">10-May</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">35</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">0.75</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage">
          <ui>
            <category description="When should tillage be done" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script name="init">
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script name="start_of_day">
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('19-May')
StationNumber=80051
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Script">
          <script name="post">
            <text><![CDATA[   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull <= SowDateFull and StartSeasonDateFull <= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull <= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today >= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing > 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today < StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage < 30) then
      Z = node_no + 8
      if (Z > 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber <= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber <= 015999) then
      AustState = 'nt'
   elseif (StationNumber <= 026999) then
      AustState = 'sa'
   elseif (StationNumber <= 045999) then
      AustState = 'qld'
   elseif (StationNumber <= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber <= 090999) then
      AustState = 'vic'
   elseif (StationNumber <= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertilizer
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertilizer
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif]]></text>
            <event>post</event>
          </script>
          <script name="end_of_day,sowing,harvesting,reseting">
            <text><![CDATA[   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL < 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()
   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha

   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * (biomass / (1 - 13/100) / 1000)

   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z >= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z >= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z >= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z >= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z >= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z >= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z >= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z >= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z >= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z >= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z >= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z >= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z >= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z >= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z >= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

]]></text>
            <event>end_of_day</event>
            <event>sowing</event>
            <event>harvesting</event>
            <event>reseting</event>
          </script>
          <script name="start_of_day">
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate) then
      act_mods CurrentDay
   endif
</text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
       PreSowingFertiliser = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">14-Jul</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">46</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise2">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">27-Aug</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">46</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise3">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">07-Sep</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">46</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise4">
          <ui>
            <category description="When should fertiliser be applied" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">25-Sep</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">46</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate1">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">25-May</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">28</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">0.75</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate2">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">25-Sep</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">14</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">0.75</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate3">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">29-Sep</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">17.5</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">0.75</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate4">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">11-Oct</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">17.5</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">0.75</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate5">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">20-Oct</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">17.5</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">0.75</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate6">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">26-Oct</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">17.5</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">0.75</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate7">
          <ui>
            <category description="When should irrigation be applied" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1-Nov</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">17.5</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">0.75</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat">

      </wheat>
      <barley enabled="no">

      </barley>
      <canola enabled="no" />
      <oats enabled="no">

      </oats>
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" array="?" description="Biomass" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" array="?" description="Yield" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" array="Rainfall (mm)" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3()" />
          <variable name="nh4()" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" array="No" description="Soil loss (t/ha)" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot()" />
          <variable name="dnit()" />
          <variable name="leach_no3" />
          <variable name="NInPlant" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" array="Plant desnity" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <Constants>
            <Title>2004^Trevor James^1 East</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="count of MildFrost from sowing to harvesting as MildFrostCount" />
        <variable name="count of ModerateFrost from sowing to harvesting as ModerateFrostCount" />
        <variable name="count of SevereFrost from sowing to harvesting as SevereFrostCount" />
        <variable name="count of MildHeatShock from sowing to harvesting as MildHeatShockCount" />
        <variable name="count of ModerateHeatShock from sowing to harvesting as ModerateHeatShockCount" />
        <variable name="count of SevereHeatShock from sowing to harvesting as SevereHeatShockCount" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertilizer on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
      </tracker>
      <soil name="Soil">
        <profile>
          <layer>
            <thickness>100</thickness>
            <bd>1.350</bd>
            <ll15>0.120</ll15>
            <airdry>0.070</airdry>
            <dul>0.300</dul>
            <sat>0.491</sat>
            <swcon>0.700</swcon>
            <oc>1.3</oc>
            <ph>7</ph>
            <fbiom>0.025</fbiom>
            <finert>0.400</finert>
            <ll name="wheat">0.120</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.369</bd>
            <ll15>0.130</ll15>
            <airdry>0.111</airdry>
            <dul>0.330</dul>
            <sat>0.483</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.020</fbiom>
            <finert>0.600</finert>
            <ll name="wheat">0.130</ll>
            <kl name="wheat">0.060</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.369</bd>
            <ll15>0.140</ll15>
            <airdry>0.140</airdry>
            <dul>0.370</dul>
            <sat>0.483</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.700</finert>
            <ll name="wheat">0.140</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">1</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.383</bd>
            <ll15>0.150</ll15>
            <airdry>0.150</airdry>
            <dul>0.370</dul>
            <sat>0.478</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.015</fbiom>
            <finert>0.800</finert>
            <ll name="wheat">0.150</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.893</xf>
          </layer>
          <layer>
            <thickness>150</thickness>
            <bd>1.383</bd>
            <ll15>0.250</ll15>
            <airdry>0.250</airdry>
            <dul>0.370</dul>
            <sat>0.478</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.850</finert>
            <ll name="wheat">0.250</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.893</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.375</bd>
            <ll15>0.270</ll15>
            <airdry>0.270</airdry>
            <dul>0.370</dul>
            <sat>0.481</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.900</finert>
            <ll name="wheat">0.270</ll>
            <kl name="wheat">0.040</kl>
            <xf name="wheat">0.865</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.384</bd>
            <ll15>0.270</ll15>
            <airdry>0.270</airdry>
            <dul>0.370</dul>
            <sat>0.478</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.270</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.865</xf>
          </layer>
          <layer>
            <thickness>300</thickness>
            <bd>1.391</bd>
            <ll15>0.342</ll15>
            <airdry>0.342</airdry>
            <dul>0.370</dul>
            <sat>0.475</sat>
            <swcon>0.300</swcon>
            <oc>0.65</oc>
            <ph>7</ph>
            <fbiom>0.010</fbiom>
            <finert>0.950</finert>
            <ll name="wheat">0.342</ll>
            <kl name="wheat">0.020</kl>
            <xf name="wheat">0.828</xf>
          </layer>
        </profile>
        <Cona>2</Cona>
        <DiffusConst>88</DiffusConst>
        <DiffusSlope>35.4</DiffusSlope>
        <U>2</U>
        <Salb>0.13</Salb>
        <Cn2Bare>84</Cn2Bare>
        <CnRed>20</CnRed>
        <CnCov>0.8</CnCov>
        <CnCanopyFact>1</CnCanopyFact>
        <RootCn>45</RootCn>
        <RootWt>1500</RootWt>
        <SoilCn>12.5</SoilCn>
        <EnrACoeff>7.4</EnrACoeff>
        <EnrBCoeff>0.2</EnrBCoeff>
        <soilsample name="Soil sample 1">
          <profile>
            <layer>
              <thickness>100</thickness>
              <sw>0.09</sw>
              <no3>21</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.17</sw>
              <no3>4</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.31</sw>
              <no3>3</no3>
            </layer>
            <layer>
              <thickness>300</thickness>
              <sw>0.25</sw>
              <no3>4</no3>
            </layer>
          </profile>
        </soilsample>
        <soilsample name="Soil sample 2">
          <profile>
            <layer>
              <thickness>100</thickness>
              <ph>6.7</ph>
              <ec>0.6</ec>
              <esp>11.2108</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>6.8</ph>
              <ec>0.3</ec>
              <esp>10.963</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>7.7</ph>
              <ec>0.5</ec>
              <esp>11.2837</esp>
            </layer>
            <layer>
              <thickness>300</thickness>
              <ph>8</ph>
              <ec>0.2</ec>
              <esp>11.8254</esp>
            </layer>
          </profile>
        </soilsample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
</folder>