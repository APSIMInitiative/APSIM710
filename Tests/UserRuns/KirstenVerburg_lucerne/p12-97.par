!********** CLOCK MODULE **********
[all.clock.parameters]
start_date = 1/11/1996     ! dd/mm/yyyy
end_date = 30/4/2002     ! dd/mm/yyyy

!********** ACCUM MODULE **********
[all.accum.parameters]
! Accumulate rainfall for 2 days.
! We can then use this variable in manager

accum_variables = rain[2]

!********** REPORT MODULE **********
[p12.report1.parameters]
outputfile = p12-97.out

[crops.report2.parameters]
outputfile = crop-97.out

[profiles.report3.parameters]
outputfile = prof-97.out

[dailys.report4.parameters]
outputfile = daily-97.out

[neutrons.report5.parameters]
outputfile = neut-97.out

[bromides.report6.parameters]
outputfile = brom-97.out

[roots.report7.parameters]
outputfile = root-97.out

!********** MANAGER MODULE **********
[all.manager.init]
!selected terms to be calculated in the manager
period       = 0
ET           = 0
T            = 0
drain_25     = 0
drain_90     = 0
drain180     = 0
leach_25     = 0
leach_90     = 0
leach180     = 0
cum_rain     = 0
cum_ET       = 0
cum_E        = 0
cum_T        = 0
cum_drain_25 = 0
cum_drain_90 = 0
cum_drain180 = 0
cum_drain    = 0
cum_leach_25 = 0
cum_leach_90 = 0
cum_leach180 = 0

netdrain130   = 0
cumnetdrain130 = 0
oldsw_dep_130  = 0
sw_dep_130    = 0

no3_025      = 0
no3_2590     = 0
nh4_025      = 0
nh4_2590     = 0
sw_dep_025   = 0
sw_dep_2590  = 0
sw_dep_90180 = 0

no3_030      = 0
no3_3080     = 0
nh4_030      = 0
nh4_3080     = 0
sw_dep_030   = 0
sw_dep_3080  = 0

cum_nmin010  = 0
cum_nmin1020 = 0
cum_nmin2030 = 0
sw_dep_010   = 0
nh4_010      = 0
no3_010      = 0
fom_n_010    = 0
biom_n_010   = 0
hum_n_010    = 0

reduce_status = 0

print_flag   = 0
zero_flag    = 0
crop_in      = 0
cult         = 0

[all.manager.start_of_day]
!resetting of cumulative water balance terms and stages
if (year = 1997 and (day = 113 or day = 315)) then
   zero_flag = 1
endif
if (year = 1998 and (day = 98 or day = 309)) then
   zero_flag = 1
endif
if (year = 1999 and (day = 140 or day = 343)) then
   zero_flag = 1
endif
if (year = 2000 and (day = 104 or day = 347)) then
   zero_flag = 1
endif
if (year = 2001 and (day = 101 or day = 339)) then
   zero_flag = 1
endif

if (zero_flag = 1) then
   period = period + 1
   cum_rain     = 0
   cum_ET       = 0
   cum_E        = 0
   cum_T        = 0
   cum_drain_25 = 0
   cum_drain_90 = 0
   cum_drain180 = 0
   cum_drain    = 0
   cum_leach_25 = 0
   cum_leach_90 = 0
   cum_leach180 = 0
   zero_flag    = 0
!  cumnetdrain90 = 0
   cumnetdrain130 = 0
endif

if (year = 1997 and day = 8) then
   cum_nmin010  = 0
   cum_nmin1020 = 0
   cum_nmin2030 = 0
endif

!Temporary assumption about cut at flowering
!if (lucerne.StageName = 'flowering') then
!   lucerne harvest Height = 50 (mm), remove = 0.95
!endif

!winter activity adjustments
if (lucerne.crop_class = 'regrowth' and day = 90 and reduce_status = 0) then
   lucerne reduce
   reduce_status = 1
endif

if (day = 270 and lucerne.crop_class = 'reduced') then
   lucerne spring
   reduce_status = 0
endif

if (year = 1996 and day = 306) then
   SoilN IncorpFOM Amount=100 500 300 100 50 30 20 15 5 1 0 0 0 0 0 0 0 0 0 0 (kg/ha), CNR=50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 ()
endif

!if (year = 1998 and day = 267) then
!    SWIM2 set sw = 0.273 0.275 0.267 0.28 0.27 0.28 0.29 0.295 0.302 0.312 0.325 0.334 0.33 0.327 0.326 0.317 0.306 0.295 0.296 0.295 0.292 0.303 0.309 0.31 0.31 0.31
!endif

if (year = 1998 and day = 223) then
   solute set brA = 0 0 0 128 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
endif

[all.manager.end_of_day]
!water balance terms
T            = weed.ep + lucerne.ep + canola.ep + wheat.ep
ET           = SWIM2.es + T
drain_25     = SWIM2.flow(6)
drain_90     = 0.5* SWIM2.flow(10)+ 0.5* SWIM2.flow(11)
drain180     = SWIM2.flow(15)
leach_25     = SWIM2.flow_no3(6)
leach_90     = 0.5* SWIM2.flow_no3(10)+ 0.5* SWIM2.flow_no3(11)
leach180     = SWIM2.flow_no3(15)

!cumulative water balance terms
cum_rain     = cum_rain + met.rain
cum_E        = cum_E + SWIM2.es
cum_T        = cum_T + T
cum_ET       = cum_ET + ET
cum_drain_25 = cum_drain_25 + drain_25
cum_drain_90 = cum_drain_90 + drain_90
cum_drain180 = cum_drain180 + drain_180
cum_drain    = cum_drain + SWIM2.drain
cum_leach_25 = cum_leach_25 + leach_25
cum_leach_90 = cum_leach_90 + leach_90
cum_leach180 = cum_leach180 + leach180

!net drainage past 130 cm - counting water uptake from below as negative drainage
sw_dep_130    = sw_dep(1) + sw_dep(2) + sw_dep(3) + sw_dep(4)+ sw_dep(5) + sw_dep(6) + sw_dep(7) + sw_dep(8) + sw_dep(9) + sw_dep(10) + sw_dep(11) + sw_dep(12) + (0.5 * sw_dep(13))
netdrain130    = met.rain - ET - (sw_dep_130 - oldsw_dep_130)
oldsw_dep_130  = sw_dep_130
cumnetdrain130 = cumnetdrain130 + netdrain130

!summary terms
no3_025      = no3(1) + no3(2) + no3(3) + no3(4) + no3(5) + no3(6)
no3_2590     = no3(7) + no3(8) + no3(9) + no3(10) + (0.5 * no3(11))
nh4_025      = nh4(1) + nh4(2) + nh4(3) + nh4(4) + nh4(5) + nh4(6)
nh4_2590     = nh4(7) + nh4(8) + nh4(9) + nh4(10) + (0.5 * nh4(11))
sw_dep_025   = sw_dep(1) + sw_dep(2) + sw_dep(3) + sw_dep(4) + sw_dep(5) + sw_dep(6)
sw_dep_2590  = sw_dep(7) + sw_dep(8) + sw_dep(9) + sw_dep(10) + (0.5 * sw_dep(11))
sw_dep_90180 = (0.5 * sw_dep(11)) + sw_dep(12) + sw_dep(13) + sw_dep(14) + sw_dep(15)

no3_030      = no3(1) + no3(2) + no3(3) + no3(4) + no3(5) + no3(6) + (0.5 * no3(7))
no3_3080     = (0.5 * no3(7)) + no3(8) + no3(9) + no3(10)
nh4_030      = nh4(1) + nh4(2) + nh4(3) + nh4(4) + nh4(5) + nh4(6) + (0.5 * nh4(7))
nh4_3080     = (0.5 * nh4(7)) + nh4(8) + nh4(9) + nh4(10)
sw_dep_030   = sw_dep(1) + sw_dep(2) + sw_dep(3) + sw_dep(4) + sw_dep(5) + sw_dep(6) + (0.5 * sw_dep(7))
sw_dep_3080  = (0.5 * sw_dep(7)) + sw_dep(8) + sw_dep(9) + sw_dep(10)

!mineralisation analysis
cum_nmin010  = cum_nmin010 + dlt_n_min(1) + dlt_n_min(2) + dlt_n_min(3) + dlt_n_min(4) + (dlt_n_min(5) / 3)
cum_nmin1020 = cum_nmin1020 + (2 * dlt_n_min(5) / 3) + (dlt_n_min(6) / 2)
cum_nmin2030 = cum_nmin2030 + (dlt_n_min(6) / 2) + (dlt_n_min(7) / 2)
sw_dep_010   = sw_dep(1) + sw_dep(2) + sw_dep(3) + sw_dep(4) + (sw_dep(5) / 3)
no3_010      = no3(1) + no3(2) + no3(3) + no3(4) + (no3(5) / 3)
nh4_010      = nh4(1) + nh4(2) + nh4(3) + nh4(4) + (nh4(5) / 3)
fom_n_010    = fom_n(1) + fom_n(2) + fom_n(3) + fom_n(4) + (fom_n(5) / 3)
biom_n_010   = biom_n(1) + biom_n(2) + biom_n(3) + biom_n(4) + (biom_n(5) / 3)
hum_n_010    = hum_n(1) + hum_n(2) + hum_n(3) + hum_n(4) + (hum_n(5) / 3)

!output at start and end of water balance periods, before and after cutting, at harvest, at sowing, at fertilisation,
! and at sampling of soil and NMM
if (year = 1997 and (day = 112 or day = 113 or day = 134 or day = 163 or day = 218)) then
   print_flag = 1
endif
if (year = 1997 and (day = 300 or day = 310 or day = 311 or day = 314 or day = 315 or day = 344)) then
   print_flag = 1
endif

if (year = 1998 and (day = 97 or day = 98 or day = 150 or day = 169 or day = 189 or day = 238 or day = 267)) then
   print_flag = 1
endif
if (year = 1998 and (day = 280 or day = 288 or day = 308 or day = 309 or day = 344 or day = 345 or day = 350)) then
   print_flag = 1
endif

if (year = 1999 and (day = 35 or day = 83 or day = 139 or day = 140 or day = 166 or day = 175 or day = 199 or day = 210 or day = 237)) then
   print_flag = 1
endif
if (year = 1999 and (day = 258 or day = 266 or day = 286 or day = 307 or day = 323 or day = 342 or day = 343 or day = 347)) then
   print_flag = 1
endif

if (year = 2000 and (day = 11 or day = 20 or day = 21 or day = 42 or day = 67 or day = 94 or day = 97 or day = 98)) then
   print_flag = 1
endif
if (year = 2000 and (day = 103 or day = 104 or day = 110 or day = 133 or day = 153 or day = 165 or day = 194)) then
   print_flag = 1
endif
if (year = 2000 and (day = 206 or day = 207 or day = 213 or day = 242 or day = 256 or day = 269 or day = 297)) then
   print_flag = 1
endif
if (year = 2000 and (day = 298 or day = 327 or day = 346 or day = 347 or day = 348 or day = 353)) then
   print_flag = 1
endif

if (year = 2001 and (day = 23 or day = 51 or day = 85 or day = 100 or day = 101 or day = 117 or day = 120 or day = 150)) then
   print_flag = 1
endif
if (year = 2001 and (day = 151 or day = 178 or day = 204 or day = 234 or day = 241 or day = 242 or day = 268 or day = 283)) then
   print_flag = 1
endif
if (year = 2001 and (day = 284 or day = 296 or day = 327 or day = 338 or day = 339 or day = 348 or day = 349)) then
   print_flag = 1
endif

if (year = 2002 and (day = 9 or day = 42 or day = 43 or day = 80 or day = 120)) then
   print_flag = 1
endif


if ((print_flag = 1) or (report1.days_since_last_report = 14)) then
   report1 do_end_day_output
   report2 do_end_day_output
   print_flag = 0
endif

report4 do_end_day_output

[weeds.manager.start_of_day]
if ((day = 361) and (year = 1992)) then
   nwheat sow plants = 40, depth = 40, cultivar = weed
   cult = 2
   crop_in = 1
endif

if ((crop_in = 0) and (lucerne.plant_status = 'out')) then
   if (date_within('1-dec, 30-apr') = 1) then
      ! weeds allowed to germinate
      if ((date_within('1-dec,28-feb') and (rain[2] >= 25)) or
          (date_within('1-mar,30-apr') and (rain[2] >= 20))) then
         nwheat sow plants = 40, depth = 40, cultivar = weed
         cult = 2
         crop_in = 1
      endif
   endif
endif
if ((cult = 2) and ((nwheat_status = 10) or (today = date('1-may')))) then
      nwheat harvest
      crop_in = 0
      cult = 0
endif

!********** OPERATIONS MODULE **********
[all.Operations.parameters]
!-------history---------
!1988: pasture
!1989: pasture
!1990: Canola
!1991: 10 ha Matong, 3 ha Dollarbird, 1 ha cultivated without sowing for AG Condor
!   Matong 80 kg/ha and 125 kg/ha DAP
!   as minimum till on Canola stubble having being burnt early May
!1992: Lupins sown on 7 May
!1993: sown with mix of Janz and Vulcan starting on 1/6 and completed on 4/6/93
!1994: oat crop
!1995: triticale sown at end of May
!  heavy crop at 1.0m 3-7 Oct 1995 but with considerable infestation by wild oats
!  total DM on 11/10/1995: 878, SLA 148

!------1996 oats --------
!Notes from farmer: 1996 crop was oaten silage, possibly with peas
!   It was harvested in head so very little dry matter would have been residual
!Suggests to start simulation at about anthesis in 1996 = estimate 1/11/96 = day 306 with no surface residue
!   Initial root residue - ?????

!------1996/97 fallow-------
!Given that there would have been little surface residue, assume no tillage

!------1997 canola-------
!Field book: canola cv Karoo sown (4 kg seed/ha) 14/5/97 (day 134)
!150 kg/ha DAP applied on 14/5/97 - assume 20% N = 30 kg N/ha
!Sowing density = final plant density from biomass file average 134 /m2
!Field book: broadcast urea fertilizer (140 kg/ha = 65 kg N/ha) added on 6/8/97 (day 218)
!May need to be adjusted for volatilisation losses
!Field book: canola plots harvested on 6/11/97 (day 310)
!Farmer's field windrowed on same day or shortly after????????
!Model harvest 1 day later - as it happens before output of crop stuff/calculation ET

134 1997 canola sow plants = 134 (/m2), crop_class = triazine, row_spacing = 175 (mm), sowing_depth = 20 (mm), cultivar = Karoo
134 1997 fertiliz apply amount = 30 (kg/ha), type = nh4_n, depth = 60 (mm)
218 1997 fertiliz apply amount = 65 (kg/ha), type = urea_n (), depth = 10 (mm)
311 1997 canola harvest
311 1997 canola end_crop

!-------1997/98 fallow-------
!Farmer's notes: probably only harrowed
!For APSIM purposes, assume none
111 1998 weed sow cultivar = early, plants = 10 (/m2), crop_class = winter_grass, sowing_depth = 40 (mm)
145 1998 weed kill_crop
145 1998 weed end_crop

!-------1998 triticale-------
!Field book: tritiale sown on 30/5/98 (day 150)
!X Triticosecale cv. Abacas (Triticum x Secale),  55 kg seed/ha
!with with 130 kg/ha DAP - assume 20% N = 26 kg N/ha
!Plant density from biomass spreadsheet 94 /m2 (early measure before tilering, seems low)
!Field book: broadcast urea fertilizer (200 kg/ha = 90 kg N/ha) added on 8/7/98 (day 189)
!May need to be adjusted for volatilisation losses
!Bromide added 11-12/8/98 (day 223) 4 plots
!Triticale harvest on 10/12/98 (day 344) (biomass plots) and around measurement sites
!Farmer's field harvest: 17&18/12/98 (day 351 and 352)
!To best match neutron probe data, assume 10/12/98 in model run
!Model harvest 1 day later - as it happens before output of crop stuff/calculation ET

150 1998 wheat sow plants = 94, sowing_depth = 40, cultivar = janz
150 1998 fertiliz apply amount = 26 (kg/ha), type = nh4_n, depth = 60 (mm)
189 1998 fertiliz apply amount = 90 (kg/ha), type = urea_n (), depth = 10 (mm)
345 1998 wheat harvest
345 1998 wheat kill_crop
345 1998 wheat end_crop

!-------1999 fallow-------
!Farmer's e-mail suggests that surface residues were to be burnt some time after 11/5/99, and before 18/7/99 sowing
!Assume early July cool burn (70%)
!-------1999 fallow-------
349 1998 weed sow cultivar = early, plants = 20 (/m2), crop_class = winter_grass, sowing_depth = 40 (mm)
85  1999 weed harvest
!85  1999 weed kill_crop
85  1999 weed end_crop
86  1999 surfaceom tillage type = sweep
87  1999 weed sow cultivar = early, plants = 20 (/m2), crop_class = winter_grass, sowing_depth = 40 (mm)
!151 1999 weed kill_crop
151 1999 weed end_crop
152 1999 surfaceom tillage type = burn_95

!-------1999-2002 lucerne------
!Farmer's notes: lucerne sown on 18/7/99 (day 199)
!Medicago sativa cv. ???
!Plant/stem density not known
!Farmer's notes: 100 kg/ha DAP - assume 20% N = 20 kg N/ha
199 1999 lucerne sow cultivar = trifecta, plants = 300 (/m2), sowing_depth = 30 (mm)
199 1999 fertiliz apply amount = 20 (kg/ha), type = nh4_n, depth = 60 (mm)
!From biomass spreadsheets: lucerne cuts
!In reality field outside growth cages was grazed, and hence received N return
!For purposes of checking lucerne biomass, stick to cut and removal
!   but evaluate if this is satisfactory
!Model cuts 1 day later - as it happens before output of crop stuff/calculation ET
343 1999 lucerne harvest height = 50 (mm), remove = 0.95, plants = 300 !(8/12/99)
 21 2000 lucerne harvest height = 50 (mm), remove = 0.95, plants = 300 !(20/1/00)
 98 2000 lucerne harvest height = 50 (mm), remove = 0.95, plants = 300 !(6/4/00)
207 2000 lucerne harvest height = 50 (mm), remove = 0.95, plants = 300 !(24/7/00)
298 2000 lucerne harvest height = 50 (mm), remove = 0.95, plants = 300 !(23/10/00)
348 2000 lucerne harvest height = 50 (mm), remove = 0.95, plants = 300 !(12/12/00)
151 2001 lucerne harvest height = 50 (mm), remove = 0.95, plants = 300 !(30/05/01)
242 2001 lucerne harvest height = 50 (mm), remove = 0.95, plants = 300 !(29/8/01)
284 2001 lucerne harvest height = 50 (mm), remove = 0.95, plants = 300 !(10/10/01)
349 2001 lucerne harvest height = 50 (mm), remove = 0.95, plants = 300 !(14/12/01)
!farmer seems to have attempted to plough out lucerne prior to spray (8/2/02)
!and then found it necessary to spray (1/3/02) and plough again (31/3/02)
 38 2002 lucerne harvest height = 50 (mm), plants = 60
 39 2002 surfaceom tillage type = chisel() !(8/2/02)
 60 2002 lucerne harvest height = 50 (mm), plants = 10
 89 2002 lucerne harvest height = 50 (mm)
 89 2002 lucerne kill_crop
 89 2002 lucerne end_crop
 90 2002 surfaceom tillage type = chisel() !(31/3/02)
! wheat sown with 130 MAP on 12/4/02 - ignored for the moment as simulation is finishing

!Reporting dates
!soil profiles
163 1997 report3 do_end_day_output    ! 12-Jun-97
300 1997 report3 do_end_day_output    ! 27-Oct-97
344 1997 report3 do_end_day_output    ! 10-Dec-97
169 1998 report3 do_end_day_output    ! 18-Jun-98
280 1998 report3 do_end_day_output    ! 07-Oct-98
350 1998 report3 do_end_day_output    ! 16-Dec-98
175 1999 report3 do_end_day_output    ! 24-Jun-99
266 1999 report3 do_end_day_output    ! 23-Sep-99
342 1999 report3 do_end_day_output    ! 08-Dec-99
153 2000 report3 do_end_day_output    ! 01-Jun-00
256 2000 report3 do_end_day_output    ! 12-Sep-00
347 2000 report3 do_end_day_output    ! 12-Dec-00
117 2001 report3 do_end_day_output    ! 27-Apr-01
268 2001 report3 do_end_day_output    ! 25-Sep-01
338 2001 report3 do_end_day_output    ! 04-Dec-01

!neutron probe
238 1998 report5 do_end_day_output    ! 26-Aug-98
267 1998 report5 do_end_day_output    ! 24-Sep-98
288 1998 report5 do_end_day_output    ! 15-Oct-98
308 1998 report5 do_end_day_output    ! 04-Nov-98
344 1998 report5 do_end_day_output    ! 10-Dec-98
 35 1999 report5 do_end_day_output    ! 04-Feb-99
 83 1999 report5 do_end_day_output    ! 24-Mar-99
210 1999 report5 do_end_day_output    ! 29-Jul-99
237 1999 report5 do_end_day_output    ! 25-Aug-99
258 1999 report5 do_end_day_output    ! 15-Sep-99
286 1999 report5 do_end_day_output    ! 13-Oct-99
307 1999 report5 do_end_day_output    ! 03-Nov-99
323 1999 report5 do_end_day_output    ! 19-Nov-99
347 1999 report5 do_end_day_output    ! 13-Dec-99
 11 2000 report5 do_end_day_output    ! 11-Jan-00
 42 2000 report5 do_end_day_output    ! 11-Feb-00
 67 2000 report5 do_end_day_output    ! 07-Mar-00
 94 2000 report5 do_end_day_output    ! 03-Apr-00
110 2000 report5 do_end_day_output    ! 19-Apr-00
133 2000 report5 do_end_day_output    ! 12-May-00
165 2000 report5 do_end_day_output    ! 13-Jun-00
194 2000 report5 do_end_day_output    ! 12-Jul-00
213 2000 report5 do_end_day_output    ! 31-Jul-00
242 2000 report5 do_end_day_output    ! 29-Aug-00
269 2000 report5 do_end_day_output    ! 25-Sep-00
297 2000 report5 do_end_day_output    ! 23-Oct-00
327 2000 report5 do_end_day_output    ! 22-Nov-00
353 2000 report5 do_end_day_output    ! 18-Dec-00
 23 2001 report5 do_end_day_output    ! 23-Jan-01
 51 2001 report5 do_end_day_output    ! 20-Feb-01
 85 2001 report5 do_end_day_output    ! 26-Mar-01
120 2001 report5 do_end_day_output    ! 30-Apr-01
178 2001 report5 do_end_day_output    ! 27-Jun-01
204 2001 report5 do_end_day_output    ! 23-Jul-01
234 2001 report5 do_end_day_output    ! 22-Aug-01
268 2001 report5 do_end_day_output    ! 25-Sep-01
296 2001 report5 do_end_day_output    ! 23-Oct-01
327 2001 report5 do_end_day_output    ! 23-Nov-01
348 2001 report5 do_end_day_output    ! 14-Dec-01
  9 2002 report5 do_end_day_output    ! 09-Jan-02
 43 2002 report5 do_end_day_output    ! 12-Feb-02
 80 2002 report5 do_end_day_output    ! 21-Mar-02
120 2002 report5 do_end_day_output    ! 30-Apr-02

!bromide
323 1998 report6 do_end_day_output    ! 19-Nov-98
342 1999 report6 do_end_day_output    ! 08-Dec-99

!roots
!Canola97
150 1997 report7 do_end_day_output    ! 30-May-97
170 1997 report7 do_end_day_output    ! 19-Jun-97
221 1997 report7 do_end_day_output    ! 09-Aug-97
250 1997 report7 do_end_day_output    ! 07-Sep-97
267 1997 report7 do_end_day_output    ! 24-Sep-97
310 1997 report7 do_end_day_output    ! 06-Nov-97

!Triticale98
159 1998 report7 do_end_day_output    ! 08-Jun-98
189 1998 report7 do_end_day_output    ! 08-Jul-98
252 1998 report7 do_end_day_output    ! 09-Sep-98
274 1998 report7 do_end_day_output    ! 01-Oct-98
294 1998 report7 do_end_day_output    ! 21-Oct-98
303 1998 report7 do_end_day_output    ! 20-Oct-98
337 1998 report7 do_end_day_output    ! 03-Dec-98

!Lucerne99-01
216 1999 report7 do_end_day_output    ! 04-Aug-99
298 1999 report7 do_end_day_output    ! 25-Oct-99
242 1999 report7 do_end_day_output    ! 08-Dec-99
 20 2000 report7 do_end_day_output    ! 20-Jan-00
 97 2000 report7 do_end_day_output    ! 06-Apr-00
206 2000 report7 do_end_day_output    ! 24-Jul-00
280 2000 report7 do_end_day_output    ! 06-Oct-00
347 2000 report7 do_end_day_output    ! 12-Dec-00
120 2001 report7 do_end_day_output    ! 30-Apr-01

!******************** Apswim module ********************
[all.SWIM2.init]
! -------------------- initial layer information ----------------------
!                  1       2       3       4       5       6       7       8       9      10      11      12      13      14      15      16      17      18      19      20      21      22      23      24      25      26       27      28
x         =        0      10      20      50     100     200     300     400     500     700     900    1100    1300    1500    1700    1900    2100    2300     2500    2700    2900    3000    3500    4000    4500    5000    5500    6000
soil_type =    soil1       -       -   soil1       -   soil2   soil2a  soil3       -   soil4   soil5   soil6   soil7   soil8   soil8   soil8   soil8   soil7        -   soil9   soil9       -  soil10  soil11  soil12  soil12  soil12  soil12
theta    =    0.081     0.081   0.081    0.1    0.13    0.19    0.22    0.25    0.26    0.28     0.3   0.323   0.323   0.335   0.335   0.335   0.335   0.323    0.313  0.304   0.304   0.300   0.292   0.303   0.308   0.308   0.308   0.308


slmin =  -3.0
slmax =  7.0

bypass_flow =  off            ! Bypass Flow  - On/Off
                              !
runoff                    = 2 ! Runoff Flag  - 0) No ponding (all runoff)
                              ! -----------    1) All ponded (no runoff)
                              !                2) Use runoff functions
                              !
top_boundary_condition    = 0 ! Surface Flag - 0) infinite surface conductance
                              ! ------------   1) constant potential
                              !                2) conductance function
                              !
bottom_boundary_condition = 0 ! Bottom Flag  - 0) constant gradient
                              ! -----------    1) water table
                              !                2) zero flux
                              !                3) seepage

vapour_conductivity =  on     ! Vapour Conductivity flag (on/off)
                              ! ------------------------

run_solutes =  no3 nh4 urea brA brB brC brD   ! solutes to be moved by SWIM during simulation

extra_solute_supply =  on
solute_exclusion =  on

[all.SWIM2.solute]
               ! Note - Urea is just the same as no3 for now
               ! ----------------------------------------------------
solute_name =                    no3   nh4  urea  brA  brB  brC  brD
               ! ----------------------------------------------------
slupf =                          1.0   0    0     0    0    0    0
slos =                           0.4   1.4  0.0   0.4  0.4  0.4  0.4
d0 =                           .0684 .07056 .0684 .072 .072 .072 .072
a =                              1.0   1.0  1.0   1.0  1.0  1.0  1.0
dthc =                            0    0    0     0    0    0    0
dthp =                            1    1    1     1    1    1    1
disp =                            1    1    1     1    1    1    1
ground_water_conc =               0    0    0     0    0    0    0
               ! ----------------------------------------------------


! ------------------ swim calculation parameters ---------------------
[all.SWIM2.calc]
dtmin =  0.0   ! min timestep (min)
dtmax =  60.   ! max timestep (min)
!dtmax_sol = 60.                       ! max solute uptake timestep (min)
ersoil =  0.000001   !
ernode =  0.000001   !
errex =  0.0001   !
dppl =  2   !
dpnl =  1   !
max_water_increment =  0.2   ! max water increment (mm)
swt =  0.0   ! Space Weighting Factor (gravity flow)
                              ! -------------------------------------
                              ! 0.5 -> 1.0 (central to fully upstream)
                              ! < -1 (central diffs by factor of -1*SWF)
                              ! 0.0 (central until instable, then upstream)
slcerr =  0.000001
slswt =  0.0

! ------------------------ climatic inputs ---------------------------
[all.SWIM2.climate]
rainfall_source =  apsim
evap_source =  sum_demands
salb =  0.15

! ------------------------ runoff functions --------------------------
[all.SWIM2.runoff]
maximum_surface_storage =  5.2   ! (mm)
minimum_surface_storage =  5.0   ! (mm)
initial_surface_storage =  5.1   ! (mm)
precipitation_constant =   10   ! (mm)
runoff_rate_factor =       2   ! (mm/h)/mm^P
runoff_rate_power =        2   ! =P ______/

! ------------------- bottom boundary conditions --------------------
[all.SWIM2.bottom_boundary]
constant_gradient =    0

! --------------------- top boundary conditions ---------------------
! not used due to infinite conductance
[all.SWIM2.top_boundary]
maximum_conductance =  1.   ! (/h) initial soil surface conductance
minimum_conductance =  .1   ! (/h) minimum soil surface conductance
initial_conductance =  1.   ! (/h) initial soil surface conductance
precipitation_constant =  50.   ! (mm)

! -------------------------- bypass flow ---------------------------
! not used
[all.SWIM2.bypass_flow]
depth =       4   ! (node number)
conductance =  .10   ! (??)
storage =     .10   ! (cm water/cm of +ve Psi)

! --------------------crop apswim parameters ----------------------
[all.SWIM2.crop]
   ! ------------------------------------------
crop_name =                  wheat  lucerne canola   weed
   ! ------------------------------------------
min_xylem_potential =       -15000. -15000.  -15000. -15000. (mbar)
root_radius =                0.24     0.24   0.24    0.24    (mm)
root_conductance =         1.4e-7   1.4e-7   1.4e-7  1.4e-7
   ! ------------------------------------------
! --------------------- soil type information -------------------------
[all.SWIM2.soil1]
bulk_density =                      1.48
                  ! ---------------------------------------------
solute_name =                       no3 nh4  urea brA brB brC brD
                  ! ---------------------------------------------
exco =                              0   0.5  0    0   0   0   0
fip =                               1   1    1    1   1   1   1
dis =                               2   2    2    2   2   2   2
alpha =                             0   0    0    0   0   0   0
beta =                              0   0    0    0   0   0   0
                  ! ---------------------------------------------

[all.SWIM2.soil2]
bulk_density =                      1.5
                  ! ---------------------------------------------
solute_name =                       no3 nh4  urea brA brB brC brD
                  ! ---------------------------------------------
exco =                              0   0.5  0    0   0   0   0
fip =                               1   1    1    1   1   1   1
dis =                               2   2    2    2   2   2   2
alpha =                             0   0    0    0   0   0   0
beta =                              0   0    0    0   0   0   0
                  ! ---------------------------------------------

[all.SWIM2.soil2a]
bulk_density =                      1.42
                  ! ---------------------------------------------
solute_name =                       no3 nh4  urea brA brB brC brD
                  ! ---------------------------------------------
exco =                              0   0.5  0    0   0   0   0
fip =                               1   1    1    1   1   1   1
dis =                               2   2    2    2   2   2   2
alpha =                             0   0    0    0   0   0   0
beta =                              0   0    0    0   0   0   0
                  ! ---------------------------------------------

[all.SWIM2.soil3]
bulk_density =                     1.37
                  ! ---------------------------------------------
solute_name =                       no3 nh4  urea brA brB brC brD
                  ! ---------------------------------------------
exco =                              0   0.5  0    0   0   0   0
fip =                               1   1    1    1   1   1   1
dis =                               2   2    2    2   2   2   2
alpha =                             0   0    0    0   0   0   0
beta =                              0   0    0    0   0   0   0
                  ! ---------------------------------------------

[all.SWIM2.soil4]
bulk_density =                      1.53
                  ! ---------------------------------------------
solute_name =                       no3 nh4  urea brA brB brC brD
                  ! ---------------------------------------------
exco =                              0   0.5  0    0   0   0   0
fip =                               1   1    1    1   1   1   1
dis =                               2   2    2    2   2   2   2
alpha =                             0   0    0    0   0   0   0
beta =                              0   0    0    0   0   0   0
                  ! ---------------------------------------------

[all.SWIM2.soil5]
bulk_density =                      1.63
                  ! ---------------------------------------------
solute_name =                       no3 nh4  urea brA brB brC brD
                  ! ---------------------------------------------
exco =                              0   0.5  0    0   0   0   0
fip =                               1   1    1    1   1   1   1
dis =                               2   2    2    2   2   2   2
alpha =                             0   0    0    0   0   0   0
beta =                              0   0    0    0   0   0   0
                  ! ---------------------------------------------

[all.SWIM2.soil6]
bulk_density =                      1.67
                  ! ---------------------------------------------
solute_name =                       no3 nh4  urea brA brB brC brD
                  ! ---------------------------------------------
exco =                              0   0.5  0    0   0   0   0
fip =                               1   1    1    1   1   1   1
dis =                               2   2    2    2   2   2   2
alpha =                             0   0    0    0   0   0   0
beta =                              0   0    0    0   0   0   0
                  ! ---------------------------------------------

[all.SWIM2.soil7]
bulk_density =                      1.62
                  ! ---------------------------------------------
solute_name =                       no3 nh4  urea brA brB brC brD
                  ! ---------------------------------------------
exco =                              0   0.5  0    0   0   0   0
fip =                               1   1    1    1   1   1   1
dis =                               2   2    2    2   2   2   2
alpha =                             0   0    0    0   0   0   0
beta =                              0   0    0    0   0   0   0
                  ! ---------------------------------------------

[all.SWIM2.soil8]
bulk_density =                      1.63
                  ! ---------------------------------------------
solute_name =                       no3 nh4  urea brA brB brC brD
                  ! ---------------------------------------------
exco =                              0   0.5  0    0   0   0   0
fip =                               1   1    1    1   1   1   1
dis =                               2   2    2    2   2   2   2
alpha =                             0   0    0    0   0   0   0
beta =                              0   0    0    0   0   0   0
                  ! ---------------------------------------------

[all.SWIM2.soil9]
bulk_density =                      1.68
                  ! ---------------------------------------------
solute_name =                       no3 nh4  urea brA brB brC brD
                  ! ---------------------------------------------
exco =                              0   0.5  0    0   0   0   0
fip =                               1   1    1    1   1   1   1
dis =                               2   2    2    2   2   2   2
alpha =                             0   0    0    0   0   0   0
beta =                              0   0    0    0   0   0   0
                  ! ---------------------------------------------

[all.SWIM2.soil10]
bulk_density =                      1.64
                  ! ---------------------------------------------
solute_name =                       no3 nh4  urea brA brB brC brD
                  ! ---------------------------------------------
exco =                              0   0.5  0    0   0   0   0
fip =                               1   1    1    1   1   1   1
dis =                               2   2    2    2   2   2   2
alpha =                             0   0    0    0   0   0   0
beta =                              0   0    0    0   0   0   0
                  ! ---------------------------------------------

[all.SWIM2.soil11]
bulk_density =                      1.64
                  ! ---------------------------------------------
solute_name =                       no3 nh4  urea brA brB brC brD
                  ! ---------------------------------------------
exco =                              0   0.5  0    0   0   0   0
fip =                               1   1    1    1   1   1   1
dis =                               2   2    2    2   2   2   2
alpha =                             0   0    0    0   0   0   0
beta =                              0   0    0    0   0   0   0
                  ! ---------------------------------------------

[all.SWIM2.soil12]
bulk_density =                      1.64
                  ! ---------------------------------------------
solute_name =                       no3 nh4  urea brA brB brC brD
                  ! ---------------------------------------------
exco =                              0   0.5  0    0   0   0   0
fip =                               1   1    1    1   1   1   1
dis =                               2   2    2    2   2   2   2
alpha =                             0   0    0    0   0   0   0
beta =                              0   0    0    0   0   0   0
                  ! ---------------------------------------------

!******************** wheat module ********************
[all.wheat.parameters]
uptake_source =  apsim
!                  1       2       3       4       5       6       7       8       9      10      11      12      13      14      15      16      17      18      19      20     21      22      23      24      25      26     27      28
!x        =        0      10      20      50     100     200     300     400     500     700     900    1100    1300    1500    1700    1900    2100    2300    2500    2700    2900    3000    3500    4000    4500    5000    5500    6000
kl        =     0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08
ll        =    0.111   0.111   0.111   0.111   0.124   0.148   0.148   0.167   0.182   0.214   0.241   0.261   0.271   0.283   0.283   0.283   0.283   0.271   0.259   0.248   0.248   0.249   0.258   0.271   0.283   0.283   0.283   0.283
xf        =        1       1       1       1       1       1       1       1       1       1       1     0.7       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0
!eo_crop_factor = 1.1

!********************** Canola module ********************
[all.canola.parameters]
uptake_source =  apsim
!                  1       2       3       4       5       6       7       8       9      10      11      12      13      14      15      16      17      18      19      20     21      22      23      24      25      26     27      28
!x        =        0      10      20      50     100     200     300     400     500     700     900    1100    1300    1500    1700    1900    2100    2300    2500    2700    2900    3000    3500    4000    4500    5000    5500    6000
kl        =     0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08
ll        =    0.111   0.111   0.111   0.111   0.124   0.148   0.148   0.167   0.182   0.214   0.241   0.261   0.271   0.283   0.283   0.283   0.283   0.271   0.259   0.248   0.248   0.249   0.258   0.271   0.283   0.283   0.283   0.283
xf        =        1       1       1       1       1       1       1       1       1       1       1     0.7       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0
!eo_crop_factor = 1.1

!******************** Lucerne module *******************
[all.lucerne.parameters]
uptake_source =  apsim
!                  1       2       3       4       5       6       7       8       9      10      11      12      13      14      15      16      17      18      19      20     21      22      23      24      25      26     27      28
!x        =        0      10      20      50     100     200     300     400     500     700     900    1100    1300    1500    1700    1900    2100    2300    2500    2700    2900    3000    3500    4000    4500    5000    5500    6000
kl        =     0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08
ll        =    0.111   0.111   0.111   0.111   0.124   0.148   0.148   0.167   0.182   0.214   0.241   0.261   0.271   0.283   0.283   0.283   0.283   0.271   0.259   0.248   0.248   0.249   0.258   0.271   0.283   0.283   0.283   0.283
xf        =        1       1       1       1       1       1       1       1       1       1       1       1       1       1       1       1       1       1       1       1       1       1       1       1       1       1       1       1
!eo_crop_factor = 1.1

!********************* Weed module ************************
[all.weed.parameters]
uptake_source =  apsim
!                  1       2       3       4       5       6       7       8       9      10      11      12      13      14      15      16      17      18      19      20     21      22      23      24      25      26     27      28
!x        =        0      10      20      50     100     200     300     400     500     700     900    1100    1300    1500    1700    1900    2100    2300    2500    2700    2900    3000    3500    4000    4500    5000    5500    6000
kl        =     0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08    0.08
ll        =    0.111   0.111   0.111   0.111   0.124   0.148   0.148   0.167   0.182   0.214   0.241   0.261   0.271   0.283   0.283   0.283   0.283   0.271   0.259   0.248   0.248   0.249   0.258   0.271   0.283   0.283   0.283   0.283
xf        =        1       1       1       1       1       1       1       1       1     0.7       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0
!eo_crop_factor = 1.1

!******************** Residue2 module ********************
[all.SurfaceOM.parameters]
!unknown - guesses
mass = 500. !0.
cnr = 60.
type = wheat
name = wheat

!******************** Soiln2 module ********************
[all.SoilN.parameters]

!                  1       2       3       4       5       6       7       8       9      10      11      12      13      14      15      16      17      18      19      20     21      22      23      24      25      26
!x        =        0      10      20      50     100     200     300     400     500     700     900    1100    1300    1500    1700    1900    2100    2300    2500    2700    2900    3000   3500    4000    4500    5000    5500    6000
ph        =      5.8     5.7     5.6     5.4     4.8     5.1     5.2     5.4     5.6     5.8     5.8     5.8     5.8     5.8     5.8     5.8     5.8     5.8     5.8     5.8     5.8     5.8    5.8     5.8     5.8     5.8     5.8     5.8
!no3ppm   =     11.9       8    3.35       1     0.9     0.9    0.55    0.55    0.45    0.75    0.45    0.45    0.45    0.45    0.45    0.45    0.45    0.45    0.45    0.45   0.45    0.45    0.45    0.45    0.45    0.45
!assume init no3ppm = 1.0 near surface (case in 1993) down to 0.5 at 1m and below - sampling 3/3/93 and 1/4/93
no3ppm    =      1.0     1.0     1.0     1.0     1.0     1.0     1.0     0.9     0.8     0.7     0.6     0.5     0.5    0.5      0.5     0.5     0.5     0.5     0.5     0.5     0.5     0.5    0.5     0.5     0.5     0.5     0.5     0.5
!nh4ppm   =      2.7     1.4       1    0.75     0.9     0.9    0.45    0.35    0.15     0.3    0.15    0.15    0.15    0.15    0.15    0.15    0.15    0.15    0.15    0.15   0.15    0.15    0.15    0.15    0.15    0.15
!assume init nh4ppm = 0.001 - model tends to nitrify any starting nh4
nh4ppm    =    0.001   0.001   0.001   0.001   0.001   0.001   0.001   0.001   0.001   0.001   0.001   0.001   0.001   0.001   0.001   0.001   0.001   0.001   0.001   0.001   0.001   0.001  0.001   0.001   0.001   0.001   0.001   0.001
uppm      =        0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0      0       0       0       0       0       0
fbiom     =     0.06    0.06    0.05    0.04    0.03    0.02   0.015    0.01    0.01    0.01    0.01    0.01    0.01    0.01    0.01    0.01    0.01    0.01    0.01    0.01    0.01    0.01   0.01    0.01    0.01    0.01    0.01    0.01
oc        =     1.42     1.4     1.3     1.2     0.8     0.5     0.4     0.3     0.3     0.2     0.1    0.08    0.06    0.06    0.06    0.06    0.06    0.06    0.06    0.06    0.06    0.06   0.06    0.06    0.06    0.06    0.06    0.06
finert    =     0.04     0.06   0.08     0.1     0.2     0.7     0.7     0.7    0.75     0.8    0.85     0.9    0.95    0.95    0.95    0.95    0.95    0.95    0.95    0.95    0.95    0.95   0.95    0.95    0.95    0.95    0.95    0.95

root_cn =               50       (C)   !initial root C:N (rough avg from mimic runs)
root_wt =               0 !9500     (kg/ha)   !initial root weight
soil_cn =               12        (kgC/kgN)   !soil initial C:N ratio
amp =                   15.9     (C)   !air temperature amplitude
tav =                   15.4     (C)   !average annual temperature
enr_a_coeff =           7.4      ()   !only used in erosion simultion
enr_b_coeff =           0.2      ()   !only used in erosion simultion
profile_reduction =     off      ()   !only used in erosion simultion

dmod =  1.0 ()   ! weighting factor to adjust the rate of humus mineralization
               ! for soils in which organic matter is chemically or physically
               ! protected.


!******************** Solute module ********************
[all.solute.parameters]
solute_names =  brA brB brC brD
!                  1       2       3       4       5       6       7       8       9      10      11      12      13      14      15      16      17      18      19      20     21      22      23      24      25      26      27      28
!x        =        0      10      20      50     100     200     300     400     500     700     900    1100    1300    1500    1700    1900    2100    2300    2500    2700    2900    3000   3500    4000    4500    5000    5500    6000
brA       =        0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0      0       0       0       0       0       0       0       0
brB       =        0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0      0       0       0       0       0       0       0       0
brC       =        0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0      0       0       0       0       0       0       0       0
brD       =        0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0      0       0       0       0       0       0       0       0



[p12.SummaryFile.parameters]
summaryfile = p12-97.sum

