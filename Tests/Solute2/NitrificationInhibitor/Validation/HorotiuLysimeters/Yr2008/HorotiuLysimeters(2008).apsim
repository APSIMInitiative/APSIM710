<folder version="36" creator="Apsim 7.5-r3152" name="simulations">
  <simulation name="BaseHorotiu">
    <clock>
      <start_date type="date" description="Enter the start date of the simulation">01/08/2007</start_date>
      <end_date type="date" description="Enter the end date of the simulation">15/05/2009</end_date>
    </clock>
    <metfile name="met">
      <filename name="filename" input="yes">%apsim%\Tests\Solute2\NitrificationInhibitor\Validation\HorotiuLysimeters\VCS_Ruakura.met</filename>
    </metfile>
    <memo name="Info">
 ===================================================================================
     Validation test for nitrification inhibitor (Solute2 model)
 ===================================================================================


  Â» This is a base simulation describing the lysimeter experiment, The actual experiments (with appropriate treatments) are given in the derived simulations (linked to this one)

</memo>
    <summaryfile />
    <area name="paddock">
      <SoilN_dcd>
        <category description="Parameters to initialise soil organic matter" />
        <root_wt type="text" description="Type the amount of dead roots in the soil (kg/ha):">1000</root_wt>
        <root_cn type="text" description="Type the C:N ratio of dead roots:">50</root_cn>
        <soil_cn type="text" description="Type the C:N ratio of soil humus:">12.5</soil_cn>
        <category description="Enter the values for each layer" />
        <ph type="text" description="Type the inital soil pH:">6.0   6.0   6.0   6.0   6.0   6.0   6.0   6.0   6.0   6.0   6.0   6.0   6.0   6.0   6.0   6.0   6.0   6.0   6.0   6.0   6.0   6.0</ph>
        <oc type="text" description="Type the initial soil organic carbon content (%):">5.796 5.743 5.690 5.610 5.510 5.410 5.322 5.222 5.133 5.056 4.971 4.498 4.059 3.534 2.964 2.480 2.082 1.754 1.485 1.263 1.033 0.930</oc>
        <fbiom type="text" description="Type the microbial biomass fraction of OC (0-1):">0.080  0.080  0.080  0.080  0.079  0.077  0.072  0.063  0.048  0.031  0.017  0.010  0.008  0.008  0.008  0.008  0.008  0.008</fbiom>
        <finert type="text" description="Type the inert fraction of soil humus (0-1):">0.489 0.496 0.503 0.509 0.521 0.532 0.544 0.555 0.571 0.582 0.597 0.630 0.667 0.699 0.745 0.778 0.812 0.837 0.862 0.881 0.903 0.917</finert>
        <no3ppm type="text" description="Type the initial concentration of NO3 is the soil (ppm):">4.50    6.00    7.20    7.50    7.50    7.50    7.50    7.50    7.50    7.30    6.80    6.30    5.90    5.30    4.50    3.70    3.00    2.40    2.20    2.00    1.70    1.50</no3ppm>
        <nh4ppm type="text" description="Type the initial concentration of NH4 is the soil (ppm):">1.50    2.00    2.40    2.50    2.50    2.50    2.50    2.50    2.50    2.43    2.27    2.10    1.97    1.77    1.50    1.23    1.00    0.80    0.73    0.67    0.57    0.50</nh4ppm>
        <ureappm type="text" description="Type the initial concentration of urea is the soil (ppm):">0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00  0.00</ureappm>
        <category description="Other parameters" />
        <nitrification_pot type="text" description="Maximum potential nitrification rate (ug NH4/g soil):">40</nitrification_pot>
        <nh4_at_half_pot type="text" description="NH4 concentration at half of nitrification rate (ppm):">90</nh4_at_half_pot>
        <opt_temp type="text" description="Optimal temperatures for mineralis. and nitrif. (oC):">28</opt_temp>
      </SoilN_dcd>
      <folder name="Manager folder">
        <manager name="Experiment manager">
          <script>
            <text>Ini_Date = date('14/05/2008')
End_Date = date('14/05/2009')
Day_of_Experiment = -1
</text>
            <event>init</event>
          </script>
          <script>
            <text>! this is for getting more decimals
Mineral_N = nh4()+no3()
leach_urea_N = leach_urea
leach_nh4_N = leach_nh4
leach_no3_N = leach_no3
denit_N = dnit()


CloverContent = SpeciesTotalWt(2)/(SpeciesTotalWt(1) + SpeciesTotalWt(2))

if today &gt;= Ini_Date then
   isExpDay = 1
   Day_of_Experiment = Day_of_Experiment + 1
else
   isExpDay = 0
   Day_of_Experiment = -1
endif
</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>
PET = peta + petr
</text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Collect Leachate Ruakura">
          <script>
            <text>!-- Recording Leaching data at specific (observed) dates ----- 

DoRecord_LData = 'NONE'

DrainCollected = 0
UreaLeachCollected = 0
NH4LeachCollected = 0
NO3LeachCollected = 0
DCDLeachCollected = 0
CumDrain = 0
CumUreaLeach = 0
CumNH4Leach = 0
CumNO3Leach = 0
CumDCDLeach = 0

! Dates to record leaching data:
RecDate00 = date('13-May-2008')
RecDate01 = date('16-May-2008')
RecDate02 = date('26-May-2008')
RecDate03 = date('09-Jun-2008')
RecDate04 = date('17-Jun-2008')
RecDate05 = date('23-Jun-2008')
RecDate06 = date('26-Jun-2008')
RecDate07 = date('29-Jun-2008')
RecDate08 = date('04-Jul-2008')
RecDate09 = date('17-Jul-2008')
RecDate10 = date('22-Jul-2008')
RecDate11 = date('27-Jul-2008')
RecDate12 = date('30-Jul-2008')
RecDate13 = date('01-Aug-2008')
RecDate14 = date('06-Aug-2008')
RecDate15 = date('15-Aug-2008')
RecDate16 = date('25-Aug-2008')
RecDate17 = date('19-Sep-2008')
RecDate18 = date('29-Sep-2008')
RecDate19 = date('13-Oct-2008')
RecDate20 = date('25-Oct-2008')
RecDate21 = date('04-Dec-2008')
RecDate22 = date('24-Dec-2008')
RecDate23 = date('28-Jan-2009')
RecDate24 = date('02-Mar-2009')
RecDate25 = date('13-May-2009')</text>
            <event>init</event>
          </script>
          <script>
            <text>
            </text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>
!Leachate collection  --------------------------------------------------------------------------------------------------------

if today &gt; RecDate00 then
   DrainCollected = 0
   UreaLeachCollected = 0
   NH4LeachCollected = 0
   NO3LeachCollected = 0
   DCDLeachCollected = 0
   CumDrain = CumDrain + Drain
   CumUreaLeach = CumUreaLeach + leach_urea
   CumNH4Leach = CumNH4Leach + leach_nh4
   CumNO3Leach = CumNO3Leach + leach_no3
   CumDCDLeach = CumDCDLeach + leach_nitrificationinhibitor

   if today = RecDate00 then
      DoRecord_LData = 'FALSE'
   elseif today = RecDate01 or today = RecDate02 or today = RecDate03 or today = RecDate04 or today = RecDate05 or today = RecDate06 or today = RecDate07 or today = RecDate08 or today = RecDate09 or today = RecDate10 then
      DoRecord_LData = 'TRUE'
   elseif today = RecDate11 or today = RecDate12 or today = RecDate13 or today = RecDate14 or today = RecDate15 or today = RecDate16 or today = RecDate17 or today = RecDate18 or today = RecDate19 or today = RecDate20 then
      DoRecord_LData = 'TRUE'
   elseif today = RecDate21 or today = RecDate22 or today = RecDate23 or today = RecDate24 or today = RecDate25 then
      DoRecord_LData = 'TRUE'
   else
      DoRecord_LData = 'FALSE'
   endif
endif

if DoRecord_LData = 'TRUE' then
   DrainCollected = CumDrain
   UreaLeachCollected = CumUreaLeach
   NH4LeachCollected = CumNH4Leach
   NO3LeachCollected = CumNO3Leach
   DCDLeachCollected = CumDCDLeach 
   CumDrain = 0
   CumUreaLeach = 0
   CumNH4Leach = 0
   CumNO3Leach = 0
   CumDCDLeach = 0
endif</text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager2 name="ModifySolutes(no3)">
          <ui>
            <Dummy0 type="category" description="Modifying the solute's adsorption parameters" />
            <MdfSolute_name type="list" listvalues="no3,nh4,tracer,nitrificationinhibitor,ureaseinhibitor,cl,dcd" description="  Name of the solute to modify:">no3</MdfSolute_name>
            <Dummy1 type="category" description="New adsorption parameters, for each layer" />
            <str_exco type="text" description="  Adsorption coefficient (exco):">0.30  0.30  0.30  0.30  0.30  0.30  0.30  0.30  0.30  0.30  0.40  0.40  0.40  0.40  0.40  0.40  0.40  0.40  0.25  0.25  0.25</str_exco>
            <str_fip type="text" description="  Adsorption exponent (fip):">1.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0</str_fip>
          </ui>
          <text>Imports System
Imports ModelFramework

' This manager modifies the adsorption parameters for some solutes

'--&gt;  Last uptaded in: 10/Sep/2013 ..................


Public Class Script 
   
   'Parameter variables:
   &lt;param&gt; Private MdfSolute_name As String
   &lt;param&gt; Private str_exco As String
   &lt;param&gt; Private str_fip As String
   
   'Link to other modules
   &lt;Link&gt; Private MySwim As SWIM2ui2
   
   'Variables read from other modules
   &lt;Input&gt; Private dlayer As Double()           'Soil layers structure

   'Internal variables
   Private Old_exco As Double()
   Private Temp_exco As Double()
   Private New_exco As Double()
   Private Old_fip As Double()
   Private Temp_fip As Double()
   Private New_fip As Double()

   &lt;EventHandler()&gt; Public Sub OnInitialised()

      'Convert given values into array, check whether all solutes exist, pass on the values


      Dim NumLayers = dlayer.length - 1
      Dim SoluteFound As Boolean
      ReDim New_exco(NumLayers)
      ReDim New_fip(NumLayers)
      
      Temp_exco = makeArray(str_exco)
      Temp_fip = makeArray(str_fip)
      If Temp_exco.length &gt; 1 Or Temp_fip.length &gt; 1 Then
         'we have some values, check that the solute exists
         Try
            'get old values
            SoluteFound = MySwim.Get("exco_" &amp; MdfSolute_name, Old_exco)
            SoluteFound = MySwim.Get("fip_" &amp; MdfSolute_name, Old_fip)
         Catch
            Console.WriteLine(" Solute " &amp; MdfSolute_name &amp; " was not found!!!")
         End Try
         
         If SoluteFound Then
            'verify whether values changed
            For Layer As Integer = 0 To NumLayers               
               If Layer &lt; Temp_exco.Length  Then
                  New_exco(Layer) = Temp_exco(Layer)
               Else
                  New_exco(Layer) = Old_exco(Layer)
               End If
               If Layer &lt; Temp_fip.Length  Then
                  New_fip(Layer) = Temp_fip(Layer)
               Else
                  New_fip(Layer) = Old_fip(Layer)
               End If
            Next
            MySwim.Set("exco_" &amp; MdfSolute_name, New_exco)
            MySwim.Set("fip_" &amp; MdfSolute_name, New_fip)
            Console.WriteLine(" Solute parameters have been updated (in SWIM)")
         End If
      Else
         Console.WriteLine(" No new values were supplied")
      End If
      Console.WriteLine()
      
   End Sub

   Function makeArray(ByVal ArrayString As String) As Double()
      
      'Get the string with values from the user interface and put the values in an numeric array
      
      Dim MyArray_string As String()
      Dim MyArray_single As Double()
      Dim Separator As Char() = " "
      
      '1-Split string into array
      MyArray_string = ArrayString.Split(Separator, StringSplitOptions.RemoveEmptyEntries)
      
      '2-convert array into type single
      ReDim MyArray_single(MyArray_string.Length - 1)      
      For i As Integer = 0 To MyArray_single.length - 1
         MyArray_single(i) = CDbl(MyArray_string(i))
      Next
      Return MyArray_single
      
   End Function
   
End Class
 </text>
        </manager2>
        <manager2 name="ModifySolutes(dcd)">
          <ui>
            <Dummy0 type="category" description="Modifying the solute's adsorption parameters" />
            <MdfSolute_name type="list" listvalues="no3,nh4,tracer,nitrificationinhibitor,ureaseinhibitor,cl,dcd" description="  Name of the solute to modify:">nitrificationinhibitor</MdfSolute_name>
            <Dummy1 type="category" description="New adsorption parameters, for each layer" />
            <str_exco type="text" description="  Adsorption coefficient (exco):">1.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0  0.8  0.60  0.40  0.40  0.40  0.35  0.30  0.30  0.30  0.30  0.27  0.25  0.25  0.25</str_exco>
            <str_fip type="text" description="  Adsorption exponent (fip):">1.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0  1.0</str_fip>
          </ui>
          <text>Imports System
Imports ModelFramework

' This manager modifies the adsorption parameters for some solutes

'--&gt;  Last uptaded in: 10/Sep/2013 ..................


Public Class Script 
   
   'Parameter variables:
   &lt;param&gt; Private MdfSolute_name As String
   &lt;param&gt; Private str_exco As String
   &lt;param&gt; Private str_fip As String
   
   'Link to other modules
   &lt;Link&gt; Private MySwim As SWIM2ui2
   
   'Variables read from other modules
   &lt;Input&gt; Private dlayer As Double()           'Soil layers structure

   'Internal variables
   Private Old_exco As Double()
   Private Temp_exco As Double()
   Private New_exco As Double()
   Private Old_fip As Double()
   Private Temp_fip As Double()
   Private New_fip As Double()

   &lt;EventHandler()&gt; Public Sub OnInitialised()

      'Convert given values into array, check whether all solutes exist, pass on the values


      Dim NumLayers = dlayer.length - 1
      Dim SoluteFound As Boolean
      ReDim New_exco(NumLayers)
      ReDim New_fip(NumLayers)
      
      Temp_exco = makeArray(str_exco)
      Temp_fip = makeArray(str_fip)
      If Temp_exco.length &gt; 1 Or Temp_fip.length &gt; 1 Then
         'we have some values, check that the solute exists
         Try
            'get old values
            SoluteFound = MySwim.Get("exco_" &amp; MdfSolute_name, Old_exco)
            SoluteFound = MySwim.Get("fip_" &amp; MdfSolute_name, Old_fip)
         Catch
            Console.WriteLine(" Solute " &amp; MdfSolute_name &amp; " was not found!!!")
         End Try
         
         If SoluteFound Then
            'verify whether values changed
            For Layer As Integer = 0 To NumLayers               
               If Layer &lt; Temp_exco.Length  Then
                  New_exco(Layer) = Temp_exco(Layer)
               Else
                  New_exco(Layer) = Old_exco(Layer)
               End If
               If Layer &lt; Temp_fip.Length Then
                  New_fip(Layer) = Temp_fip(Layer)
               Else
                  New_fip(Layer) = Old_fip(Layer)
               End If
            Next
            MySwim.Set("exco_" &amp; MdfSolute_name, New_exco)
            MySwim.Set("fip_" &amp; MdfSolute_name, New_fip)
            Console.WriteLine(" Solute parameters have been updated (in SWIM)")
         End If
      Else
         Console.WriteLine(" No new values were supplied")
      End If
      Console.WriteLine()
      
   End Sub

   Function makeArray(ByVal ArrayString As String) As Double()
      
      'Get the string with values from the user interface and put the values in an numeric array
      
      Dim MyArray_string As String()
      Dim MyArray_single As Double()
      Dim Separator As Char() = " "
      
      '1-Split string into array
      MyArray_string = ArrayString.Split(Separator, StringSplitOptions.RemoveEmptyEntries)
      
      '2-convert array into type single
      ReDim MyArray_single(MyArray_string.Length - 1)      
      For i As Integer = 0 To MyArray_single.length - 1
         MyArray_single(i) = CDbl(MyArray_string(i))
      Next
      Return MyArray_single
      
   End Function
   
End Class
 </text>
        </manager2>
        <manager2 name="Cut AgPasture on given dates">
          <ui>
            <Dummy1 type="category" description="Setup cut procedure for AgPasture" />
            <AgPasture_type type="list" listvalues="AgPasture,ryegrass_clover,ryegrass,clover" description="Enter pasture module:">AgPasture</AgPasture_type>
            <RemoveAmount_type type="list" listvalues="Set amount,Target amount,Set variable amount,Down to residual DM" description="Enter how removed amount is computed:">Down to residual DM</RemoveAmount_type>
            <Amount2RemoveFix type="text" description="   If setting amount, enter the value to remove at each cut (kgDM/ha):">270</Amount2RemoveFix>
            <LowerThreshold type="text" description="   If not setting amount, enter the minimum residual after cut (kgDM/ha):">1500</LowerThreshold>
            <Dummy2 type="category" description="Management of cut material" />
            <ResidueTreatment_type type="list" listvalues="Return as residue,Return as dung &amp; urine" description="Enter the treatment type for the cut material:">Return as residue</ResidueTreatment_type>
            <DMRemovalOption type="list" listvalues="Based on digestibility,type a fraction (0-1)" description="Enter fraction of DM that is removed from field (0-1):">1.0</DMRemovalOption>
            <FracN2Remove type="text" description="Enter fraction of N that is removed from field (0-1):">1.0</FracN2Remove>
            <Dummy3 type="category" description="   If returning as dung &amp; urine" />
            <FracN2Dung type="text" description="   Enter proportion of N returned in dung (0-1):">0.0</FracN2Dung>
            <Dummy4 type="category" description="Enter the dates for each cut" />
            <CuttingDates type="multiedit" description="Use shift+enter for new line, date formats = dd-mmm-yyyy; dd/mm/yyyy:">1/08/2007
25/08/2007
20/09/2007
15/10/2007
10/11/2007
05/12/2007
05/01/2008
15/02/2008
04/04/2008
24/04/2008
15/05/2008
23/06/2008
11/08/2008
11/09/2008
10/10/2008
3/11/2008
28/11/2008
12/01/2009
13/03/2009
13/05/2009</CuttingDates>
            <Dummy5 type="category" description="If setting variable amounts enter values below (one for each date)" />
            <Amounts2RemoveVar type="multiedit" description="Amount to remove at each cutting date (kgDM/ha):">350</Amounts2RemoveVar>
          </ui>
          <text>Imports System
Imports ModelFramework

'This manager sets up a cutting procedure for AgPasture at given dates. Cuts happensat each given date, if possible, according to remove options, below.
' Cut is done on above ground stem and leaf DM (dead and green).  
' + Remove amount options:
'  - Set amount: The amount to remove is fixed, always performed
'  - Target amount: The amount is the smallest of a given value and difference between existing DM and a target (LowerTheshold of CoverTarget)
'  - Set variable amount: The amounts for each date is given
'  - Down to residual DM: Amount to remove is the difference between existing DM and LowerTheshold
'
' + Manage residues options:
'  - Return as residue: A fraction of the DM cut is added as grass residue to the surfaceOM module;
'  - Return as dung &amp; urine: A fraction of the amount cut is returned to the soil as evenly distributed urine and dung. 
'     This is a very simplified approach where the fractions of DM (C) and N to be removed are set separately. Also,
'      the partition of N between urine and dung is set by the user. 
'     N urine is added as urea fertiliser (top 10cm) and teh rmaining DM and N are added to surfaceOM as dung (RuminantDung_PastureFed).

'--&gt;  Last uptaded in: 7/Aug/2011 ..................


Public Class Script 
   
   'Parameter variables:
   &lt;param&gt; Private AgPasture_type As String              'The pasture module
   
   &lt;param&gt; Private RemoveAmount_type As String           'The way to compute how much pasture is cut
   &lt;param&gt; Private Amount2RemoveFix As Double            'The amount of DM to be removed at each cut (kg/ha, DM above ground)
   &lt;param&gt; Private LowerThreshold As Double              'The residual DM amount left after cut  (kg/ha, DM above ground)

   &lt;param&gt; Private CuttingDates As String                'Dates for cutting pasture
   &lt;param&gt; Private Amounts2RemoveVar As String          'Amounts to cut at each date (kg/ha, DM above ground)
   
   &lt;param&gt; Private ResidueTreatment_type As String       'The treatment to the material cut
   &lt;param&gt; Private DMRemovalOption As String             'The option to remove DM, based on digestibility of a fraction (0-1)
   &lt;param&gt; Private FracN2Remove As Double                'Fraction of the N in the material cut that is removed from simulation (0-1)
   &lt;param&gt; Private FracN2Dung As Double                  'The fraction of returned N that goes into dung, if return is as dung and urine (0-1)

   'Links and events:
   &lt;Link&gt; Private MyAgPasture As AgPasture   
   &lt;[Event]()&gt; Public Event Graze As GrazeDelegate
   &lt;[Event]()&gt; Public Event BiomassRemoved As BiomassRemovedDelegate
   &lt;[Event]()&gt; Public Event FertiliserApplication As FertiliserApplicationDelegate

   
   'Variables read from other modules
   &lt;Input&gt; Private today As DateTime                     'Today's date
   &lt;input&gt; Private StemWt As Double                      'The DM of stems (above ground DM)
   &lt;input&gt; Private LeafWt As Double                      'The DM of leaves (above ground DM)
   &lt;input&gt; Private StemN As Double                       'The N amount in stems (above ground N)
   &lt;input&gt; Private LeafN As Double                       'The N amount in leaves (above ground N)
   &lt;input&gt; Private HarvestWt As Double                   'The DM harvested (kg/ha)
   &lt;input&gt; Private HarvestN As Double                    'The N amount harvested (kgN/ha)
   &lt;input&gt; Private DefoliatedDigestibility As Double     'The pasture digestibility (0-1)

   'Outputs
   &lt;output&gt;&lt;units("")&gt; Public Can_Cut As String                   'Whether todays is a cutting day
   &lt;output&gt;&lt;units("")&gt; Public Has_Cut As String                  'Whether todays cut was done
   &lt;output&gt;&lt;units("kg/ha")&gt; Public harvested_dm As Double        'Pasture DM harvested today (kg/ha)
   &lt;output&gt;&lt;units("kgN/ha")&gt; Public harvested_n As Double        'N harvested today
   &lt;output&gt;&lt;units("kg/ha")&gt; Public removed_dm As Double          'DM removed from the simulation
   &lt;output&gt;&lt;units("kgN/ha")&gt; Public removed_n As Double          'N removed from the simulation
   &lt;output&gt;&lt;units("kgN/ha")&gt; Public returned_dm As Double        'DM returned to the paddock
   &lt;output&gt;&lt;units("kgN/ha")&gt; Public returned_n As Double         'N returned to the paddock
   &lt;output&gt;&lt;units("kgN/ha")&gt; Public NReturn_asDung As Double     'N returned as dung (SurfOM)
   &lt;output&gt;&lt;units("kgN/ha")&gt; Public NReturn_asUrine As Double    'N returned as urine (urea)
   &lt;output&gt;&lt;units("kg/ha/day")&gt; Public GrowthRateCalc As Double  'Average growth rate for this cut
   &lt;output&gt;&lt;units("%")&gt; Public Nconc_inRemoved As Double         'N concentration on the cut material
   &lt;output&gt;&lt;units("days")&gt; Public DaysAfterCut As Integer        'Number of days after last cut
   &lt;output&gt;&lt;units("kg/ha")&gt; Public StandingWt As Double          'Total standing DM (Stem + Leaf)

   'Internal variables
   Private Dates2Cut As DateTime()              'The dates when pasture is to be cut
   Private Amount2Remove As Double()            'Amount to cut at each date
   Private CutCounter As Integer                'A counter for the number of cut
   Private FracDM2Remove As Double              'The fraction of DM to be removed from the simulation (0-1)
   Private Allow_cut As String
   
   &lt;EventHandler()&gt; Public Sub OnInit2()

      'Put the dates into date format:
      Dim Eachdates As String() = CuttingDates.Split()
      Dim EachAmounts As String() = Amounts2RemoveVar.Split()
      ReDim Dates2Cut(Eachdates.Length - 1)
      ReDim Amount2Remove(Dates2Cut.Length - 1)
      If RemoveAmount_type.ToLower = "set variable amount" Then
         If Eachdates.Length - 1 &lt;&gt; EachAmounts.Length - 1 Then Throw New Exception("Number of dates and amount to remove are not have the same")
      End If
      For i As Integer = 0 To Eachdates.Length - 1
         Dates2Cut(i) = DateTime.Parse(Eachdates(i) &amp; " 06:00:00 am")
         If RemoveAmount_type.ToLower = "set variable amount" Then
            Amount2Remove(i) = CDbl(EachAmounts(i))
         Else
            Amount2Remove(i) = Amount2RemoveFix
         End If
      Next
      
      'Reset variables
      CutCounter = 0
      DaysAfterCut = -1
      Allow_Cut = "no" 
      Can_Cut = Allow_Cut
      Has_Cut = "no"
  
      'The fraction of DM to remove
      ' - DMRemovalOption can be a value (0-1 = FracDM2Remove) or a string, which tell us that FracDM2Remove is based on digestibility
      If DMRemovalOption.ToLower = "based on digestibility" Then
         FracDM2Remove = 1 - DefoliatedDigestibility
      Else
         Try
            FracDM2Remove = DMRemovalOption
            If (FracDM2Remove &lt; 0) Or FracDM2Remove &gt; 1 Then
               Throw New Exception("Fraction of DM to remove is out of bounds")
            End If
         Catch
               Throw New Exception("Fraction of DM to remove is not valid")
         End Try
      End If
      
      'prepare message:
      Dim myMessage As String
      If RemoveAmount_type.Contains("residual") Then
         myMessage = RemoveAmount_type.ToLower
      ElseIf RemoveAmount_type.Contains("variable") Then
         mymessage = "variable amounts"
      Else
         myMessage = RemoveAmount_type.ToLower &amp; " = " &amp; LowerThreshold.ToString("#0") &amp; " kg/ha"
      End If

      'write messages on summary file
      Console.WriteLine("")
      Console.WriteLine("  Cut rotation for AgPasture initialised")
      Console.WriteLine("   cut type: at given dates")
      Console.WriteLine("   remove " &amp; myMessage)
      Dim myValue1 As Double = (1 - FracDM2Remove) * 100
      Console.WriteLine("   " &amp; ResidueTreatment_type.ToLower &amp; ", " &amp; myValue1.ToString("#0.0") &amp; "%")
      Console.WriteLine("")
      
   End Sub
      
   &lt;EventHandler()&gt; Public Sub OnPrepare()
      
      StandingWt = StemWt + LeafWt
      Dim preharvest_dm As Double = StandingWt
      Dim preharvest_n As Double = StemN + LeafN
      Dim Amount2Cut As Double
      Dim AmountCuttable As Double

      'Reset variables
      Has_Cut = "no"
      harvested_dm = 0.0
      harvested_n = 0.0
      removed_dm = 0.0
      removed_n = 0.0
      returned_dm = 0.0
      returned_n = 0.0
      GrowthRateCalc = 0.0
      Nconc_inRemoved = 0.0
      NReturn_asDung = 0.0
      NReturn_asUrine = 0.0
      DaysAfterCut = DaysAfterCut + 1

      'Decide whether it is time to cut:
      If CutCounter &lt; Dates2Cut.length Then
         If Today.Date = Dates2Cut(CutCounter).Date Then
            Allow_Cut = "yes"
         End If
      Else
         Allow_cut = "no"
      End If

      'The use of these avoid (or reduces) problems when two managers are used in the same simulation
      Can_Cut = Allow_Cut
      
      'Decide how much to cut:
      If Allow_Cut = "yes" Then
         Select Case RemoveAmount_type.ToLower
            Case "set amount"
               Amount2Cut = Amount2Remove(0)
               AmountCuttable = preharvest_dm
            Case "target amount"
               Amount2Cut = math.Min(math.Max(0, preharvest_dm - LowerThreshold), Amount2Remove(0))
               AmountCuttable = math.Max(0, preharvest_dm - LowerThreshold)
            Case "set variable amount"
               Amount2Cut = Amount2Remove(CutCounter)
               AmountCuttable = preharvest_dm
            Case "down to residual dm"
               Amount2Cut = math.Max(0, preharvest_dm - LowerThreshold)
               AmountCuttable = math.Max(0, preharvest_dm - LowerThreshold)
            Case Else
               Throw New Exception("Option to compute DM amount to remove is not valid")
         End Select  
         
         'Decide whether cut actually happens:
         If (AmountCuttable &gt;= Amount2Cut) Then
            Call CutPasture(Amount2Cut)
            'reset cut variables
            CutCounter = CutCounter + 1
            DaysAfterCut = 0
            Has_Cut = "yes"
            Allow_Cut = "no"
         End If
      Else
         Amount2Cut = 0
         AmountCuttable = 0
      End If

   End Sub 
   

   Sub CutPasture(ByVal Amount2Cut As Double) 
       
      ' --------------------------------------------------------------------------------------------
      ' Cutting pasture
      ' --------------------------------------------------------------------------------------------

      Console.WriteLine("Sender: " &amp; "Manager2")
      Console.WriteLine("Amount2Cut: " &amp; Amount2Cut)
      Console.WriteLine("type: " &amp; "removal")
      
      Dim CutData As GrazeType 
      CutData = New GrazeType
      CutData.sender = "Manager2"  'AgPasture_type
      CutData.amount = Amount2Cut
      Cutdata.type = "removal"
      MyAgPasture.Graze(CutData)
      'RaiseEvent Graze(CutData)
      harvested_dm = MyAgPasture.HarvestWt
      harvested_n = MyAgPasture.HarvestN

      If DaysAfterCut &gt; 0 Then
         GrowthRateCalc = harvested_dm / DaysAfterCut
      Else
         GrowthRateCalc = 0
      End If
      If harvested_dm &gt; 0 Then
         Nconc_inRemoved = harvested_n * 100 / harvested_dm
      End If
      
      'Let user know (via summary) that a cut was made
      Console.WriteLine(Today.ToString("dd MMMM yyyy") + " (Day of year=" + Today.DayOfYear.ToString + "), Cutting AgPasture:")
      Console.WriteLine("     Removing " + harvested_dm.ToString("#0") + "kg DM/ha, with " &amp; harvested_n.ToString("#0.0") &amp; "kg N/ha")

      ' -- Residue management -------------------------------------------------------------------------
      If DMRemovalOption.ToLower = "based on digestibility" Then
         FracDM2Remove = 1 - DefoliatedDigestibility
      End If
      removed_dm = harvested_dm * FracDM2Remove
      removed_n = harvested_n * FracN2Remove
      returned_dm = harvested_dm - removed_dm 
      returned_n = harvested_n - removed_n 
      
      console.WriteLine("ResidueTreatment_type: " &amp; ResidueTreatment_type)
      If ResidueTreatment_type.ToLower = "return as residue" Then
         If FracDM2Remove &lt; 1 Then
            Dim SOMData As New BiomassRemovedType
            SOMData.crop_type = "grass"
            SOMData.dm_type = New String() {"grass"}
            SOMData.dlt_crop_dm = New Single() {returned_dm}
            SOMData.dlt_dm_n = New Single() {returned_n}
            SOMData.dlt_dm_p = New Single() {0.0}
            SOMData.fraction_to_residue = New Single() {1.0}
            RaiseEvent BiomassRemoved(SOMData)     'this works        
         End If
         
      ElseIf ResidueTreatment_type.ToLower = "return as dung &amp; urine" Then
         ' It is advised that dung and urine return should be done using another manager or modules, such as 'UrinePatch' 
         
         NReturn_asDung = returned_n * FracN2Dung
         NReturn_asUrine = math.Max(0, returned_n - NReturn_asDung)
         Dim SOMData As New BiomassRemovedType
         SOMData.crop_type = "RuminantDung_PastureFed"
         SOMData.dm_type = New String() {"dung"}
         SOMData.dlt_crop_dm = New Single() {returned_dm}
         SOMData.dlt_dm_n = New Single() {NReturn_asDung}
         SOMData.dlt_dm_p = New Single() {0.0}
         SOMData.fraction_to_residue = New Single() {1.0}
         RaiseEvent BiomassRemoved(SOMData)
         
         If NReturn_asUrine &gt; 0 Then
            Dim UrineData As New FertiliserApplicationType
            UrineData.Amount = NReturn_asUrine
            UrineData.Depth = 10
            UrineData.Type = "urea"
            RaiseEvent FertiliserApplication(UrineData)
         End If
         
      Else
         Throw New Exception("Residue management type is not valid")
      End If
      
   End Sub
    
End Class
</text>
          <memo name="Info">
 * * *   Cut AgPasture on given dates   * * *

&gt; Created in 17/Jul/2011
&gt;&gt; Last modified: 07/Sep/2012

&gt; Author: Rogerio Cichota
&gt;&gt; Modified by: check notes on code

&gt; General description:
    This script allows to set up a cut/graze rotation for AgPasture. Cuts are allowed only given dates. The user can choose how much is to be cut, how much is to be removed from fieldn and how the remaining is returned.
 Although return as dung and urine is allowe it is not recommended, it should be done using the UrinePatch module.  The cuts happen on Prepare event.


&gt; Specific details:
    + Remove amount options:
      - Set amount: The amount to remove is fixed, always performed
      - Target amount: The amount is the smallest of a given value and difference between existing DM and a target (minimum residual of CoverTarget)
      - Set variable amount: The amounts for each date is given
      - Down to residual DM: Amount to remove is the difference between existing DM and minimum residual

   + Manage residues options:
     - Return as residue: A fraction of the DM cut is added as grass residue to the surfaceOM module;
     - Return as dung &amp; urine: A fraction of the amount cut is returned to the soil as evenly distributed urine and dung. 
       This is a very simplified approach where the fractions of DM (C) and N to be removed are set separately. Also,
        the partition of N between urine and dung is set by the user. 
       N urine is added as urea fertiliser (top 10cm) and the remaining DM and N are added to surfaceOM as dung (RuminantDung_PastureFed).


&gt; Notes on modifications:
    + RCichota, Aug/2012: added the possibility of supplying variable amounts to cut
</memo>
        </manager2>
        <manager2 name="UrinePatchApply">
          <ui>
            <Dummy1 type="category" description="Date and amount for urine deposition" />
            <UrinePatch_start_date type="ddmmmdate" description="Date to start applications (dd/mm/yyyy):">15/05/2008</UrinePatch_start_date>
            <UrinePatch_end_date type="ddmmmdate" description="Date to end applications (dd/mm/yyyy):">31/12/2010</UrinePatch_end_date>
            <Apply_interval type="text" description="Type the interval between applications (days):">5000</Apply_interval>
            <Apply_times type="text" description="Number of applications:">1</Apply_times>
            <doFirstTime type="yesno" description="Apply first urine patch?">yes</doFirstTime>
            <Urine_Water_to_add type="text" description="Type the amount of water to apply (mm):">10</Urine_Water_to_add>
            <Urine_N_to_add type="text" description="Type the amount of urea N to apply (kg/ha):">1000</Urine_N_to_add>
            <Dummy2 type="category" description="Urine patch parameters" />
            <Apply_WeN type="list" listvalues="Yes,No" description="Apply water and N combined?">No</Apply_WeN>
            <p_eq_urine type="text" description="Max proportion of SAT-DUL that urine can fill:">0.99</p_eq_urine>
            <Dist_type type="list" listvalues="Free,At a given depth,Uniformly distributed,Linearly decreasing over depth" description="Choose the type urine distribution in the soil profile:">Linearly decreasing over depth</Dist_type>
            <Depth_for_urine type="text" description="The depth reached by urine (mm):">350</Depth_for_urine>
            <line_factor type="text" description="Type the factor (exponent) to modify the linear dist.:">1.5</line_factor>
          </ui>
          <text>Imports System
Imports ModelFramework

'This manager applies urine (water plus urea) at the amount and depth specified.
' it can also distribute it in the soil profile according to rules give (to simulate fast infiltration/prefential flow)
' (The deposition can also be set to be repeated periodically - also specify the number of depostions and whether the first one happens)
'  [Used to test temporal overlaps]

'--&gt;  Last uptaded in: 29/Aug/2012 ..................


Public Class Script 
   
   'Parameter variables:
   &lt;param&gt; Private UrinePatch_start_date As String
   &lt;param&gt; Private UrinePatch_end_date As String
   &lt;param&gt; Private Apply_interval As Integer
   &lt;param&gt; Private Apply_times As Integer
   &lt;param&gt; Private doFirstTime As String
   &lt;param&gt;&lt;Output&gt;&lt;Units("mm")&gt; Private Urine_Water_to_add As Double
   &lt;param&gt;&lt;Output&gt;&lt;Units("kg/ha")&gt; Private Urine_N_to_add As Double
   &lt;param&gt; Private p_eq_urine As Double
   &lt;param&gt; Private Dist_type As String
   &lt;param&gt; Private Apply_WeN As String 
   &lt;param&gt; Private Depth_for_urine As Double
   &lt;param&gt; Private line_factor As Double
   
   'Link to other modules:
   &lt;Link&gt; Private MyPaddock As Paddock
   &lt;Link&gt; Private Irrigator As Irrigation   
   &lt;Link&gt; Private FertModule As Fertiliser
   Private SoilWaterModule As Object
   Private SoilNModule As Object
      
   'Variables read from other modules
   &lt;Input&gt; Private today As DateTime         'Today's date
   &lt;Input&gt; Private dlayer As Double()        'Thickness of soil layers (mm)
   &lt;Input&gt; Private sw As Double()            'Soil water content (cm3/cm3)
   &lt;Input&gt; Private sw_dep As Double()        'Soil water content (mm)
   &lt;Input&gt; Private sat_dep As Double()       'Saturated soil water content (mm)

   'Output variables
   &lt;Output&gt;&lt;Units("")&gt; Public Urine_frac As Double()              'The actual fraction of urine added to each layer
   &lt;Output&gt;&lt;Units("mm")&gt; Public Urine_depth As Double             'The depth reached by the urine infiltration at application
   &lt;Output&gt;&lt;Units("mm")&gt; Public Urine_Wprofile_added As Double    'The amount of urine water added in the soil profile (exclude added as pond)
   &lt;Output&gt;&lt;Units("mm")&gt; Public Urine_Wpond_added As Double       'The amount of urine water added as pond (irrigation)
   &lt;Output&gt;&lt;Units("mm")&gt; Public Urine_Water_added As Double       'The total amount of urine water added
   &lt;Output&gt;&lt;Units("kg/ha")&gt; Public Urine_Nprofile_added As Double 'The amount of urea N added to the profile
   &lt;Output&gt;&lt;Units("kg/ha")&gt; Public Urine_Npond_added As Double    'The amount of urea N added as pond (fertiliser at layer zero)
   &lt;Output&gt;&lt;Units("kg/ha")&gt; Public Urine_N_added As Double        'The total amount of urea N added
   
   'Internal variables
   Private StartDate As Date                'The date when urine applications start (in date format)
   Private EndDate As Date                'The date when urine applications finish (in date format)
   Private TimeAfterApplication As Integer 'Number of days after a urine application
   Private Urine_prop As Double()          'The potential proportion of urine for each soil layer
   Private SoilDepth As Double             'The soil depth (mm)
   Private NumberOfDepositions As Integer             'Number of urine depositons

   &lt;EventHandler()&gt; Public Sub OnInit2()

      'check the presence of one of the soil modules
      Call CheckModules()

      'Put the dates into date format:
      StartDate = Date.Parse(UrinePatch_start_date)
      EndDate = Date.Parse(UrinePatch_end_date)
      NumberOfDepositions = 0
      
      'Calculates the proportion of urine to be added at each layer:
      ReDim Urine_prop(dlayer.Length - 1)
      If Dist_type.ToLower = "free" Then    'Urine will be added according to 'water infiltration'
         For z As Integer = 0 To dlayer.length - 1
            Urine_prop(z) = 1
         Next
      Else        
         'A given distribution over depth has been chosen, 
         ' urine will be applied up to or at a given depth.
         
         Dim Depth_from_surface  As Double = 0
         For z As Integer = 0 To dlayer.length - 1
            SoilDepth = SoilDepth + dlayer(z)
         Next
         
         'Check that the urine depth is not larger that the soil depth
         If Depth_for_urine &gt; SoilDepth Then Depth_for_urine = SoilDepth
           
         If Dist_type.ToLower = "at a given depth" Then
            For z As Integer = 0 To dlayer.length - 1
               If Depth_for_urine &gt;= Depth_from_surface And Depth_for_urine &lt; Depth_from_surface + dlayer(z) Then
                  Urine_prop(z) = 1
               Else 
                  Urine_prop(z) = 0
               End If
               Depth_from_surface = Depth_from_surface + dlayer(z)
            Next
         ElseIf Dist_type.ToLower = "uniformly distributed" Then
            For z As Integer = 0 To dlayer.length - 1
               If Depth_for_urine &gt;= Depth_from_surface  Then
                  If Depth_for_urine &gt; Depth_from_surface + dlayer(z) Then
                     If Depth_for_urine &gt; 0 Then
                        Urine_prop(z) = dlayer(z) / Depth_for_urine
                     Else
                        Urine_prop(z) = 1
                     End If
                  Else
                     If Depth_for_urine &gt; 0 Then
                        Urine_prop(z) = (Depth_for_urine - Depth_from_surface) / Depth_for_urine
                     Else
                        Urine_prop(z) = 1
                     End If
                  End If
                  Depth_from_surface = Depth_from_surface + dlayer(z)
               Else
                  Urine_prop(z) = 0
               End If 
            Next
         ElseIf Dist_type.ToLower = "linearly decreasing over depth" Then
            'The parameter 'line_factor' makes the line a curve...
            Dim atZ0 As Double
            Dim atZ1 As Double
            Dim Tot_prop As Double = Depth_for_urine * (1 ^ line_factor) / (line_factor + 1)
            
            atZ1 = (Depth_for_urine - Depth_from_surface) * ((1 - Depth_from_surface / Depth_for_urine) ^ line_factor) / (line_factor + 1)
            For z As Integer = 0 To dlayer.length - 1
               atZ0 = atZ1
               Depth_from_surface = Depth_from_surface + dlayer(z)
               atZ1 = (Depth_for_urine - Depth_from_surface) * ((1 - Depth_from_surface / Depth_for_urine) ^ line_factor) / (line_factor + 1)
               If (1 - (Depth_from_surface / Depth_for_urine)) &lt; 0 Then atZ1 = 0
               Urine_prop(z) = (atZ0 - atZ1) / Tot_prop
            Next
         End If
      End If
      Console.WriteLine("")
      Console.WriteLine("Distribution type: " + Dist_type + ", down to " + Depth_for_urine.ToString + "mm depth")
      Console.WriteLine("")
      For z As Integer = 0 To dlayer.length - 1
         Console.WriteLine("    Urine_prop(" + z.ToString + ") = " + Urine_prop(z).ToString)
      Next
      Console.WriteLine("")
   End Sub
   
   'Public WaterChanged As ApsimTypeDelegate WaterChanged.DeltaWater()
   
   &lt;EventHandler()&gt; Public Sub OnPrepare()
      
      Dim urea_conc As Double = 100 * Urine_N_to_add / Urine_Water_to_add  'Urea concentration in urine (ppm)
      Dim sw_deficit(dlayer.Length - 1) As Double                     'Soil water deficit (mm)
      Dim Add_Urine As Boolean = False                            'Indicate whether urine is to be applied or not
      Dim PondedUrine As IrrigationApplicationType = New IrrigationApplicationType

      'Re-set variables
      ReDim Urine_frac(dlayer.Length - 1)
      Urine_Wprofile_added = 0
      Urine_Wpond_added = 0
      Urine_Water_added = 0
      Urine_Nprofile_added = 0
      Urine_Npond_added = 0
      Urine_N_added = 0
      Urine_depth = 0

      If (Today &gt;= StartDate And Today &lt;= EndDate) And (Urine_N_to_add &gt; 0) And (NumberOfDepositions &lt; Apply_times) Then
         'Decide whether it is time to apply urine:
         If Today = StartDate Then
            If doFirstTime.ToLower = "yes" Then               
               Add_Urine = True
            End If
            TimeAfterApplication = 1
            NumberOfDepositions += 1
         Else
            If TimeAfterApplication &gt;= Apply_interval Then
               Add_Urine = True
               TimeAfterApplication = 1
               NumberOfDepositions += 1
            Else 
               Add_Urine = False
               TimeAfterApplication += 1
            End If
         End If

         If Add_Urine = True Then
            'Apply urine according to the Dist_type chosen:
            
            Dim delta_sw_dep(dlayer.Length-1) As Double
            Dim delta_urea(dlayer.Length-1) As Double
            Dim New_sw(dlayer.Length-1) As Double
            Dim Single_NewSW(dlayer.Length-1) As Single
            Dim Cum_water_added As Double = 0 
            Dim Cum_sw_deficit As Double = 0 
            SoilDepth = 0
            
            'Compute the pore space that is available to be filled with urine water
            'it is the value between the actual water content and a fraction of SAT
            For z As Integer = 0 To dlayer.Length - 1
               sw_deficit(z) = Math.Max(0, (sat_dep(z) * p_eq_urine) - sw_dep(z))
               SoilDepth = SoilDepth + dlayer(z)
               If SoilDepth &lt;= Depth_for_urine Then Cum_sw_deficit += sw_deficit(z)
            Next
            
            'Calculates the actual fraction for each layer
            For z As Integer = 0 To dlayer.Length - 1
               If Dist_type.ToLower = "free" Then
                  'to be coded
               Else
                  'Distribution is given in the UI
                  If sw_deficit(z) &gt; 0 And Urine_prop(z) &gt; 0
                     delta_sw_dep(z) = Math.Min(Urine_Water_to_add * Urine_prop(z), sw_deficit(z))
                     If Cum_water_added + delta_sw_dep(z) &gt; Urine_Water_to_add Then
                        delta_sw_dep(z) = Urine_Water_to_add - Cum_water_added 
                        Cum_water_added = Urine_Water_to_add
                     Else
                        Cum_water_added = Cum_water_added + delta_sw_dep(z)
                     End If
                     New_sw(z) = sw(z) + (delta_sw_dep(z) / dlayer(z))
                  Else
                     delta_sw_dep(z) = 0
                     New_sw(z) = sw(z)
                  End If
                  Single_NewSW(z) = CSng(New_sw(z))
                  If Apply_WeN = "yes" Then
                     delta_urea(z) = delta_sw_dep(z) * urea_conc / 100
                  Else
                     delta_urea(z) = Urine_prop(z) * Urine_N_to_add
                  End If
                  Urine_Nprofile_added += delta_urea(z)
                  
                  Urine_frac(z) = delta_sw_dep(z) / Urine_Water_to_add
                  If Urine_frac(z) &gt; 0 Then 
                     Urine_depth = Urine_depth + dlayer(z)
                  End If

                  If Cum_water_added &lt; Urine_Water_to_add Then
                     Urine_Wpond_added = Urine_Water_to_add - Cum_water_added
                     PondedUrine.Amount = Urine_Wpond_added
                     PondedUrine.source = New String() {}
                     PondedUrine.time = ""
                     PondedUrine.Duration = 0
                     PondedUrine.Crop_Area = 0
                     PondedUrine.NH4 = 0
                     PondedUrine.NO3 = 0
                     PondedUrine.CL = 0
                     If Apply_WeN = "yes" Then
                        Urine_Npond_added = Urine_Wpond_added * urea_conc
                     else
                        Urine_Npond_added = 0
                     End If
                  Else
                     Urine_Wpond_added = 0
                     Urine_Npond_added = 0
                  End If
               End If
            Next
            'SoilNModule.dlt_urea = delta_urea
            Dim NitrogenChanges As NitrogenChangedType
            NitrogenChanges = New NitrogenChangedType()
            
				NitrogenChanges.Sender = "UrinePatchApply"
				NitrogenChanges.SenderType = "Manager"
            NitrogenChanges.DeltaUrea = delta_urea
            SoilNModule.NitrogenChanged(NitrogenChanges)
            
            SoilWaterModule.sw = Single_NewSW            
            'Dim WaterChanges As WaterChangedType
            'WaterChanges = New WaterChangedType()
            'WaterChanges.DeltaWater = delta_sw
            'SoilWaterModule.WaterChanged(WaterChanges)
            
            
            
            
            If Urine_Wpond_added &gt; 0 Then
               Irrigator.Variable("irrigation_efficiency").Set(1.0)
               Irrigator.Apply(PondedUrine)
            End If
            If Urine_Npond_added &gt; 0 Then FertModule.Apply(Urine_Npond_added, 0, "Urea_N")
            Urine_Wprofile_added = Cum_water_added
            Urine_Water_added = Urine_Wprofile_added + Urine_Wpond_added
            Urine_N_added = Urine_Nprofile_added + Urine_Npond_added
            Console.WriteLine(Today.ToString("dd MMMM yyyy") + " (Day of year=" + Today.DayOfYear.ToString + "), Urine patch deposition:")
            Console.WriteLine("     Urine patch being applied. Nitrogen load = " + Urine_N_added.ToString + "kg/ha. Water amount = " + Urine_Water_added.ToString + "mm")
         Else
            Array.Clear(Urine_frac, 0, Urine_frac.Length - 1)
            Urine_Wprofile_added = 0
            Urine_Nprofile_added = 0
         End If
      End If      
   End Sub

   Private Sub CheckModules()
   
      If Irrigator Is Nothing Then
         Throw New Exception("Centre pivot manager requires the presense of the irrigation module in the paddock")
      End If
      If FertModule Is Nothing Then
         Throw New Exception("Centre pivot manager requires the presense of the fertiliser module in the paddock")
      End If
      If MyPaddock.LinkByType("SoilWat") Is Nothing Then
         If MyPaddock.LinkByName("SWIM2ui") Is Nothing Then
            If MyPaddock.LinkByName("SWIM2ui2") Is Nothing Then
               Throw New Exception("Urine_patch manager didn't find a valid soil water module in the paddock")
            Else
               SoilWaterModule = MyPaddock.LinkByName("SWIM2ui2")
            End If
         Else
            SoilWaterModule = MyPaddock.LinkByName("SWIM2ui")
         End If
      Else
         SoilWaterModule = MyPaddock.LinkByType("SoilWat")
      End If
      
      If MyPaddock.LinkByType("SoilN") Is Nothing Then
         If MyPaddock.LinkByName("SoilNui") Is Nothing Then
            Throw New Exception("Urine_Patch manager didn't find a valid SoilN module in the paddock")
         Else
            SoilNModule = MyPaddock.LinkByName("SoilNui")
         End If
      Else
         SoilNModule = MyPaddock.LinkByType("SoilN")
      End If
      
   End Sub

End Class
</text>
        </manager2>
        <manager2 name="nh3_volatilisation">
          <ui>
            <Dummy type="category" description="NH3 volatilisation parameters" />
            <Depth_for_NH3 type="text" description="Depth to which NH3 volatilisation is considered (mm):">50</Depth_for_NH3>
            <Dummy1 type="category" description="Base soil and pH change parameters" />
            <Soil_pH_base type="text" description="The base soil pH for each soil layer:">6.0     6.0     6.0     6.0     6.0     6.0     6.0     6.0     6.0     6.0     6.0     6.0     6.0     6.0     6.0     6.0     6.0     6.0     6.0     6.0     6.0     6.0</Soil_pH_base>
            <Soil_CEC_strng type="text" description="The CEC for each soil layer (meq/100g):">23.05   23.05   23.05   23.05   23.05   23.05   23.05   23.05   23.05   23.05   20.10   17.15   17.15   17.15   17.15   14.75   12.35   11.16   9.97    9.97    8.56    7.15</Soil_CEC_strng>
            <k_BC type="text" description="Soil buffer capacity factor:">0.03</k_BC>
            <k_pH_hyd type="text" description="Factor to convert dlt_urea_hydrol into pH changes:">1</k_pH_hyd>
            <k_pH_nit type="text" description="Factor to convert dlt_nh4_nitrif into pH changes:">1</k_pH_nit>
            <k_pH_x type="text" description="Minimum pH fraction decaying per day (0-1):">0.2</k_pH_x>
            <Dummy2 type="category" description="Gas exchange parameters" />
            <k_AFPV type="text" description="Factor for soil/atmosphere gas exchange (AFPV/mm):">75</k_AFPV>
            <f_NV_strng type="text" description="Fractor for volatilisable NH3, per soil layer (0-1):">1.0  0.8  0.5  0.1  0.0  0.0  0.0  0.0</f_NV_strng>
            <Dummy3 type="category" description="Additional limits for volatilisation" />
            <f_AV type="text" description="Fraction of total soil NH4 that can be volatilised per day:">0.5</f_AV>
            <CritRain1 type="text" description="Rain+irrigation below which volatilisation is not limited (mm):">3</CritRain1>
            <CritRain2 type="text" description="Rain+irrigation above which no volatilisation occur (mm):">10</CritRain2>
          </ui>
          <text>Imports System
Imports ModelFramework

'This module estimate the amount of NH3 in the soil and its volatilisation

'--&gt;  Last uptaded in: 12/Jul/2011 ..................


Public Class Script
   
   'Parameter variables:
   &lt;param&gt; Private Depth_for_NH3 As Single            'The depth to which volatilisation is considered (mm)
   &lt;param&gt; Private Soil_pH_base As String             'The base soil pH, apsim will try to keep to this value, same for all layers
   &lt;param&gt; Private Soil_CEC_strng As String           'The CEC for each layer (meq/100g)
   &lt;param&gt; Private k_BC As Single                     'Soil buffer capacity factor ()
   &lt;param&gt; Private k_pH_hyd As Single                 'Factor to convert urea hydrolysed into H+ changes ()
   &lt;param&gt; Private k_pH_nit As Single                 'Factor to convert NH4 nitrified into H+ changes ()
   &lt;param&gt; Private k_pH_x As Single                   'Minimum decrease for pH (fraction/day)
   &lt;param&gt; Private k_AFPV As Single                   'Factor to transform potential evaporation in air filled pore volumes that are potential exchanged with to atmosphere
   &lt;param&gt; Private f_NV_strng As String               'The fraction of potential NH3 volatilisation for each layer that is transpoted to the soil surface ()
   &lt;param&gt; Private f_AV As Single                     'Fraction of total soil NH4 that can be volatilised per day, limits volatilisation and ensure mass balance ()
   &lt;param&gt; Private CritRain1 As Single                'Critial rainfall. Below this volatilisation is not limited by rainfall or irrigation
   &lt;param&gt; Private CritRain2 As Single                'Critial rainfall. Above this no volatilisation occurs
    
   'Events to be raised:
   Event ChangeSoilNitrogen As NitrogenChangedDelegate

   'Variables read from other modules
   &lt;Input&gt; Private rain As Single                     'Rainfall (mm)
   &lt;Input&gt; Private eo As Single                       'Potential evapotranspiration (mm)
   &lt;Input&gt; Private irrigation As Single               'Irrigation amount today (mm)
   &lt;Input&gt; Private dlayer As Single()                 'Soil layers thickness
   &lt;Input&gt; Private bd As Single()                     'Soil bulk density (g/cm3 = kg/L)
   &lt;Input&gt; Private sw As Single()                     'Soil water content (cm3/cm3)
   &lt;Input&gt; Private sat As Single()                    'Soil water content at saturarion, porosity (cm3/cm3)
   &lt;Input(IsOptional:=True)&gt; Private ave_soil_temp As Single()    'Soil temperature from SoilTemp - for each layer (oC)
   &lt;Input(IsOptional:=True)&gt; Private st As Single()               'Soil temperature from SoilN - for each layer (oC)
   &lt;Input&gt; Private nh4 As Single()                    'Amount of NH4 in the soil (kg/ha)
   &lt;Input&gt; Private nh4ppm As Single()                 'Amount of NH4 in the soil (ppm)
   &lt;Input&gt; Private conc_water_nh4 As Single()         'Amount of NH4 not adsorbed (ppm)
   &lt;Input&gt; Private dlt_rntrf As Single()              'Amount of N nitrified (kg/ha)   
   &lt;Input&gt; Private dlt_urea_hydrol As Single()        'Amount of urea N hydrolised (kg/ha)
   
   'Output variables
   &lt;Output&gt;&lt;Units("ppm")&gt; Public nh3ppm As Single()               'The estimated amount of NH3 in the soil (ppm)
   &lt;Output&gt;&lt;Units("kgN/ha")&gt; Public nh3 As Single()               'The estimated amount of NH3 in the soil (kg/ha)
   &lt;Output&gt;&lt;Units("g/ha")&gt; Public nh3_gas As Single()             'The estimated amount of NH3 in the soil in gaseous form (g/ha)
   &lt;Output&gt;&lt;Units("kgN/ha")&gt; Public emission_nh3 As Single()      'The estimated amount of NH3 volatilised (kg/ha/day)
   &lt;Output&gt;&lt;Units("")&gt; Public SoilpH  As Single()                 'dummy soil pH
   &lt;Output&gt;&lt;Units("kgN/ha")&gt; Public nh4_sol As Single()           'The amount of NH4 in the soil solution (kg/ha)   
   &lt;Output&gt;&lt;Units("oC")&gt; Public SoilTemp As Single()              'The soil temperature (oC)

   &lt;Output&gt;&lt;Units("AFPV/day")&gt; Public PotGasExchangeNH As Single  'The potential soil-atmosphere gas exchange (Air-filled-pore-spaces/day)
   &lt;Output&gt;&lt;Units("L/m2/day")&gt; Public GasExchangeNH As Single()   'The volume of gas exchanged (L/m2/day)
   &lt;Output&gt;&lt;Units("L/m2")&gt; Public AirFilledPoreVolume As Single() 'The volume of air filled pore space in each soil layer (L_air/m2)
   &lt;Output&gt;&lt;Units("")&gt; Public NH3toNHx_ratio As Single()          'The ratio between NH3 and NHx in the soil solution
   &lt;Output&gt;&lt;Units("x1000")&gt; Public NH3GtoNH3A_ratio As Single()   'The ratio between NH3 liquide and gas in the soil, times 1000
   &lt;Output&gt;&lt;Units("")&gt; Public pK_NHx As Single()                  'The equilibrium constant for NH4-NH3
   &lt;Output&gt;&lt;Units("")&gt; Public pG_NH3 As Single()                  'The equilibrium constant for NH3A-NH3G

   'Internal variables
   Private NH3_z As Integer                           'The layer to consider NH3 volatilization
   Private f_NV As Single()                           'The fraction of NH3 transport from each layer
   Private Ini_SoilpH As Single()                     'The initial, or base, soil pH
   Private SoilCEC As Single()                        'The CEC (mol/kg)
   
   &lt;EventHandler()&gt; Public Sub OnInit2()

      ReDim SoilpH(dlayer.length - 1)
      ReDim Ini_SoilpH(dlayer.length - 1)

      'Split the read values of f_NV into an array
      f_NV = makeArray(f_NV_strng)
      'Split the read values of pH into an array
      Ini_SoilpH = makeArray(Soil_pH_base)
      'Split the read values of CEC into an array
      SoilCEC = makeArray(Soil_CEC_strng)
      ReDim Preserve Ini_SoilpH(dlayer.length - 1)
      ReDim Preserve SoilCEC(dlayer.length - 1)
      'Assign initial pH values and convert CEC from meq to mol
      For z As Integer = 0 To dlayer.length - 1
         Ini_SoilpH(z) = math.Max(0, Ini_SoilpH(z))
         SoilpH(z) = Ini_SoilpH(z)
         SoilCEC(z) = 0.01 * math.Max(0.1, SoilCEC(z))     'mol/kg
      Next

      'Identify the layer down to which volatilization is considered
      Dim Depth_from_surface As Single = 0
      For z As Integer = 0 To dlayer.length - 1
         Depth_from_surface = Depth_from_surface + dlayer(z)
         If Depth_from_surface &lt;= Depth_for_NH3 Then
            NH3_z = z
         Else
            z = dlayer.length
         End If
      Next

      'verify the bounds of the pH converting factor
      k_pH_hyd = math.Min(1, math.Max(0, k_pH_hyd))
      k_pH_nit = math.Min(1, math.Max(0, k_pH_nit))
      k_pH_x = math.Min(1, math.Max(0, k_pH_x))
      k_BC = math.Max(0, k_BC)
      ReDim Preserve f_NV(dlayer.length - 1)
      For z As Integer = 0 To dlayer.length - 1
         f_NV(z) = math.Min(1, math.Max(0, f_NV(z)))
      Next

      '----------- NH3 volatilization ---------------------------------------------------
      Console.WriteLine("")
      Console.WriteLine("Volatilization will be calculated by manager")
      Console.WriteLine("   Top " &amp; Depth_for_NH3.ToString &amp; "mm are considered,")
      Console.WriteLine("   pH variation is mimicked by dlt_urea_hydrol + dlt_nh4_nitrif")
      Console.WriteLine("")

   End Sub

   
   &lt;EventHandler()&gt; Public Sub OnPrepare()
            
      Dim urea_hydrol As Single                    'The amount of urea hydrolised (mol/L)
      Dim nh4_nitrif As Single                     'The amount of NH4 nitrified (mol/L)
      Dim dlt_H As Single                          'Estimated variation of H+ in the soil (mol/L)
      Dim delta_pH_Hyd As Single = 0               'Variation in soil pH due to urea hydrolysis
      Dim delta_pH_Nit As Single = 0               'Variation in soil pH due to NH4 nitrification
      Dim delta_pH_X As Single = 0                 'Minimum decrease in soil pH, to ensure pH returns to base after urea deposition
      Dim delta_pH_Vol As Single = 0               'Variatin in pH due to volatilisation
      Dim Beta As Single = 1                       'The soil buffer capacity ()
      Dim delta_nh4(dlayer.length - 1) As Double   'The variation in NH4 content due to volatilisation (kg/ha)
      Dim RainFactor As Single = 1.0               'The rain factor

      Try  'to get the soil temperature from SoilTemp, otherwise use SoilN's:
         SoilTemp = ave_soil_temp
      Catch
         SoilTemp = st
      End Try
      
      ReDim nh3ppm(dlayer.length - 1)
      ReDim nh4_sol(dlayer.length - 1)
      ReDim nh3(dlayer.length - 1)
      ReDim nh3_gas(dlayer.length - 1)
      ReDim emission_nh3(dlayer.length - 1)
      ReDim GasExchangeNH(dlayer.length - 1)
      ReDim AirFilledPoreVolume(dlayer.length - 1)
      ReDim NH3toNHx_ratio(dlayer.length - 1)
      ReDim NH3GtoNH3A_ratio(dlayer.length - 1)
      ReDim pK_NHx(dlayer.length - 1)
      ReDim pG_NH3(dlayer.length - 1)

      'Calc the irrigation factor
      If Rain + Irrigation &lt; CritRain1 Then
         RainFactor = 1.0
      ElseIf Rain + Irrigation &gt; CritRain2 Then
         RainFactor = 0.0
      Else
         RainFactor = (Rain + Irrigation - CritRain1) / (CritRain2 - CritRain1) 
      End If
      
      '+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
      '  NOTES:
      '     The RainFactor accounts for the downwards transport of NH3 gas when water from rain or irrigation is being drained throught the soil.
      '        Below RainCrit1, precipitation has no effect, above RainCrit2 volatilisation is zero.  A linear relationship is used between
      '        these two limits:
      '
      '                              |
      '                         F   1+                /-----------
      '                       R a    |               /:
      '                       a c    |              / :
      '                       i t    |             /  :
      '                       n o    |            /   :
      '                         r    |           /    :
      '                              |          /     :
      '                              |         /      :
      '                             0+========+-------+--------------&gt; Rain + Irrigation
      '                              |      Rain    Rain
      '                                     Crit1   Crit2
      '+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


      For z As Integer = 0 To dlayer.length - 1
         
         '0-Compute the value of Beta
         Beta = k_BC * bd(z) * SoilCEC(z) / sw(z)

         '1-Compute the consumption of H+ by urea hydrolysis
         urea_hydrol = dlt_urea_hydrol(z) / (dlayer(z) * 10000)   'kg_urea_N/L_soil
         urea_hydrol = urea_hydrol * 1000 / sw(z)                 'g_urea_N/L_water
         urea_hydrol = urea_hydrol / 14.00674                     'mol_urea_N/L_water  - All N pools as expresseed in kg_N, so molecular mass is 14
         dlt_H = -2 * urea_hydrol * k_pH_hyd                      'mol/L

         '2-Compute changes in soil pH due to urea hydrolysis
         If dlt_H &lt; 0 Then
            delta_pH_Hyd = (14 / (1 + ((14 - soilpH(z)) / SoilpH(z)) * 10 ^ (dlt_H / Beta))) - SoilpH(z)
         Else
            delta_pH_Hyd = 0
         End If
         SoilpH(z) = SoilpH(z) + delta_pH_Hyd

         '3-Compute the production of H+ by nitrification and its effect on soil pH
         nh4_nitrif = dlt_rntrf(z) / (dlayer(z) * 10000)          'kg_nh4_N/L_soil
         nh4_nitrif = nh4_nitrif * 1000 / sw(z)                   'g_nh4_N/L_water
         nh4_nitrif = nh4_nitrif / 14.0067                        'mol_nh4_N/L_water  - All N pools as expresseed in kg_N, so molecular mass is 14
         dlt_H = 2 * nh4_nitrif * k_pH_nit                        'mol/L
         If dlt_H &gt; 0 Then
            delta_pH_Nit = (14 / (1 + ((14 - soilpH(z)) / SoilpH(z)) * 10 ^ (dlt_H / Beta))) - SoilpH(z)
         Else
            delta_pH_Nit = 0
         End If
         
         '4-Compute soil forced pH change - this is to ensure pH will decline to its base value
         If SoilpH(z) &gt; Ini_SoilpH(z) Then
            delta_pH_x = -(SoilpH(z) - Ini_SoilpH(z)) * k_pH_x
         Else
            delta_pH_x = 0
         End If
         SoilpH(z) = SoilpH(z) + math.Min(delta_pH_Nit, delta_pH_X)

         '5-bound pH between base and 14
         SoilpH(z) = math.Min(14, math.Max(Ini_SoilpH(z), SoilpH(z)))

         
         '+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
         '  NOTES:
         '     The changes in pH are due to the consumption of H+ as urea is hydrolysed or the production of H+ by nitrification,
         '        in theory for each mol of N hydrolised two mols of H+ are consumed, while two mols are produced by nitrification;
         '     The k_pH_nit ad k_pH_hyd factors allow to control the extent that H+ is affected by hydrolysis and nitrification,
         '        when set to zero there's no effect, while setting it to one causes full theoretical effect
         '     The parameter Beta describes the soil buffer capacity, which is a function of CEC, k_BC is used for adjusting the relationship.
         '     k_pH_x stablish a minimum rate for pH decay, it mimicks soil buffering and other reactions that bring pH down
         '        after urea/urine deposition. Used when nitrification is not enough to bring the pH down.
         '+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


         '6-compute the NH3 equilibrium factors
         pK_NHx(z) = pK("aq", soilTemp(z) + 273.15)      'Aqueous equilibrium [NH4 &lt;--&gt; NH3]
         pG_NH3(z) = pK("gs", soilTemp(z) + 273.15)      'Gaseous equilibrium [NH3_liquid &lt;--&gt; NH3_gas]
         
         '7-Calc the proportion of total NHx that is in the form of NH3
         Dim NH3toNHx As Single = 1 / (1 + 10 ^ (pK_NHx(z) - SoilpH(z)))
         NH3toNHx_ratio(z) = NH3toNHx
         
         '8-Calc the amount of NH3 in aqueous solution (original equation uses mol/L, thus the ratio of molecular mass is needed)
         nh3ppm(z) = conc_water_nh4(z) * NH3toNHx * (17.03 / 18.04 )      'ppm (ug/cm3_water)
         
         '9-Calc the proportion of total NH3 that is in the gaseous form
         Dim NH3GtoNH3A As Single = 1 / (1 + 10 ^ (pG_NH3(z)))
         NH3GtoNH3A_ratio(z) = NH3GtoNH3A * 1000
         
         '10-Calc the amount of NH3 in gaseous form
         nh3_gas(z) = nh3ppm(z) * NH3GtoNH3A                   'ppm (ug/cm3_air in soil = mg/L)

         '11-Calc the amount of NH3 in gaseous form and the amount effectivelly lost by volatilization
         PotGasExchangeNH = eo * k_AFPV   'air filled pore volumes/day
         AirFilledPoreVolume(z) = (sat(z) - sw(z)) * dlayer(z)    'L_air/m2
         If z &lt;= NH3_z Then
            GasExchangeNH(z) = PotGasExchangeNH * AirFilledPoreVolume(z)      'L_air/m2/day
            GasExchangeNH(z) = GasExchangeNH(z) * RainFactor
            If GasExchangeNH(z) &gt; 0 Then
               emission_nh3(z) = nh3_gas(z) * GasExchangeNH(z) * f_NV(z)      'mg/m2
               emission_nh3(z) = emission_nh3(z) * 10E+4                      'mg/ha
               emission_nh3(z) = emission_nh3(z) * 10E-6                      'kg/ha
            Else
               emission_nh3(z) = 0
            End If
            'Limit volatilisation to a fraction of NH4 for each layer
            emission_nh3(z) = Math.Min(emission_nh3(z), f_AV * nh4(z))
         Else
            GasExchangeNH(z) = 0
            emission_nh3(z) = 0
         End If
         
         
         '+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
         '  NOTES:
         '     To estimate the amount of NH3 volatilised during the day, it is assumed that the amount of NH3 in gaseous form in the
         '        beginning of the day represents well the proportion of NHx 'volatilisable'. It is assumed also that the potential evaporation
         '        is a good estimator for the gas exchange between soil and atmosphere (this makes volatilisation sensible to temperature and
         '        wind).  By scaling the gas exchange to the air filled pore space in the soil, we get volatilisation also sensible to water
         '        content, which mimicks the decrease in gas transport when the soil is wet.  Finally a factor (f_NV) is used to limit the
         '        contribution of each soil layer to the overall volatilisation (deep layers would volatilise less because NH3 needs to move
         '        transport to the surface.
         '+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

         
         '12-Compute soil pH change due to volatilisation
         Dim emission_nh3ised As Single = emission_nh3(z) / (dlayer(z) * 10000)  'kg_nh3_N/L_soil
         emission_nh3ised = emission_nh3ised * 1000 / sw(z)                      'g_nh3_N/L_water
         emission_nh3ised = emission_nh3ised / 14.0067                           'mol_nh3_N/L_water  - All N pools as expresseed in kg_N, so molecular mass is 14
         dlt_H = emission_nh3ised                                                'mol/L
         If dlt_H &gt; 0 Then
            delta_pH_vol = (14 / (1 + ((14 - soilpH(z)) / SoilpH(z)) * 10 ^ (dlt_H / Beta))) - SoilpH(z)
         Else
            delta_pH_vol = 0
         End If

         '13- Calc new pH and bound it between base and 14
         SoilpH(z) = SoilpH(z) + delta_pH_vol
         SoilpH(z) = math.Min(14, math.Max(Ini_SoilpH(z), SoilpH(z)))

         '14-Transform variables to publishable units
         nh3(z) = nh3ppm(z) * sw(z) / 1000                     'mg/cm3_soil = g/L_soil
         nh3(z) = nh3(z) * dlayer(z) * 10000                   'g/ha_soil
         nh3(z) = nh3(z) / 1000                                'kg/ha

         nh3_gas(z) = nh3_gas(z) * (sat(z) - sw(z)) / 1000     'mg/cm3_soil = g/L_soil
         nh3_gas(z) = nh3_gas(z) * dlayer(z) * 10000           'g/ha_soil

         nh4_sol(z) = conc_water_nh4(z) * sw(z) / 1000         'mg/cm3_soil = g/L_soil
         nh4_sol(z) = nh4_sol(z) * dlayer(z) * 10000           'g/ha_soil
         nh4_sol(z) = nh4_sol(z) / 1000                        'kg/ha

         'Compute the delta in nh4 amount
         delta_nh4(z) = -emission_nh3(z)
      Next
      
      'send the delta nh4 to soil
      Dim NitrogenChanges As NitrogenChangedType = New NitrogenChangedType
		NitrogenChanges.Sender = "nh3_volatilisation"
		NitrogenChanges.SenderType = "Manager"
      NitrogenChanges.DeltaNH4 = delta_nh4
      NitrogenChanges.DeltaNO3 = New Double() {}
      RaiseEvent ChangeSoilNitrogen(NitrogenChanges)     

   End Sub
      

   Function makeArray(ByVal ArrayString As String) As Single()
      
      'Get the string with values from the user interface and put the values in an numeric array
      
      Dim MyArray_string As String()
      Dim MyArray_single As Single()
      Dim Separator As Char() = " "
      
      '1-Split string into array
      MyArray_string = ArrayString.Split(Separator, StringSplitOptions.RemoveEmptyEntries)
      
      '2-convert array into type single
      ReDim MyArray_single(MyArray_string.Length - 1)      
      For i As Integer = 0 To MyArray_single.length - 1
         MyArray_single(i) = MyArray_string(i)
      Next
      Return MyArray_single
      
   End Function

   
   Function pK(ByVal N_species As String, ByVal Temp As Single) As Single
      
      'Calculates the equilibrium constants, 
      '  if 'aq' then nh4-nh3 equilibrium in water
      '  if 'gs' then gas-liquid equilibrium for nh3
      
      Dim a_pK As Single() = {0.09018, -1.69}
      Dim b_pK As Single() = {2729.92, 1477.7}
      Dim sp As Integer
      
      If n_species = "aq" Then
         sp = 0
      ElseIf n_species = "gs"
         sp = 1
      End If
      pK = a_pK(sp) + b_pK(sp) / Temp
         
   End Function
   
End Class
</text>
        </manager2>
        <manager2 name="Irrigate">
          <ui>
            <Irrig_start_date type="ddmmmdate" description="Date to start irrigation (dd/mm/yyyy):">1/01/1900</Irrig_start_date>
            <Irrig_end_date type="ddmmmdate" description="Date to end irrigation (dd/mm/yyyy):">15/04/2008</Irrig_end_date>
            <Irrig_depth type="text" description="Enter the depth to which water deficit is computed (cm):">50</Irrig_depth>
            <Irrig_TriggerThreshold type="text" description="Enter the fraction of DUL-LL at which irrigation starts:">0.6</Irrig_TriggerThreshold>
            <Irrig_UpperThreshold type="text" description="Enter the fraction of DUL-LL at which irrigation stops:">1.0</Irrig_UpperThreshold>
          </ui>
          <text>Imports System
Imports ModelFramework

Public Class Script 
   
   'Parameter variables:
   &lt;param&gt; Private Irrig_start_date As String
   &lt;param&gt; Private Irrig_end_date As String
   &lt;param&gt; Private Irrig_depth As Single
   &lt;param&gt; Private Irrig_TriggerThreshold As Single
   &lt;param&gt; Private Irrig_UpperThreshold As Single
   

   &lt;link&gt; Private MyPaddock As Paddock
   &lt;Link&gt; Private Irrigator As Irrigation   
   
   'Variables read from other modules
   &lt;Input&gt; Private dd_mmm_yyyy As String
   &lt;Input&gt; Private dlayer As Single()      'mm
   &lt;Input&gt; Private sw_dep As Single()      'mm
   &lt;Input&gt; Private dul_dep As Single()      'mm
   &lt;Input&gt; Private ll15_dep As Single()      'mm

   'Output variables
   &lt;Output&gt;&lt;Units("mm")&gt; Public SoilWaterDeficit As Single()      'The soil water deficit (DUL-sw)
   &lt;Output&gt;&lt;Units("mm")&gt; Public PAW As Single()                   'The potential available water (DUL-LL) in the soil(mm)

   Private Ini_Date As Date                'The date when irrigation start (in date format)
   Private End_Date As Date                'The date when irrigation finish (in date format)
   Private Today_Date As Date              'The date of today (in date format)
   Private SoilDepth As Single             'The soil depth (cm)
   Private Irrig_layer As Integer          'The deepest layer that deficit is considered for irrigation
   Private sw_paw As Integer               'The amount of potential plant available water down to Irrig_layer

   &lt;EventHandler()&gt; Public Sub OnInit2()
        
      'Put the dates into date format:
      Ini_Date = Irrig_start_date
      End_Date = Irrig_end_date

      ReDim PAW(dlayer.Length - 1)
      
      SoilDepth = 0
      sw_paw = 0 
      For z As Integer = 0 To dlayer.length - 1
         SoilDepth = SoilDepth + dlayer(z) * 0.1
         PAW(z) = dul_dep(z) - ll15_dep(z)
         If SoilDepth &lt;= Irrig_depth Then
            Irrig_layer = z
            sw_paw = sw_paw + PAW(z)
         End If
      Next

   End Sub

   &lt;EventHandler()&gt; Public Sub OnPrepare()
      
      Dim Irrig_amount As Single    'mm
      Dim sw_deficit As Double = 0                                'water deficit to the given threshold (mm)
      'Re-set variables
      ReDim SoilWaterDeficit(dlayer.Length - 1)
      Today_Date = dd_mmm_yyyy.Replace("_", "/")
      
      If Today_date &gt;= Ini_date And Today_date &lt;= End_date Then
         
         'Compute the water deficit:
         For z As Integer = 0 To dlayer.length - 1
            SoilWaterDeficit(z) = Math.Max(0, dul_dep(z) - sw_dep(z))
            If z &lt;= Irrig_layer Then sw_deficit = sw_deficit + SoilWaterDeficit(z)
         Next

         'Apply irrigation
         If sw_deficit &gt;= (sw_paw * (1 - Irrig_TriggerThreshold)) Then
            Irrig_amount = sw_deficit - sw_paw * (1 - Irrig_UpperThreshold) 
            Dim MyIrrigation As IrrigationApplicationType = New IrrigationApplicationType
            MyIrrigation.Amount = Irrig_amount
            MyIrrigation.time = ""
            MyIrrigation.Duration = 0
            MyIrrigation.source = New String() {}
            MyIrrigation.Crop_Area = 0
            MyIrrigation.NH4 = 0
            MyIrrigation.NO3 = 0
            MyIrrigation.CL = 0
            Irrigator.Apply(MyIrrigation)            
         End If
      End If
   End Sub

End Class
</text>
        </manager2>
        <manager2 name="ApplyInhibitor">
          <ui>
            <Dummy0 type="category" description="Apply a given solute to the soil" />
            <ApplySolute_name type="list" listvalues="tracer,nitrificationinhibitor,ureaseinhibitor,cl,dcd" description="  Name of the solute to apply:">nitrificationinhibitor</ApplySolute_name>
            <Dummy1 type="category" description="When and how often to apply" />
            <ApplySolute_start_date type="ddmmmdate" description="  Date to start applications (dd/mm/yyyy):">15/05/2008</ApplySolute_start_date>
            <ApplySolute_end_date type="ddmmmdate" description="  Date to end applications (dd/mm/yyyy):">31/12/2100</ApplySolute_end_date>
            <ApplySolute_interval type="text" description="  Interval between applications (days):">5000</ApplySolute_interval>
            <ApplySolute_times type="text" description="  Number of times to apply:">0</ApplySolute_times>
            <Dummy2 type="category" description="Amount and depth for applications" />
            <ApplySolute_amount2add type="text" description="  Amount of solute to apply (kg/ha):">10</ApplySolute_amount2add>
            <ApplySolute_depth2add type="text" description="  Depth for application (mm):">1</ApplySolute_depth2add>
          </ui>
          <text>Imports System
Imports ModelFramework

' This manager applies a given amount of solute to the soil. It will add from the surface till the depth specified (decreasing linearly)
'  The manager can also repeat the application periodically within a given window

'--&gt;  Last uptaded in: 17/Sep/2013 ..................


Public Class Script 
   
   'Parameter variables:
   &lt;param&gt; Private ApplySolute_name As String
   &lt;param&gt; Private ApplySolute_start_date As String
   &lt;param&gt; Private ApplySolute_end_date As String
   &lt;param&gt; Private ApplySolute_interval As Integer
   &lt;param&gt; Private ApplySolute_times As Integer
   &lt;param&gt; Private ApplySolute_amount2add As Double
   &lt;param&gt; Private ApplySolute_depth2add As Double
   
   'Events to raise
   &lt;[Event]()&gt; Public Event SoluteChanged As SoluteChangedDelegate

   'Variables read from other modules
   &lt;Input&gt; Private today As DateTime            'Today's date
   &lt;Input&gt; Private dlayer As Double()           'Soil layers structure

   'Output variables
   &lt;Output&gt;&lt;Units("kg/ha")&gt; Public SoluteAdded As Double       'The amount of solute added

   'Internal variables
   Private StartDate As DateTime                'The date when applications start (in date format)
   Private EndDate As DateTime                  'The date when applications finish (in date format)
   Private TimeAfterApplication As Integer      'Number of days after an application
   Private SoilDepth As Double                  'The soil depth (mm)
   Private LayerFraction() As Double        'The fraction of solute applied in each layer
   Private NumberOfApplications As Integer      'Number of applications

   &lt;EventHandler()&gt; Public Sub OnInitialised()

      'Put the dates into date format:
      StartDate = DateTime.Parse(ApplySolute_start_date &amp; " 06:00:00 am")
      EndDate = DateTime.Parse(ApplySolute_end_date &amp; " 06:00:00 pm")
      NumberOfApplications = 0
      TimeAfterApplication = 1
      
      'Computes the fraction of solute to be applied in each layer
      Console.WriteLine(" Applying solute, " &amp; ApplySolute_amount2add.ToString("#0.0#") &amp; " kg/ha, in following layers")
      ReDim LayerFraction(dlayer.length - 1)
      Dim Depth_from_surface As Double = 0
      Dim surf_L As Double = 2 / ApplySolute_depth2add
      Dim upper_L As Double = surf_L
      Dim lower_L As Double = 0
      Dim thisLayer As Double = 0
      For Layer As Integer = 0 To dlayer.length - 1
         Depth_from_surface += dlayer(Layer)
         If Depth_from_surface &gt;= ApplySolute_depth2add Then
            ' last layer
            lower_L = 0
            thisLayer = dlayer(Layer) - (Depth_from_surface - ApplySolute_depth2add)
         Else
            ' intermediate layer
            lower_L = surf_L * (ApplySolute_depth2add - Depth_from_surface) / ApplySolute_depth2add
            thisLayer = dlayer(Layer)
         End If
         LayerFraction(Layer) = (upper_L + lower_L) * thisLayer / 2
         upper_L = lower_L
         Console.WriteLine(" Fraction in layer (" &amp; Layer.ToString() &amp; "): " &amp; LayerFraction(Layer).ToString())
         If Depth_from_surface &gt;= ApplySolute_depth2add Then Layer = dlayer.length               
      Next
      

   End Sub

   &lt;EventHandler()&gt; Public Sub OnPrepare()

      'Re-set variables
      SoluteAdded = 0
      Dim delta_solute(dlayer.Length - 1) As Double

      'Decide whether it is time to start applications:
      If (today.Date &gt;= StartDate.Date) And (today.Date &lt;= EndDate.Date) And (NumberOfApplications &lt; ApplySolute_times) Then
         If (today - StartDate).TotalDays &lt; 0.5 Then
            ' always apply on the starting date, or beginning of simulation
            For Layer As Integer = 0 To dlayer.length - 1
               delta_solute(Layer) = ApplySolute_amount2add * LayerFraction(Layer)
               SoluteAdded += delta_solute(Layer)
               If LayerFraction(Layer) &lt;= 1E-12 Then Layer = dlayer.length
            Next
            TimeAfterApplication = 1
            NumberOfApplications += 1
         Else
            ' apply at given intervals
            If TimeAfterApplication &gt;= ApplySolute_interval Then
               For Layer As Integer = 0 To dlayer.length - 1
                  delta_solute(Layer) = ApplySolute_amount2add * LayerFraction(Layer)
                  SoluteAdded += delta_solute(Layer)
                  If LayerFraction(Layer) &lt;= 1E-12 Then Layer = dlayer.length               
               Next
               TimeAfterApplication = 1
               NumberOfApplications += 1
            Else
               TimeAfterApplication = TimeAfterApplication + 1
               SoluteAdded = 0
            End If
         End If

         'Make the application
         If TimeAfterApplication = 1 Then
            Dim SoluteChanges As SoluteChangedType = New SoluteChangedType()
            SoluteChanges.Sender = "Manager: ApplySolute"
            SoluteChanges.SoluteName = ApplySolute_name
            SoluteChanges.SoluteUnits = "kg/ha"
            SoluteChanges.DeltaSolute = delta_solute
            RaiseEvent SoluteChanged(SoluteChanges)

            Console.WriteLine(today.ToString("dd MMMM yyyy") + " (Day of year=" + today.DayOfYear.ToString + "), ApplySolute:")
            Console.WriteLine("     " &amp; ApplySolute_name &amp; " being applied at " + SoluteAdded.ToString("0.00") + "kg/ha, added down to depth " + ApplySolute_depth2add.ToString("0") + "mm")
         End If
      End If            
      
   End Sub

End Class
 </text>
        </manager2>
        <operations name="Fertiliser_NI_General">
          <operation condition="start_of_day">
            <date>15-Aug-2007</date>
            <action>fertiliser apply amount = 15, depth = 2 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>15-Aug-2007</date>
            <action>fertiliser apply amount = 10, depth = 10 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>15-Sep-2007</date>
            <action>fertiliser apply amount = 15, depth = 2 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>15-Sep-2007</date>
            <action>fertiliser apply amount = 10, depth = 10 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>15-Oct-2007</date>
            <action>fertiliser apply amount = 15, depth = 2 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>15-Oct-2007</date>
            <action>fertiliser apply amount = 10, depth = 10 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>5-Nov-2007</date>
            <action>fertiliser apply amount = 15, depth = 2 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>5-Nov-2007</date>
            <action>fertiliser apply amount = 10, depth = 10 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>25-Nov-2007</date>
            <action>fertiliser apply amount = 15, depth = 2 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>25-Nov-2007</date>
            <action>fertiliser apply amount = 10, depth = 10 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>20-Dec-2007</date>
            <action>fertiliser apply amount = 15, depth = 2 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>20-Dec-2007</date>
            <action>fertiliser apply amount = 10, depth = 10 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>15-Jan-2008</date>
            <action>fertiliser apply amount = 15, depth = 2 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>15-Jan-2008</date>
            <action>fertiliser apply amount = 10, depth = 10 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>15-Feb-2008</date>
            <action>fertiliser apply amount = 15, depth = 2 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>15-Feb-2008</date>
            <action>fertiliser apply amount = 10, depth = 10 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>15-Mar-2008</date>
            <action>fertiliser apply amount = 15, depth = 2 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>15-Mar-2008</date>
            <action>fertiliser apply amount = 10, depth = 10 (mm), type = urea_n</action>
          </operation>
        </operations>
        <operations name="Irrigation_Ruakura">
          <operation condition="start_of_day">
            <date>24-Apr-2008</date>
            <action>irrigation apply amount = 2.65</action>
          </operation>
          <operation condition="start_of_day">
            <date>21-May-2008</date>
            <action>irrigation apply amount = 10.55</action>
          </operation>
          <operation condition="start_of_day">
            <date>22-May-2008</date>
            <action>irrigation apply amount = 3.8</action>
          </operation>
          <operation condition="start_of_day">
            <date>29-May-2008</date>
            <action>irrigation apply amount = 10.55 </action>
          </operation>
          <operation condition="start_of_day">
            <date>5-Jun-2008</date>
            <action>irrigation apply amount = 10.55 </action>
          </operation>
          <operation condition="start_of_day">
            <date>24-Jul-2008</date>
            <action>irrigation apply amount = 10.0</action>
          </operation>
          <operation condition="start_of_day">
            <date>
            </date>
            <action>
            </action>
          </operation>
          <operation condition="start_of_day">
            <date>
            </date>
            <action>
            </action>
          </operation>
          <operation condition="start_of_day">
            <date>
            </date>
            <action>
            </action>
          </operation>
        </operations>
        <operations name="Fertiliser_Ruakura">
          <operation condition="start_of_day">
            <date>24-Apr-2008</date>
            <action>fertiliser apply amount = 15, depth = 2 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>24-Apr-2008</date>
            <action>fertiliser apply amount = 10, depth = 10 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>20-May-2008</date>
            <action>fertiliser apply amount = 15, depth = 2 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>20-May-2008</date>
            <action>fertiliser apply amount = 10, depth = 10 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>11-Aug-2008</date>
            <action>fertiliser apply amount = 15, depth = 2 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>11-Aug-2008</date>
            <action>fertiliser apply amount = 10, depth = 10 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>11-Sep-2008</date>
            <action>fertiliser apply amount = 15, depth = 2 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>11-Sep-2008</date>
            <action>fertiliser apply amount = 10, depth = 10 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>10-Oct-2008</date>
            <action>fertiliser apply amount = 15, depth = 2 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>10-Oct-2008</date>
            <action>fertiliser apply amount = 10, depth = 10 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>3-Nov-2008</date>
            <action>fertiliser apply amount = 15, depth = 2 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>3-Nov-2008</date>
            <action>fertiliser apply amount = 10, depth = 10 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>28-Nov-2008</date>
            <action>fertiliser apply amount = 15, depth = 2 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>28-Nov-2008</date>
            <action>fertiliser apply amount = 10, depth = 10 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>12-Jan-2009</date>
            <action>fertiliser apply amount = 15, depth = 2 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>12-Jan-2009</date>
            <action>fertiliser apply amount = 10, depth = 10 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>13-Mar-2009</date>
            <action>fertiliser apply amount = 15, depth = 2 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>13-Mar-2009</date>
            <action>fertiliser apply amount = 10, depth = 10 (mm), type = urea_n</action>
          </operation>
          <operation condition="start_of_day">
            <date>
            </date>
            <action>
            </action>
          </operation>
        </operations>
      </folder>
      <micromet name="Micromet">
        <soilalbedo type="text" description="soilalbedo">0.23</soilalbedo>
        <a_interception type="text" description="a_interception">0</a_interception>
        <b_interception type="text" description="b_interception">0</b_interception>
        <c_interception type="text" description="c_interception">0</c_interception>
        <d_interception type="text" description="d_interception">0</d_interception>
      </micromet>
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency type="text" description="Efficiency of the irrigation. (0-1.0)">0.8</irrigation_efficiency>
        <irrigation_allocation type="list" listvalues="on,off" description="Allocation limits">off</irrigation_allocation>
        <allocation type="text" description="Allocation in ML">0</allocation>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0</default_cl_conc>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0</default_cl_conc>
      </irrigation>
      <fertiliser />
      <NitrificationInhibitor2 name="NitrificationInhibitor">
        <Dummy1 type="category" description="Initial solute content in the soil" />
        <InitialContent type="text" description="  Amount of NitrificationInhibitor for each layer (kg/ha):">0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0</InitialContent>
        <Dummy2 type="category" description="NitrificationInhibitor effect function - Michaelis-Menten function" />
        <sif_kMichaelisMenten type="text" description="The Michaelis-Menten factor - NitrificationInhibitor concentration for half inhibition effect (ppm):">1.553</sif_kMichaelisMenten>
        <Dummy3 type="category" description="NitrificationInhibitor degradation functions" />
        <PotentialDegradationRate type="text" description="Degradation rate for NitrificationInhibitor at optimum conditions (%/day):">11.0</PotentialDegradationRate>
        <stf_TemperatureAtOptimum type="text" description="The value of temperature at optimum conditions (oC):">28</stf_TemperatureAtOptimum>
        <stf_FactorValueAtZeroDegrees type="text" description="The value for temperature effect at zero degrees (0-1):">0.035</stf_FactorValueAtZeroDegrees>
        <stf_ExponentValue type="text" description="The exponent value for the temperature effect function (approx. 1-5):">159</stf_ExponentValue>
        <swf_xValues type="text" description="The values for the x-axis of the moisture effect - modified water content (0-3):">0.0  0.8  1.0  1.4  2.0  3.0</swf_xValues>
        <swf_yValues type="text" description="The values for the y-axis for the moisture effect - relative effect (0-1):">0.0  0.0  0.1  1.0  1.0  0.5</swf_yValues>
        <phf_xValues type="text" description="The values for the x-axis of the pH effect - soil pH:">0.0  3.5  5.0  8.0  9.5  14.0</phf_xValues>
        <phf_yValues type="text" description="The values for the y-axis for the pH effect - relative effect (0-1):">0.0  0.0  1.0  1.0  0.0   0.0</phf_yValues>
        <scf_kMichaelisMenten type="text" description="The Michaelis-Menten factor for carbon effect - Soil carbon content for half effect (%):">0.11</scf_kMichaelisMenten>
      </NitrificationInhibitor2>
      <surfaceom name="surface organic matter">
        <PoolName type="text" description="Organic Matter pool name">grass</PoolName>
        <type type="list" listvalues="bambatsi,barley,base_type,broccoli,camaldulensis,canola,centro,chickpea,chikenmanure_base,cm,cmA,cmB,constants,cotton,cowpea,danthonia,fababean,fieldpea,fym,gbean,globulus,goatmanure,grandis,grass,horsegram,inert,lablab,lentil,lucerne,lupin,maize,manB,manure,medic,millet,mucuna,nativepasture,navybean,oats,orobanche,peanut,pigeonpea,potato,rice,sorghum,soybean,stylo,sugar,sunflower,sweetcorn,sweetsorghum,tillage,tithonia,vetch,weed,wheat" description="Organic Matter type">grass</type>
        <mass type="text" description="Initial surface residue (kg/ha)">200</mass>
        <cnr type="text" description="C:N ratio of initial residue">20</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <SWIM2ui2>
        <dummy1 type="category" description="SWIM boundary conditions:" />
        <top_boundary_condition type="list" listvalues="0,1,2,3" description="Choose top boundary condition (0=inf conduct; 1=const potential; 2=limtd conduct):">0</top_boundary_condition>
        <runoff type="list" listvalues="0,1,2" description="Choose runnof/pond condition (0=all runoff; 1=all pond; 2=calc runoff):">1</runoff>
        <bottom_boundary_condition type="list" listvalues="0,1,2,3" description="Choose bottom boundary condition (0=set pot grad; 1=set potential; 2=impermeable;3=seepage):">3</bottom_boundary_condition>
        <run_solutes type="text" description="Type list of solutes SWIM will move:">urea  nh4  no3  nitrificationinhibitor</run_solutes>
        <max_water_increment type="text" description="Type base water increment value:">0.5</max_water_increment>
        <dummy2 type="category" description="Description of soil profile" />
        <x type="text" description="Enter the values of x for each layer:">0       10      20      30      50      70      90      110     140     160     190     210     250     270     330     370     430     470     530     570     630     700</x>
        <soil_type type="text" description="Enter the tags for each layer:">H1_HortC  H1_HortC  H1_HortC  H1_HortC  H1_HortC  H1_HortC  H1_HortC  H1_HortC  H1_HortC  H1_HortC  -         H2_HortC  H2_HortC  H2_HortC  H2_HortC  -         H3_HortC  -         H4_HortC  H4_HortC  -         H5_HortC</soil_type>
        <psi type="text" description="Enter the inital values of psi for each layer:">-100.0  -100.0  -100.0  -100.0  -100.0  -100.0  -100.0  -100.0  -100.0  -100.0  -100.0  -100.0  -100.0  -100.0  -100.0  -100.0  -100.0  -100.0  -100.0  -100.0  -100.0  -100.0</psi>
        <ini name="Ini_SWIM2">
          <filename input="yes">%apsim%\Tests\Solute2\NitrificationInhibitor\Validation\Ini_SWIM2ui2(NITests).xml</filename>
        </ini>
      </SWIM2ui2>
      <SoilNitrogen>
        <category type="category" description="Parameters to initialise soil organic matter" />
        <root_wt type="text" description="Type the initial FOM amount in the soil (kgDM/ha):">2000</root_wt>
        <root_cn type="text" description="Type the initial C:N ratio of FOM:">30</root_cn>
        <soil_cn type="text" description="Type the C:N ratio of soil humus:">12.5</soil_cn>
        <mcn type="text" description="Type the C:N ratio of soil microbial biomass:">8</mcn>
        <category type="category" description="Enter the values for each layer" />
        <ph type="text" description="Type the inital soil pH:">6.0     6.0     6.0     6.0     6.0     6.0     6.0     6.0     6.0     6.0     6.0     6.0     6.0     6.0     6.0     6.0     6.0     6.0     6.0     6.0     6.0     6.0</ph>
        <oc type="text" description="Type the initial soil organic carbon content (%):">6.802   6.762   6.722   6.661   6.588   6.514   5.852   5.042   4.356   3.777   3.273   2.755   2.314   1.834   1.370   1.025   0.773   0.589   0.455   0.358   0.270   0.235</oc>
        <fbiom type="text" description="Type the microbial biomass fraction of OC (0-1):">0.080   0.080   0.080   0.080   0.079   0.078   0.075   0.069   0.061   0.050   0.040   0.029   0.021   0.013   0.008   0.008   0.008   0.008   0.008   0.008   0.008   0.008</fbiom>
        <finert type="text" description="Type the inert fraction of soil humus (0-1):">0.541   0.548   0.554   0.561   0.573   0.597   0.632   0.696   0.733   0.760   0.788   0.810   0.836   0.854   0.882   0.898   0.917   0.927   0.939   0.946   0.955   0.962</finert>
        <no3ppm type="text" description="Type the initial concentration of NO3 is the soil (ppm):">4.50    6.00    7.20    7.50    7.50    7.50    7.50    7.50    7.50    7.30    6.80    6.30    5.90    5.30    4.50    3.70    3.00    2.40    2.20    2.00    1.70    1.50</no3ppm>
        <nh4ppm type="text" description="Type the initial concentration of NH4 is the soil (ppm):">1.50    2.00    2.40    2.50    2.50    2.50    2.50    2.50    2.50    2.43    2.27    2.10    1.97    1.77    1.50    1.23    1.00    0.80    0.73    0.67    0.57    0.50</nh4ppm>
        <ureappm type="text" description="Type the initial concentration of urea is the soil (ppm):">0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00</ureappm>
        <category type="category" description="Parameters to compute Nitrification" />
        <Nitrification_pot type="text" description="Potential Nitrification rate (mg NH4/kg soil/day):">75</Nitrification_pot>
        <nh4_at_half_pot type="text" description="NH4 concentration at half of Nitrification rate (ppm):">90</nh4_at_half_pot>
      </SoilNitrogen>
      <SoilTemperature2>
        <MaxTTimeDefault type="text" description="MaxTTimeDefault">14</MaxTTimeDefault>
        <BoundaryLayerConductanceSource type="text" description="BoundaryLayerConductanceSource">calc</BoundaryLayerConductanceSource>
        <BoundaryLayerConductance type="text" description="BoundaryLayerConductance">20</BoundaryLayerConductance>
        <BoundaryLayerConductanceIterations type="text" description="BoundaryLayerConductanceIterations">1</BoundaryLayerConductanceIterations>
        <NetRadiationSource type="text" description="NetRadiationSource">calc</NetRadiationSource>
        <DefaultWindSpeed type="text" description="DefaultWindSpeed">3</DefaultWindSpeed>
        <DefaultAltitude type="text" description="DefaultAltitude">18</DefaultAltitude>
        <DefaultInstrumentHeight type="text" description="DefaultInstrumentHeight">1.2</DefaultInstrumentHeight>
        <BareSoilHeight type="text" description="BareSoilHeight">57</BareSoilHeight>
        <Clay type="text" description="Clay">20.0    20.0    20.0    20.0    20.0    20.0    20.0    20.0    20.0    20.0    19.3    18.5    18.5    18.5    18.5    14.8    11.0    8.8     6.5     6.5     5.6     4.8</Clay>
      </SoilTemperature2>
      <AgPasture>
        <Nspecies type="text" description="Number of species">2</Nspecies>
        <thisCropName type="text" description="Crop name shown as on the simulation tree">AgPasture</thisCropName>
        <cropName type="text" description="Species names">ryegrass whiteclover paspalum</cropName>
        <micrometType type="text" description="Crop type for MicroMet">grass     grass    grass</micrometType>
        <isAnnual type="text" description="Annual species? no=0, yes=1">0           0          0</isAnnual>
        <isLegume type="text" description="Legume species? no=0, yes=1">0           1          0</isLegume>
        <photoPath type="text" description="C3 or C4 species? C3=3, C4=4">3           3          4</photoPath>
        <rootDepth type="text" description="Root depth">750       350      1000</rootDepth>
        <growthTmin type="text" description="Minimum temperature for growth">2           3          10</growthTmin>
        <growthTmax type="text" description="Maximum temperature for growth">32        32         40</growthTmax>
        <growthTopt type="text" description="Optimum temperature for growth">20        20         22</growthTopt>
        <growthTq type="text" description="Curvature of growth response to temperature">1.75     1.75        2.0</growthTq>
        <massFluxTmin type="text" description="Minimum temperature for mass flux">2           3          7.5  </massFluxTmin>
        <massFluxTopt type="text" description="Optimum temperature for mass flux">20        20         22</massFluxTopt>
        <massFluxW0 type="text" description="Scale factor for response of mass flux to soil moisture">2          2           2</massFluxW0>
        <massFluxWopt type="text" description="Optimum soil moisture for mass flux">0.5       0.5        0.5</massFluxWopt>
        <heatOnsetT type="text" description="Heat effects- Onset temperature">32.5     32.5      40</heatOnsetT>
        <heatFullT type="text" description="Heat effects- Full temperature">100      100      100</heatFullT>
        <heatSumT type="text" description="Heat effects- Temperature sum for recovery">30        30         50</heatSumT>
        <coldOnsetT type="text" description="Cold effects- Onset temperature">0          0           8</coldOnsetT>
        <coldFullT type="text" description="Cold effects- Full temperature">-3          -3         3</coldFullT>
        <coldSumT type="text" description="Cold effects- Temperature sum for recovery">20         20        50</coldSumT>
        <Pm type="text" description="Reference CO2 assimilation rate (mg CO2/m2.s)">1           1          1.2</Pm>
        <maintRespiration type="text" description="Maintenance respiration coefficient (%)">3           3          3</maintRespiration>
        <growthEfficiency type="text" description="Growth efficiency">0.75      0.75     0.75</growthEfficiency>
        <SLA type="text" description="Specific leaf area">20        20         20</SLA>
        <lightExtCoeff type="text" description="Light extinction coefficient">0.5       0.8        0.6</lightExtCoeff>
        <stockParameter type="text" description="Stock influence parameter">0.05     0.05      0.05</stockParameter>
        <maxRootFraction type="text" description="Maximum biomass fraction allocated to root">0.2       0.2        0.2</maxRootFraction>
        <leafRate type="text" description="Reference leaf appearance rate without stress">3          3           3.5</leafRate>
        <fLeaf type="text" description="Reference growth partition to leaves">0.7       0.7        0.7</fLeaf>
        <fStolon type="text" description="Reference growth partition to stolon">0.0       0.2        0.0</fStolon>
        <digestLive type="text" description="Digestibility of live plant material">0.6       0.6        0.6</digestLive>
        <digestDead type="text" description="Digestibility of dead plant material">0.2       0.2        0.2</digestDead>
        <dmtotal type="text" description="Initial shoot dry matter (kg/ha)">1150    575       150</dmtotal>
        <dmlitter type="text" description="Initial litter dry matter (kg/ha)">250      50         10</dmlitter>
        <dmgreenmin type="text" description="Minimum green dry matter (kg/ha)">350      100       25</dmgreenmin>
        <NcleafOpt type="text" description="N concentration - leaf optimum">4.0       4.5        3.0</NcleafOpt>
        <NcleafMax type="text" description="N concentration - leaf luxury">5.0       5.5        3.5</NcleafMax>
        <NcleafMin type="text" description="N concentration - leaf scenescent">1.2       2.0        0.5</NcleafMin>
        <NcstemFr type="text" description="Stem N concentration as fraction of leaf N concentration">0.5      0.5         0.5</NcstemFr>
        <NcstolFr type="text" description="Stolon N concentration as fraction of leaf N concentration">0.0      0.5         0.0 </NcstolFr>
        <NcrootFr type="text" description="Root N concentration as fraction of leaf N concentration">0.5      0.5         0.5</NcrootFr>
        <NMinFix type="text" description="Minimum N fixation (when soil N is sufficient)">0.0      0.2         0.0</NMinFix>
        <NMaxFix type="text" description="Maximum N fixation (when soil N is unavailable)">0.0      0.6         0.0</NMaxFix>
        <CO2PmaxScale type="text" description="CO2 - Scale factor for CO2 effect on photosynthesis">700     700       150</CO2PmaxScale>
        <CO2NScale type="text" description="CO2 - Scale factor for CO2 effects on plant N concentration">600     600       600</CO2NScale>
        <CO2NMin type="text" description="CO2 - Minimum fraction that plant N concentration may reduce to uder elevated CO2">0.7      0.7        0.7</CO2NMin>
        <CO2NCurvature type="text" description="CO2 - Curvature factor of CO2 effect on plant N concentration">2         2           2</CO2NCurvature>
        <Frgr type="text" description="Relative growth factor">1         1           1</Frgr>
        <waterStressFactor type="text" description="Scale factor of water stress on plant growth [0-1]">1         1           1</waterStressFactor>
        <WaterUptakeSource type="text" description="Water uptake done by AgPasture (calc) or by apsim?">apsim</WaterUptakeSource>
        <rlvp type="text" description="Root distribution of swards (relative to each soil layer)">0.106   0.114   0.112   0.110   0.106   0.097   0.085   0.070   0.055   0.042   0.032   0.023   0.017   0.012   0.007   0.004   0.003   0.002   0.001   0.001   0.001   0.000</rlvp>
        <rateLive2Dead type="text" description="Type the live to dead coefficient">0.05     0.05      0.05</rateLive2Dead>
      </AgPasture>
      <outputfile name="Results">
        <filename output="yes">BaseHorotiu Results.out</filename>
        <title>BaseHorotiu Results</title>
        <variables name="Variables">
          <variable>dd/mm/yyyy as Date</variable>
          <variable>year as Year</variable>
          <variable>month_str as Month</variable>
          <variable>isExpDay as isExpDay</variable>
          <variable>Day_of_Experiment as DayOfExp</variable>
          <variable>rain as Rain</variable>
          <variable>irrigation as Irrigation</variable>
          <variable>Urine_Water_added as UrineWater</variable>
          <variable>es as Evaporation</variable>
          <variable>WaterUptake as WaterUptake</variable>
          <variable>drain as Drainage format 3</variable>
          <variable>sw_dep() as SoilWaterContent</variable>
          <variable>pond as PondedWater</variable>
          <variable>PET</variable>
          <variable>PlantFixedN as FixedN</variable>
          <variable>Fertiliser as FertiliserN</variable>
          <variable>Urine_N_added as UrineN</variable>
          <variable>denit_N as DenitrifiedN</variable>
          <variable>emission_nh3() as VolatilisedN</variable>
          <variable>leach_urea as UreaLeached  format 3</variable>
          <variable>leach_nh4 as NH4Leached  format 3</variable>
          <variable>leach_no3 as NO3Leached  format 3</variable>
          <variable>removed_n as RemovedN</variable>
          <variable>urea() as UreaAmount</variable>
          <variable>nh4() as NH4Amount</variable>
          <variable>no3() as NO3Amount</variable>
          <variable>Mineral_N as MineralN</variable>
          <variable>hum_n() as SoilHumusN</variable>
          <variable>biom_n() as SoilBiomassN</variable>
          <variable>fom_n() as SoilFOMN</variable>
          <variable>surfaceom_n as SurfaceOMN</variable>
          <variable>AboveGroundN as ShootN</variable>
          <variable>BelowGroundN as RootN</variable>
          <variable>removed_dm as RemovedDM</variable>
          <variable>TotalPlantWt as PastureDM</variable>
          <variable>SpeciesTotalWt as TotalDMspecies</variable>
          <variable>CloverContent as %Clover</variable>
          <variable>HerbageGrowthWt as DailyGrowth</variable>
          <variable>GrowthRateCalc as GrowthRateCalc</variable>
          <variable>LAI_total as TotalLAI</variable>
          <variable>LAI_green as GreenLAI</variable>
          <variable>GLFwater as GLFwater</variable>
          <variable>GLFtemp as GLFtemp</variable>
          <variable>GLFn as GLFNitrog</variable>
          <variable>GLFnConcentration</variable>
          <variable>SoluteAdded as dcd_added</variable>
          <variable>nitrificationinhibitor(1) as DCD(0cm)</variable>
          <variable>nitrificationinhibitor(7) as DCD(10cm)</variable>
          <variable>nitrificationinhibitor(11) as DCD(20cm)</variable>
          <variable>nitrificationinhibitor() as TotalDCD format 3</variable>
          <variable>leach_nitrificationinhibitor as DCDLeached format 3</variable>
          <variable>Degradation_NitrificationInhibitor() as DCDdegradation format 3</variable>
          <variable>DoRecord_LData</variable>
          <variable>DrainCollected</variable>
          <variable>UreaLeachCollected</variable>
          <variable>NH4LeachCollected</variable>
          <variable>NO3LeachCollected</variable>
          <variable>DCDLeachCollected</variable>
          <variable>nitrification_inhibition(1)</variable>
          <variable>nitrification_inhibition(2)</variable>
          <variable>nitrification_inhibition(3)</variable>
        </variables>
        <events name="Reporting Frequency">
          <event>end_day</event>
        </events>
        <GraphReport name="GraphReport-Water">
          <Graph name="Water-in">
            <Legend>
              <CheckedTitles> Cumulative Rain</CheckedTitles>
              <CheckedTitles> Cumulative Irrigation</CheckedTitles>
              <CheckedTitles> UrineWater</CheckedTitles>
            </Legend>
            <Plot>
              <SeriesType>Solid line</SeriesType>
              <PointType>Small dot</PointType>
              <colour>
              </colour>
              <X>Date</X>
              <Y>Cumulative Rain</Y>
              <Y>Cumulative Irrigation</Y>
              <Y>UrineWater</Y>
              <GDApsimFileReader name="ApsimFileReader" />
            </Plot>
          </Graph>
          <Graph name="Water-out">
            <Legend>
              <CheckedTitles> Cumulative Evaporation</CheckedTitles>
              <CheckedTitles> Cumulative WaterUptake</CheckedTitles>
              <CheckedTitles> Cumulative PET</CheckedTitles>
            </Legend>
            <Plot>
              <SeriesType>Solid line</SeriesType>
              <PointType>Small dot</PointType>
              <colour>
              </colour>
              <X>Date</X>
              <Y>Cumulative Evaporation</Y>
              <Y>Cumulative WaterUptake</Y>
              <Y>Cumulative PET</Y>
              <GDApsimFileReader name="ApsimFileReader" />
            </Plot>
          </Graph>
          <Graph name="SoilWater">
            <Legend>
              <CheckedTitles> Horotiu-1100withDCD Results</CheckedTitles>
            </Legend>
            <Plot>
              <SeriesType>Solid line</SeriesType>
              <PointType>Small dot</PointType>
              <colour>
              </colour>
              <X>Date</X>
              <Y>SoilWaterContent</Y>
              <GDApsimFileReader name="ApsimFileReader" />
            </Plot>
          </Graph>
          <Graph name="Drainage (mod x obs)">
            <Legend>
              <CheckedTitles>Predicted, Cumulative Drainage,Horotiu-1100withDCD Results</CheckedTitles>
              <CheckedTitles>Predicted, Cumulative DrainCollected,Horotiu-1100withDCD Results</CheckedTitles>
              <CheckedTitles>Observed, Cumulative Lys11.Drain,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
              <CheckedTitles>Observed, Cumulative Lys21.Drain,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
              <CheckedTitles>Observed, Cumulative Lys26.Drain,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
              <CheckedTitles>Observed, Cumulative Lys46.Drain,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
            </Legend>
            <Plot name="Predicted">
              <colour>
              </colour>
              <X>Date</X>
              <SeriesType>Solid line</SeriesType>
              <PointType>None</PointType>
              <Y>Cumulative Drainage</Y>
              <Y>Cumulative DrainCollected</Y>
              <GDFilter name="Filter">
                <Filter>isExpDay = 1</Filter>
                <GDApsimFileReader name="ApsimFileReader" />
              </GDFilter>
            </Plot>
            <Plot name="Observed">
              <colour>
              </colour>
              <X>Date</X>
              <SeriesType>No line</SeriesType>
              <PointType>Circle</PointType>
              <Y>Cumulative Lys4.Drain</Y>
              <Y>Cumulative Lys23.Drain</Y>
              <Y>Cumulative Lys32.Drain</Y>
              <Y>Cumulative Lys37.Drain</Y>
              <GDApsimFileReader name="ApsimFileReader">
                <FileName>P21Lysimeters(Horotiu-1100-NoDCD).dat</FileName>
              </GDApsimFileReader>
            </Plot>
          </Graph>
        </GraphReport>
        <GraphReport name="GraphReport-DCD">
          <Graph name="DCDSoil (mod x obs)">
            <Legend>
              <CheckedTitles> dcd_added</CheckedTitles>
              <CheckedTitles> DCD(0cm)</CheckedTitles>
              <CheckedTitles> DCD(10cm)</CheckedTitles>
              <CheckedTitles> DCD(20cm)</CheckedTitles>
              <CheckedTitles> TotalDCD</CheckedTitles>
            </Legend>
            <Plot name="Predicted">
              <colour>
              </colour>
              <X>Date</X>
              <SeriesType>Solid line</SeriesType>
              <PointType>None</PointType>
              <Y>dcd_added</Y>
              <Y>DCD(0cm)</Y>
              <Y>DCD(10cm)</Y>
              <Y>DCD(20cm)</Y>
              <Y>TotalDCD</Y>
              <GDFilter name="Filter">
                <Filter>isExpDay = 1</Filter>
                <GDApsimFileReader name="ApsimFileReader" />
              </GDFilter>
            </Plot>
          </Graph>
          <Graph name="DCDLeach (mod x obs)">
            <Legend>
              <CheckedTitles>Predicted, Cumulative DCDLeached,Horotiu-1100withDCD Results</CheckedTitles>
              <CheckedTitles>Predicted, Cumulative DCDLeachCollected,Horotiu-1100withDCD Results</CheckedTitles>
              <CheckedTitles>Observed, Cumulative Lys11.DCDLeach,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
              <CheckedTitles>Observed, Cumulative Lys21.DCDLeach,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
              <CheckedTitles>Observed, Cumulative Lys26.DCDLeach,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
              <CheckedTitles>Observed, Cumulative Lys46.DCDLeach,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
            </Legend>
            <Plot name="Predicted">
              <colour>
              </colour>
              <X>Date</X>
              <SeriesType>Solid line</SeriesType>
              <PointType>None</PointType>
              <Y>Cumulative DCDLeached</Y>
              <Y>Cumulative DCDLeachCollected</Y>
              <GDFilter name="Filter">
                <Filter>isExpDay = 1</Filter>
                <GDApsimFileReader name="ApsimFileReader" />
              </GDFilter>
            </Plot>
            <Plot name="Observed">
              <colour>
              </colour>
              <X>Date</X>
              <SeriesType>No line</SeriesType>
              <PointType>Circle</PointType>
              <Y>Cumulative Lys4.DCDLeach</Y>
              <Y>Cumulative Lys23.DCDLeach</Y>
              <Y>Cumulative Lys32.DCDLeach</Y>
              <Y>Cumulative Lys37.DCDLeach</Y>
              <GDApsimFileReader name="ApsimFileReader">
                <FileName>P21Lysimeters(Horotiu-1100-NoDCD).dat</FileName>
              </GDApsimFileReader>
            </Plot>
          </Graph>
          <Graph name="DCDChanges">
            <Legend>
              <CheckedTitles> dcd_added</CheckedTitles>
              <CheckedTitles> TotalDCD</CheckedTitles>
              <CheckedTitles> Cumulative DCDLeached</CheckedTitles>
              <CheckedTitles> Cumulative DCDdegradation</CheckedTitles>
            </Legend>
            <Plot name="Predicted">
              <colour>
              </colour>
              <X>Date</X>
              <SeriesType>Solid line</SeriesType>
              <PointType>None</PointType>
              <Y>dcd_added</Y>
              <Y>TotalDCD</Y>
              <Y>Cumulative DCDLeached</Y>
              <Y>Cumulative DCDdegradation</Y>
              <GDFilter name="Filter">
                <Filter>isExpDay = 1</Filter>
                <GDApsimFileReader name="ApsimFileReader" />
              </GDFilter>
            </Plot>
          </Graph>
        </GraphReport>
        <GraphReport name="GraphReport-N">
          <Graph name="NO3 leach (mod x obs)">
            <Legend>
              <CheckedTitles>Predicted, NO3Leached,Horotiu-1100withDCD Results</CheckedTitles>
              <CheckedTitles>Predicted, NO3LeachCollected,Horotiu-1100withDCD Results</CheckedTitles>
              <CheckedTitles>Observed, Lys11.NO3Leach,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
              <CheckedTitles>Observed, Lys21.NO3Leach,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
              <CheckedTitles>Observed, Lys26.NO3Leach,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
              <CheckedTitles>Observed, Lys46.NO3Leach,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
            </Legend>
            <Plot name="Predicted">
              <colour>
              </colour>
              <X>Date</X>
              <SeriesType>Solid line</SeriesType>
              <PointType>None</PointType>
              <Y>NO3Leached</Y>
              <Y>NO3LeachCollected</Y>
              <GDFilter name="Filter">
                <Filter>isExpDay = 1</Filter>
                <GDApsimFileReader name="ApsimFileReader" />
              </GDFilter>
            </Plot>
            <Plot name="Observed">
              <colour>
              </colour>
              <X>Date</X>
              <SeriesType>No line</SeriesType>
              <PointType>Circle</PointType>
              <Y>Lys4.NO3Leach</Y>
              <Y>Lys23.NO3Leach</Y>
              <Y>Lys32.NO3Leach</Y>
              <Y>Lys37.NO3Leach</Y>
              <GDApsimFileReader name="ApsimFileReader">
                <FileName>P21Lysimeters(Horotiu-1100-NoDCD).dat</FileName>
              </GDApsimFileReader>
            </Plot>
          </Graph>
          <Graph name="NO3 leach (mod x obs)1">
            <Legend>
              <CheckedTitles>Predicted, Cumulative NO3Leached,Horotiu-1100withDCD Results</CheckedTitles>
              <CheckedTitles>Predicted, Cumulative NO3LeachCollected,Horotiu-1100withDCD Results</CheckedTitles>
              <CheckedTitles>Observed, Cumulative Lys11.NO3Leach,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
              <CheckedTitles>Observed, Cumulative Lys21.NO3Leach,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
              <CheckedTitles>Observed, Cumulative Lys26.NO3Leach,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
              <CheckedTitles>Observed, Cumulative Lys46.NO3Leach,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
            </Legend>
            <Plot name="Predicted">
              <colour>
              </colour>
              <X>Date</X>
              <SeriesType>Solid line</SeriesType>
              <PointType>None</PointType>
              <Y>Cumulative NO3Leached</Y>
              <Y>Cumulative NO3LeachCollected</Y>
              <GDFilter name="Filter">
                <Filter>isExpDay = 1</Filter>
                <GDApsimFileReader name="ApsimFileReader" />
              </GDFilter>
            </Plot>
            <Plot name="Observed">
              <colour>
              </colour>
              <X>Date</X>
              <SeriesType>No line</SeriesType>
              <PointType>Circle</PointType>
              <Y>Cumulative Lys4.NO3Leach</Y>
              <Y>Cumulative Lys23.NO3Leach</Y>
              <Y>Cumulative Lys32.NO3Leach</Y>
              <Y>Cumulative Lys37.NO3Leach</Y>
              <GDApsimFileReader name="ApsimFileReader">
                <FileName>P21Lysimeters(Horotiu-1100-NoDCD).dat</FileName>
              </GDApsimFileReader>
            </Plot>
          </Graph>
          <Graph name="NH4 leach (mod x obs)">
            <Legend>
              <CheckedTitles>Predicted, Cumulative NH4Leached,Horotiu-1100withDCD Results</CheckedTitles>
              <CheckedTitles>Observed, Lys11.NH4Leach,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
              <CheckedTitles>Observed, Lys21.NH4Leach,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
              <CheckedTitles>Observed, Lys26.NH4Leach,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
              <CheckedTitles>Observed, Lys46.NH4Leach,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
            </Legend>
            <Plot name="Predicted">
              <colour>
              </colour>
              <X>Date</X>
              <SeriesType>Solid line</SeriesType>
              <PointType>None</PointType>
              <Y>Cumulative NH4Leached</Y>
              <GDFilter name="Filter">
                <Filter>isExpDay = 1</Filter>
                <GDApsimFileReader name="ApsimFileReader" />
              </GDFilter>
            </Plot>
            <Plot name="Observed">
              <colour>
              </colour>
              <X>Date</X>
              <SeriesType>No line</SeriesType>
              <PointType>Circle</PointType>
              <Y>Lys4.NH4Leach</Y>
              <Y>Lys23.NH4Leach</Y>
              <Y>Lys32.NH4Leach</Y>
              <Y>Lys37.NH4Leach</Y>
              <GDApsimFileReader name="ApsimFileReader">
                <FileName>P21Lysimeters(Horotiu-1100-NoDCD).dat</FileName>
              </GDApsimFileReader>
            </Plot>
          </Graph>
          <Graph name="NH4 leach (mod x obs)1">
            <Legend>
              <CheckedTitles>Predicted, Cumulative NH4Leached,Horotiu-1100withDCD Results</CheckedTitles>
              <CheckedTitles>Observed, Cumulative Lys11.NH4Leach,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
              <CheckedTitles>Observed, Cumulative Lys21.NH4Leach,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
              <CheckedTitles>Observed, Cumulative Lys26.NH4Leach,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
              <CheckedTitles>Observed, Cumulative Lys46.NH4Leach,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
            </Legend>
            <Plot name="Predicted">
              <colour>
              </colour>
              <X>Date</X>
              <SeriesType>Solid line</SeriesType>
              <PointType>None</PointType>
              <Y>Cumulative NH4Leached</Y>
              <GDFilter name="Filter">
                <Filter>isExpDay = 1</Filter>
                <GDApsimFileReader name="ApsimFileReader" />
              </GDFilter>
            </Plot>
            <Plot name="Observed">
              <colour>
              </colour>
              <X>Date</X>
              <SeriesType>No line</SeriesType>
              <PointType>Circle</PointType>
              <Y>Cumulative Lys4.NH4Leach</Y>
              <Y>Cumulative Lys23.NH4Leach</Y>
              <Y>Cumulative Lys32.NH4Leach</Y>
              <Y>Cumulative Lys37.NH4Leach</Y>
              <GDApsimFileReader name="ApsimFileReader">
                <FileName>P21Lysimeters(Horotiu-1100-NoDCD).dat</FileName>
              </GDApsimFileReader>
            </Plot>
          </Graph>
          <Graph name="GaseousLosses">
            <Legend>
              <CheckedTitles> Cumulative VolatilisedN</CheckedTitles>
              <CheckedTitles> Cumulative DenitrifiedN</CheckedTitles>
            </Legend>
            <Plot name="Predicted">
              <colour>
              </colour>
              <X>Date</X>
              <SeriesType>Solid line</SeriesType>
              <PointType>None</PointType>
              <Y>Cumulative VolatilisedN</Y>
              <Y>Cumulative DenitrifiedN</Y>
              <GDFilter name="Filter">
                <Filter>isExpDay = 1</Filter>
                <GDApsimFileReader name="ApsimFileReader" />
              </GDFilter>
            </Plot>
          </Graph>
        </GraphReport>
        <GraphReport name="NAmounts">
          <Graph name="MineralN">
            <Legend>
            </Legend>
            <Plot>
              <SeriesType>Solid line</SeriesType>
              <PointType>None</PointType>
              <colour>
              </colour>
              <X>Date</X>
              <Y>UreaAmount</Y>
              <Y>NH4Amount</Y>
              <Y>NO3Amount</Y>
              <Y>dcd()</Y>
              <GDApsimFileReader name="ApsimFileReader" />
            </Plot>
          </Graph>
          <Graph name="OrganicN">
            <Legend>
            </Legend>
            <Plot>
              <SeriesType>Solid line</SeriesType>
              <PointType>None</PointType>
              <colour>
              </colour>
              <X>Date</X>
              <Y>SoilBiomassN</Y>
              <Y>SoilFOMN</Y>
              <Y>SurfaceOMN</Y>
              <YRight>SoilHumusN</YRight>
              <GDApsimFileReader name="ApsimFileReader" />
            </Plot>
          </Graph>
        </GraphReport>
        <GraphReport name="GraphReport-Pasture">
          <Graph name="GLF">
            <Legend>
              <CheckedTitles> GLFwater</CheckedTitles>
              <CheckedTitles> GLFtemp</CheckedTitles>
              <CheckedTitles> GLFNitrog</CheckedTitles>
              <CheckedTitles> GLFnConcentration</CheckedTitles>
            </Legend>
            <Plot>
              <SeriesType>Solid line</SeriesType>
              <PointType>Small dot</PointType>
              <colour>
              </colour>
              <X>Date</X>
              <Y>GLFwater</Y>
              <Y>GLFtemp</Y>
              <Y>GLFNitrog</Y>
              <Y>GLFnConcentration</Y>
              <GDApsimFileReader name="ApsimFileReader" />
            </Plot>
          </Graph>
          <Graph name="DM">
            <Legend>
              <CheckedTitles> PastureDM</CheckedTitles>
              <CheckedTitles> RemovedDM</CheckedTitles>
              <CheckedTitles> %Clover</CheckedTitles>
            </Legend>
            <Plot>
              <SeriesType>Solid line</SeriesType>
              <PointType>Small dot</PointType>
              <colour>
              </colour>
              <X>Date</X>
              <Y>PastureDM</Y>
              <YRight>%Clover</YRight>
              <Y>RemovedDM</Y>
              <Y>RemovedDMd</Y>
              <GDApsimFileReader name="ApsimFileReader" />
            </Plot>
          </Graph>
          <Graph name="Yield (mod x obs)">
            <Legend>
              <CheckedTitles>Predicted, RemovedDM,Horotiu-1100withDCD Results</CheckedTitles>
              <CheckedTitles>Observed, Lys11.HarvestedDM,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
              <CheckedTitles>Observed, Lys21.HarvestedDM,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
              <CheckedTitles>Observed, Lys26.HarvestedDM,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
              <CheckedTitles>Observed, Lys46.HarvestedDM,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
            </Legend>
            <Plot name="Predicted">
              <colour>
              </colour>
              <SeriesType>Solid line</SeriesType>
              <PointType>None</PointType>
              <Y>RemovedDM</Y>
              <X>Date</X>
              <GDFilter name="Filter">
                <Filter>isExpDay = 1</Filter>
                <GDApsimFileReader name="ApsimFileReader" />
              </GDFilter>
            </Plot>
            <Plot name="Observed">
              <colour>
              </colour>
              <X>Date</X>
              <SeriesType>No line</SeriesType>
              <PointType>Circle</PointType>
              <Y>Lys4.HarvestedDM</Y>
              <Y>Lys23.HarvestedDM</Y>
              <Y>Lys32.HarvestedDM</Y>
              <Y>Lys37.HarvestedDM</Y>
              <GDApsimFileReader name="ApsimFileReader">
                <FileName>P21Lysimeters(Horotiu-1100-NoDCD).dat</FileName>
              </GDApsimFileReader>
            </Plot>
          </Graph>
          <Graph name="Yield (mod x obs)1">
            <Legend>
              <CheckedTitles>Predicted, Cumulative RemovedDM,Horotiu-1100withDCD Results</CheckedTitles>
              <CheckedTitles>Observed, Cumulative Lys11.HarvestedDM,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
              <CheckedTitles>Observed, Cumulative Lys21.HarvestedDM,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
              <CheckedTitles>Observed, Cumulative Lys26.HarvestedDM,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
              <CheckedTitles>Observed, Cumulative Lys46.HarvestedDM,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
            </Legend>
            <Plot name="Predicted">
              <colour>
              </colour>
              <SeriesType>Solid line</SeriesType>
              <PointType>None</PointType>
              <Y>Cumulative RemovedDM</Y>
              <X>Date</X>
              <GDFilter name="Filter">
                <Filter>isExpDay = 1</Filter>
                <GDApsimFileReader name="ApsimFileReader" />
              </GDFilter>
            </Plot>
            <Plot name="Observed">
              <colour>
              </colour>
              <X>Date</X>
              <SeriesType>No line</SeriesType>
              <PointType>Circle</PointType>
              <Y>Cumulative Lys4.HarvestedDM</Y>
              <Y>Cumulative Lys23.HarvestedDM</Y>
              <Y>Cumulative Lys32.HarvestedDM</Y>
              <Y>Cumulative Lys37.HarvestedDM</Y>
              <GDApsimFileReader name="ApsimFileReader">
                <FileName>P21Lysimeters(Horotiu-1100-NoDCD).dat</FileName>
              </GDApsimFileReader>
            </Plot>
          </Graph>
          <Graph name="Growth (mod x obs)">
            <Legend>
              <CheckedTitles>Predicted, GrowthRateCalc,Horotiu-1100withDCD Results</CheckedTitles>
              <CheckedTitles>Predicted, DailyGrowth,Horotiu-1100withDCD Results</CheckedTitles>
              <CheckedTitles>Observed, Lys11.PastureGrowth,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
              <CheckedTitles>Observed, Lys21.PastureGrowth,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
              <CheckedTitles>Observed, Lys26.PastureGrowth,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
              <CheckedTitles>Observed, Lys46.PastureGrowth,P21Lysimeters(Horotiu-1100-WithDCD)</CheckedTitles>
            </Legend>
            <Plot name="Predicted">
              <colour>
              </colour>
              <SeriesType>Solid line</SeriesType>
              <PointType>None</PointType>
              <Y>GrowthRateCalc</Y>
              <X>Date</X>
              <Y>DailyGrowth</Y>
              <GDFilter name="Filter">
                <Filter>isExpDay = 1</Filter>
                <GDApsimFileReader name="ApsimFileReader" />
              </GDFilter>
            </Plot>
            <Plot name="Observed">
              <colour>
              </colour>
              <X>Date</X>
              <SeriesType>No line</SeriesType>
              <PointType>Circle</PointType>
              <Y>Lys4.PastureGrowth</Y>
              <Y>Lys23.PastureGrowth</Y>
              <Y>Lys32.PastureGrowth</Y>
              <Y>Lys37.PastureGrowth</Y>
              <GDApsimFileReader name="ApsimFileReader">
                <FileName>P21Lysimeters(Horotiu-1100-NoDCD).dat</FileName>
              </GDApsimFileReader>
            </Plot>
          </Graph>
        </GraphReport>
      </outputfile>
    </area>
  </simulation>
  <folder name="1100mm">
    <memo name="Info">
 ===================================================================================
     Validation test for nitrification inhibitor (Solute2 model)
 ===================================================================================

  Â» Comparing drainage, N leaching, DCD leaching, and pasture growth from lysimeters receiving DCD as nitrification inhibitor with lysimiter without inhibitor
  Â» This are simulations of lysimeters with total water input aimed for 1100mm/yr
      + Soil: Horoti silt loam
      + Weather: Ruakura, Hamilton, New Zealand (obtained from Virtual Climate Station)
      + Cow urine applied at 1000kgN/ha, in 10mm
      + Inhibitor applied in two occasions at 10kg/ha
      + Irrigation applied using sprinklers, according to amounts recorded (see operations in the simulation)
      + N fertiliser applied as urea, according to amounts recorded (see operations in the simulation)
      + Some irrigation and fertiliser prior to the experiment to keep grass growing
      + Grass cut at estimated 1500kgDM/ha residue, on days as recorded during experiment

</memo>
    <simulation name="Horotiu-1100noDCD" shortcut="/simulations/BaseHorotiu">
      <clock shortcut="/simulations/BaseHorotiu/clock" />
      <metfile name="met" shortcut="/simulations/BaseHorotiu/met" />
      <summaryfile shortcut="/simulations/BaseHorotiu/summaryfile" />
      <area name="paddock" shortcut="/simulations/BaseHorotiu/paddock">
        <folder name="Manager folder" shortcut="/simulations/BaseHorotiu/paddock/Manager folder">
          <manager name="Experiment manager" shortcut="/simulations/BaseHorotiu/paddock/Manager folder/Experiment manager" />
          <manager name="Collect Leachate Ruakura" shortcut="/simulations/BaseHorotiu/paddock/Manager folder/Collect Leachate Ruakura" />
          <manager2 name="ModifySolutes(no3)" shortcut="/simulations/BaseHorotiu/paddock/Manager folder/ModifySolutes(no3)" />
          <manager2 name="ModifySolutes(dcd)" shortcut="/simulations/BaseHorotiu/paddock/Manager folder/ModifySolutes(dcd)" />
          <manager2 name="Cut AgPasture on given dates" shortcut="/simulations/BaseHorotiu/paddock/Manager folder/Cut AgPasture on given dates">
            <memo name="Info" shortcut="/simulations/BaseHorotiu/paddock/Manager folder/Cut AgPasture on given dates/Info" />
          </manager2>
          <manager2 name="UrinePatchApply" shortcut="/simulations/BaseHorotiu/paddock/Manager folder/UrinePatchApply" />
          <manager2 name="nh3_volatilisation" shortcut="/simulations/BaseHorotiu/paddock/Manager folder/nh3_volatilisation" />
          <manager2 name="Irrigate" shortcut="/simulations/BaseHorotiu/paddock/Manager folder/Irrigate" />
          <manager2 name="ApplyInhibitor">
            <ui>
              <Dummy0 type="category" description="Apply a given solute to the soil" />
              <ApplySolute_name type="list" listvalues="tracer,nitrificationinhibitor,ureaseinhibitor,cl,dcd" description="  Name of the solute to apply:">nitrificationinhibitor</ApplySolute_name>
              <Dummy1 type="category" description="When and how often to apply" />
              <ApplySolute_start_date type="ddmmmdate" description="  Date to start applications (dd/mm/yyyy):">15/05/2008</ApplySolute_start_date>
              <ApplySolute_end_date type="ddmmmdate" description="  Date to end applications (dd/mm/yyyy):">31/12/2100</ApplySolute_end_date>
              <ApplySolute_interval type="text" description="  Interval between applications (days):">5000</ApplySolute_interval>
              <ApplySolute_times type="text" description="  Number of times to apply:">0</ApplySolute_times>
              <Dummy2 type="category" description="Amount and depth for applications" />
              <ApplySolute_amount2add type="text" description="  Amount of solute to apply (kg/ha):">10</ApplySolute_amount2add>
              <ApplySolute_depth2add type="text" description="  Depth for application (mm):">1</ApplySolute_depth2add>
            </ui>
            <text>Imports System
Imports ModelFramework

' This manager applies a given amount of solute to the soil. It will add from the surface till the depth specified (decreasing linearly)
'  The manager can also repeat the application periodically within a given window

'--&gt;  Last uptaded in: 17/Sep/2013 ..................


Public Class Script 
   
   'Parameter variables:
   &lt;param&gt; Private ApplySolute_name As String
   &lt;param&gt; Private ApplySolute_start_date As String
   &lt;param&gt; Private ApplySolute_end_date As String
   &lt;param&gt; Private ApplySolute_interval As Integer
   &lt;param&gt; Private ApplySolute_times As Integer
   &lt;param&gt; Private ApplySolute_amount2add As Double
   &lt;param&gt; Private ApplySolute_depth2add As Double
   
   'Events to raise
   &lt;[Event]()&gt; Public Event SoluteChanged As SoluteChangedDelegate

   'Variables read from other modules
   &lt;Input&gt; Private today As DateTime            'Today's date
   &lt;Input&gt; Private dlayer As Double()           'Soil layers structure

   'Output variables
   &lt;Output&gt;&lt;Units("kg/ha")&gt; Public SoluteAdded As Double       'The amount of solute added

   'Internal variables
   Private StartDate As DateTime                'The date when applications start (in date format)
   Private EndDate As DateTime                  'The date when applications finish (in date format)
   Private TimeAfterApplication As Integer      'Number of days after an application
   Private SoilDepth As Double                  'The soil depth (mm)
   Private LayerFraction() As Double        'The fraction of solute applied in each layer
   Private NumberOfApplications As Integer      'Number of applications

   &lt;EventHandler()&gt; Public Sub OnInitialised()

      'Put the dates into date format:
      StartDate = DateTime.Parse(ApplySolute_start_date &amp; " 06:00:00 am")
      EndDate = DateTime.Parse(ApplySolute_end_date &amp; " 06:00:00 pm")
      NumberOfApplications = 0
      TimeAfterApplication = 1
      
      'Computes the fraction of solute to be applied in each layer
      Console.WriteLine(" Applying solute, " &amp; ApplySolute_amount2add.ToString("#0.0#") &amp; " kg/ha, in following layers")
      ReDim LayerFraction(dlayer.length - 1)
      Dim Depth_from_surface As Double = 0
      Dim surf_L As Double = 2 / ApplySolute_depth2add
      Dim upper_L As Double = surf_L
      Dim lower_L As Double = 0
      Dim thisLayer As Double = 0
      For Layer As Integer = 0 To dlayer.length - 1
         Depth_from_surface += dlayer(Layer)
         If Depth_from_surface &gt;= ApplySolute_depth2add Then
            ' last layer
            lower_L = 0
            thisLayer = dlayer(Layer) - (Depth_from_surface - ApplySolute_depth2add)
         Else
            ' intermediate layer
            lower_L = surf_L * (ApplySolute_depth2add - Depth_from_surface) / ApplySolute_depth2add
            thisLayer = dlayer(Layer)
         End If
         LayerFraction(Layer) = (upper_L + lower_L) * thisLayer / 2
         upper_L = lower_L
         Console.WriteLine(" Fraction in layer (" &amp; Layer.ToString() &amp; "): " &amp; LayerFraction(Layer).ToString())
         If Depth_from_surface &gt;= ApplySolute_depth2add Then Layer = dlayer.length               
      Next
      

   End Sub

   &lt;EventHandler()&gt; Public Sub OnPrepare()

      'Re-set variables
      SoluteAdded = 0
      Dim delta_solute(dlayer.Length - 1) As Double

      'Decide whether it is time to start applications:
      If (today.Date &gt;= StartDate.Date) And (today.Date &lt;= EndDate.Date) And (NumberOfApplications &lt; ApplySolute_times) Then
         If (today - StartDate).TotalDays &lt; 0.5 Then
            ' always apply on the starting date, or beginning of simulation
            For Layer As Integer = 0 To dlayer.length - 1
               delta_solute(Layer) = ApplySolute_amount2add * LayerFraction(Layer)
               SoluteAdded += delta_solute(Layer)
               If LayerFraction(Layer) &lt;= 1E-12 Then Layer = dlayer.length
            Next
            TimeAfterApplication = 1
            NumberOfApplications += 1
         Else
            ' apply at given intervals
            If TimeAfterApplication &gt;= ApplySolute_interval Then
               For Layer As Integer = 0 To dlayer.length - 1
                  delta_solute(Layer) = ApplySolute_amount2add * LayerFraction(Layer)
                  SoluteAdded += delta_solute(Layer)
                  If LayerFraction(Layer) &lt;= 1E-12 Then Layer = dlayer.length               
               Next
               TimeAfterApplication = 1
               NumberOfApplications += 1
            Else
               TimeAfterApplication = TimeAfterApplication + 1
               SoluteAdded = 0
            End If
         End If

         'Make the application
         If TimeAfterApplication = 1 Then
            Dim SoluteChanges As SoluteChangedType = New SoluteChangedType()
            SoluteChanges.Sender = "Manager: ApplySolute"
            SoluteChanges.SoluteName = ApplySolute_name
            SoluteChanges.SoluteUnits = "kg/ha"
            SoluteChanges.DeltaSolute = delta_solute
            RaiseEvent SoluteChanged(SoluteChanges)

            Console.WriteLine(today.ToString("dd MMMM yyyy") + " (Day of year=" + today.DayOfYear.ToString + "), ApplySolute:")
            Console.WriteLine("     " &amp; ApplySolute_name &amp; " being applied at " + SoluteAdded.ToString("0.00") + "kg/ha, added down to depth " + ApplySolute_depth2add.ToString("0") + "mm")
         End If
      End If            
      
   End Sub

End Class
 </text>
          </manager2>
          <operations name="Fertiliser_NI_General" shortcut="/simulations/BaseHorotiu/paddock/Manager folder/Fertiliser_NI_General" />
          <operations name="Irrigation_Ruakura_Low">
            <operation condition="start_of_day">
              <date>08-Apr-2008</date>
              <action>irrigation apply amount = 100</action>
            </operation>
            <operation condition="start_of_day">
              <date>24-Apr-2008</date>
              <action>irrigation apply amount = 2.65</action>
            </operation>
            <operation condition="start_of_day">
              <date>12-May-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>21-May-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>22-May-2008</date>
              <action>irrigation apply amount = 3.8</action>
            </operation>
            <operation condition="start_of_day">
              <date>29-May-2008</date>
              <action>irrigation apply amount = 10.55 </action>
            </operation>
            <operation condition="start_of_day">
              <date>5-Jun-2008</date>
              <action>irrigation apply amount = 10.55 </action>
            </operation>
            <operation condition="start_of_day">
              <date>24-Jul-2008</date>
              <action>irrigation apply amount = 10.0</action>
            </operation>
            <operation condition="start_of_day">
              <date>
              </date>
              <action>
              </action>
            </operation>
          </operations>
          <operations name="Fertiliser_Ruakura" shortcut="/simulations/BaseHorotiu/paddock/Manager folder/Fertiliser_Ruakura" />
        </folder>
        <micromet name="Micromet" shortcut="/simulations/BaseHorotiu/paddock/Micromet" />
        <irrigation name="Irrigation" shortcut="/simulations/BaseHorotiu/paddock/Irrigation" />
        <fertiliser shortcut="/simulations/BaseHorotiu/paddock/fertiliser" />
        <NitrificationInhibitor2 name="NitrificationInhibitor" shortcut="/simulations/BaseHorotiu/paddock/NitrificationInhibitor" />
        <surfaceom name="surface organic matter" shortcut="/simulations/BaseHorotiu/paddock/surface organic matter" />
        <SWIM2ui2 shortcut="/simulations/BaseHorotiu/paddock/SWIM2ui2">
          <ini name="Ini_SWIM2" shortcut="/simulations/BaseHorotiu/paddock/SWIM2ui2/Ini_SWIM2" />
        </SWIM2ui2>
        <SoilNitrogen shortcut="/simulations/BaseHorotiu/paddock/SoilNitrogen" />
        <SoilTemperature2 shortcut="/simulations/BaseHorotiu/paddock/SoilTemperature2" />
        <AgPasture shortcut="/simulations/BaseHorotiu/paddock/AgPasture" />
        <outputfile name="Results" shortcut="/simulations/BaseHorotiu/paddock/Results">
          <filename output="yes">Horotiu-1100noDCD Results.out</filename>
          <title>Horotiu-1100noDCD Results</title>
          <variables name="Variables" shortcut="/simulations/BaseHorotiu/paddock/Results/Variables" />
          <events name="Reporting Frequency" shortcut="/simulations/BaseHorotiu/paddock/Results/Reporting Frequency" />
          <GraphReport name="GraphReport-Water" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Water">
            <Graph name="Water-in" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Water/Water-in">
              <Plot shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Water/Water-in/Plot">
                <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Water/Water-in/Plot/ApsimFileReader" />
              </Plot>
            </Graph>
            <Graph name="Water-out" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Water/Water-out">
              <Plot shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Water/Water-out/Plot">
                <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Water/Water-out/Plot/ApsimFileReader" />
              </Plot>
            </Graph>
            <Graph name="SoilWater" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Water/SoilWater">
              <Plot shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Water/SoilWater/Plot">
                <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Water/SoilWater/Plot/ApsimFileReader" />
              </Plot>
            </Graph>
            <Graph name="Drainage (mod x obs)" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Water/Drainage (mod x obs)">
              <Plot name="Predicted" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Water/Drainage (mod x obs)/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Water/Drainage (mod x obs)/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Water/Drainage (mod x obs)/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Cumulative Lys4.Drain</Y>
                <Y>Cumulative Lys23.Drain</Y>
                <Y>Cumulative Lys32.Drain</Y>
                <Y>Cumulative Lys37.Drain</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-1100-NoDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
          </GraphReport>
          <GraphReport name="GraphReport-DCD" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD">
            <Graph name="DCDSoil (mod x obs)" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDSoil (mod x obs)">
              <Plot name="Predicted" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDSoil (mod x obs)/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDSoil (mod x obs)/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDSoil (mod x obs)/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
            </Graph>
            <Graph name="DCDLeach (mod x obs)" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDLeach (mod x obs)">
              <Plot name="Predicted" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDLeach (mod x obs)/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDLeach (mod x obs)/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDLeach (mod x obs)/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Cumulative Lys4.DCDLeach</Y>
                <Y>Cumulative Lys23.DCDLeach</Y>
                <Y>Cumulative Lys32.DCDLeach</Y>
                <Y>Cumulative Lys37.DCDLeach</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-1100-NoDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
            <Graph name="DCDChanges" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDChanges">
              <Plot name="Predicted" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDChanges/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDChanges/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDChanges/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
            </Graph>
          </GraphReport>
          <GraphReport name="GraphReport-N" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N">
            <Graph name="NO3 leach (mod x obs)" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NO3 leach (mod x obs)">
              <Plot name="Predicted" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NO3 leach (mod x obs)/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NO3 leach (mod x obs)/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NO3 leach (mod x obs)/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Lys4.NO3Leach</Y>
                <Y>Lys23.NO3Leach</Y>
                <Y>Lys32.NO3Leach</Y>
                <Y>Lys37.NO3Leach</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-1100-NoDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
            <Graph name="NO3 leach (mod x obs)1" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NO3 leach (mod x obs)1">
              <Plot name="Predicted" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NO3 leach (mod x obs)1/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NO3 leach (mod x obs)1/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NO3 leach (mod x obs)1/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Cumulative Lys4.NO3Leach</Y>
                <Y>Cumulative Lys23.NO3Leach</Y>
                <Y>Cumulative Lys32.NO3Leach</Y>
                <Y>Cumulative Lys37.NO3Leach</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-1100-NoDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
            <Graph name="NH4 leach (mod x obs)" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NH4 leach (mod x obs)">
              <Plot name="Predicted" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NH4 leach (mod x obs)/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NH4 leach (mod x obs)/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NH4 leach (mod x obs)/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Lys4.NH4Leach</Y>
                <Y>Lys23.NH4Leach</Y>
                <Y>Lys32.NH4Leach</Y>
                <Y>Lys37.NH4Leach</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-1100-NoDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
            <Graph name="NH4 leach (mod x obs)1" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NH4 leach (mod x obs)1">
              <Plot name="Predicted" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NH4 leach (mod x obs)1/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NH4 leach (mod x obs)1/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NH4 leach (mod x obs)1/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Cumulative Lys4.NH4Leach</Y>
                <Y>Cumulative Lys23.NH4Leach</Y>
                <Y>Cumulative Lys32.NH4Leach</Y>
                <Y>Cumulative Lys37.NH4Leach</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-1100-NoDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
            <Graph name="GaseousLosses" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/GaseousLosses">
              <Plot name="Predicted" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/GaseousLosses/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/GaseousLosses/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/GaseousLosses/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
            </Graph>
          </GraphReport>
          <GraphReport name="NAmounts" shortcut="/simulations/BaseHorotiu/paddock/Results/NAmounts">
            <Graph name="MineralN" shortcut="/simulations/BaseHorotiu/paddock/Results/NAmounts/MineralN">
              <Plot shortcut="/simulations/BaseHorotiu/paddock/Results/NAmounts/MineralN/Plot">
                <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/NAmounts/MineralN/Plot/ApsimFileReader" />
              </Plot>
            </Graph>
            <Graph name="OrganicN" shortcut="/simulations/BaseHorotiu/paddock/Results/NAmounts/OrganicN">
              <Plot shortcut="/simulations/BaseHorotiu/paddock/Results/NAmounts/OrganicN/Plot">
                <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/NAmounts/OrganicN/Plot/ApsimFileReader" />
              </Plot>
            </Graph>
          </GraphReport>
          <GraphReport name="GraphReport-Pasture" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture">
            <Graph name="GLF" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/GLF">
              <Plot shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/GLF/Plot">
                <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/GLF/Plot/ApsimFileReader" />
              </Plot>
            </Graph>
            <Graph name="DM" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/DM">
              <Plot shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/DM/Plot">
                <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/DM/Plot/ApsimFileReader" />
              </Plot>
            </Graph>
            <Graph name="Yield (mod x obs)" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/Yield (mod x obs)">
              <Plot name="Predicted" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/Yield (mod x obs)/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/Yield (mod x obs)/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/Yield (mod x obs)/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Lys4.HarvestedDM</Y>
                <Y>Lys23.HarvestedDM</Y>
                <Y>Lys32.HarvestedDM</Y>
                <Y>Lys37.HarvestedDM</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-1100-NoDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
            <Graph name="Yield (mod x obs)1" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/Yield (mod x obs)1">
              <Plot name="Predicted" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/Yield (mod x obs)1/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/Yield (mod x obs)1/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/Yield (mod x obs)1/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Cumulative Lys4.HarvestedDM</Y>
                <Y>Cumulative Lys23.HarvestedDM</Y>
                <Y>Cumulative Lys32.HarvestedDM</Y>
                <Y>Cumulative Lys37.HarvestedDM</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-1100-NoDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
            <Graph name="Growth (mod x obs)" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/Growth (mod x obs)">
              <Plot name="Predicted" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/Growth (mod x obs)/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/Growth (mod x obs)/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/Growth (mod x obs)/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Lys4.PastureGrowth</Y>
                <Y>Lys23.PastureGrowth</Y>
                <Y>Lys32.PastureGrowth</Y>
                <Y>Lys37.PastureGrowth</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-1100-NoDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
          </GraphReport>
        </outputfile>
      </area>
    </simulation>
    <simulation name="Horotiu-1100withDCD" shortcut="/simulations/1100mm/Horotiu-1100noDCD">
      <clock shortcut="/simulations/1100mm/Horotiu-1100noDCD/clock" />
      <metfile name="met" shortcut="/simulations/1100mm/Horotiu-1100noDCD/met" />
      <summaryfile shortcut="/simulations/1100mm/Horotiu-1100noDCD/summaryfile" />
      <area name="paddock" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock">
        <folder name="Manager folder" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Manager folder">
          <manager name="Experiment manager" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Manager folder/Experiment manager" />
          <manager name="Collect Leachate Ruakura" shortcut="/simulations/BaseHorotiu/paddock/Manager folder/Collect Leachate Ruakura" />
          <manager2 name="ModifySolutes(no3)" shortcut="/simulations/BaseHorotiu/paddock/Manager folder/ModifySolutes(no3)" />
          <manager2 name="ModifySolutes(dcd)" shortcut="/simulations/BaseHorotiu/paddock/Manager folder/ModifySolutes(dcd)" />
          <manager2 name="Cut AgPasture on given dates" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Manager folder/Cut AgPasture on given dates">
            <memo name="Info" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Manager folder/Cut AgPasture on given dates/Info" />
          </manager2>
          <manager2 name="UrinePatchApply" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Manager folder/UrinePatchApply" />
          <manager2 name="nh3_volatilisation" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Manager folder/nh3_volatilisation" />
          <manager2 name="Irrigate" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Manager folder/Irrigate" />
          <manager2 name="ApplyInhibitor">
            <ui>
              <Dummy0 type="category" description="Apply a given solute to the soil" />
              <ApplySolute_name type="list" listvalues="tracer,nitrificationinhibitor,ureaseinhibitor,cl,dcd" description="  Name of the solute to apply:">nitrificationinhibitor</ApplySolute_name>
              <Dummy1 type="category" description="When and how often to apply" />
              <ApplySolute_start_date type="ddmmmdate" description="  Date to start applications (dd/mm/yyyy):">15/05/2008</ApplySolute_start_date>
              <ApplySolute_end_date type="ddmmmdate" description="  Date to end applications (dd/mm/yyyy):">31/12/2100</ApplySolute_end_date>
              <ApplySolute_interval type="text" description="  Interval between applications (days):">71</ApplySolute_interval>
              <ApplySolute_times type="text" description="  Number of times to apply:">2</ApplySolute_times>
              <Dummy2 type="category" description="Amount and depth for applications" />
              <ApplySolute_amount2add type="text" description="  Amount of solute to apply (kg/ha):">10</ApplySolute_amount2add>
              <ApplySolute_depth2add type="text" description="  Depth for application (mm):">1</ApplySolute_depth2add>
            </ui>
            <text>Imports System
Imports ModelFramework

' This manager applies a given amount of solute to the soil. It will add from the surface till the depth specified (decreasing linearly)
'  The manager can also repeat the application periodically within a given window

'--&gt;  Last uptaded in: 17/Sep/2013 ..................


Public Class Script 
   
   'Parameter variables:
   &lt;param&gt; Private ApplySolute_name As String
   &lt;param&gt; Private ApplySolute_start_date As String
   &lt;param&gt; Private ApplySolute_end_date As String
   &lt;param&gt; Private ApplySolute_interval As Integer
   &lt;param&gt; Private ApplySolute_times As Integer
   &lt;param&gt; Private ApplySolute_amount2add As Double
   &lt;param&gt; Private ApplySolute_depth2add As Double
   
   'Events to raise
   &lt;[Event]()&gt; Public Event SoluteChanged As SoluteChangedDelegate

   'Variables read from other modules
   &lt;Input&gt; Private today As DateTime            'Today's date
   &lt;Input&gt; Private dlayer As Double()           'Soil layers structure

   'Output variables
   &lt;Output&gt;&lt;Units("kg/ha")&gt; Public SoluteAdded As Double       'The amount of solute added

   'Internal variables
   Private StartDate As DateTime                'The date when applications start (in date format)
   Private EndDate As DateTime                  'The date when applications finish (in date format)
   Private TimeAfterApplication As Integer      'Number of days after an application
   Private SoilDepth As Double                  'The soil depth (mm)
   Private LayerFraction() As Double        'The fraction of solute applied in each layer
   Private NumberOfApplications As Integer      'Number of applications

   &lt;EventHandler()&gt; Public Sub OnInitialised()

      'Put the dates into date format:
      StartDate = DateTime.Parse(ApplySolute_start_date &amp; " 06:00:00 am")
      EndDate = DateTime.Parse(ApplySolute_end_date &amp; " 06:00:00 pm")
      NumberOfApplications = 0
      TimeAfterApplication = 1
      
      'Computes the fraction of solute to be applied in each layer
      Console.WriteLine(" Applying solute, " &amp; ApplySolute_amount2add.ToString("#0.0#") &amp; " kg/ha, in following layers")
      ReDim LayerFraction(dlayer.length - 1)
      Dim Depth_from_surface As Double = 0
      Dim surf_L As Double = 2 / ApplySolute_depth2add
      Dim upper_L As Double = surf_L
      Dim lower_L As Double = 0
      Dim thisLayer As Double = 0
      For Layer As Integer = 0 To dlayer.length - 1
         Depth_from_surface += dlayer(Layer)
         If Depth_from_surface &gt;= ApplySolute_depth2add Then
            ' last layer
            lower_L = 0
            thisLayer = dlayer(Layer) - (Depth_from_surface - ApplySolute_depth2add)
         Else
            ' intermediate layer
            lower_L = surf_L * (ApplySolute_depth2add - Depth_from_surface) / ApplySolute_depth2add
            thisLayer = dlayer(Layer)
         End If
         LayerFraction(Layer) = (upper_L + lower_L) * thisLayer / 2
         upper_L = lower_L
         Console.WriteLine(" Fraction in layer (" &amp; Layer.ToString() &amp; "): " &amp; LayerFraction(Layer).ToString())
         If Depth_from_surface &gt;= ApplySolute_depth2add Then Layer = dlayer.length               
      Next
      

   End Sub

   &lt;EventHandler()&gt; Public Sub OnPrepare()

      'Re-set variables
      SoluteAdded = 0
      Dim delta_solute(dlayer.Length - 1) As Double

      'Decide whether it is time to start applications:
      If (today.Date &gt;= StartDate.Date) And (today.Date &lt;= EndDate.Date) And (NumberOfApplications &lt; ApplySolute_times) Then
         If (today - StartDate).TotalDays &lt; 0.5 Then
            ' always apply on the starting date, or beginning of simulation
            For Layer As Integer = 0 To dlayer.length - 1
               delta_solute(Layer) = ApplySolute_amount2add * LayerFraction(Layer)
               SoluteAdded += delta_solute(Layer)
               If LayerFraction(Layer) &lt;= 1E-12 Then Layer = dlayer.length
            Next
            TimeAfterApplication = 1
            NumberOfApplications += 1
         Else
            ' apply at given intervals
            If TimeAfterApplication &gt;= ApplySolute_interval Then
               For Layer As Integer = 0 To dlayer.length - 1
                  delta_solute(Layer) = ApplySolute_amount2add * LayerFraction(Layer)
                  SoluteAdded += delta_solute(Layer)
                  If LayerFraction(Layer) &lt;= 1E-12 Then Layer = dlayer.length               
               Next
               TimeAfterApplication = 1
               NumberOfApplications += 1
            Else
               TimeAfterApplication = TimeAfterApplication + 1
               SoluteAdded = 0
            End If
         End If

         'Make the application
         If TimeAfterApplication = 1 Then
            Dim SoluteChanges As SoluteChangedType = New SoluteChangedType()
            SoluteChanges.Sender = "Manager: ApplySolute"
            SoluteChanges.SoluteName = ApplySolute_name
            SoluteChanges.SoluteUnits = "kg/ha"
            SoluteChanges.DeltaSolute = delta_solute
            RaiseEvent SoluteChanged(SoluteChanges)

            Console.WriteLine(today.ToString("dd MMMM yyyy") + " (Day of year=" + today.DayOfYear.ToString + "), ApplySolute:")
            Console.WriteLine("     " &amp; ApplySolute_name &amp; " being applied at " + SoluteAdded.ToString("0.00") + "kg/ha, added down to depth " + ApplySolute_depth2add.ToString("0") + "mm")
         End If
      End If            
      
   End Sub

End Class
 </text>
          </manager2>
          <operations name="Fertiliser_NI_General" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Manager folder/Fertiliser_NI_General" />
          <operations name="Irrigation_Ruakura_Low" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Manager folder/Irrigation_Ruakura_Low" />
          <operations name="Fertiliser_Ruakura" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Manager folder/Fertiliser_Ruakura" />
        </folder>
        <micromet name="Micromet" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Micromet" />
        <irrigation name="Irrigation" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Irrigation" />
        <fertiliser shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/fertiliser" />
        <NitrificationInhibitor2 name="NitrificationInhibitor" shortcut="/simulations/BaseHorotiu/paddock/NitrificationInhibitor" />
        <surfaceom name="surface organic matter" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/surface organic matter" />
        <SWIM2ui2 shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/SWIM2ui2">
          <ini name="Ini_SWIM2" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/SWIM2ui2/Ini_SWIM2" />
        </SWIM2ui2>
        <SoilNitrogen shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/SoilNitrogen" />
        <SoilTemperature2 shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/SoilTemperature2" />
        <AgPasture shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/AgPasture" />
        <outputfile name="Results" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results">
          <filename output="yes">Horotiu-1100withDCD Results.out</filename>
          <title>Horotiu-1100withDCD Results</title>
          <variables name="Variables" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/Variables" />
          <events name="Reporting Frequency" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/Reporting Frequency" />
          <GraphReport name="GraphReport-Water" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Water">
            <Graph name="Water-in" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Water/Water-in">
              <Plot shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Water/Water-in/Plot">
                <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Water/Water-in/Plot/ApsimFileReader" />
              </Plot>
            </Graph>
            <Graph name="Water-out" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Water/Water-out">
              <Plot shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Water/Water-out/Plot">
                <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Water/Water-out/Plot/ApsimFileReader" />
              </Plot>
            </Graph>
            <Graph name="SoilWater" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Water/SoilWater">
              <Plot shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Water/SoilWater/Plot">
                <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Water/SoilWater/Plot/ApsimFileReader" />
              </Plot>
            </Graph>
            <Graph name="Drainage (mod x obs)" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Water/Drainage (mod x obs)">
              <Plot name="Predicted" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Water/Drainage (mod x obs)/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Water/Drainage (mod x obs)/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Water/Drainage (mod x obs)/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Cumulative Lys11.Drain</Y>
                <Y>Cumulative Lys21.Drain</Y>
                <Y>Cumulative Lys26.Drain</Y>
                <Y>Cumulative Lys46.Drain</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-1100-WithDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
          </GraphReport>
          <GraphReport name="GraphReport-DCD" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-DCD">
            <Graph name="DCDSoil (mod x obs)" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-DCD/DCDSoil (mod x obs)">
              <Plot name="Predicted" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-DCD/DCDSoil (mod x obs)/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-DCD/DCDSoil (mod x obs)/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-DCD/DCDSoil (mod x obs)/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
            </Graph>
            <Graph name="DCDLeach (mod x obs)" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-DCD/DCDLeach (mod x obs)">
              <Plot name="Predicted" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-DCD/DCDLeach (mod x obs)/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-DCD/DCDLeach (mod x obs)/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-DCD/DCDLeach (mod x obs)/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Cumulative Lys11.DCDLeach</Y>
                <Y>Cumulative Lys21.DCDLeach</Y>
                <Y>Cumulative Lys26.DCDLeach</Y>
                <Y>Cumulative Lys46.DCDLeach</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-1100-WithDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
            <Graph name="DCDChanges" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDChanges">
              <Plot name="Predicted" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDChanges/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDChanges/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDChanges/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
            </Graph>
          </GraphReport>
          <GraphReport name="GraphReport-N" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-N">
            <Graph name="NO3 leach (mod x obs)" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-N/NO3 leach (mod x obs)">
              <Plot name="Predicted" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-N/NO3 leach (mod x obs)/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-N/NO3 leach (mod x obs)/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-N/NO3 leach (mod x obs)/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Lys11.NO3Leach</Y>
                <Y>Lys21.NO3Leach</Y>
                <Y>Lys26.NO3Leach</Y>
                <Y>Lys46.NO3Leach</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-1100-WithDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
            <Graph name="NO3 leach (mod x obs)1" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-N/NO3 leach (mod x obs)1">
              <Plot name="Predicted" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-N/NO3 leach (mod x obs)1/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-N/NO3 leach (mod x obs)1/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-N/NO3 leach (mod x obs)1/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Cumulative Lys11.NO3Leach</Y>
                <Y>Cumulative Lys21.NO3Leach</Y>
                <Y>Cumulative Lys26.NO3Leach</Y>
                <Y>Cumulative Lys46.NO3Leach</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-1100-WithDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
            <Graph name="NH4 leach (mod x obs)" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-N/NH4 leach (mod x obs)">
              <Plot name="Predicted" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-N/NH4 leach (mod x obs)/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-N/NH4 leach (mod x obs)/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-N/NH4 leach (mod x obs)/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Lys11.NH4Leach</Y>
                <Y>Lys21.NH4Leach</Y>
                <Y>Lys26.NH4Leach</Y>
                <Y>Lys46.NH4Leach</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-1100-WithDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
            <Graph name="NH4 leach (mod x obs)1" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-N/NH4 leach (mod x obs)1">
              <Plot name="Predicted" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-N/NH4 leach (mod x obs)1/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-N/NH4 leach (mod x obs)1/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-N/NH4 leach (mod x obs)1/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Cumulative Lys11.NH4Leach</Y>
                <Y>Cumulative Lys21.NH4Leach</Y>
                <Y>Cumulative Lys26.NH4Leach</Y>
                <Y>Cumulative Lys46.NH4Leach</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-1100-WithDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
            <Graph name="GaseousLosses" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-N/GaseousLosses">
              <Plot name="Predicted" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-N/GaseousLosses/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-N/GaseousLosses/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-N/GaseousLosses/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
            </Graph>
          </GraphReport>
          <GraphReport name="NAmounts" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/NAmounts">
            <Graph name="MineralN" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/NAmounts/MineralN">
              <Plot shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/NAmounts/MineralN/Plot">
                <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/NAmounts/MineralN/Plot/ApsimFileReader" />
              </Plot>
            </Graph>
            <Graph name="OrganicN" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/NAmounts/OrganicN">
              <Plot shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/NAmounts/OrganicN/Plot">
                <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/NAmounts/OrganicN/Plot/ApsimFileReader" />
              </Plot>
            </Graph>
          </GraphReport>
          <GraphReport name="GraphReport-Pasture" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Pasture">
            <Graph name="GLF" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Pasture/GLF">
              <Plot shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Pasture/GLF/Plot">
                <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Pasture/GLF/Plot/ApsimFileReader" />
              </Plot>
            </Graph>
            <Graph name="DM" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Pasture/DM">
              <Plot shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Pasture/DM/Plot">
                <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Pasture/DM/Plot/ApsimFileReader" />
              </Plot>
            </Graph>
            <Graph name="Yield (mod x obs)" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Pasture/Yield (mod x obs)">
              <Plot name="Predicted" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Pasture/Yield (mod x obs)/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Pasture/Yield (mod x obs)/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Pasture/Yield (mod x obs)/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Lys11.HarvestedDM</Y>
                <Y>Lys21.HarvestedDM</Y>
                <Y>Lys26.HarvestedDM</Y>
                <Y>Lys46.HarvestedDM</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-1100-WithDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
            <Graph name="Yield (mod x obs)1" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Pasture/Yield (mod x obs)1">
              <Plot name="Predicted" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Pasture/Yield (mod x obs)1/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Pasture/Yield (mod x obs)1/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Pasture/Yield (mod x obs)1/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Cumulative Lys11.HarvestedDM</Y>
                <Y>Cumulative Lys21.HarvestedDM</Y>
                <Y>Cumulative Lys26.HarvestedDM</Y>
                <Y>Cumulative Lys46.HarvestedDM</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-1100-WithDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
            <Graph name="Growth (mod x obs)" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Pasture/Growth (mod x obs)">
              <Plot name="Predicted" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Pasture/Growth (mod x obs)/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Pasture/Growth (mod x obs)/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/1100mm/Horotiu-1100noDCD/paddock/Results/GraphReport-Pasture/Growth (mod x obs)/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Lys11.PastureGrowth</Y>
                <Y>Lys21.PastureGrowth</Y>
                <Y>Lys26.PastureGrowth</Y>
                <Y>Lys46.PastureGrowth</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-1100-WithDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
          </GraphReport>
        </outputfile>
      </area>
    </simulation>
    <Graph name="Drainage (mod x obs)">
      <Legend>
        <CheckedTitles>Predicted, Cumulative DrainCollected,Horotiu-2200noDCD Results</CheckedTitles>
        <CheckedTitles>Predicted, Cumulative DrainCollected,Horotiu-2200withDCD Results</CheckedTitles>
        <CheckedTitles>Observed1, Cumulative Lys6.Drain,P21Lysimeters(Horotiu-2200-NoDCD)</CheckedTitles>
        <CheckedTitles>Observed1, Cumulative Lys16.Drain,P21Lysimeters(Horotiu-2200-NoDCD)</CheckedTitles>
        <CheckedTitles>Observed1, Cumulative Lys27.Drain,P21Lysimeters(Horotiu-2200-NoDCD)</CheckedTitles>
        <CheckedTitles>Observed1, Cumulative Lys48.Drain,P21Lysimeters(Horotiu-2200-NoDCD)</CheckedTitles>
        <CheckedTitles>Observed2, Cumulative Lys8.Drain,P21Lysimeters(Horotiu-2200-WithDCD)</CheckedTitles>
        <CheckedTitles>Observed2, Cumulative Lys17.Drain,P21Lysimeters(Horotiu-2200-WithDCD)</CheckedTitles>
        <CheckedTitles>Observed2, Cumulative Lys30.Drain,P21Lysimeters(Horotiu-2200-WithDCD)</CheckedTitles>
        <CheckedTitles>Observed2, Cumulative Lys44.Drain,P21Lysimeters(Horotiu-2200-WithDCD)</CheckedTitles>
      </Legend>
      <Plot name="Predicted">
        <colour>
        </colour>
        <X>Date</X>
        <SeriesType>Solid line</SeriesType>
        <PointType>None</PointType>
        <Y>Cumulative DrainCollected</Y>
        <GDFilter name="Filter">
          <Filter>isExpDay = 1</Filter>
          <GDApsimFileReader name="ApsimFileReader" />
        </GDFilter>
      </Plot>
      <Plot name="Observed1">
        <colour>-16776961</colour>
        <X>Date</X>
        <SeriesType>No line</SeriesType>
        <PointType>Circle</PointType>
        <Y>Cumulative Lys4.Drain</Y>
        <Y>Cumulative Lys23.Drain</Y>
        <Y>Cumulative Lys32.Drain</Y>
        <Y>Cumulative Lys37.Drain</Y>
        <GDApsimFileReader name="ApsimFileReader">
          <FileName>P21Lysimeters(Horotiu-1100-NoDCD).dat</FileName>
        </GDApsimFileReader>
      </Plot>
      <Plot name="Observed2">
        <colour>-65536</colour>
        <X>Date</X>
        <SeriesType>No line</SeriesType>
        <PointType>Circle</PointType>
        <Y>Cumulative Lys11.Drain</Y>
        <Y>Cumulative Lys21.Drain</Y>
        <Y>Cumulative Lys26.Drain</Y>
        <Y>Cumulative Lys46.Drain</Y>
        <GDApsimFileReader name="ApsimFileReader">
          <FileName>P21Lysimeters(Horotiu-1100-WithDCD).dat</FileName>
        </GDApsimFileReader>
      </Plot>
    </Graph>
    <Graph name="NO3 leach (mod x obs)">
      <Legend>
        <CheckedTitles>Predicted, Cumulative NO3LeachCollected,Horotiu-2200noDCD Results</CheckedTitles>
        <CheckedTitles>Predicted, Cumulative NO3LeachCollected,Horotiu-2200withDCD Results</CheckedTitles>
        <CheckedTitles>Observed1, Cumulative Lys6.NO3Leach,P21Lysimeters(Horotiu-2200-NoDCD)</CheckedTitles>
        <CheckedTitles>Observed1, Cumulative Lys16.NO3Leach,P21Lysimeters(Horotiu-2200-NoDCD)</CheckedTitles>
        <CheckedTitles>Observed1, Cumulative Lys27.NO3Leach,P21Lysimeters(Horotiu-2200-NoDCD)</CheckedTitles>
        <CheckedTitles>Observed1, Cumulative Lys48.NO3Leach,P21Lysimeters(Horotiu-2200-NoDCD)</CheckedTitles>
        <CheckedTitles>Observed2, Cumulative Lys8.NO3Leach,P21Lysimeters(Horotiu-2200-WithDCD)</CheckedTitles>
        <CheckedTitles>Observed2, Cumulative Lys17.NO3Leach,P21Lysimeters(Horotiu-2200-WithDCD)</CheckedTitles>
        <CheckedTitles>Observed2, Cumulative Lys30.NO3Leach,P21Lysimeters(Horotiu-2200-WithDCD)</CheckedTitles>
        <CheckedTitles>Observed2, Cumulative Lys44.NO3Leach,P21Lysimeters(Horotiu-2200-WithDCD)</CheckedTitles>
      </Legend>
      <Plot name="Predicted">
        <colour>
        </colour>
        <X>Date</X>
        <SeriesType>Solid line</SeriesType>
        <PointType>None</PointType>
        <Y>Cumulative NO3LeachCollected</Y>
        <GDFilter name="Filter">
          <Filter>isExpDay = 1</Filter>
          <GDApsimFileReader name="ApsimFileReader" />
        </GDFilter>
      </Plot>
      <Plot name="Observed1">
        <colour>-16776961</colour>
        <X>Date</X>
        <SeriesType>No line</SeriesType>
        <PointType>Circle</PointType>
        <Y>Cumulative Lys4.NO3Leach</Y>
        <Y>Cumulative Lys23.NO3Leach</Y>
        <Y>Cumulative Lys32.NO3Leach</Y>
        <Y>Cumulative Lys37.NO3Leach</Y>
        <GDApsimFileReader name="ApsimFileReader">
          <FileName>P21Lysimeters(Horotiu-1100-NoDCD).dat</FileName>
        </GDApsimFileReader>
      </Plot>
      <Plot name="Observed2">
        <colour>-65536</colour>
        <X>Date</X>
        <SeriesType>No line</SeriesType>
        <PointType>Circle</PointType>
        <Y>Cumulative Lys11.NO3Leach</Y>
        <Y>Cumulative Lys21.NO3Leach</Y>
        <Y>Cumulative Lys26.NO3Leach</Y>
        <Y>Cumulative Lys46.NO3Leach</Y>
        <GDApsimFileReader name="ApsimFileReader">
          <FileName>P21Lysimeters(Horotiu-1100-WithDCD).dat</FileName>
        </GDApsimFileReader>
      </Plot>
    </Graph>
    <Graph name="Yield (mod x obs)">
      <Legend>
        <CheckedTitles>Predicted, Cumulative RemovedDM,Horotiu-2200noDCD Results</CheckedTitles>
        <CheckedTitles>Predicted, Cumulative RemovedDM,Horotiu-2200withDCD Results</CheckedTitles>
        <CheckedTitles>Observed1, Cumulative Lys6.HarvestedDM,P21Lysimeters(Horotiu-2200-NoDCD)</CheckedTitles>
        <CheckedTitles>Observed1, Cumulative Lys16.HarvestedDM,P21Lysimeters(Horotiu-2200-NoDCD)</CheckedTitles>
        <CheckedTitles>Observed1, Cumulative Lys27.HarvestedDM,P21Lysimeters(Horotiu-2200-NoDCD)</CheckedTitles>
        <CheckedTitles>Observed1, Cumulative Lys48.HarvestedDM,P21Lysimeters(Horotiu-2200-NoDCD)</CheckedTitles>
        <CheckedTitles>Observed2, Cumulative Lys8.HarvestedDM,P21Lysimeters(Horotiu-2200-WithDCD)</CheckedTitles>
        <CheckedTitles>Observed2, Cumulative Lys17.HarvestedDM,P21Lysimeters(Horotiu-2200-WithDCD)</CheckedTitles>
        <CheckedTitles>Observed2, Cumulative Lys30.HarvestedDM,P21Lysimeters(Horotiu-2200-WithDCD)</CheckedTitles>
        <CheckedTitles>Observed2, Cumulative Lys44.HarvestedDM,P21Lysimeters(Horotiu-2200-WithDCD)</CheckedTitles>
      </Legend>
      <Plot name="Predicted">
        <colour>
        </colour>
        <SeriesType>Solid line</SeriesType>
        <PointType>None</PointType>
        <Y>Cumulative RemovedDM</Y>
        <X>Date</X>
        <GDFilter name="Filter">
          <Filter>isExpDay = 1</Filter>
          <GDApsimFileReader name="ApsimFileReader" />
        </GDFilter>
      </Plot>
      <Plot name="Observed1">
        <colour>-16776961</colour>
        <X>Date</X>
        <SeriesType>No line</SeriesType>
        <PointType>Circle</PointType>
        <Y>Cumulative Lys4.HarvestedDM</Y>
        <Y>Cumulative Lys23.HarvestedDM</Y>
        <Y>Cumulative Lys32.HarvestedDM</Y>
        <Y>Cumulative Lys37.HarvestedDM</Y>
        <GDApsimFileReader name="ApsimFileReader">
          <FileName>P21Lysimeters(Horotiu-1100-NoDCD).dat</FileName>
        </GDApsimFileReader>
      </Plot>
      <Plot name="Observed2">
        <colour>-65536</colour>
        <X>Date</X>
        <SeriesType>No line</SeriesType>
        <PointType>Circle</PointType>
        <Y>Cumulative Lys11.HarvestedDM</Y>
        <Y>Cumulative Lys21.HarvestedDM</Y>
        <Y>Cumulative Lys26.HarvestedDM</Y>
        <Y>Cumulative Lys46.HarvestedDM</Y>
        <GDApsimFileReader name="ApsimFileReader">
          <FileName>P21Lysimeters(Horotiu-1100-WithDCD).dat</FileName>
        </GDApsimFileReader>
      </Plot>
    </Graph>
    <GraphReport name="GraphReport-DCD">
      <Graph name="DCDSoil (mod x obs)">
        <Legend>
          <CheckedTitles> dcd_added, Horotiu-2200noDCD Results</CheckedTitles>
          <CheckedTitles> dcd_added, Horotiu-2200withDCD Results</CheckedTitles>
          <CheckedTitles> TotalDCD, Horotiu-2200noDCD Results</CheckedTitles>
          <CheckedTitles> TotalDCD, Horotiu-2200withDCD Results</CheckedTitles>
          <CheckedTitles> Cumulative DCDLeached, Horotiu-2200noDCD Results</CheckedTitles>
          <CheckedTitles> Cumulative DCDLeached, Horotiu-2200withDCD Results</CheckedTitles>
          <CheckedTitles> Cumulative DCDdegradation, Horotiu-2200noDCD Results</CheckedTitles>
          <CheckedTitles> Cumulative DCDdegradation, Horotiu-2200withDCD Results</CheckedTitles>
        </Legend>
        <Plot name="Predicted">
          <colour>
          </colour>
          <X>Date</X>
          <SeriesType>Solid line</SeriesType>
          <PointType>None</PointType>
          <Y>dcd_added</Y>
          <Y>TotalDCD</Y>
          <Y>Cumulative DCDLeached</Y>
          <Y>Cumulative DCDdegradation</Y>
          <GDFilter name="Filter">
            <Filter>isExpDay = 1</Filter>
            <GDApsimFileReader name="ApsimFileReader" />
          </GDFilter>
        </Plot>
      </Graph>
      <Graph name="DCDLeach (mod x obs)">
        <Legend>
          <CheckedTitles>Predicted, Cumulative DCDLeached,Horotiu-2200noDCD Results</CheckedTitles>
          <CheckedTitles>Predicted, Cumulative DCDLeached,Horotiu-2200withDCD Results</CheckedTitles>
          <CheckedTitles>Observed1, Cumulative Lys6.DCDLeach,P21Lysimeters(Horotiu-2200-NoDCD)</CheckedTitles>
          <CheckedTitles>Observed1, Cumulative Lys27.DCDLeach,P21Lysimeters(Horotiu-2200-NoDCD)</CheckedTitles>
          <CheckedTitles>Observed1, Cumulative Lys48.DCDLeach,P21Lysimeters(Horotiu-2200-NoDCD)</CheckedTitles>
          <CheckedTitles>Observed1, Cumulative Lys48.DCDLeach,P21Lysimeters(Horotiu-2200-NoDCD)</CheckedTitles>
          <CheckedTitles>Observed2, Cumulative Lys8.DCDLeach,P21Lysimeters(Horotiu-2200-WithDCD)</CheckedTitles>
          <CheckedTitles>Observed2, Cumulative Lys17.DCDLeach,P21Lysimeters(Horotiu-2200-WithDCD)</CheckedTitles>
          <CheckedTitles>Observed2, Cumulative Lys30.DCDLeach,P21Lysimeters(Horotiu-2200-WithDCD)</CheckedTitles>
          <CheckedTitles>Observed2, Cumulative Lys44.DCDLeach,P21Lysimeters(Horotiu-2200-WithDCD)</CheckedTitles>
        </Legend>
        <Plot name="Predicted">
          <colour>
          </colour>
          <X>Date</X>
          <SeriesType>Solid line</SeriesType>
          <PointType>None</PointType>
          <Y>Cumulative DCDLeached</Y>
          <GDFilter name="Filter">
            <Filter>isExpDay = 1</Filter>
            <GDApsimFileReader name="ApsimFileReader" />
          </GDFilter>
        </Plot>
        <Plot name="Observed1">
          <colour>-16776961</colour>
          <X>Date</X>
          <SeriesType>No line</SeriesType>
          <PointType>Circle</PointType>
          <Y>Cumulative Lys4.DCDLeach</Y>
          <Y>Cumulative Lys23.DCDLeach</Y>
          <Y>Cumulative Lys32.DCDLeach</Y>
          <Y>Cumulative Lys37.DCDLeach</Y>
          <GDApsimFileReader name="ApsimFileReader">
            <FileName>P21Lysimeters(Horotiu-1100-NoDCD).dat</FileName>
          </GDApsimFileReader>
        </Plot>
        <Plot name="Observed2">
          <colour>-65536</colour>
          <X>Date</X>
          <SeriesType>No line</SeriesType>
          <PointType>Circle</PointType>
          <Y>Cumulative Lys11.DCDLeach</Y>
          <Y>Cumulative Lys21.DCDLeach</Y>
          <Y>Cumulative Lys26.DCDLeach</Y>
          <Y>Cumulative Lys46.DCDLeach</Y>
          <GDApsimFileReader name="ApsimFileReader">
            <FileName>P21Lysimeters(Horotiu-1100-WithDCD).dat</FileName>
          </GDApsimFileReader>
        </Plot>
      </Graph>
      <Graph name="DCDLeach (vs drainage)">
        <Legend>
          <CheckedTitles>Predicted1, Cumulative DCDLeached,Horotiu-2200noDCD Results</CheckedTitles>
          <CheckedTitles>Predicted1, Cumulative DCDLeached,Horotiu-2200withDCD Results</CheckedTitles>
          <CheckedTitles>Predicted2, Cumulative DCDLeachCollected,Horotiu-2200noDCD Results</CheckedTitles>
          <CheckedTitles>Predicted2, Cumulative DCDLeachCollected,Horotiu-2200withDCD Results</CheckedTitles>
          <CheckedTitles>Observed2a, Cumulative Lys8.DCDLeach,P21Lysimeters(Horotiu-2200-WithDCD)</CheckedTitles>
          <CheckedTitles>Observed2b, Cumulative Lys17.DCDLeach,P21Lysimeters(Horotiu-2200-WithDCD)</CheckedTitles>
          <CheckedTitles>Observed2c, Cumulative Lys30.DCDLeach,P21Lysimeters(Horotiu-2200-WithDCD)</CheckedTitles>
          <CheckedTitles>Observed2d, Cumulative Lys44.DCDLeach,P21Lysimeters(Horotiu-2200-WithDCD)</CheckedTitles>
        </Legend>
        <Plot name="Predicted1">
          <SeriesType>Solid line</SeriesType>
          <PointType>None</PointType>
          <colour>
          </colour>
          <X>Cumulative Drainage</X>
          <Y>Cumulative DCDLeached</Y>
          <GDFilter name="Filter">
            <Filter>isExpDay = 1</Filter>
            <GDApsimFileReader name="ApsimFileReader" />
          </GDFilter>
        </Plot>
        <Plot name="Predicted2">
          <SeriesType>Solid line</SeriesType>
          <PointType>Diagonal cross</PointType>
          <colour>
          </colour>
          <Y>Cumulative DCDLeachCollected</Y>
          <X>Cumulative DrainCollected</X>
          <GDFilter name="Filter">
            <Filter>isExpDay = 1</Filter>
            <GDApsimFileReader name="ApsimFileReader" />
          </GDFilter>
        </Plot>
        <Plot name="Observed2a">
          <colour>-65536</colour>
          <SeriesType>No line</SeriesType>
          <PointType>Circle</PointType>
          <Y>Cumulative Lys11.DCDLeach</Y>
          <X>Cumulative Lys11.Drain</X>
          <GDApsimFileReader name="ApsimFileReader">
            <FileName>P21Lysimeters(Horotiu-1100-WithDCD).dat</FileName>
          </GDApsimFileReader>
        </Plot>
        <Plot name="Observed2b">
          <colour>-65536</colour>
          <SeriesType>No line</SeriesType>
          <PointType>Circle</PointType>
          <Y>Cumulative Lys21.DCDLeach</Y>
          <X>Cumulative Lys21.Drain</X>
          <GDApsimFileReader name="ApsimFileReader">
            <FileName>P21Lysimeters(Horotiu-1100-WithDCD).dat</FileName>
          </GDApsimFileReader>
        </Plot>
        <Plot name="Observed2c">
          <colour>-65536</colour>
          <SeriesType>No line</SeriesType>
          <PointType>Circle</PointType>
          <Y>Cumulative Lys26.DCDLeach</Y>
          <X>Cumulative Lys26.Drain</X>
          <GDApsimFileReader name="ApsimFileReader">
            <FileName>P21Lysimeters(Horotiu-1100-WithDCD).dat</FileName>
          </GDApsimFileReader>
        </Plot>
        <Plot name="Observed2d">
          <colour>-65536</colour>
          <SeriesType>No line</SeriesType>
          <PointType>Circle</PointType>
          <Y>Cumulative Lys46.DCDLeach</Y>
          <X>Cumulative Lys46.Drain</X>
          <GDApsimFileReader name="ApsimFileReader">
            <FileName>P21Lysimeters(Horotiu-1100-WithDCD).dat</FileName>
          </GDApsimFileReader>
        </Plot>
      </Graph>
    </GraphReport>
  </folder>
  <folder name="2200mm">
    <memo name="Info">
 ===================================================================================
     Validation test for nitrification inhibitor (Solute2 model)
 ===================================================================================

  Â» Comparing drainage, N leaching, DCD leaching, and pasture growth from lysimeters receiving DCD as nitrification inhibitor with lysimiter without inhibitor
  Â» This are simulations of lysimeters with total water input aimed for 2200mm/yr
      + Soil: Horoti silt loam
      + Weather: Ruakura, Hamilton, New Zealand (obtained from Virtual Climate Station)
      + Cow urine applied at 1000kgN/ha, in 10mm
      + Inhibitor applied in two occasions at 10kg/ha
      + Irrigation applied using sprinklers, according to amounts recorded (see operations in the simulation)
      + N fertiliser applied as urea, according to amounts recorded (see operations in the simulation)
      + Some irrigation and fertiliser prior to the experiment to keep grass growing
      + Grass cut at estimated 1500kgDM/ha residue, on days as recorded during experiment

</memo>
    <simulation name="Horotiu-2200noDCD" shortcut="/simulations/BaseHorotiu">
      <clock shortcut="/simulations/BaseHorotiu/clock" />
      <metfile name="met" shortcut="/simulations/BaseHorotiu/met" />
      <summaryfile shortcut="/simulations/BaseHorotiu/summaryfile" />
      <area name="paddock" shortcut="/simulations/BaseHorotiu/paddock">
        <folder name="Manager folder" shortcut="/simulations/BaseHorotiu/paddock/Manager folder">
          <manager name="Experiment manager" shortcut="/simulations/BaseHorotiu/paddock/Manager folder/Experiment manager" />
          <manager name="Collect Leachate Ruakura" shortcut="/simulations/BaseHorotiu/paddock/Manager folder/Collect Leachate Ruakura" />
          <manager2 name="ModifySolutes(no3)" shortcut="/simulations/BaseHorotiu/paddock/Manager folder/ModifySolutes(no3)" />
          <manager2 name="ModifySolutes(dcd)" shortcut="/simulations/BaseHorotiu/paddock/Manager folder/ModifySolutes(dcd)" />
          <manager2 name="Cut AgPasture on given dates" shortcut="/simulations/BaseHorotiu/paddock/Manager folder/Cut AgPasture on given dates">
            <memo name="Info" shortcut="/simulations/BaseHorotiu/paddock/Manager folder/Cut AgPasture on given dates/Info" />
          </manager2>
          <manager2 name="UrinePatchApply" shortcut="/simulations/BaseHorotiu/paddock/Manager folder/UrinePatchApply" />
          <manager2 name="nh3_volatilisation" shortcut="/simulations/BaseHorotiu/paddock/Manager folder/nh3_volatilisation" />
          <manager2 name="Irrigate" shortcut="/simulations/BaseHorotiu/paddock/Manager folder/Irrigate" />
          <manager2 name="ApplyInhibitor">
            <ui>
              <Dummy0 type="category" description="Apply a given solute to the soil" />
              <ApplySolute_name type="list" listvalues="tracer,nitrificationinhibitor,ureaseinhibitor,cl,dcd" description="  Name of the solute to apply:">nitrificationinhibitor</ApplySolute_name>
              <Dummy1 type="category" description="When and how often to apply" />
              <ApplySolute_start_date type="ddmmmdate" description="  Date to start applications (dd/mm/yyyy):">15/05/2008</ApplySolute_start_date>
              <ApplySolute_end_date type="ddmmmdate" description="  Date to end applications (dd/mm/yyyy):">31/12/2100</ApplySolute_end_date>
              <ApplySolute_interval type="text" description="  Interval between applications (days):">5000</ApplySolute_interval>
              <ApplySolute_times type="text" description="  Number of times to apply:">0</ApplySolute_times>
              <Dummy2 type="category" description="Amount and depth for applications" />
              <ApplySolute_amount2add type="text" description="  Amount of solute to apply (kg/ha):">10</ApplySolute_amount2add>
              <ApplySolute_depth2add type="text" description="  Depth for application (mm):">1</ApplySolute_depth2add>
            </ui>
            <text>Imports System
Imports ModelFramework

' This manager applies a given amount of solute to the soil. It will add from the surface till the depth specified (decreasing linearly)
'  The manager can also repeat the application periodically within a given window

'--&gt;  Last uptaded in: 17/Sep/2013 ..................


Public Class Script 
   
   'Parameter variables:
   &lt;param&gt; Private ApplySolute_name As String
   &lt;param&gt; Private ApplySolute_start_date As String
   &lt;param&gt; Private ApplySolute_end_date As String
   &lt;param&gt; Private ApplySolute_interval As Integer
   &lt;param&gt; Private ApplySolute_times As Integer
   &lt;param&gt; Private ApplySolute_amount2add As Double
   &lt;param&gt; Private ApplySolute_depth2add As Double
   
   'Events to raise
   &lt;[Event]()&gt; Public Event SoluteChanged As SoluteChangedDelegate

   'Variables read from other modules
   &lt;Input&gt; Private today As DateTime            'Today's date
   &lt;Input&gt; Private dlayer As Double()           'Soil layers structure

   'Output variables
   &lt;Output&gt;&lt;Units("kg/ha")&gt; Public SoluteAdded As Double       'The amount of solute added

   'Internal variables
   Private StartDate As DateTime                'The date when applications start (in date format)
   Private EndDate As DateTime                  'The date when applications finish (in date format)
   Private TimeAfterApplication As Integer      'Number of days after an application
   Private SoilDepth As Double                  'The soil depth (mm)
   Private LayerFraction() As Double        'The fraction of solute applied in each layer
   Private NumberOfApplications As Integer      'Number of applications

   &lt;EventHandler()&gt; Public Sub OnInitialised()

      'Put the dates into date format:
      StartDate = DateTime.Parse(ApplySolute_start_date &amp; " 06:00:00 am")
      EndDate = DateTime.Parse(ApplySolute_end_date &amp; " 06:00:00 pm")
      NumberOfApplications = 0
      TimeAfterApplication = 1
      
      'Computes the fraction of solute to be applied in each layer
      Console.WriteLine(" Applying solute, " &amp; ApplySolute_amount2add.ToString("#0.0#") &amp; " kg/ha, in following layers")
      ReDim LayerFraction(dlayer.length - 1)
      Dim Depth_from_surface As Double = 0
      Dim surf_L As Double = 2 / ApplySolute_depth2add
      Dim upper_L As Double = surf_L
      Dim lower_L As Double = 0
      Dim thisLayer As Double = 0
      For Layer As Integer = 0 To dlayer.length - 1
         Depth_from_surface += dlayer(Layer)
         If Depth_from_surface &gt;= ApplySolute_depth2add Then
            ' last layer
            lower_L = 0
            thisLayer = dlayer(Layer) - (Depth_from_surface - ApplySolute_depth2add)
         Else
            ' intermediate layer
            lower_L = surf_L * (ApplySolute_depth2add - Depth_from_surface) / ApplySolute_depth2add
            thisLayer = dlayer(Layer)
         End If
         LayerFraction(Layer) = (upper_L + lower_L) * thisLayer / 2
         upper_L = lower_L
         Console.WriteLine(" Fraction in layer (" &amp; Layer.ToString() &amp; "): " &amp; LayerFraction(Layer).ToString())
         If Depth_from_surface &gt;= ApplySolute_depth2add Then Layer = dlayer.length               
      Next
      

   End Sub

   &lt;EventHandler()&gt; Public Sub OnPrepare()

      'Re-set variables
      SoluteAdded = 0
      Dim delta_solute(dlayer.Length - 1) As Double

      'Decide whether it is time to start applications:
      If (today.Date &gt;= StartDate.Date) And (today.Date &lt;= EndDate.Date) And (NumberOfApplications &lt; ApplySolute_times) Then
         If (today - StartDate).TotalDays &lt; 0.5 Then
            ' always apply on the starting date, or beginning of simulation
            For Layer As Integer = 0 To dlayer.length - 1
               delta_solute(Layer) = ApplySolute_amount2add * LayerFraction(Layer)
               SoluteAdded += delta_solute(Layer)
               If LayerFraction(Layer) &lt;= 1E-12 Then Layer = dlayer.length
            Next
            TimeAfterApplication = 1
            NumberOfApplications += 1
         Else
            ' apply at given intervals
            If TimeAfterApplication &gt;= ApplySolute_interval Then
               For Layer As Integer = 0 To dlayer.length - 1
                  delta_solute(Layer) = ApplySolute_amount2add * LayerFraction(Layer)
                  SoluteAdded += delta_solute(Layer)
                  If LayerFraction(Layer) &lt;= 1E-12 Then Layer = dlayer.length               
               Next
               TimeAfterApplication = 1
               NumberOfApplications += 1
            Else
               TimeAfterApplication = TimeAfterApplication + 1
               SoluteAdded = 0
            End If
         End If

         'Make the application
         If TimeAfterApplication = 1 Then
            Dim SoluteChanges As SoluteChangedType = New SoluteChangedType()
            SoluteChanges.Sender = "Manager: ApplySolute"
            SoluteChanges.SoluteName = ApplySolute_name
            SoluteChanges.SoluteUnits = "kg/ha"
            SoluteChanges.DeltaSolute = delta_solute
            RaiseEvent SoluteChanged(SoluteChanges)

            Console.WriteLine(today.ToString("dd MMMM yyyy") + " (Day of year=" + today.DayOfYear.ToString + "), ApplySolute:")
            Console.WriteLine("     " &amp; ApplySolute_name &amp; " being applied at " + SoluteAdded.ToString("0.00") + "kg/ha, added down to depth " + ApplySolute_depth2add.ToString("0") + "mm")
         End If
      End If            
      
   End Sub

End Class
 </text>
          </manager2>
          <operations name="Fertiliser_NI_General" shortcut="/simulations/BaseHorotiu/paddock/Manager folder/Fertiliser_NI_General" />
          <operations name="Irrigation_Ruakura_High">
            <operation condition="start_of_day">
              <date>24-Apr-2008</date>
              <action>irrigation apply amount = 2.65</action>
            </operation>
            <operation condition="start_of_day">
              <date>22-May-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>21-May-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>23-May-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>26-May-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>28-May-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>29-May-2008</date>
              <action>irrigation apply amount = 21.10</action>
            </operation>
            <operation condition="start_of_day">
              <date>2-Jun-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>3-Jun-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>5-Jun-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>10-Jun-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>11-Jun-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>13-Jun-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>19-Jun-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>20-Jun-2008</date>
              <action>irrigation apply amount = 21.10</action>
            </operation>
            <operation condition="start_of_day">
              <date>25-Jun-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>30-Jun-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>1-Jul-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>2-Jul-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>5-Jul-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>8-Jul-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>10-Jul-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>14-Jul-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>15-Jul-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>16-Jul-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>21-Jul-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>24-Jul-2008</date>
              <action>irrigation apply amount = 10.00</action>
            </operation>
            <operation condition="start_of_day">
              <date>25-Jul-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>28-Jul-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>1-Aug-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>4-Aug-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>5-Aug-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>12-Aug-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>13-Aug-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>14-Aug-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>18-Aug-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>19-Aug-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>20-Aug-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>22-Aug-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>1-Sep-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>4-Sep-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>8-Sep-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>9-Sep-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>15-Sep-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>16-Sep-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>19-Sep-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>22-Sep-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>23-Sep-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>25-Sep-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>2-Oct-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>6-Oct-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>7-Oct-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>16-Oct-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>22-Oct-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>31-Oct-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>7-Nov-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>10-Nov-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>11-Nov-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>13-Nov-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>14-Nov-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>17-Nov-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>18-Nov-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>24-Nov-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>25-Nov-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>28-Nov-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>1-Dec-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>5-Dec-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>8-Dec-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>18-Dec-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>22-Dec-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>23-Dec-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>26-Dec-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>27-Dec-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>28-Dec-2008</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>1-Jan-2009</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>3-Jan-2009</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>5-Jan-2009</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>8-Jan-2009</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>13-Jan-2009</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>14-Jan-2009</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>15-Jan-2009</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>19-Jan-2009</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>20-Jan-2009</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
            <operation condition="start_of_day">
              <date>16-Feb-2009</date>
              <action>irrigation apply amount = 10.55</action>
            </operation>
          </operations>
          <operations name="Fertiliser_Ruakura" shortcut="/simulations/BaseHorotiu/paddock/Manager folder/Fertiliser_Ruakura" />
        </folder>
        <micromet name="Micromet" shortcut="/simulations/BaseHorotiu/paddock/Micromet" />
        <irrigation name="Irrigation" shortcut="/simulations/BaseHorotiu/paddock/Irrigation" />
        <fertiliser shortcut="/simulations/BaseHorotiu/paddock/fertiliser" />
        <NitrificationInhibitor2 name="NitrificationInhibitor" shortcut="/simulations/BaseHorotiu/paddock/NitrificationInhibitor" />
        <surfaceom name="surface organic matter" shortcut="/simulations/BaseHorotiu/paddock/surface organic matter" />
        <SWIM2ui2 shortcut="/simulations/BaseHorotiu/paddock/SWIM2ui2">
          <ini name="Ini_SWIM2" shortcut="/simulations/BaseHorotiu/paddock/SWIM2ui2/Ini_SWIM2" />
        </SWIM2ui2>
        <SoilNitrogen shortcut="/simulations/BaseHorotiu/paddock/SoilNitrogen" />
        <SoilTemperature2 shortcut="/simulations/BaseHorotiu/paddock/SoilTemperature2" />
        <AgPasture shortcut="/simulations/BaseHorotiu/paddock/AgPasture" />
        <outputfile name="Results" shortcut="/simulations/BaseHorotiu/paddock/Results">
          <filename output="yes">Horotiu-2200noDCD Results.out</filename>
          <title>Horotiu-2200noDCD Results</title>
          <variables name="Variables" shortcut="/simulations/BaseHorotiu/paddock/Results/Variables" />
          <events name="Reporting Frequency" shortcut="/simulations/BaseHorotiu/paddock/Results/Reporting Frequency" />
          <GraphReport name="GraphReport-Water" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Water">
            <Graph name="Water-in" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Water/Water-in">
              <Plot shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Water/Water-in/Plot">
                <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Water/Water-in/Plot/ApsimFileReader" />
              </Plot>
            </Graph>
            <Graph name="Water-out" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Water/Water-out">
              <Plot shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Water/Water-out/Plot">
                <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Water/Water-out/Plot/ApsimFileReader" />
              </Plot>
            </Graph>
            <Graph name="SoilWater" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Water/SoilWater">
              <Plot shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Water/SoilWater/Plot">
                <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Water/SoilWater/Plot/ApsimFileReader" />
              </Plot>
            </Graph>
            <Graph name="Drainage (mod x obs)" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Water/Drainage (mod x obs)">
              <Plot name="Predicted" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Water/Drainage (mod x obs)/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Water/Drainage (mod x obs)/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Water/Drainage (mod x obs)/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Cumulative Lys6.Drain</Y>
                <Y>Cumulative Lys16.Drain</Y>
                <Y>Cumulative Lys27.Drain</Y>
                <Y>Cumulative Lys48.Drain</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-2200-NoDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
          </GraphReport>
          <GraphReport name="GraphReport-DCD" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD">
            <Graph name="DCDSoil (mod x obs)" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDSoil (mod x obs)">
              <Plot name="Predicted" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDSoil (mod x obs)/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDSoil (mod x obs)/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDSoil (mod x obs)/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
            </Graph>
            <Graph name="DCDLeach (mod x obs)" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDLeach (mod x obs)">
              <Plot name="Predicted" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDLeach (mod x obs)/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDLeach (mod x obs)/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDLeach (mod x obs)/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Cumulative Lys6.DCDLeach</Y>
                <Y>Cumulative Lys27.DCDLeach</Y>
                <Y>Cumulative Lys48.DCDLeach</Y>
                <Y>Cumulative Lys48.DCDLeach</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-2200-NoDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
            <Graph name="DCDChanges" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDChanges">
              <Plot name="Predicted" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDChanges/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDChanges/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDChanges/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
            </Graph>
          </GraphReport>
          <GraphReport name="GraphReport-N" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N">
            <Graph name="NO3 leach (mod x obs)" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NO3 leach (mod x obs)">
              <Plot name="Predicted" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NO3 leach (mod x obs)/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NO3 leach (mod x obs)/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NO3 leach (mod x obs)/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Lys6.NO3Leach</Y>
                <Y>Lys16.NO3Leach</Y>
                <Y>Lys27.NO3Leach</Y>
                <Y>Lys48.NO3Leach</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-2200-NoDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
            <Graph name="NO3 leach (mod x obs)1" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NO3 leach (mod x obs)1">
              <Plot name="Predicted" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NO3 leach (mod x obs)1/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NO3 leach (mod x obs)1/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NO3 leach (mod x obs)1/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Cumulative Lys6.NO3Leach</Y>
                <Y>Cumulative Lys16.NO3Leach</Y>
                <Y>Cumulative Lys27.NO3Leach</Y>
                <Y>Cumulative Lys48.NO3Leach</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-2200-NoDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
            <Graph name="NH4 leach (mod x obs)" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NH4 leach (mod x obs)">
              <Plot name="Predicted" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NH4 leach (mod x obs)/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NH4 leach (mod x obs)/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NH4 leach (mod x obs)/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Lys6.NH4Leach</Y>
                <Y>Lys16.NH4Leach</Y>
                <Y>Lys27.NH4Leach</Y>
                <Y>Lys48.NH4Leach</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-2200-NoDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
            <Graph name="NH4 leach (mod x obs)1" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NH4 leach (mod x obs)1">
              <Plot name="Predicted" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NH4 leach (mod x obs)1/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NH4 leach (mod x obs)1/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/NH4 leach (mod x obs)1/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Cumulative Lys6.NH4Leach</Y>
                <Y>Cumulative Lys16.NH4Leach</Y>
                <Y>Cumulative Lys27.NH4Leach</Y>
                <Y>Cumulative Lys48.NH4Leach</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-2200-NoDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
            <Graph name="GaseousLosses" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/GaseousLosses">
              <Plot name="Predicted" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/GaseousLosses/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/GaseousLosses/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-N/GaseousLosses/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
            </Graph>
          </GraphReport>
          <GraphReport name="NAmounts" shortcut="/simulations/BaseHorotiu/paddock/Results/NAmounts">
            <Graph name="MineralN" shortcut="/simulations/BaseHorotiu/paddock/Results/NAmounts/MineralN">
              <Plot shortcut="/simulations/BaseHorotiu/paddock/Results/NAmounts/MineralN/Plot">
                <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/NAmounts/MineralN/Plot/ApsimFileReader" />
              </Plot>
            </Graph>
            <Graph name="OrganicN" shortcut="/simulations/BaseHorotiu/paddock/Results/NAmounts/OrganicN">
              <Plot shortcut="/simulations/BaseHorotiu/paddock/Results/NAmounts/OrganicN/Plot">
                <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/NAmounts/OrganicN/Plot/ApsimFileReader" />
              </Plot>
            </Graph>
          </GraphReport>
          <GraphReport name="GraphReport-Pasture" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture">
            <Graph name="GLF" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/GLF">
              <Plot shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/GLF/Plot">
                <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/GLF/Plot/ApsimFileReader" />
              </Plot>
            </Graph>
            <Graph name="DM" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/DM">
              <Plot shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/DM/Plot">
                <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/DM/Plot/ApsimFileReader" />
              </Plot>
            </Graph>
            <Graph name="Yield (mod x obs)" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/Yield (mod x obs)">
              <Plot name="Predicted" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/Yield (mod x obs)/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/Yield (mod x obs)/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/Yield (mod x obs)/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Lys6.HarvestedDM</Y>
                <Y>Lys16.HarvestedDM</Y>
                <Y>Lys27.HarvestedDM</Y>
                <Y>Lys48.HarvestedDM</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-2200-NoDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
            <Graph name="Yield (mod x obs)1" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/Yield (mod x obs)1">
              <Plot name="Predicted" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/Yield (mod x obs)1/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/Yield (mod x obs)1/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/Yield (mod x obs)1/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Cumulative Lys6.HarvestedDM</Y>
                <Y>Cumulative Lys16.HarvestedDM</Y>
                <Y>Cumulative Lys27.HarvestedDM</Y>
                <Y>Cumulative Lys48.HarvestedDM</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-2200-NoDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
            <Graph name="Growth (mod x obs)" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/Growth (mod x obs)">
              <Plot name="Predicted" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/Growth (mod x obs)/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/Growth (mod x obs)/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-Pasture/Growth (mod x obs)/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Lys6.PastureGrowth</Y>
                <Y>Lys16.PastureGrowth</Y>
                <Y>Lys27.PastureGrowth</Y>
                <Y>Lys48.PastureGrowth</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-2200-NoDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
          </GraphReport>
        </outputfile>
      </area>
    </simulation>
    <simulation name="Horotiu-2200withDCD" shortcut="/simulations/2200mm/Horotiu-2200noDCD">
      <clock shortcut="/simulations/2200mm/Horotiu-2200noDCD/clock" />
      <metfile name="met" shortcut="/simulations/2200mm/Horotiu-2200noDCD/met" />
      <summaryfile shortcut="/simulations/2200mm/Horotiu-2200noDCD/summaryfile" />
      <area name="paddock" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock">
        <folder name="Manager folder" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Manager folder">
          <manager name="Experiment manager" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Manager folder/Experiment manager" />
          <manager name="Collect Leachate Ruakura" shortcut="/simulations/BaseHorotiu/paddock/Manager folder/Collect Leachate Ruakura" />
          <manager2 name="ModifySolutes(no3)" shortcut="/simulations/BaseHorotiu/paddock/Manager folder/ModifySolutes(no3)" />
          <manager2 name="ModifySolutes(dcd)" shortcut="/simulations/BaseHorotiu/paddock/Manager folder/ModifySolutes(dcd)" />
          <manager2 name="Cut AgPasture on given dates" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Manager folder/Cut AgPasture on given dates">
            <memo name="Info" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Manager folder/Cut AgPasture on given dates/Info" />
          </manager2>
          <manager2 name="UrinePatchApply" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Manager folder/UrinePatchApply" />
          <manager2 name="nh3_volatilisation" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Manager folder/nh3_volatilisation" />
          <manager2 name="Irrigate" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Manager folder/Irrigate" />
          <manager2 name="ApplyInhibitor" shortcut="/simulations/1100mm/Horotiu-1100withDCD/paddock/Manager folder/ApplyInhibitor" />
          <operations name="Fertiliser_NI_General" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Manager folder/Fertiliser_NI_General" />
          <operations name="Irrigation_Ruakura_High" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Manager folder/Irrigation_Ruakura_High" />
          <operations name="Fertiliser_Ruakura" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Manager folder/Fertiliser_Ruakura" />
        </folder>
        <micromet name="Micromet" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Micromet" />
        <irrigation name="Irrigation" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Irrigation" />
        <fertiliser shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/fertiliser" />
        <NitrificationInhibitor2 name="NitrificationInhibitor" shortcut="/simulations/BaseHorotiu/paddock/NitrificationInhibitor" />
        <surfaceom name="surface organic matter" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/surface organic matter" />
        <SWIM2ui2 shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/SWIM2ui2">
          <ini name="Ini_SWIM2" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/SWIM2ui2/Ini_SWIM2" />
        </SWIM2ui2>
        <SoilNitrogen shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/SoilNitrogen" />
        <SoilTemperature2 shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/SoilTemperature2" />
        <AgPasture shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/AgPasture" />
        <outputfile name="Results" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results">
          <filename output="yes">Horotiu-2200withDCD Results.out</filename>
          <title>Horotiu-2200withDCD Results</title>
          <variables name="Variables" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/Variables" />
          <events name="Reporting Frequency" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/Reporting Frequency" />
          <GraphReport name="GraphReport-Water" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Water">
            <Graph name="Water-in" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Water/Water-in">
              <Plot shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Water/Water-in/Plot">
                <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Water/Water-in/Plot/ApsimFileReader" />
              </Plot>
            </Graph>
            <Graph name="Water-out" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Water/Water-out">
              <Plot shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Water/Water-out/Plot">
                <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Water/Water-out/Plot/ApsimFileReader" />
              </Plot>
            </Graph>
            <Graph name="SoilWater" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Water/SoilWater">
              <Plot shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Water/SoilWater/Plot">
                <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Water/SoilWater/Plot/ApsimFileReader" />
              </Plot>
            </Graph>
            <Graph name="Drainage (mod x obs)" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Water/Drainage (mod x obs)">
              <Plot name="Predicted" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Water/Drainage (mod x obs)/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Water/Drainage (mod x obs)/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Water/Drainage (mod x obs)/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Cumulative Lys8.Drain</Y>
                <Y>Cumulative Lys17.Drain</Y>
                <Y>Cumulative Lys30.Drain</Y>
                <Y>Cumulative Lys44.Drain</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-2200-WithDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
          </GraphReport>
          <GraphReport name="GraphReport-DCD" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-DCD">
            <Graph name="DCDSoil (mod x obs)" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-DCD/DCDSoil (mod x obs)">
              <Plot name="Predicted" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-DCD/DCDSoil (mod x obs)/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-DCD/DCDSoil (mod x obs)/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-DCD/DCDSoil (mod x obs)/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
            </Graph>
            <Graph name="DCDLeach (mod x obs)" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-DCD/DCDLeach (mod x obs)">
              <Plot name="Predicted" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-DCD/DCDLeach (mod x obs)/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-DCD/DCDLeach (mod x obs)/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-DCD/DCDLeach (mod x obs)/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Cumulative Lys8.DCDLeach</Y>
                <Y>Cumulative Lys17.DCDLeach</Y>
                <Y>Cumulative Lys30.DCDLeach</Y>
                <Y>Cumulative Lys44.DCDLeach</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-2200-WithDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
            <Graph name="DCDChanges" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDChanges">
              <Plot name="Predicted" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDChanges/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDChanges/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/BaseHorotiu/paddock/Results/GraphReport-DCD/DCDChanges/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
            </Graph>
          </GraphReport>
          <GraphReport name="GraphReport-N" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-N">
            <Graph name="NO3 leach (mod x obs)" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-N/NO3 leach (mod x obs)">
              <Plot name="Predicted" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-N/NO3 leach (mod x obs)/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-N/NO3 leach (mod x obs)/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-N/NO3 leach (mod x obs)/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Cumulative Lys4.NO3Leach</Y>
                <Y>Cumulative Lys23.NO3Leach</Y>
                <Y>Cumulative Lys32.NO3Leach</Y>
                <Y>Cumulative Lys37.NO3Leach</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-2200-WithDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
            <Graph name="NO3 leach (mod x obs)1" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-N/NO3 leach (mod x obs)1">
              <Plot name="Predicted" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-N/NO3 leach (mod x obs)1/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-N/NO3 leach (mod x obs)1/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-N/NO3 leach (mod x obs)1/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Cumulative Lys8.NO3Leach</Y>
                <Y>Cumulative Lys17.NO3Leach</Y>
                <Y>Cumulative Lys30.NO3Leach</Y>
                <Y>Cumulative Lys44.NO3Leach</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-2200-WithDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
            <Graph name="NH4 leach (mod x obs)" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-N/NH4 leach (mod x obs)">
              <Plot name="Predicted" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-N/NH4 leach (mod x obs)/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-N/NH4 leach (mod x obs)/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-N/NH4 leach (mod x obs)/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Lys8.NH4Leach</Y>
                <Y>Lys17.NH4Leach</Y>
                <Y>Lys30.NH4Leach</Y>
                <Y>Lys44.NH4Leach</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-2200-WithDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
            <Graph name="NH4 leach (mod x obs)1" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-N/NH4 leach (mod x obs)1">
              <Plot name="Predicted" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-N/NH4 leach (mod x obs)1/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-N/NH4 leach (mod x obs)1/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-N/NH4 leach (mod x obs)1/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Cumulative Lys6.NH4Leach</Y>
                <Y>Cumulative Lys16.NH4Leach</Y>
                <Y>Cumulative Lys27.NH4Leach</Y>
                <Y>Cumulative Lys48.NH4Leach</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-2200-WithDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
            <Graph name="GaseousLosses" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-N/GaseousLosses">
              <Plot name="Predicted" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-N/GaseousLosses/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-N/GaseousLosses/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-N/GaseousLosses/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
            </Graph>
          </GraphReport>
          <GraphReport name="NAmounts" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/NAmounts">
            <Graph name="MineralN" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/NAmounts/MineralN">
              <Plot shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/NAmounts/MineralN/Plot">
                <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/NAmounts/MineralN/Plot/ApsimFileReader" />
              </Plot>
            </Graph>
            <Graph name="OrganicN" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/NAmounts/OrganicN">
              <Plot shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/NAmounts/OrganicN/Plot">
                <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/NAmounts/OrganicN/Plot/ApsimFileReader" />
              </Plot>
            </Graph>
          </GraphReport>
          <GraphReport name="GraphReport-Pasture" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Pasture">
            <Graph name="GLF" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Pasture/GLF">
              <Plot shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Pasture/GLF/Plot">
                <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Pasture/GLF/Plot/ApsimFileReader" />
              </Plot>
            </Graph>
            <Graph name="DM" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Pasture/DM">
              <Plot shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Pasture/DM/Plot">
                <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Pasture/DM/Plot/ApsimFileReader" />
              </Plot>
            </Graph>
            <Graph name="Yield (mod x obs)" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Pasture/Yield (mod x obs)">
              <Plot name="Predicted" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Pasture/Yield (mod x obs)/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Pasture/Yield (mod x obs)/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Pasture/Yield (mod x obs)/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Lys8.HarvestedDM</Y>
                <Y>Lys17.HarvestedDM</Y>
                <Y>Lys30.HarvestedDM</Y>
                <Y>Lys44.HarvestedDM</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-2200-WithDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
            <Graph name="Yield (mod x obs)1" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Pasture/Yield (mod x obs)1">
              <Plot name="Predicted" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Pasture/Yield (mod x obs)1/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Pasture/Yield (mod x obs)1/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Pasture/Yield (mod x obs)1/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Cumulative Lys8.HarvestedDM</Y>
                <Y>Cumulative Lys17.HarvestedDM</Y>
                <Y>Cumulative Lys30.HarvestedDM</Y>
                <Y>Cumulative Lys44.HarvestedDM</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-2200-WithDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
            <Graph name="Growth (mod x obs)" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Pasture/Growth (mod x obs)">
              <Plot name="Predicted" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Pasture/Growth (mod x obs)/Predicted">
                <GDFilter name="Filter" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Pasture/Growth (mod x obs)/Predicted/Filter">
                  <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/2200mm/Horotiu-2200noDCD/paddock/Results/GraphReport-Pasture/Growth (mod x obs)/Predicted/Filter/ApsimFileReader" />
                </GDFilter>
              </Plot>
              <Plot name="Observed">
                <colour>
                </colour>
                <X>Date</X>
                <SeriesType>No line</SeriesType>
                <PointType>Circle</PointType>
                <Y>Lys8.PastureGrowth</Y>
                <Y>Lys17.PastureGrowth</Y>
                <Y>Lys30.PastureGrowth</Y>
                <Y>Lys44.PastureGrowth</Y>
                <GDApsimFileReader name="ApsimFileReader">
                  <FileName>P21Lysimeters(Horotiu-2200-WithDCD).dat</FileName>
                </GDApsimFileReader>
              </Plot>
            </Graph>
          </GraphReport>
        </outputfile>
      </area>
    </simulation>
    <Graph name="Drainage (mod x obs)" shortcut="/simulations/1100mm/Drainage (mod x obs)">
      <Plot name="Predicted" shortcut="/simulations/1100mm/Drainage (mod x obs)/Predicted">
        <GDFilter name="Filter" shortcut="/simulations/1100mm/Drainage (mod x obs)/Predicted/Filter">
          <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/1100mm/Drainage (mod x obs)/Predicted/Filter/ApsimFileReader" />
        </GDFilter>
      </Plot>
      <Plot name="Observed1">
        <colour>-16776961</colour>
        <X>Date</X>
        <SeriesType>No line</SeriesType>
        <PointType>Circle</PointType>
        <Y>Cumulative Lys6.Drain</Y>
        <Y>Cumulative Lys16.Drain</Y>
        <Y>Cumulative Lys27.Drain</Y>
        <Y>Cumulative Lys48.Drain</Y>
        <GDApsimFileReader name="ApsimFileReader">
          <FileName>P21Lysimeters(Horotiu-2200-NoDCD).dat</FileName>
        </GDApsimFileReader>
      </Plot>
      <Plot name="Observed2">
        <colour>-65536</colour>
        <X>Date</X>
        <SeriesType>No line</SeriesType>
        <PointType>Circle</PointType>
        <Y>Cumulative Lys8.Drain</Y>
        <Y>Cumulative Lys17.Drain</Y>
        <Y>Cumulative Lys30.Drain</Y>
        <Y>Cumulative Lys44.Drain</Y>
        <GDApsimFileReader name="ApsimFileReader">
          <FileName>P21Lysimeters(Horotiu-2200-WithDCD).dat</FileName>
        </GDApsimFileReader>
      </Plot>
    </Graph>
    <Graph name="NO3 leach (mod x obs)" shortcut="/simulations/1100mm/NO3 leach (mod x obs)">
      <Plot name="Predicted" shortcut="/simulations/1100mm/NO3 leach (mod x obs)/Predicted">
        <GDFilter name="Filter" shortcut="/simulations/1100mm/NO3 leach (mod x obs)/Predicted/Filter">
          <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/1100mm/NO3 leach (mod x obs)/Predicted/Filter/ApsimFileReader" />
        </GDFilter>
      </Plot>
      <Plot name="Observed1">
        <colour>-16776961</colour>
        <X>Date</X>
        <SeriesType>No line</SeriesType>
        <PointType>Circle</PointType>
        <Y>Cumulative Lys6.NO3Leach</Y>
        <Y>Cumulative Lys16.NO3Leach</Y>
        <Y>Cumulative Lys27.NO3Leach</Y>
        <Y>Cumulative Lys48.NO3Leach</Y>
        <GDApsimFileReader name="ApsimFileReader">
          <FileName>P21Lysimeters(Horotiu-2200-NoDCD).dat</FileName>
        </GDApsimFileReader>
      </Plot>
      <Plot name="Observed2">
        <colour>-65536</colour>
        <X>Date</X>
        <SeriesType>No line</SeriesType>
        <PointType>Circle</PointType>
        <Y>Cumulative Lys8.NO3Leach</Y>
        <Y>Cumulative Lys17.NO3Leach</Y>
        <Y>Cumulative Lys30.NO3Leach</Y>
        <Y>Cumulative Lys44.NO3Leach</Y>
        <GDApsimFileReader name="ApsimFileReader">
          <FileName>P21Lysimeters(Horotiu-2200-WithDCD).dat</FileName>
        </GDApsimFileReader>
      </Plot>
    </Graph>
    <Graph name="Yield (mod x obs)" shortcut="/simulations/1100mm/Yield (mod x obs)">
      <Plot name="Predicted" shortcut="/simulations/1100mm/Yield (mod x obs)/Predicted">
        <GDFilter name="Filter" shortcut="/simulations/1100mm/Yield (mod x obs)/Predicted/Filter">
          <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/1100mm/Yield (mod x obs)/Predicted/Filter/ApsimFileReader" />
        </GDFilter>
      </Plot>
      <Plot name="Observed1">
        <colour>-16776961</colour>
        <X>Date</X>
        <SeriesType>No line</SeriesType>
        <PointType>Circle</PointType>
        <Y>Cumulative Lys6.HarvestedDM</Y>
        <Y>Cumulative Lys16.HarvestedDM</Y>
        <Y>Cumulative Lys27.HarvestedDM</Y>
        <Y>Cumulative Lys48.HarvestedDM</Y>
        <GDApsimFileReader name="ApsimFileReader">
          <FileName>P21Lysimeters(Horotiu-2200-NoDCD).dat</FileName>
        </GDApsimFileReader>
      </Plot>
      <Plot name="Observed2">
        <colour>-65536</colour>
        <X>Date</X>
        <SeriesType>No line</SeriesType>
        <PointType>Circle</PointType>
        <Y>Cumulative Lys8.HarvestedDM</Y>
        <Y>Cumulative Lys17.HarvestedDM</Y>
        <Y>Cumulative Lys30.HarvestedDM</Y>
        <Y>Cumulative Lys44.HarvestedDM</Y>
        <GDApsimFileReader name="ApsimFileReader">
          <FileName>P21Lysimeters(Horotiu-2200-WithDCD).dat</FileName>
        </GDApsimFileReader>
      </Plot>
    </Graph>
    <GraphReport name="GraphReport-DCD" shortcut="/simulations/1100mm/GraphReport-DCD">
      <Graph name="DCDSoil (mod x obs)" shortcut="/simulations/1100mm/GraphReport-DCD/DCDSoil (mod x obs)">
        <Plot name="Predicted" shortcut="/simulations/1100mm/GraphReport-DCD/DCDSoil (mod x obs)/Predicted">
          <GDFilter name="Filter" shortcut="/simulations/1100mm/GraphReport-DCD/DCDSoil (mod x obs)/Predicted/Filter">
            <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/1100mm/GraphReport-DCD/DCDSoil (mod x obs)/Predicted/Filter/ApsimFileReader" />
          </GDFilter>
        </Plot>
      </Graph>
      <Graph name="DCDLeach (mod x obs)" shortcut="/simulations/1100mm/GraphReport-DCD/DCDLeach (mod x obs)">
        <Plot name="Predicted" shortcut="/simulations/1100mm/GraphReport-DCD/DCDLeach (mod x obs)/Predicted">
          <GDFilter name="Filter" shortcut="/simulations/1100mm/GraphReport-DCD/DCDLeach (mod x obs)/Predicted/Filter">
            <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/1100mm/GraphReport-DCD/DCDLeach (mod x obs)/Predicted/Filter/ApsimFileReader" />
          </GDFilter>
        </Plot>
        <Plot name="Observed1">
          <colour>-16776961</colour>
          <X>Date</X>
          <SeriesType>No line</SeriesType>
          <PointType>Circle</PointType>
          <Y>Cumulative Lys6.DCDLeach</Y>
          <Y>Cumulative Lys27.DCDLeach</Y>
          <Y>Cumulative Lys48.DCDLeach</Y>
          <Y>Cumulative Lys48.DCDLeach</Y>
          <GDApsimFileReader name="ApsimFileReader">
            <FileName>P21Lysimeters(Horotiu-2200-NoDCD).dat</FileName>
          </GDApsimFileReader>
        </Plot>
        <Plot name="Observed2">
          <colour>-65536</colour>
          <X>Date</X>
          <SeriesType>No line</SeriesType>
          <PointType>Circle</PointType>
          <Y>Cumulative Lys8.DCDLeach</Y>
          <Y>Cumulative Lys17.DCDLeach</Y>
          <Y>Cumulative Lys30.DCDLeach</Y>
          <Y>Cumulative Lys44.DCDLeach</Y>
          <GDApsimFileReader name="ApsimFileReader">
            <FileName>P21Lysimeters(Horotiu-2200-WithDCD).dat</FileName>
          </GDApsimFileReader>
        </Plot>
      </Graph>
      <Graph name="DCDLeach (vs drainage)" shortcut="/simulations/1100mm/GraphReport-DCD/DCDLeach (vs drainage)">
        <Plot name="Predicted1" shortcut="/simulations/1100mm/GraphReport-DCD/DCDLeach (vs drainage)/Predicted1">
          <GDFilter name="Filter" shortcut="/simulations/1100mm/GraphReport-DCD/DCDLeach (vs drainage)/Predicted1/Filter">
            <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/1100mm/GraphReport-DCD/DCDLeach (vs drainage)/Predicted1/Filter/ApsimFileReader" />
          </GDFilter>
        </Plot>
        <Plot name="Predicted2" shortcut="/simulations/1100mm/GraphReport-DCD/DCDLeach (vs drainage)/Predicted2">
          <GDFilter name="Filter" shortcut="/simulations/1100mm/GraphReport-DCD/DCDLeach (vs drainage)/Predicted2/Filter">
            <GDApsimFileReader name="ApsimFileReader" shortcut="/simulations/1100mm/GraphReport-DCD/DCDLeach (vs drainage)/Predicted2/Filter/ApsimFileReader" />
          </GDFilter>
        </Plot>
        <Plot name="Observed2a">
          <colour>-65536</colour>
          <SeriesType>No line</SeriesType>
          <PointType>Circle</PointType>
          <X>Cumulative Lys8.Drain</X>
          <Y>Cumulative Lys8.DCDLeach</Y>
          <GDApsimFileReader name="ApsimFileReader">
            <FileName>P21Lysimeters(Horotiu-2200-WithDCD).dat</FileName>
          </GDApsimFileReader>
        </Plot>
        <Plot name="Observed2b">
          <colour>-65536</colour>
          <SeriesType>No line</SeriesType>
          <PointType>Circle</PointType>
          <Y>Cumulative Lys17.DCDLeach</Y>
          <X>Cumulative Lys17.Drain</X>
          <GDApsimFileReader name="ApsimFileReader">
            <FileName>P21Lysimeters(Horotiu-2200-WithDCD).dat</FileName>
          </GDApsimFileReader>
        </Plot>
        <Plot name="Observed2c">
          <colour>-65536</colour>
          <SeriesType>No line</SeriesType>
          <PointType>Circle</PointType>
          <X>Cumulative Lys30.Drain</X>
          <Y>Cumulative Lys30.DCDLeach</Y>
          <GDApsimFileReader name="ApsimFileReader">
            <FileName>P21Lysimeters(Horotiu-2200-WithDCD).dat</FileName>
          </GDApsimFileReader>
        </Plot>
        <Plot name="Observed2d">
          <colour>-65536</colour>
          <SeriesType>No line</SeriesType>
          <PointType>Circle</PointType>
          <X>Cumulative Lys44.Drain</X>
          <Y>Cumulative Lys44.DCDLeach</Y>
          <GDApsimFileReader name="ApsimFileReader">
            <FileName>P21Lysimeters(Horotiu-2200-WithDCD).dat</FileName>
          </GDApsimFileReader>
        </Plot>
      </Graph>
    </GraphReport>
  </folder>
</folder>