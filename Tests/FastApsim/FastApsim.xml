<Simulation>
   <Met>
     <FileName>C:\Users\hol353\Apsim\Tests\FastApsim\Goondiwindi.met</FileName>
   </Met>
   <Report>
     <FileName>C:\Users\hol353\Apsim\Tests\FastApsim\test.db</FileName>
      <Variables>
         <Variable>Year</Variable>
         <Variable>Day</Variable>
         <Variable>Depth</Variable>
      </Variables>
   </Report>
   <SoilWat>
     
   </SoilWat>
   <Manager>
      <Script Language="CS">
         using System;
         public class Manager
         {
         [Ref(".simulation.met")] Met Met;
         public event SowDelegate Sow;
         public event NullTypeDelegate Harvest;
         public event NullTypeDelegate KillCrop;
         [EventHandler] public void OnPrepare()
            {
            if (Met.Day == 100)
               {
               SowType SowData = new SowType();
               SowData.RowSpacing = 500;
               SowData.Depth = 50;
               SowData.MaxCover = 1.0;
               SowData.BudNumber = 1.0;
               SowData.Population = 150;
               if (Sow != null)
                  Sow.Invoke(SowData);
               }
            else if (Met.Day == 273)
               {
               Harvest.Invoke();
               KillCrop.Invoke();
               }
            }
         }
      </Script>
   </Manager>
   <MicroMet>

   </MicroMet>
   <Plant>
      <Name>Wheat</Name>
      <CropType>wheat</CropType>
      <Population>
         <Value>4</Value>
      </Population>
      <AnnualPlantArbitrator name="Arbitrator">
         <DMSink>Stem</DMSink>
         <NSink>Stem</NSink>
      </AnnualPlantArbitrator>
      <Phenology>
         <VernalisationCW name="Vernalisation">
            <StartStageForEffects>Emergence</StartStageForEffects>
            <EndStageForEffects>FloralInitiation</EndStageForEffects>
            <StartStageForCumulativeVD>Germination</StartStageForCumulativeVD>
            <EndStageForCumulativeVD>FloralInitiation</EndStageForCumulativeVD>
            <VernSens>1.5</VernSens>
            <PhotopSens>3.0</PhotopSens>
            <TemperatureFunction name="VDModel">
               <XYPairs>
                  <XY>0 0</XY>
                  <XY>2 1</XY>
                  <XY>15 0</XY>
               </XYPairs>
            </TemperatureFunction>
            <PhotoperiodFunction name="Photoperiod">
               <Twilight type="text" description="Twilight">-6</Twilight>
            </PhotoperiodFunction>
         </VernalisationCW>
         <TemperatureFunction name="ThermalTime">
            <XYPairs>
               <XY>0 0</XY>
               <XY>26 26</XY>
               <XY>34 0</XY>
            </XYPairs>
         </TemperatureFunction>
         <GerminatingPhase name="Germinating">
            <Start>Sowing</Start>
            <End>Germination</End>
         </GerminatingPhase>
         <EmergingPhase name="Emerging">
            <Start>Germination</Start>
            <End>Emergence</End>
            <ShootLag units="oCd" description="Time lag before linear coleoptile growth starts">40.0</ShootLag>
            <ShootRate units="oCd/mm" description="Growing deg day increase with depth for coleoptile">1.50</ShootRate>
            <GenericFunction name="ThermalTime">
               <XProperty>parent(plant).Phenology.Vernalisation.CrownTemperature</XProperty>
               <XYPairs>
                  <XY>0 0</XY>
                  <XY>26 26</XY>
                  <XY>34 0</XY>
               </XYPairs>
            </GenericFunction>
         </EmergingPhase>
         <GenericPhase name="Inductive">
            <Start>Emergence</Start>
            <End>FloralInitiation</End>
            <Constant name="Target">
               <Value>401</Value>
            </Constant>
            <GenericFunction name="ThermalTime">
               <XProperty>parent(plant).Phenology.Vernalisation.CrownTemperature</XProperty>
               <XYPairs>
                  <XY> 0 0</XY>
                  <XY> 26  26</XY>
                  <XY> 34  0</XY>
               </XYPairs>
            </GenericFunction>
            <MinimumFunction name="Stress">
               <Property>parent(plant).Phenology.Vernalisation.VernEff parent(plant).Phenology.Vernalisation.PhotopEff</Property>
            </MinimumFunction>
         </GenericPhase>
         <GenericPhase name="FloralInitiationToFlagLeaf">
            <Start>FloralInitiation</Start>
            <End>FlagLeaf</End>
            <Constant name="Target">
               <Value>222</Value>
            </Constant>
            <GenericFunction name="ThermalTime">
               <XProperty>parent(plant).Phenology.Vernalisation.CrownTemperature</XProperty>
               <XYPairs>
                  <XY> 0 0</XY>
                  <XY> 26  26</XY>
                  <XY> 34  0</XY>
               </XYPairs>
            </GenericFunction>
            <MinimumFunction name="Stress">
               <Property>parent(plant).Phenology.Vernalisation.VernEff parent(plant).Phenology.Vernalisation.PhotopEff</Property>
            </MinimumFunction>
         </GenericPhase>
         <GenericPhase name="FlagLeafToFlowering">
            <Start>FlagLeaf</Start>
            <End>Flowering</End>
            <Constant name="Target">
               <Value>333</Value>
            </Constant>
            <GenericFunction name="ThermalTime">
               <XProperty>parent(plant).Phenology.Vernalisation.CrownTemperature</XProperty>
               <XYPairs>
                  <XY> 0 0</XY>
                  <XY> 26  26</XY>
                  <XY> 34  0</XY>
               </XYPairs>
            </GenericFunction>
            <MinimumFunction name="Stress">
               <Property>parent(plant).Phenology.Vernalisation.VernEff parent(plant).Phenology.Vernalisation.PhotopEff</Property>
            </MinimumFunction>
         </GenericPhase>
         <GenericPhase name="FloweringToGrainFilling">
            <Start>Flowering</Start>
            <End>StartGrainFill</End>
            <Constant name="Target">
               <Value>120</Value>
            </Constant>
            <GenericFunction name="ThermalTime">
               <XProperty>parent(plant).Phenology.Vernalisation.CrownTemperature</XProperty>
               <XYPairs>
                  <XY> 0 0</XY>
                  <XY> 26  26</XY>
                  <XY> 34  0</XY>
               </XYPairs>
            </GenericFunction>
         </GenericPhase>
         <GenericPhase name="GrainFilling">
            <Start>StartGrainFill</Start>
            <End>EndGrainFill</End>
            <Constant name="Target">
               <Value>545</Value>
            </Constant>
            <GenericFunction name="ThermalTime">
               <XProperty>parent(plant).Phenology.Vernalisation.CrownTemperature</XProperty>
               <XYPairs>
                  <XY> 0 0</XY>
                  <XY> 26  26</XY>
                  <XY> 34  0</XY>
               </XYPairs>
            </GenericFunction>
         </GenericPhase>
         <GenericPhase name="Maturing">
            <Start>EndGrainFill</Start>
            <End>Maturity</End>
            <Constant name="Target">
               <Value>36</Value>
            </Constant>
            <GenericFunction name="ThermalTime">
               <XProperty>parent(plant).Phenology.Vernalisation.CrownTemperature</XProperty>
               <XYPairs>
                  <XY> 0 0</XY>
                  <XY> 26  26</XY>
                  <XY> 34  0</XY>
               </XYPairs>
            </GenericFunction>
         </GenericPhase>
         <GenericPhase name="MaturityToHarvestRipe">
            <Start>Maturity</Start>
            <End>HarvestRipe</End>
            <Constant name="Target">
               <Value>1</Value>
            </Constant>
            <GenericFunction name="ThermalTime">
               <XProperty>parent(plant).Phenology.Vernalisation.CrownTemperature</XProperty>
               <XYPairs>
                  <XY> 0 0</XY>
                  <XY> 26  26</XY>
                  <XY> 34  0</XY>
               </XYPairs>
            </GenericFunction>
         </GenericPhase>
         <EndPhase name="ReadyForHarvesting">
            <Start>HarvestRipe</Start>
            <End>Unused</End>
            <TemperatureFunction name="ThermalTime">
               <XYPairs>
                  <XY>0 0</XY>
                  <XY>26 26</XY>
                  <XY>34 0</XY>
               </XYPairs>
            </TemperatureFunction>
         </EndPhase>
      </Phenology>
      <Leaf>
         <Frgr>1</Frgr>
         <PrimaryBudNo>1</PrimaryBudNo>
         <MaxCover>1.0</MaxCover>
         <KDead>0.5</KDead>
         <GenericFunction name="FrostFraction">
            <XProperty>.Simulation.Met.MinT</XProperty>
            <XYPairs>
               <XY>-1 0.0</XY>
               <XY>0 0.0</XY>
            </XYPairs>
         </GenericFunction>
         <MaxNodeNo>40</MaxNodeNo>
         <InitialAreas>200 </InitialAreas>
         <InitialAges>95  </InitialAges>
         <InitialiseStage>Emergence</InitialiseStage>
         <InitialLeafPrimordia>4</InitialLeafPrimordia>
         <FinalNodeNoEstimate type="text" description="FinalNodeNoEstimate">20</FinalNodeNoEstimate>
         <Biomass name="Live" />
         <Biomass name="Dead" />
         <GenericFunction name="ExtinctionCoeff">
            <XProperty>parent(plant).Leaf.LAI</XProperty>
            <XYPairs>
               <XY> 0 0.5</XY>
               <XY> 0.45 0.45</XY>
            </XYPairs>
         </GenericFunction>
         <GenericFunction name="Height">
            <XProperty>parent(plant).StageCode.Value</XProperty>
            <XYPairs>
               <XY>3 100</XY>
               <XY>6 1200</XY>
            </XYPairs>
         </GenericFunction>
         <RUEModel name="Photosynthesis">
            <Constant name="RUE">
               <Value type="text" description="Value">1.65</Value>
            </Constant>
            <WeightedTemperatureFunction name="FT">
               <MaximumTemperatureWeighting>0.75</MaximumTemperatureWeighting>
               <XYPairs>
                  <XY>0 0.0</XY>
                  <XY>10 1.0</XY>
                  <XY>25 1.0</XY>
                  <XY>35 0.0</XY>
               </XYPairs>
            </WeightedTemperatureFunction>
            <GenericFunction name="FVPD">
               <XProperty type="text" description="XProperty">parent(plant).Leaf.Photosynthesis.VPD</XProperty>
               <XYPairs>
                  <XY> 0 1.0</XY>
                  <XY>10 1.0</XY>
                  <XY>50 1.0</XY>
               </XYPairs>
            </GenericFunction>
         </RUEModel>

         <StageBasedInterpolation name="PartitionFraction">
            <Stages>Germination Emergence FloralInitiation FlagLeaf Flowering StartGrainFill EndGrainFill Maturity HarvestRipe </Stages>
            <Codes>    0.0       0.60      0.40             0.0        0.0         0.0         0.0           0.0     0.0 </Codes>
         </StageBasedInterpolation>
         <PhaseLookup name="XPartitionFraction">
            <PhaseLookupValue name="Early">
               <Start>Emergence</Start>
               <End>FloralInitiation</End>
               <Constant name="Function">
                  <Value>0.6</Value>
               </Constant>
            </PhaseLookupValue>
            <PhaseLookupValue name="Late">
               <Start>FloralInitiation</Start>
               <End>Flowering</End>
               <Constant name="Function">
                  <Value>0.4</Value>
               </Constant>
            </PhaseLookupValue>
         </PhaseLookup>
         <TemperatureFunction name="ThermalTime">
            <XYPairs>
               <XY> 0 0.0</XY>
               <XY>26 26.0</XY>
               <XY>34 0.0</XY>
            </XYPairs>
         </TemperatureFunction>
         <PhaseLookupValue name="NodeInitiationRate">
            <Start>Emergence</Start>
            <End>FloralInitiation</End>
            <Constant name="Function">
               <Value>95.0</Value>
            </Constant>
         </PhaseLookupValue>
         <PhaseLookupValue name="NodeAppearanceRate">
            <Start>Emergence</Start>
            <End>Maturity</End>
            <GenericFunction name="Function">
               <XProperty>parent(plant).Leaf.NodeNo</XProperty>
               <XYPairs>
                  <XY> 1 95</XY>
                  <XY>30 95</XY>
               </XYPairs>
            </GenericFunction>
         </PhaseLookupValue>
         <GenericFunction name="ExpansionStress">
            <XProperty>parent(plant).WaterSupplyDemandRatio</XProperty>
            <XYPairs>
               <XY> 0.0 0</XY>
               <XY> 1.0 1</XY>
            </XYPairs>
         </GenericFunction>
         <GenericFunction name="MaxArea">
            <XProperty>parent(plant).Leaf.NodeNo</XProperty>
            <XYPairs>
               <XY> 1  1400.0</XY>
               <XY> 5  3700.0</XY>
               <XY> 8  4800.0</XY>
               <XY>10  5600.0</XY>
            </XYPairs>
         </GenericFunction>
         <GenericFunction name="SpecificLeafArea">
            <XProperty>parent(plant).Leaf.NodeNo</XProperty>
            <XYPairs>
               <XY> 1 27000.0</XY>
               <XY> 10 22000.0</XY>
            </XYPairs>
         </GenericFunction>
         <GenericFunction name="GrowthDuration">
            <XProperty>parent(plant).Leaf.NodeNo</XProperty>
            <XYPairs>
               <XY> 1   95.0</XY>
               <XY> 10 190.0</XY>
            </XYPairs>
         </GenericFunction>
         <GenericFunction name="LagDuration">
            <XProperty>parent(plant).Leaf.NodeNo</XProperty>
            <XYPairs>
               <XY> 1  400.0</XY>
               <XY> 10 900.0</XY>
            </XYPairs>
         </GenericFunction>
         <GenericFunction name="SenescenceDuration">
            <XProperty>parent(plant).Leaf.NodeNo</XProperty>
            <XYPairs>
               <XY> 5 150.0</XY>
               <XY>30 150.0</XY>
            </XYPairs>
         </GenericFunction>
         <GenericFunction name="BranchingRate">
            <XProperty>parent(plant).Leaf.NodeNo</XProperty>
            <XYPairs>
               <XY> 4 0.0</XY>
               <XY> 5 0.7</XY>
               <XY> 8 0.0</XY>
            </XYPairs>
         </GenericFunction>
         <PhaseLookup name="PartitionFractionMax">
            <PhaseLookupValue name="Early">
               <Start>Emergence</Start>
               <End>Flowering</End>
               <Constant name="Function">
                  <Value>0.70</Value>
               </Constant>
            </PhaseLookupValue>
            <PhaseLookupValue name="Late">
               <Start>Flowering</Start>
               <End>Maturity</End>
               <Constant name="Function">
                  <Value>0.5</Value>
               </Constant>
            </PhaseLookupValue>
         </PhaseLookup>
         <StageBasedInterpolation name="MaximumNConc">
            <Stages>Germination Emergence FloralInitiation FlagLeaf Flowering StartGrainFill EndGrainFill Maturity HarvestRipe </Stages>
            <Codes>    0.063     0.063     0.032            0.020     0.015       0.012         0.008        0.008     0.008 </Codes>
         </StageBasedInterpolation>
         <StageBasedInterpolation name="MinimumNConc">
            <Stages>Germination Emergence FloralInitiation FlagLeaf Flowering StartGrainFill EndGrainFill Maturity HarvestRipe </Stages>
            <Codes>   0.025      0.025     0.021            0.016    0.010       0.0075       0.005         0.005     0.005    </Codes>
         </StageBasedInterpolation>
         <Constant name="StructuralNConc">
            <Value>0.003</Value>
         </Constant>
         <Constant name="InitialNConc">
            <Value>0.1</Value>
         </Constant>
      </Leaf>
      <GenericOrgan name="Stem">
         <Biomass name="Live" />
         <Biomass name="Dead" />
         <StageBasedInterpolation name="PartitionFraction">
            <Stages>Germination Emergence FloralInitiation FlagLeaf Flowering StartGrainFill EndGrainFill Maturity HarvestRipe </Stages>
            <Codes>    0.0       0.40      0.40             0.6       0.6         0.0         0.0           0.0     0.0 </Codes>
         </StageBasedInterpolation>
         <PhaseLookup name="XPartitionFraction">
            <PhaseLookupValue name="Early">
               <Start>Emergence</Start>
               <End>FloralInitiation</End>
               <Constant name="Function">
                  <Value>0.40</Value>
               </Constant>
            </PhaseLookupValue>
            <PhaseLookupValue name="Mid">
               <Start>FloralInitiation</Start>
               <End>Flowering</End>
               <Constant name="Function">
                  <Value>0.6</Value>
               </Constant>
            </PhaseLookupValue>
            <PhaseLookupValue name="Late">
               <Start>Flowering</Start>
               <End>Maturity</End>
               <Constant name="Function">
                  <Value>0.0</Value>
               </Constant>
            </PhaseLookupValue>
         </PhaseLookup>
         <PhaseLookup name="StructuralFraction">
            <PhaseLookupValue name="Early">
               <Start>Emergence</Start>
               <End>FlagLeaf</End>
               <Constant name="Function">
                  <Value>1.0</Value>
               </Constant>
            </PhaseLookupValue>
            <PhaseLookupValue name="Middle">
               <Start>FlagLeaf</Start>
               <End>Flowering</End>
               <Constant name="Function">
                  <Value>0.50</Value>
               </Constant>
            </PhaseLookupValue>
            <PhaseLookupValue name="Late">
               <Start>Flowering</Start>
               <End>Maturity</End>
               <Constant name="Function">
                  <Value>0.0</Value>
               </Constant>
            </PhaseLookupValue>
         </PhaseLookup>
         <PhaseLookup name="NStructuralFraction">
            <PhaseLookupValue name="Early">
               <Start>Emergence</Start>
               <End>FloralInitiation</End>
               <Constant name="Function">
                  <Value>0.33</Value>
               </Constant>
            </PhaseLookupValue>
            <PhaseLookupValue name="Middle">
               <Start>FloralInitiation</Start>
               <End>Flowering</End>
               <Constant name="Function">
                  <Value>0.33</Value>
               </Constant>
            </PhaseLookupValue>
            <PhaseLookupValue name="Late">
               <Start>Flowering</Start>
               <End>Maturity</End>
               <Constant name="Function">
                  <Value>0.0</Value>
               </Constant>
            </PhaseLookupValue>
         </PhaseLookup>
         <Constant name="XStructuralFraction">
            <Value>1.0</Value>
         </Constant>
         <StageBasedInterpolation name="MaximumNConc">
            <Stages>Germination Emergence FloralInitiation FlagLeaf Flowering StartGrainFill EndGrainFill Maturity HarvestRipe </Stages>
            <Codes>   0.050     0.050      0.020            0.015    0.010       0.0075        0.005        0.005    0.005    </Codes>
         </StageBasedInterpolation>
      </GenericOrgan>
      <GenericOrgan name="Ear">
         <Biomass name="Live" />
         <Biomass name="Dead" />
         <StageBasedInterpolation name="PartitionFraction">
            <Stages>Germination Emergence FloralInitiation FlagLeaf Flowering StartGrainFill EndGrainFill Maturity HarvestRipe </Stages>
            <Codes>    0.0       0.00      0.00             0.0       0.4         0.0         0.0           0.0     0.0 </Codes>
         </StageBasedInterpolation>
         <Constant name="StructuralFraction">
            <Value>1.0</Value>
         </Constant>
         <Constant name="NStructuralFraction">
            <Value>1.0</Value>
         </Constant>
         <StageBasedInterpolation name="MaximumNConc">
            <Stages>Germination Emergence FloralInitiation FlagLeaf Flowering StartGrainFill EndGrainFill Maturity HarvestRipe </Stages>
            <Codes>   0.050     0.050      0.020            0.015    0.010       0.0075        0.005        0.005    0.005    </Codes>
         </StageBasedInterpolation>
      </GenericOrgan>
      <Root>
         <ll>   0.29  0.29  0.29  0.29  0.3   0.31  0.32</ll>
         <kl>   0.07  0.07  0.07  0.07  0.05  0.05  0.04</kl>
         <xf>   1.00  1.00  1.00  1.00  1.00  1.00  1.00</xf>
         <InitialDM>0.2</InitialDM>
         <SpecificRootLength>40000</SpecificRootLength>
         <KNO3>0.02</KNO3>
         <KNH4>0.0</KNH4>
         <GenericFunction name="KLModifier">
            <XProperty>parent(plant).Leaf.LAI</XProperty>
            <XYPairs>
               <XY> 0.0 1.0</XY>
               <XY> 3.0 1.0</XY>
            </XYPairs>
         </GenericFunction>
         <PhaseLookup name="RootFrontVelocity">
            <PhaseLookupValue name="PreEmergence">
               <Start>Germination</Start>
               <End>Emergence</End>
               <Constant name="Function">
                  <Value>5</Value>
               </Constant>
            </PhaseLookupValue>
            <PhaseLookupValue name="PostEmergence">
               <Start>Emergence</Start>
               <End>Flowering</End>
               <Constant name="Function">
                  <Value>30</Value>
               </Constant>
            </PhaseLookupValue>
            <PhaseLookupValue name="PostFlowering">
               <Start>Flowering</Start>
               <End>Maturity</End>
               <Constant name="Function">
                  <Value>0</Value>
               </Constant>
            </PhaseLookupValue>
         </PhaseLookup>
         <Constant name="PartitionFraction">
            <Value>0.25</Value>
         </Constant>
         <TemperatureFunction name="TemperatureEffect">
            <XYPairs>
               <XY> 0 0.0</XY>
               <XY>25 1.0</XY>
               <XY>35 0.0</XY>
            </XYPairs>
         </TemperatureFunction>
         <Constant name="MaximumNConc">
            <Value>0.01</Value>
         </Constant>
         <Constant name="MaxDailyNUptake">
            <Value>6.0</Value>
         </Constant>
      </Root>
      <ReproductiveOrgan name="Grain">
         <MaximumSize>0.042</MaximumSize>
         <RipeStage>Ripe</RipeStage>
         <Biomass name="Live" />
         <Biomass name="Dead" />
         <Biomass name="Live" />
         <Biomass name="Dead" />
         <GenericFunction name="NumberFunction">
            <XProperty>parent(plant).Stem.Live.Wt</XProperty>
            <XYPairs>
               <XY>0 0</XY>
               <XY>1000 25000</XY>
            </XYPairs>
         </GenericFunction>
         <PhaseLookup name="FillingRate">
            <PhaseLookupValue name="EarlyGrainGrowth">
               <Start>Flowering</Start>
               <End>StartGrainFill</End>
               <TemperatureFunction name="Function">
                  <XYPairs>
                     <XY>0 0.0</XY>
                     <XY>26 0.001</XY>
                     <XY>30 0.001</XY>
                     <XY>35 0.001</XY>
                  </XYPairs>
               </TemperatureFunction>
            </PhaseLookupValue>
            <PhaseLookupValue name="LateGrainGrowth">
               <Start>StartGrainFill</Start>
               <End>Maturity</End>
               <TemperatureFunction name="Function">
                  <XYPairs>
                     <XY>0 0.0</XY>
                     <XY>26 0.002</XY>
                     <XY>30 0.002</XY>
                     <XY>35 0.002</XY>
                  </XYPairs>
               </TemperatureFunction>
            </PhaseLookupValue>
         </PhaseLookup>
         <PhaseLookup name="NFillingRate">
            <PhaseLookupValue name="EarlyGrainGrowth">
               <Start>Flowering</Start>
               <End>Maturity</End>
               <TemperatureFunction name="Function">
                  <XYPairs>
                     <XY>0 0.0</XY>
                     <XY>25 0.000055</XY>
                     <XY>30 0.000055</XY>
                     <XY>35 0.000055</XY>
                  </XYPairs>
               </TemperatureFunction>
            </PhaseLookupValue>
         </PhaseLookup>
         <Constant name="MaxNConcDailyGrowth">
            <Value>0.03</Value>
         </Constant>
         <Constant name="WaterContent">
            <Value>0.12</Value>
         </Constant>
      </ReproductiveOrgan>
      <StageBasedInterpolation name="StageCode">
         <Stages>Sowing      Germination     Emergence  FloralInitiation FlagLeaf Flowering  StartGrainFill EndGrainFill   Maturity  HarvestRipe </Stages>
         <Codes>   1               2              3            4             5            6            7             8           9      10</Codes>
      </StageBasedInterpolation>
      <StageBasedInterpolation name="ZadokStage">
         <Stages>Sowing      Germination     Emergence  FloralInitiation FlagLeaf Flowering  StartGrainFill EndGrainFill   Maturity  HarvestRipe </Stages>
         <Codes>   0               5              10            30             37       65          70             85           90      90</Codes>
      </StageBasedInterpolation>
      <Summary />
   </Plant>
</Simulation>