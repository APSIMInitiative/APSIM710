<folder version="28" name="Simulations">
  <simulation name="Paddock1">
    <clock name="Clock" />
    <metfile name="met">
      <filename>79075.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">A and R Weidemann^Wep 1.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">06-Jun</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">06-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">11</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('06-Jun')
StationNumber=79075
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">30-Jul</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">38</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock1 Yearly.out</filename>
        <Title>2004^A and R Weidemann^Wep 1</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^A and R Weidemann^Wep 1</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.174</BD>
            <AirDry units="mm/mm">0.125</AirDry>
            <LL15 units="mm/mm">0.250</LL15>
            <DUL units="mm/mm">0.426</DUL>
            <SAT units="mm/mm">0.527</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.175</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.253</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.253</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.277</LL>
              <KL>0.040</KL>
              <XF>0.424</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.277</LL>
              <KL>0.040</KL>
              <XF>0.424</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.305</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.337</LL>
              <KL>0.020</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.390</LL>
              <KL>0.020</KL>
              <XF>1</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.174</BD>
            <AirDry>0.202</AirDry>
            <LL15>0.253</LL15>
            <DUL>0.407</DUL>
            <SAT>0.527</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.174</BD>
            <AirDry>0.253</AirDry>
            <LL15>0.253</LL15>
            <DUL>0.407</DUL>
            <SAT>0.527</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.136</BD>
            <AirDry>0.277</AirDry>
            <LL15>0.277</LL15>
            <DUL>0.428</DUL>
            <SAT>0.541</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.136</BD>
            <AirDry>0.277</AirDry>
            <LL15>0.277</LL15>
            <DUL>0.428</DUL>
            <SAT>0.541</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.187</BD>
            <AirDry>0.305</AirDry>
            <LL15>0.305</LL15>
            <DUL>0.466</DUL>
            <SAT>0.522</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.198</BD>
            <AirDry>0.337</AirDry>
            <LL15>0.337</LL15>
            <DUL>0.447</DUL>
            <SAT>0.518</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.204</BD>
            <AirDry>0.390</AirDry>
            <LL15>0.390</LL15>
            <DUL>0.466</DUL>
            <SAT>0.516</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>40</DiffusConst>
          <DiffusSlope>16</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.700</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1.050</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.450</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.450</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.300</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.300</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.300</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.250</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.250</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">8.200</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.500</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.500</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.200</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">14</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.17</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>6</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.25</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>6</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.31</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>4</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.33</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.2</EC>
            <PH units="CaCl2">7.6</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.3</EC>
            <PH>7.8</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.4</EC>
            <PH>8</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.6</EC>
            <PH>8.3</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock2">
    <clock name="Clock" />
    <metfile name="met">
      <filename>53115.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Andrew Hansen^Willow Dam.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">12-May</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">09-Jun</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Bellaroi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">09-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">69</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('12-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('09-Jun')
StationNumber=53115
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">30-Aug</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">35</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock2 Yearly.out</filename>
        <Title>2004^Andrew Hansen^Willow Dam</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Andrew Hansen^Willow Dam</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.140</BD>
            <AirDry units="mm/mm">0.136</AirDry>
            <LL15 units="mm/mm">0.272</LL15>
            <DUL units="mm/mm">0.505</DUL>
            <SAT units="mm/mm">0.555</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">150</Thickness>
              <LL units="mm/mm">0.272</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.272</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.297</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.284</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.315</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.345</LL>
              <KL>0.020</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.398</LL>
              <KL>0.010</KL>
              <XF>1</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.100</BD>
            <AirDry>0.218</AirDry>
            <LL15>0.272</LL15>
            <DUL>0.505</DUL>
            <SAT>0.555</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.120</BD>
            <AirDry>0.297</AirDry>
            <LL15>0.297</LL15>
            <DUL>0.496</DUL>
            <SAT>0.546</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.160</BD>
            <AirDry>0.284</AirDry>
            <LL15>0.284</LL15>
            <DUL>0.483</DUL>
            <SAT>0.533</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.210</BD>
            <AirDry>0.315</AirDry>
            <LL15>0.315</LL15>
            <DUL>0.462</DUL>
            <SAT>0.512</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.250</BD>
            <AirDry>0.345</AirDry>
            <LL15>0.345</LL15>
            <DUL>0.449</DUL>
            <SAT>0.499</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.280</BD>
            <AirDry>0.398</AirDry>
            <LL15>0.398</LL15>
            <DUL>0.436</DUL>
            <SAT>0.486</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>3.5</SummerCona>
          <SummerU>6</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>3.5</WinterCona>
          <WinterU>6</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>40</DiffusConst>
          <DiffusSlope>16</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <SWCON units="0-1">0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>40</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <OC units="Total %">1.200</OC>
            <FBiom units="0-1">0.020</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.800</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.300</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.200</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.100</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.100</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">7.500</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7.600</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7.750</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.200</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">150</Thickness>
            <NO3 units="ppm">42</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.49</SW>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <NO3>8</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.51</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>8</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.5</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>4</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.48</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>1</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.41</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>1</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.4</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>0</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.34</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">150</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.4</EC>
            <PH units="CaCl2">7.5</PH>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.3</EC>
            <PH>7.8</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.4</EC>
            <PH>8.1</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.6</EC>
            <PH>8.2</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.7</EC>
            <PH>8.1</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.7</EC>
            <PH>8.2</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.7</EC>
            <PH>8.2</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock3">
    <clock name="Clock" />
    <metfile name="met">
      <filename>53018.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Angus Wilson^Wisemans.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">12-May</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">19-May</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Babbler</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">08-Feb</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">55</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('12-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('19-May')
StationNumber=53018
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">18-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">4.5</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock3 Yearly.out</filename>
        <Title>2004^Angus Wilson^Wisemans</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Angus Wilson^Wisemans</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.330</BD>
            <AirDry units="mm/mm">0.111</AirDry>
            <LL15 units="mm/mm">0.221</LL15>
            <DUL units="mm/mm">0.429</DUL>
            <SAT units="mm/mm">0.479</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">150</Thickness>
              <LL units="mm/mm">0.221</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.223</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.240</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.253</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.290</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.323</LL>
              <KL>0.020</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.384</LL>
              <KL>0.010</KL>
              <XF>1</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.300</BD>
            <AirDry>0.178</AirDry>
            <LL15>0.223</LL15>
            <DUL>0.429</DUL>
            <SAT>0.479</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.320</BD>
            <AirDry>0.240</AirDry>
            <LL15>0.240</LL15>
            <DUL>0.422</DUL>
            <SAT>0.472</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.350</BD>
            <AirDry>0.253</AirDry>
            <LL15>0.253</LL15>
            <DUL>0.410</DUL>
            <SAT>0.460</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.370</BD>
            <AirDry>0.290</AirDry>
            <LL15>0.290</LL15>
            <DUL>0.404</DUL>
            <SAT>0.454</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.380</BD>
            <AirDry>0.323</AirDry>
            <LL15>0.323</LL15>
            <DUL>0.400</DUL>
            <SAT>0.450</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.380</BD>
            <AirDry>0.384</AirDry>
            <LL15>0.384</LL15>
            <DUL>0.401</DUL>
            <SAT>0.451</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>3.5</SummerCona>
          <SummerU>6</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>3.5</WinterCona>
          <WinterU>6</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>40</DiffusConst>
          <DiffusSlope>16</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <SWCON units="0-1">0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>40</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <OC units="Total %">1.200</OC>
            <FBiom units="0-1">0.020</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.800</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.300</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.200</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.100</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.100</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">7.500</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7.600</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7.750</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.200</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">150</Thickness>
            <NO3 units="ppm">12</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.42</SW>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <NO3>10</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.43</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>8</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.42</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>12</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.41</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>9</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.37</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>8</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.38</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>9</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.4</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">150</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <OC units="Total %">0.3</OC>
            <EC units="1:5 dS/m">0.3</EC>
            <PH units="CaCl2">7.5</PH>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.3</EC>
            <PH>7.8</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.4</EC>
            <PH>8.1</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.5</EC>
            <PH>8.2</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.8</EC>
            <PH>8.1</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>1.1</EC>
            <PH>7.7</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>1.1</EC>
            <PH>6.7</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock4">
    <clock name="Clock" />
    <metfile name="met">
      <filename>78072.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Anthony Patton^House.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">21-Jun</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Lorikeet</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">21-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">30</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('21-Jun')
StationNumber=78072
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock4 Yearly.out</filename>
        <Title>2004^Anthony Patton^House</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Anthony Patton^House</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.173</BD>
            <AirDry units="mm/mm">0.120</AirDry>
            <LL15 units="mm/mm">0.200</LL15>
            <DUL units="mm/mm">0.410</DUL>
            <SAT units="mm/mm">0.490</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.200</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.190</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.200</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.240</LL>
              <KL>0.040</KL>
              <XF>0.960</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.270</LL>
              <KL>0.040</KL>
              <XF>0.917</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.280</LL>
              <KL>0.040</KL>
              <XF>0.809</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.321</LL>
              <KL>0.020</KL>
              <XF>0.791</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.332</LL>
              <KL>0.020</KL>
              <XF>0.679</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.231</BD>
            <AirDry>0.170</AirDry>
            <LL15>0.190</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.231</BD>
            <AirDry>0.200</AirDry>
            <LL15>0.200</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.175</BD>
            <AirDry>0.240</AirDry>
            <LL15>0.240</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.175</BD>
            <AirDry>0.270</AirDry>
            <LL15>0.270</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.201</BD>
            <AirDry>0.280</AirDry>
            <LL15>0.280</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.252</BD>
            <AirDry>0.321</AirDry>
            <LL15>0.321</LL15>
            <DUL>0.400</DUL>
            <SAT>0.480</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.278</BD>
            <AirDry>0.332</AirDry>
            <LL15>0.332</LL15>
            <DUL>0.400</DUL>
            <SAT>0.480</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>40</DiffusConst>
          <DiffusSlope>16</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.700</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.850</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">12</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.13</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>6</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.19</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>8</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.27</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>7</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.29</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.3</EC>
            <PH units="CaCl2">7.8</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.2</EC>
            <PH>7.8</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.3</EC>
            <PH>8.1</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.6</EC>
            <PH>8.1</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock5">
    <clock name="Clock" />
    <metfile name="met">
      <filename>78005.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Brad Martin^P13.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">07-May</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">07-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">5</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('07-May')
StationNumber=78005
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">02-Aug</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">22</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock5 Yearly.out</filename>
        <Title>2004^Brad Martin^P13</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Brad Martin^P13</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.450</BD>
            <AirDry units="mm/mm">0.075</AirDry>
            <LL15 units="mm/mm">0.140</LL15>
            <DUL units="mm/mm">0.334</DUL>
            <SAT units="mm/mm">0.414</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.125</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.152</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.152</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.165</LL>
              <KL>0.040</KL>
              <XF>0.355</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.165</LL>
              <KL>0.040</KL>
              <XF>0.355</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.271</LL>
              <KL>0.040</KL>
              <XF>0.323</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.271</LL>
              <KL>0.020</KL>
              <XF>0.323</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.316</LL>
              <KL>0.020</KL>
              <XF>0.323</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.260</BD>
            <AirDry>0.122</AirDry>
            <LL15>0.152</LL15>
            <DUL>0.341</DUL>
            <SAT>0.421</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.260</BD>
            <AirDry>0.152</AirDry>
            <LL15>0.152</LL15>
            <DUL>0.341</DUL>
            <SAT>0.421</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.281</BD>
            <AirDry>0.165</AirDry>
            <LL15>0.165</LL15>
            <DUL>0.352</DUL>
            <SAT>0.432</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.281</BD>
            <AirDry>0.165</AirDry>
            <LL15>0.165</LL15>
            <DUL>0.350</DUL>
            <SAT>0.430</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.243</BD>
            <AirDry>0.271</AirDry>
            <LL15>0.271</LL15>
            <DUL>0.351</DUL>
            <SAT>0.431</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.242</BD>
            <AirDry>0.271</AirDry>
            <LL15>0.271</LL15>
            <DUL>0.350</DUL>
            <SAT>0.430</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.338</BD>
            <AirDry>0.316</AirDry>
            <LL15>0.316</LL15>
            <DUL>0.344</DUL>
            <SAT>0.424</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>88</DiffusConst>
          <DiffusSlope>35.4</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.700</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1.050</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.450</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.450</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.300</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.300</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.300</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.250</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.250</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">8.500</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.800</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.800</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">14</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.07</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>6</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.17</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.2</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>2</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.21</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.2</EC>
            <PH units="CaCl2">7.2</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.46</EC>
            <PH>7.9</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.5</EC>
            <PH>8.2</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.63</EC>
            <PH>8.2</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock6">
    <clock name="Clock" />
    <metfile name="met">
      <filename>77052.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">C and J Kelly ^Galvins.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">10-Jun</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">10-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">4</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('10-Jun')
StationNumber=77052
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock6 Yearly.out</filename>
        <Title>2004^C and J Kelly ^Galvins</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^C and J Kelly ^Galvins</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.490</BD>
            <AirDry units="mm/mm">0.095</AirDry>
            <LL15 units="mm/mm">0.190</LL15>
            <DUL units="mm/mm">0.219</DUL>
            <SAT units="mm/mm">0.353</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.145</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.190</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.190</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.190</LL>
              <KL>0.040</KL>
              <XF>0.434</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.190</LL>
              <KL>0.040</KL>
              <XF>0.387</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.190</LL>
              <KL>0.040</KL>
              <XF>0.387</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.205</LL>
              <KL>0.020</KL>
              <XF>0.387</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.240</LL>
              <KL>0.020</KL>
              <XF>0.387</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.446</BD>
            <AirDry>0.152</AirDry>
            <LL15>0.190</LL15>
            <DUL>0.227</DUL>
            <SAT>0.361</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.446</BD>
            <AirDry>0.190</AirDry>
            <LL15>0.190</LL15>
            <DUL>0.227</DUL>
            <SAT>0.361</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.388</BD>
            <AirDry>0.190</AirDry>
            <LL15>0.190</LL15>
            <DUL>0.244</DUL>
            <SAT>0.377</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.388</BD>
            <AirDry>0.190</AirDry>
            <LL15>0.190</LL15>
            <DUL>0.244</DUL>
            <SAT>0.377</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.476</BD>
            <AirDry>0.190</AirDry>
            <LL15>0.190</LL15>
            <DUL>0.257</DUL>
            <SAT>0.378</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.556</BD>
            <AirDry>0.205</AirDry>
            <LL15>0.205</LL15>
            <DUL>0.259</DUL>
            <SAT>0.375</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.562</BD>
            <AirDry>0.240</AirDry>
            <LL15>0.240</LL15>
            <DUL>0.269</DUL>
            <SAT>0.367</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>220</DiffusConst>
          <DiffusSlope>22</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.700</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1.050</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.450</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.450</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.300</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.300</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.250</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.250</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.250</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">8.500</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.200</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.200</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.700</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.600</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">9</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.05</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>9</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.12</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>5</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.26</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>2</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.3</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.1</EC>
            <PH units="CaCl2">7.8</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.2</EC>
            <PH>8</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.5</EC>
            <PH>8.2</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.7</EC>
            <PH>8.2</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock7">
    <clock name="Clock" />
    <metfile name="met">
      <filename>77014.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Cameron Warne^Arnolds W2.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">03-Jun</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">03-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('03-Jun')
StationNumber=77014
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">13-Aug</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">23</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock7 Yearly.out</filename>
        <Title>2004^Cameron Warne^Arnolds W2</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Cameron Warne^Arnolds W2</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.360</BD>
            <AirDry units="mm/mm">0.075</AirDry>
            <LL15 units="mm/mm">0.150</LL15>
            <DUL units="mm/mm">0.334</DUL>
            <SAT units="mm/mm">0.487</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.125</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.192</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.192</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.217</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.217</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.217</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.217</LL>
              <KL>0.020</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.228</LL>
              <KL>0.020</KL>
              <XF>1</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.293</BD>
            <AirDry>0.154</AirDry>
            <LL15>0.192</LL15>
            <DUL>0.341</DUL>
            <SAT>0.512</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.293</BD>
            <AirDry>0.192</AirDry>
            <LL15>0.192</LL15>
            <DUL>0.341</DUL>
            <SAT>0.512</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.374</BD>
            <AirDry>0.217</AirDry>
            <LL15>0.217</LL15>
            <DUL>0.352</DUL>
            <SAT>0.482</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.374</BD>
            <AirDry>0.217</AirDry>
            <LL15>0.217</LL15>
            <DUL>0.350</DUL>
            <SAT>0.482</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.412</BD>
            <AirDry>0.217</AirDry>
            <LL15>0.217</LL15>
            <DUL>0.351</DUL>
            <SAT>0.467</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.423</BD>
            <AirDry>0.217</AirDry>
            <LL15>0.217</LL15>
            <DUL>0.350</DUL>
            <SAT>0.463</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.455</BD>
            <AirDry>0.228</AirDry>
            <LL15>0.228</LL15>
            <DUL>0.344</DUL>
            <SAT>0.451</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>88</DiffusConst>
          <DiffusSlope>35.4</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.700</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1.050</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.450</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.450</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.300</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.300</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.300</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.250</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.250</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">8.500</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.100</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.100</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>5.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">9</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.05</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>5</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.17</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>5</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.25</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.26</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.15</EC>
            <PH units="CaCl2">8</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.2</EC>
            <PH>8.2</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.46</EC>
            <PH>8.5</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.61</EC>
            <PH>8.6</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock8">
    <clock name="Clock" />
    <metfile name="met">
      <filename>8051.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Clancy Michael^Michael.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">15-Jun</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">23-May</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Annuello</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">26-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">10</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('15-Jun')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('23-May')
StationNumber=8051
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">17-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">46.2000007629395</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock8 Yearly.out</filename>
        <Title>2004^Clancy Michael^Michael</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Clancy Michael^Michael</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.600</BD>
            <AirDry units="mm/mm">0.040</AirDry>
            <LL15 units="mm/mm">0.080</LL15>
            <DUL units="mm/mm">0.250</DUL>
            <SAT units="mm/mm">0.370</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">150</Thickness>
              <LL units="mm/mm">0.080</LL>
              <KL units="/day">0.080</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.080</LL>
              <KL>0.080</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.130</LL>
              <KL>0.080</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.140</LL>
              <KL>0.080</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.200</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.210</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.220</LL>
              <KL>0.030</KL>
              <XF>1</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.640</BD>
            <AirDry>0.072</AirDry>
            <LL15>0.080</LL15>
            <DUL>0.300</DUL>
            <SAT>0.350</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.540</BD>
            <AirDry>0.130</AirDry>
            <LL15>0.130</LL15>
            <DUL>0.340</DUL>
            <SAT>0.390</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.650</BD>
            <AirDry>0.140</AirDry>
            <LL15>0.140</LL15>
            <DUL>0.300</DUL>
            <SAT>0.350</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.690</BD>
            <AirDry>0.200</AirDry>
            <LL15>0.200</LL15>
            <DUL>0.280</DUL>
            <SAT>0.330</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.650</BD>
            <AirDry>0.210</AirDry>
            <LL15>0.210</LL15>
            <DUL>0.300</DUL>
            <SAT>0.350</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.640</BD>
            <AirDry>0.220</AirDry>
            <LL15>0.220</LL15>
            <DUL>0.300</DUL>
            <SAT>0.350</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>88</DiffusConst>
          <DiffusSlope>35</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <SWCON units="0-1">0.700</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.700</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.700</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.700</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.700</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.700</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.700</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <OC units="Total %">0.830</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.560</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.350</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.240</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.180</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.140</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.130</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">6.500</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7.700</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.400</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.700</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.700</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.700</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">31</NO3>
            <NH4 units="ppm">0.01</NH4>
            <SW units="mm/mm">0.15</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>10</NO3>
            <NH4>0.01</NH4>
            <SW>0.1</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3</NO3>
            <NH4>0.01</NH4>
            <SW>0.1</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3</NO3>
            <NH4>0.01</NH4>
            <SW>0.17</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>1</NO3>
            <NH4>0.01</NH4>
            <SW>0.21</SW>
          </Layer>
          <Layer>
            <Thickness>500</Thickness>
            <NO3>1</NO3>
            <NH4>0.01</NH4>
            <SW>0.22</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.1</EC>
            <PH units="CaCl2">5.9</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.1</EC>
            <PH>6.2</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.2</EC>
            <PH>7.1</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.3</EC>
            <PH>7.3</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock9">
    <clock name="Clock" />
    <metfile name="met">
      <filename>77008.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">David Smith^Paddock 1.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">31-May</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">11-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">14</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('31-May')
StationNumber=77008
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">31-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">4</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock9 Yearly.out</filename>
        <Title>2004^David Smith^Paddock 1</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^David Smith^Paddock 1</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.360</BD>
            <AirDry units="mm/mm">0.073</AirDry>
            <LL15 units="mm/mm">0.123</LL15>
            <DUL units="mm/mm">0.334</DUL>
            <SAT units="mm/mm">0.487</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.123</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.172</LL>
              <KL>0.060</KL>
              <XF>0.912</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.173</LL>
              <KL>0.040</KL>
              <XF>0.912</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.206</LL>
              <KL>0.040</KL>
              <XF>0.671</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.210</LL>
              <KL>0.040</KL>
              <XF>0.671</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.238</LL>
              <KL>0.040</KL>
              <XF>0.484</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.249</LL>
              <KL>0.020</KL>
              <XF>0.486</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.276</LL>
              <KL>0.020</KL>
              <XF>0.382</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.293</BD>
            <AirDry>0.146</AirDry>
            <LL15>0.172</LL15>
            <DUL>0.341</DUL>
            <SAT>0.512</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.293</BD>
            <AirDry>0.165</AirDry>
            <LL15>0.173</LL15>
            <DUL>0.341</DUL>
            <SAT>0.512</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.374</BD>
            <AirDry>0.206</AirDry>
            <LL15>0.206</LL15>
            <DUL>0.352</DUL>
            <SAT>0.482</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.374</BD>
            <AirDry>0.210</AirDry>
            <LL15>0.210</LL15>
            <DUL>0.350</DUL>
            <SAT>0.482</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.412</BD>
            <AirDry>0.238</AirDry>
            <LL15>0.238</LL15>
            <DUL>0.351</DUL>
            <SAT>0.467</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.423</BD>
            <AirDry>0.249</AirDry>
            <LL15>0.249</LL15>
            <DUL>0.350</DUL>
            <SAT>0.463</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.455</BD>
            <AirDry>0.276</AirDry>
            <LL15>0.276</LL15>
            <DUL>0.344</DUL>
            <SAT>0.451</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>88</DiffusConst>
          <DiffusSlope>35.4</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.700</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.850</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">9</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.09</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>4</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.15</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.21</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.25</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.3</EC>
            <PH units="CaCl2">7.7</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.5</EC>
            <PH>8.2</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>1</EC>
            <PH>8.5</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>1.4</EC>
            <PH>8.6</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock10">
    <clock name="Clock" />
    <metfile name="met">
      <filename>80024.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">G and B Hunt^Paddock 4.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">19-Apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">13-May</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">13-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">3.90000009536743</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('19-Apr')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('13-May')
StationNumber=80024
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock10 Yearly.out</filename>
        <Title>2004^G and B Hunt^Paddock 4</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^G and B Hunt^Paddock 4</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.400</BD>
            <AirDry units="mm/mm">0.110</AirDry>
            <LL15 units="mm/mm">0.220</LL15>
            <DUL units="mm/mm">0.304</DUL>
            <SAT units="mm/mm">0.442</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.160</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.221</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.221</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.209</LL>
              <KL>0.040</KL>
              <XF>0.434</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.209</LL>
              <KL>0.040</KL>
              <XF>0.434</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.196</LL>
              <KL>0.040</KL>
              <XF>0.371</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.196</LL>
              <KL>0.020</KL>
              <XF>0.371</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.196</LL>
              <KL>0.020</KL>
              <XF>0.371</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.370</BD>
            <AirDry>0.177</AirDry>
            <LL15>0.221</LL15>
            <DUL>0.310</DUL>
            <SAT>0.453</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.370</BD>
            <AirDry>0.221</AirDry>
            <LL15>0.221</LL15>
            <DUL>0.310</DUL>
            <SAT>0.453</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.530</BD>
            <AirDry>0.209</AirDry>
            <LL15>0.209</LL15>
            <DUL>0.310</DUL>
            <SAT>0.393</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.530</BD>
            <AirDry>0.209</AirDry>
            <LL15>0.209</LL15>
            <DUL>0.310</DUL>
            <SAT>0.393</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.572</BD>
            <AirDry>0.196</AirDry>
            <LL15>0.196</LL15>
            <DUL>0.327</DUL>
            <SAT>0.377</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.586</BD>
            <AirDry>0.196</AirDry>
            <LL15>0.196</LL15>
            <DUL>0.322</DUL>
            <SAT>0.372</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.586</BD>
            <AirDry>0.196</AirDry>
            <LL15>0.196</LL15>
            <DUL>0.322</DUL>
            <SAT>0.372</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>88</DiffusConst>
          <DiffusSlope>35.4</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.700</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1.050</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.450</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.450</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.300</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.300</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.300</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.250</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.250</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">8.200</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.600</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.600</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.500</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.500</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.800</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">28</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.07</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>8</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.16</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>4</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.26</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>4</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.25</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <OC units="Total %">1.2</OC>
            <EC units="1:5 dS/m">0.2</EC>
            <PH units="CaCl2">7.5</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.2</EC>
            <PH>7.9</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.5</EC>
            <PH>8.1</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.8</EC>
            <PH>8.3</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock11">
    <clock name="Clock" />
    <metfile name="met">
      <filename>80006.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Gavin Sait^Mahers.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">15-May</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Lorikeet</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">15-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">23.5</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('15-May')
StationNumber=80006
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">01-Sep</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">9.39999961853027</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock11 Yearly.out</filename>
        <Title>2004^Gavin Sait^Mahers</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Gavin Sait^Mahers</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.350</BD>
            <AirDry units="mm/mm">0.070</AirDry>
            <LL15 units="mm/mm">0.120</LL15>
            <DUL units="mm/mm">0.300</DUL>
            <SAT units="mm/mm">0.491</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.120</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.130</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.140</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.150</LL>
              <KL>0.040</KL>
              <XF>0.893</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.250</LL>
              <KL>0.040</KL>
              <XF>0.893</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.270</LL>
              <KL>0.040</KL>
              <XF>0.865</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.270</LL>
              <KL>0.020</KL>
              <XF>0.865</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.342</LL>
              <KL>0.020</KL>
              <XF>0.828</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.369</BD>
            <AirDry>0.111</AirDry>
            <LL15>0.130</LL15>
            <DUL>0.330</DUL>
            <SAT>0.483</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.369</BD>
            <AirDry>0.140</AirDry>
            <LL15>0.140</LL15>
            <DUL>0.370</DUL>
            <SAT>0.483</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.383</BD>
            <AirDry>0.150</AirDry>
            <LL15>0.150</LL15>
            <DUL>0.370</DUL>
            <SAT>0.478</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.383</BD>
            <AirDry>0.250</AirDry>
            <LL15>0.250</LL15>
            <DUL>0.370</DUL>
            <SAT>0.478</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.375</BD>
            <AirDry>0.270</AirDry>
            <LL15>0.270</LL15>
            <DUL>0.370</DUL>
            <SAT>0.481</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.384</BD>
            <AirDry>0.270</AirDry>
            <LL15>0.270</LL15>
            <DUL>0.370</DUL>
            <SAT>0.478</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.391</BD>
            <AirDry>0.342</AirDry>
            <LL15>0.342</LL15>
            <DUL>0.370</DUL>
            <SAT>0.475</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>88</DiffusConst>
          <DiffusSlope>35.4</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>84</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.700</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.700</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.850</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">14</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.07</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.11</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>2</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.23</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>4</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.26</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.1</EC>
            <PH units="CaCl2">6.3</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.2</EC>
            <PH>7.3</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.3</EC>
            <PH>7.9</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.4</EC>
            <PH>8.3</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock12">
    <clock name="Clock" />
    <metfile name="met">
      <filename>89032.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Graeme McCrow^WSM pdk.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">24-Jun</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">20-May</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Kelallac</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">20-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">10</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('24-Jun')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('20-May')
StationNumber=89032
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">15-Jul</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">30</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise2">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">13-Sep</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">23</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock12 Yearly.out</filename>
        <Title>2004^Graeme McCrow^WSM pdk</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Graeme McCrow^WSM pdk</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.300</BD>
            <AirDry units="mm/mm">0.096</AirDry>
            <LL15 units="mm/mm">0.193</LL15>
            <DUL units="mm/mm">0.377</DUL>
            <SAT units="mm/mm">0.450</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.193</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.253</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.236</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.273</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.273</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.306</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.340</LL>
              <KL>0.020</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.380</LL>
              <KL>0.020</KL>
              <XF>1</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.472</BD>
            <AirDry>0.215</AirDry>
            <LL15>0.253</LL15>
            <DUL>0.390</DUL>
            <SAT>0.440</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.472</BD>
            <AirDry>0.225</AirDry>
            <LL15>0.236</LL15>
            <DUL>0.393</DUL>
            <SAT>0.440</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.500</BD>
            <AirDry>0.273</AirDry>
            <LL15>0.273</LL15>
            <DUL>0.410</DUL>
            <SAT>0.433</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.450</BD>
            <AirDry>0.273</AirDry>
            <LL15>0.273</LL15>
            <DUL>0.420</DUL>
            <SAT>0.450</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.400</BD>
            <AirDry>0.306</AirDry>
            <LL15>0.306</LL15>
            <DUL>0.432</DUL>
            <SAT>0.470</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.400</BD>
            <AirDry>0.340</AirDry>
            <LL15>0.340</LL15>
            <DUL>0.432</DUL>
            <SAT>0.470</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.400</BD>
            <AirDry>0.380</AirDry>
            <LL15>0.380</LL15>
            <DUL>0.432</DUL>
            <SAT>0.470</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>88</DiffusConst>
          <DiffusSlope>35.4</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.700</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1.050</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.450</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.450</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.300</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.300</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.300</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.250</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.250</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">6</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>6.600</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>6.600</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7.300</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7.300</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">30</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.3</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>11</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.23</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.29</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>2</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.31</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.2</EC>
            <PH units="CaCl2">5.6</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0</EC>
            <PH>5.5</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.1</EC>
            <PH>5.9</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.3</EC>
            <PH>7.8</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock13">
    <clock name="Clock" />
    <metfile name="met">
      <filename>78072.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Harold Flett^Evans 7.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">16-Jun</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Mitre</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">08-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">34.5</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('16-Jun')
StationNumber=78072
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">16-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">5.5</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock13 Yearly.out</filename>
        <Title>2004^Harold Flett^Evans 7</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Harold Flett^Evans 7</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.173</BD>
            <AirDry units="mm/mm">0.120</AirDry>
            <LL15 units="mm/mm">0.200</LL15>
            <DUL units="mm/mm">0.410</DUL>
            <SAT units="mm/mm">0.490</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.200</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.190</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.200</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.240</LL>
              <KL>0.040</KL>
              <XF>0.960</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.270</LL>
              <KL>0.040</KL>
              <XF>0.917</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.280</LL>
              <KL>0.040</KL>
              <XF>0.809</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.321</LL>
              <KL>0.020</KL>
              <XF>0.791</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.332</LL>
              <KL>0.020</KL>
              <XF>0.679</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.231</BD>
            <AirDry>0.170</AirDry>
            <LL15>0.190</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.231</BD>
            <AirDry>0.200</AirDry>
            <LL15>0.200</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.175</BD>
            <AirDry>0.240</AirDry>
            <LL15>0.240</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.175</BD>
            <AirDry>0.270</AirDry>
            <LL15>0.270</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.201</BD>
            <AirDry>0.280</AirDry>
            <LL15>0.280</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.252</BD>
            <AirDry>0.321</AirDry>
            <LL15>0.321</LL15>
            <DUL>0.400</DUL>
            <SAT>0.480</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.278</BD>
            <AirDry>0.332</AirDry>
            <LL15>0.332</LL15>
            <DUL>0.400</DUL>
            <SAT>0.480</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>40</DiffusConst>
          <DiffusSlope>16</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.700</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.850</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">10</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.12</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>4</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.19</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.23</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.28</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.2</EC>
            <PH units="CaCl2">7.6</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.2</EC>
            <PH>7.8</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.3</EC>
            <PH>8.1</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>1</EC>
            <PH>8.2</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock14">
    <clock name="Clock" />
    <metfile name="met">
      <filename>21015.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">hart^Hart APSIM Site.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">15-Jun</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">15-Jun</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">06-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">11</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('15-Jun')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('15-Jun')
StationNumber=21015
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock14 Yearly.out</filename>
        <Title>2004^hart^Hart APSIM Site</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^hart^Hart APSIM Site</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.200</BD>
            <AirDry units="mm/mm">0.030</AirDry>
            <LL15 units="mm/mm">0.050</LL15>
            <DUL units="mm/mm">0.350</DUL>
            <SAT units="mm/mm">0.400</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.050</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.070</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.090</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.090</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.090</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.090</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.110</LL>
              <KL>0.020</KL>
              <XF>1</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.400</BD>
            <AirDry>0.050</AirDry>
            <LL15>0.070</LL15>
            <DUL>0.320</DUL>
            <SAT>0.380</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.400</BD>
            <AirDry>0.070</AirDry>
            <LL15>0.090</LL15>
            <DUL>0.320</DUL>
            <SAT>0.380</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.380</BD>
            <AirDry>0.090</AirDry>
            <LL15>0.090</LL15>
            <DUL>0.300</DUL>
            <SAT>0.350</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.360</BD>
            <AirDry>0.090</AirDry>
            <LL15>0.090</LL15>
            <DUL>0.280</DUL>
            <SAT>0.320</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.330</BD>
            <AirDry>0.090</AirDry>
            <LL15>0.090</LL15>
            <DUL>0.280</DUL>
            <SAT>0.320</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.330</BD>
            <AirDry>0.090</AirDry>
            <LL15>0.110</LL15>
            <DUL>0.280</DUL>
            <SAT>0.320</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>88</DiffusConst>
          <DiffusSlope>35.4</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1.350</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.650</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.700</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.400</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.300</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.850</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.200</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.200</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">8.200</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.300</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.300</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.600</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.600</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">19</NO3>
            <NH4 units="ppm">4</NH4>
            <SW units="mm/mm">0.13</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>2</NO3>
            <NH4>2</NH4>
            <SW>0.14</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>2</NO3>
            <NH4>2</NH4>
            <SW>0.15</SW>
          </Layer>
          <Layer>
            <Thickness>200</Thickness>
            <NO3>2</NO3>
            <NH4>1</NH4>
            <SW>0.15</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <OC units="Total %">1.4</OC>
            <EC units="1:5 dS/m">0.2</EC>
            <PH units="CaCl2">7.4</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.2</EC>
            <PH>7.9</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.3</EC>
            <PH>7.9</PH>
          </Layer>
          <Layer>
            <Thickness>200</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.7</EC>
            <PH>7.9</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock15">
    <clock name="Clock" />
    <metfile name="met">
      <filename>21033.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">hart^Mintaro APSIM Site.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">29-May</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Frame</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">06-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">11</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('29-May')
StationNumber=21033
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock15 Yearly.out</filename>
        <Title>2004^hart^Mintaro APSIM Site</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^hart^Mintaro APSIM Site</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.300</BD>
            <AirDry units="mm/mm">0.040</AirDry>
            <LL15 units="mm/mm">0.080</LL15>
            <DUL units="mm/mm">0.340</DUL>
            <SAT units="mm/mm">0.420</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.080</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.140</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.146</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.160</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.180</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.230</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.260</LL>
              <KL>0.020</KL>
              <XF>1</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.300</BD>
            <AirDry>0.119</AirDry>
            <LL15>0.140</LL15>
            <DUL>0.340</DUL>
            <SAT>0.420</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.300</BD>
            <AirDry>0.135</AirDry>
            <LL15>0.146</LL15>
            <DUL>0.340</DUL>
            <SAT>0.420</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.300</BD>
            <AirDry>0.160</AirDry>
            <LL15>0.160</LL15>
            <DUL>0.340</DUL>
            <SAT>0.420</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.300</BD>
            <AirDry>0.180</AirDry>
            <LL15>0.180</LL15>
            <DUL>0.340</DUL>
            <SAT>0.420</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.300</BD>
            <AirDry>0.230</AirDry>
            <LL15>0.230</LL15>
            <DUL>0.400</DUL>
            <SAT>0.480</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.300</BD>
            <AirDry>0.260</AirDry>
            <LL15>0.260</LL15>
            <DUL>0.400</DUL>
            <SAT>0.480</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>88</DiffusConst>
          <DiffusSlope>35.4</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1.330</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.650</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.700</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.400</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.300</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.850</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.200</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.200</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">200</Thickness>
            <NO3 units="ppm">6</NO3>
            <NH4 units="ppm">3</NH4>
            <SW units="mm/mm">0.09</SW>
          </Layer>
          <Layer>
            <Thickness>200</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW>0.07</SW>
          </Layer>
          <Layer>
            <Thickness>200</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW>0.13</SW>
          </Layer>
          <Layer>
            <Thickness>200</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW>0.11</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <OC units="Total %">1.3</OC>
            <EC units="1:5 dS/m">0.2</EC>
            <PH units="CaCl2">6.5</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.1</EC>
            <PH>7.2</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.2</EC>
            <PH>7.7</PH>
          </Layer>
          <Layer>
            <Thickness>200</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.2</EC>
            <PH>8</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock16">
    <clock name="Clock" />
    <metfile name="met">
      <filename>55049.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Ian Carter^Paddock 14.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">18-May</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">28-Jun</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Hybrid_meteor</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">28-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">146</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('18-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('28-Jun')
StationNumber=55049
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock16 Yearly.out</filename>
        <Title>2004^Ian Carter^Paddock 14</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Ian Carter^Paddock 14</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.150</BD>
            <AirDry units="mm/mm">0.107</AirDry>
            <LL15 units="mm/mm">0.213</LL15>
            <DUL units="mm/mm">0.485</DUL>
            <SAT units="mm/mm">0.535</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">150</Thickness>
              <LL units="mm/mm">0.213</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.249</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.299</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.296</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.357</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.397</LL>
              <KL>0.020</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.453</LL>
              <KL>0.010</KL>
              <XF>1</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.150</BD>
            <AirDry>0.199</AirDry>
            <LL15>0.249</LL15>
            <DUL>0.485</DUL>
            <SAT>0.535</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.120</BD>
            <AirDry>0.299</AirDry>
            <LL15>0.299</LL15>
            <DUL>0.497</DUL>
            <SAT>0.547</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.130</BD>
            <AirDry>0.296</AirDry>
            <LL15>0.296</LL15>
            <DUL>0.493</DUL>
            <SAT>0.543</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.130</BD>
            <AirDry>0.357</AirDry>
            <LL15>0.357</LL15>
            <DUL>0.495</DUL>
            <SAT>0.545</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.140</BD>
            <AirDry>0.397</AirDry>
            <LL15>0.397</LL15>
            <DUL>0.488</DUL>
            <SAT>0.538</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.180</BD>
            <AirDry>0.453</AirDry>
            <LL15>0.453</LL15>
            <DUL>0.474</DUL>
            <SAT>0.524</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>3.5</SummerCona>
          <SummerU>6</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>3.5</WinterCona>
          <WinterU>6</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>40</DiffusConst>
          <DiffusSlope>16</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <SWCON units="0-1">0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>40</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <OC units="Total %">1.200</OC>
            <FBiom units="0-1">0.020</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.800</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.300</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.200</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.100</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.100</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">7.500</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7.600</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7.750</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.200</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">150</Thickness>
            <NO3 units="ppm">27</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.48</SW>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <NO3>20</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.48</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>16</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.5</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>14</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.49</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>7</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.5</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>2</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.49</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>2</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.47</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">150</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <OC units="Total %">1.1</OC>
            <EC units="1:5 dS/m">0.2</EC>
            <PH units="CaCl2">7.7</PH>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.2</EC>
            <PH>8</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.4</EC>
            <PH>8.2</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.6</EC>
            <PH>8.4</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>1.2</EC>
            <PH>8.2</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>1.6</EC>
            <PH>8.1</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>1.4</EC>
            <PH>8.2</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock17">
    <clock name="Clock" />
    <metfile name="met">
      <filename>77008.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Ian McClelland^Clovers.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">26-Jun</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">04-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">3</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('26-Jun')
StationNumber=77008
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">14-Aug</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock17 Yearly.out</filename>
        <Title>2004^Ian McClelland^Clovers</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Ian McClelland^Clovers</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.330</BD>
            <AirDry units="mm/mm">0.075</AirDry>
            <LL15 units="mm/mm">0.150</LL15>
            <DUL units="mm/mm">0.320</DUL>
            <SAT units="mm/mm">0.468</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.125</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.154</LL>
              <KL>0.060</KL>
              <XF>0.342</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.154</LL>
              <KL>0.040</KL>
              <XF>0.342</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.265</LL>
              <KL>0.040</KL>
              <XF>0.195</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.265</LL>
              <KL>0.040</KL>
              <XF>0.195</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.284</LL>
              <KL>0.040</KL>
              <XF>0.157</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.284</LL>
              <KL>0.020</KL>
              <XF>0.157</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.284</LL>
              <KL>0.020</KL>
              <XF>0.157</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.375</BD>
            <AirDry>0.123</AirDry>
            <LL15>0.154</LL15>
            <DUL>0.324</DUL>
            <SAT>0.451</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.375</BD>
            <AirDry>0.154</AirDry>
            <LL15>0.154</LL15>
            <DUL>0.324</DUL>
            <SAT>0.451</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.424</BD>
            <AirDry>0.265</AirDry>
            <LL15>0.265</LL15>
            <DUL>0.330</DUL>
            <SAT>0.439</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.424</BD>
            <AirDry>0.265</AirDry>
            <LL15>0.265</LL15>
            <DUL>0.330</DUL>
            <SAT>0.439</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.419</BD>
            <AirDry>0.284</AirDry>
            <LL15>0.284</LL15>
            <DUL>0.320</DUL>
            <SAT>0.436</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.400</BD>
            <AirDry>0.284</AirDry>
            <LL15>0.284</LL15>
            <DUL>0.310</DUL>
            <SAT>0.442</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.400</BD>
            <AirDry>0.284</AirDry>
            <LL15>0.284</LL15>
            <DUL>0.310</DUL>
            <SAT>0.442</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>88</DiffusConst>
          <DiffusSlope>35.4</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.700</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1.050</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.450</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.450</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.300</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.300</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.300</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.250</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.250</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">8.300</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.300</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.300</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.600</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.600</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.400</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">15</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.08</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.18</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>2</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.26</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.3</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.2</EC>
            <PH units="CaCl2">8.1</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.5</EC>
            <PH>8.5</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.9</EC>
            <PH>8.8</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>1.2</EC>
            <PH>8.9</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock18">
    <clock name="Clock" />
    <metfile name="met">
      <filename>77005.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Jamie Simpson^B7.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">15-Jun</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">20-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">18</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('15-Jun')
StationNumber=77005
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">15-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">5</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock18 Yearly.out</filename>
        <Title>2004^Jamie Simpson^B7</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Jamie Simpson^B7</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.360</BD>
            <AirDry units="mm/mm">0.073</AirDry>
            <LL15 units="mm/mm">0.123</LL15>
            <DUL units="mm/mm">0.334</DUL>
            <SAT units="mm/mm">0.487</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.123</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.172</LL>
              <KL>0.060</KL>
              <XF>0.912</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.173</LL>
              <KL>0.040</KL>
              <XF>0.912</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.206</LL>
              <KL>0.040</KL>
              <XF>0.671</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.210</LL>
              <KL>0.040</KL>
              <XF>0.671</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.238</LL>
              <KL>0.040</KL>
              <XF>0.484</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.249</LL>
              <KL>0.020</KL>
              <XF>0.486</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.276</LL>
              <KL>0.020</KL>
              <XF>0.382</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.293</BD>
            <AirDry>0.146</AirDry>
            <LL15>0.172</LL15>
            <DUL>0.341</DUL>
            <SAT>0.512</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.293</BD>
            <AirDry>0.165</AirDry>
            <LL15>0.173</LL15>
            <DUL>0.341</DUL>
            <SAT>0.512</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.374</BD>
            <AirDry>0.206</AirDry>
            <LL15>0.206</LL15>
            <DUL>0.352</DUL>
            <SAT>0.482</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.374</BD>
            <AirDry>0.210</AirDry>
            <LL15>0.210</LL15>
            <DUL>0.350</DUL>
            <SAT>0.482</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.412</BD>
            <AirDry>0.238</AirDry>
            <LL15>0.238</LL15>
            <DUL>0.351</DUL>
            <SAT>0.467</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.423</BD>
            <AirDry>0.249</AirDry>
            <LL15>0.249</LL15>
            <DUL>0.350</DUL>
            <SAT>0.463</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.455</BD>
            <AirDry>0.276</AirDry>
            <LL15>0.276</LL15>
            <DUL>0.344</DUL>
            <SAT>0.451</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>88</DiffusConst>
          <DiffusSlope>35.4</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.700</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.850</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">9</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.09</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>4</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.19</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.21</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>4</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.25</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.2</EC>
            <PH units="CaCl2">8</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.4</EC>
            <PH>8.3</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.7</EC>
            <PH>8.7</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.9</EC>
            <PH>8.9</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock19">
    <clock name="Clock" />
    <metfile name="met">
      <filename>55006.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Jim Arnott^Receiving Paddock 1.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">18-May</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">20-Jul</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">H45</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">20-Jul</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">50</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('18-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('20-Jul')
StationNumber=55006
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">30-Sep</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">50.5999984741211</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock19 Yearly.out</filename>
        <Title>2004^Jim Arnott^Receiving Paddock 1</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Jim Arnott^Receiving Paddock 1</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.070</BD>
            <AirDry units="mm/mm">0.120</AirDry>
            <LL15 units="mm/mm">0.240</LL15>
            <DUL units="mm/mm">0.510</DUL>
            <SAT units="mm/mm">0.560</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">150</Thickness>
              <LL units="mm/mm">0.240</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.240</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.271</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.292</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.343</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.385</LL>
              <KL>0.020</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.450</LL>
              <KL>0.010</KL>
              <XF>1</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.110</BD>
            <AirDry>0.192</AirDry>
            <LL15>0.240</LL15>
            <DUL>0.500</DUL>
            <SAT>0.550</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.120</BD>
            <AirDry>0.271</AirDry>
            <LL15>0.271</LL15>
            <DUL>0.500</DUL>
            <SAT>0.550</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.120</BD>
            <AirDry>0.292</AirDry>
            <LL15>0.292</LL15>
            <DUL>0.500</DUL>
            <SAT>0.550</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.120</BD>
            <AirDry>0.343</AirDry>
            <LL15>0.343</LL15>
            <DUL>0.500</DUL>
            <SAT>0.550</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.120</BD>
            <AirDry>0.385</AirDry>
            <LL15>0.385</LL15>
            <DUL>0.500</DUL>
            <SAT>0.550</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.140</BD>
            <AirDry>0.450</AirDry>
            <LL15>0.450</LL15>
            <DUL>0.480</DUL>
            <SAT>0.530</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>3.5</SummerCona>
          <SummerU>6</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>3.5</WinterCona>
          <WinterU>6</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>40</DiffusConst>
          <DiffusSlope>16</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <SWCON units="0-1">0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>40</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <OC units="Total %">1.200</OC>
            <FBiom units="0-1">0.020</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.800</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.300</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.200</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.100</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.100</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">7.500</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7.600</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7.750</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.200</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">150</Thickness>
            <NO3 units="ppm">8</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.23</SW>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <NO3>6</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.4</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>8</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.4</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>5</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.37</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>4</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.34</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>5</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.39</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm">0</NH4>
            <SW>0.45</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">150</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.1</EC>
            <PH units="CaCl2">6.1</PH>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.1</EC>
            <PH>6.6</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.1</EC>
            <PH>7.2</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.2</EC>
            <PH>7.7</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.2</EC>
            <PH>7.9</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.2</EC>
            <PH>7.8</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock20">
    <clock name="Clock" />
    <metfile name="met">
      <filename>55006.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Jim Arnott^Receiving Paddock 2.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">18-May</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">22-Jul</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">H45</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">22-Jul</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">100</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('18-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('22-Jul')
StationNumber=55006
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock20 Yearly.out</filename>
        <Title>2004^Jim Arnott^Receiving Paddock 2</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Jim Arnott^Receiving Paddock 2</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.070</BD>
            <AirDry units="mm/mm">0.120</AirDry>
            <LL15 units="mm/mm">0.240</LL15>
            <DUL units="mm/mm">0.510</DUL>
            <SAT units="mm/mm">0.560</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">150</Thickness>
              <LL units="mm/mm">0.240</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.240</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.271</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.292</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.343</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.385</LL>
              <KL>0.020</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.450</LL>
              <KL>0.010</KL>
              <XF>1</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.110</BD>
            <AirDry>0.192</AirDry>
            <LL15>0.240</LL15>
            <DUL>0.500</DUL>
            <SAT>0.550</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.120</BD>
            <AirDry>0.271</AirDry>
            <LL15>0.271</LL15>
            <DUL>0.500</DUL>
            <SAT>0.550</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.120</BD>
            <AirDry>0.292</AirDry>
            <LL15>0.292</LL15>
            <DUL>0.500</DUL>
            <SAT>0.550</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.120</BD>
            <AirDry>0.343</AirDry>
            <LL15>0.343</LL15>
            <DUL>0.500</DUL>
            <SAT>0.550</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.120</BD>
            <AirDry>0.385</AirDry>
            <LL15>0.385</LL15>
            <DUL>0.500</DUL>
            <SAT>0.550</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.140</BD>
            <AirDry>0.450</AirDry>
            <LL15>0.450</LL15>
            <DUL>0.480</DUL>
            <SAT>0.530</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>3.5</SummerCona>
          <SummerU>6</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>3.5</WinterCona>
          <WinterU>6</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>40</DiffusConst>
          <DiffusSlope>16</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <SWCON units="0-1">0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>40</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <OC units="Total %">1.200</OC>
            <FBiom units="0-1">0.020</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.800</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.300</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.200</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.100</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.100</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">7.500</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7.600</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7.750</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.200</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">150</Thickness>
            <NO3 units="ppm">3</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.36</SW>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <NO3>0</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.37</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>0</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.4</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>0</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.33</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>0</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.34</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>0</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.39</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>0</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.45</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">150</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.3</EC>
            <PH units="CaCl2">7.3</PH>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.2</EC>
            <PH>7.5</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.2</EC>
            <PH>7.6</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.2</EC>
            <PH>7.9</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.2</EC>
            <PH>8</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.2</EC>
            <PH>7.9</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock21">
    <clock name="Clock" />
    <metfile name="met">
      <filename>18052.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Jim Egan^South 6E.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">29-Jun</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">15-Jun</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">15-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">12</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('29-Jun')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('15-Jun')
StationNumber=18052
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock21 Yearly.out</filename>
        <Title>2004^Jim Egan^South 6E</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Jim Egan^South 6E</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.250</BD>
            <AirDry units="mm/mm">0.050</AirDry>
            <LL15 units="mm/mm">0.093</LL15>
            <DUL units="mm/mm">0.244</DUL>
            <SAT units="mm/mm">0.320</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.093</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.143</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.149</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.169</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.169</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.162</LL>
              <KL>0.040</KL>
              <XF>0</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.171</LL>
              <KL>0.020</KL>
              <XF>0</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.330</BD>
            <AirDry>0.110</AirDry>
            <LL15>0.143</LL15>
            <DUL>0.289</DUL>
            <SAT>0.320</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.280</BD>
            <AirDry>0.120</AirDry>
            <LL15>0.149</LL15>
            <DUL>0.290</DUL>
            <SAT>0.320</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.260</BD>
            <AirDry>0.169</AirDry>
            <LL15>0.169</LL15>
            <DUL>0.283</DUL>
            <SAT>0.320</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.260</BD>
            <AirDry>0.169</AirDry>
            <LL15>0.169</LL15>
            <DUL>0.283</DUL>
            <SAT>0.320</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.230</BD>
            <AirDry>0.162</AirDry>
            <LL15>0.162</LL15>
            <DUL>0.280</DUL>
            <SAT>0.320</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.330</BD>
            <AirDry>0.171</AirDry>
            <LL15>0.171</LL15>
            <DUL>0.292</DUL>
            <SAT>0.320</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>88</DiffusConst>
          <DiffusSlope>35.4</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">0.980</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.01</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.370</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.700</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.330</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.300</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.850</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.130</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.090</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">8.200</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.300</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.300</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.600</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.600</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">16</NO3>
            <NH4 units="ppm">7</NH4>
            <SW units="mm/mm">0.12</SW>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <NO3>28</NO3>
            <NH4>3</NH4>
            <SW>0.11</SW>
          </Layer>
          <Layer>
            <Thickness>170</Thickness>
            <NO3>16</NO3>
            <NH4>3</NH4>
            <SW>0.11</SW>
          </Layer>
          <Layer>
            <Thickness>280</Thickness>
            <NO3>10</NO3>
            <NH4>1</NH4>
            <SW>0.14</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <OC units="Total %">1.5</OC>
            <EC units="1:5 dS/m">0.1</EC>
            <PH units="CaCl2">7.9</PH>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <OC>0.9</OC>
            <EC>0.3</EC>
            <PH>8</PH>
          </Layer>
          <Layer>
            <Thickness>170</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <OC>0.6</OC>
            <EC>0.8</EC>
            <PH>8</PH>
          </Layer>
          <Layer>
            <Thickness>280</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <OC>0.5</OC>
            <EC>1.1</EC>
            <PH>8.1</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock22">
    <clock name="Clock" />
    <metfile name="met">
      <filename>55049.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Jim McDonald^South West Creek.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">18-May</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">24-Jun</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Hybrid_meteor</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">15-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">96</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('18-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('24-Jun')
StationNumber=55049
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">24-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">9</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock22 Yearly.out</filename>
        <Title>2004^Jim McDonald^South West Creek</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Jim McDonald^South West Creek</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.100</BD>
            <AirDry units="mm/mm">0.137</AirDry>
            <LL15 units="mm/mm">0.273</LL15>
            <DUL units="mm/mm">0.506</DUL>
            <SAT units="mm/mm">0.556</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">150</Thickness>
              <LL units="mm/mm">0.273</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.273</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.310</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.313</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.371</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.410</LL>
              <KL>0.020</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.486</LL>
              <KL>0.010</KL>
              <XF>1</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.100</BD>
            <AirDry>0.218</AirDry>
            <LL15>0.273</LL15>
            <DUL>0.506</DUL>
            <SAT>0.556</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.100</BD>
            <AirDry>0.310</AirDry>
            <LL15>0.310</LL15>
            <DUL>0.506</DUL>
            <SAT>0.556</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.090</BD>
            <AirDry>0.313</AirDry>
            <LL15>0.313</LL15>
            <DUL>0.507</DUL>
            <SAT>0.557</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.100</BD>
            <AirDry>0.371</AirDry>
            <LL15>0.371</LL15>
            <DUL>0.506</DUL>
            <SAT>0.556</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.120</BD>
            <AirDry>0.410</AirDry>
            <LL15>0.410</LL15>
            <DUL>0.498</DUL>
            <SAT>0.548</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.130</BD>
            <AirDry>0.486</AirDry>
            <LL15>0.486</LL15>
            <DUL>0.495</DUL>
            <SAT>0.545</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>3.5</SummerCona>
          <SummerU>6</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>3.5</WinterCona>
          <WinterU>6</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>40</DiffusConst>
          <DiffusSlope>16</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <SWCON units="0-1">0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>40</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <OC units="Total %">1.200</OC>
            <FBiom units="0-1">0.020</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.800</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.300</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.200</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.100</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.100</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">7.500</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7.600</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7.750</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.200</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">150</Thickness>
            <NO3 units="ppm">11</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.45</SW>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <NO3>9</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.54</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>10</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.51</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>7</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.51</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>4</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.51</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>2</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.5</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>1</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.5</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">150</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <OC units="Total %">1.3</OC>
            <EC units="1:5 dS/m">0.2</EC>
            <PH units="CaCl2">7.8</PH>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <OC>0.8</OC>
            <EC>0.2</EC>
            <PH>7.8</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <OC>0.7</OC>
            <EC>0.3</EC>
            <PH>8.1</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <OC>0.7</OC>
            <EC>0.4</EC>
            <PH>8.4</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.5</EC>
            <PH>8.5</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.9</EC>
            <PH>8.4</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>1.1</EC>
            <PH>8.2</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock23">
    <clock name="Clock" />
    <metfile name="met">
      <filename>77014.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">John Ferrier^John South 26.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">16-Jun</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">16-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">4</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('16-Jun')
StationNumber=77014
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock23 Yearly.out</filename>
        <Title>2004^John Ferrier^John South 26</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^John Ferrier^John South 26</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.360</BD>
            <AirDry units="mm/mm">0.073</AirDry>
            <LL15 units="mm/mm">0.123</LL15>
            <DUL units="mm/mm">0.334</DUL>
            <SAT units="mm/mm">0.487</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.123</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.172</LL>
              <KL>0.060</KL>
              <XF>0.912</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.173</LL>
              <KL>0.040</KL>
              <XF>0.912</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.206</LL>
              <KL>0.040</KL>
              <XF>0.671</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.210</LL>
              <KL>0.040</KL>
              <XF>0.671</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.238</LL>
              <KL>0.040</KL>
              <XF>0.484</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.249</LL>
              <KL>0.020</KL>
              <XF>0.486</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.276</LL>
              <KL>0.020</KL>
              <XF>0.382</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.293</BD>
            <AirDry>0.146</AirDry>
            <LL15>0.172</LL15>
            <DUL>0.341</DUL>
            <SAT>0.512</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.293</BD>
            <AirDry>0.165</AirDry>
            <LL15>0.173</LL15>
            <DUL>0.341</DUL>
            <SAT>0.512</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.374</BD>
            <AirDry>0.206</AirDry>
            <LL15>0.206</LL15>
            <DUL>0.352</DUL>
            <SAT>0.482</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.374</BD>
            <AirDry>0.210</AirDry>
            <LL15>0.210</LL15>
            <DUL>0.350</DUL>
            <SAT>0.482</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.412</BD>
            <AirDry>0.238</AirDry>
            <LL15>0.238</LL15>
            <DUL>0.351</DUL>
            <SAT>0.467</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.423</BD>
            <AirDry>0.249</AirDry>
            <LL15>0.249</LL15>
            <DUL>0.350</DUL>
            <SAT>0.463</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.455</BD>
            <AirDry>0.276</AirDry>
            <LL15>0.276</LL15>
            <DUL>0.344</DUL>
            <SAT>0.451</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>88</DiffusConst>
          <DiffusSlope>35.4</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.700</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.850</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">11</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.1</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>4</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.17</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>4</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.23</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>5</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.23</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.2</EC>
            <PH units="CaCl2">7.5</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.3</EC>
            <PH>7.9</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.4</EC>
            <PH>8.4</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.7</EC>
            <PH>8.4</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock24">
    <clock name="Clock" />
    <metfile name="met">
      <filename>80006.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Jon Whykes^Whites West.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">01-May</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">31-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">5</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('01-May')
StationNumber=80006
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock24 Yearly.out</filename>
        <Title>2004^Jon Whykes^Whites West</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Jon Whykes^Whites West</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.173</BD>
            <AirDry units="mm/mm">0.120</AirDry>
            <LL15 units="mm/mm">0.200</LL15>
            <DUL units="mm/mm">0.410</DUL>
            <SAT units="mm/mm">0.490</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.200</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.190</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.200</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.240</LL>
              <KL>0.040</KL>
              <XF>0.960</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.270</LL>
              <KL>0.040</KL>
              <XF>0.917</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.280</LL>
              <KL>0.040</KL>
              <XF>0.809</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.321</LL>
              <KL>0.020</KL>
              <XF>0.791</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.332</LL>
              <KL>0.020</KL>
              <XF>0.679</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.231</BD>
            <AirDry>0.170</AirDry>
            <LL15>0.190</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.231</BD>
            <AirDry>0.200</AirDry>
            <LL15>0.200</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.175</BD>
            <AirDry>0.240</AirDry>
            <LL15>0.240</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.175</BD>
            <AirDry>0.270</AirDry>
            <LL15>0.270</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.201</BD>
            <AirDry>0.280</AirDry>
            <LL15>0.280</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.252</BD>
            <AirDry>0.321</AirDry>
            <LL15>0.321</LL15>
            <DUL>0.400</DUL>
            <SAT>0.480</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.278</BD>
            <AirDry>0.332</AirDry>
            <LL15>0.332</LL15>
            <DUL>0.400</DUL>
            <SAT>0.480</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>40</DiffusConst>
          <DiffusSlope>16</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.700</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.850</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">10</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.13</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>6</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.21</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>5</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.26</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>4</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.29</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.2</EC>
            <PH units="CaCl2">7.1</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.3</EC>
            <PH>7.7</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.6</EC>
            <PH>8.2</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.9</EC>
            <PH>8.2</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock25">
    <clock name="Clock" />
    <metfile name="met">
      <filename>78005.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Lindsay Martin^Paddock 6.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">04-Jun</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Bellaroi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">12-Apr</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">46</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('04-Jun')
StationNumber=78005
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">04-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">5</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock25 Yearly.out</filename>
        <Title>2004^Lindsay Martin^Paddock 6</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Lindsay Martin^Paddock 6</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.360</BD>
            <AirDry units="mm/mm">0.073</AirDry>
            <LL15 units="mm/mm">0.123</LL15>
            <DUL units="mm/mm">0.334</DUL>
            <SAT units="mm/mm">0.487</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.123</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.172</LL>
              <KL>0.060</KL>
              <XF>0.912</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.173</LL>
              <KL>0.040</KL>
              <XF>0.912</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.206</LL>
              <KL>0.040</KL>
              <XF>0.671</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.210</LL>
              <KL>0.040</KL>
              <XF>0.671</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.238</LL>
              <KL>0.040</KL>
              <XF>0.484</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.249</LL>
              <KL>0.020</KL>
              <XF>0.486</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.276</LL>
              <KL>0.020</KL>
              <XF>0.382</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.293</BD>
            <AirDry>0.146</AirDry>
            <LL15>0.172</LL15>
            <DUL>0.341</DUL>
            <SAT>0.512</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.293</BD>
            <AirDry>0.165</AirDry>
            <LL15>0.173</LL15>
            <DUL>0.341</DUL>
            <SAT>0.512</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.374</BD>
            <AirDry>0.206</AirDry>
            <LL15>0.206</LL15>
            <DUL>0.352</DUL>
            <SAT>0.482</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.374</BD>
            <AirDry>0.210</AirDry>
            <LL15>0.210</LL15>
            <DUL>0.350</DUL>
            <SAT>0.482</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.412</BD>
            <AirDry>0.238</AirDry>
            <LL15>0.238</LL15>
            <DUL>0.351</DUL>
            <SAT>0.467</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.423</BD>
            <AirDry>0.249</AirDry>
            <LL15>0.249</LL15>
            <DUL>0.350</DUL>
            <SAT>0.463</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.455</BD>
            <AirDry>0.276</AirDry>
            <LL15>0.276</LL15>
            <DUL>0.344</DUL>
            <SAT>0.451</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>88</DiffusConst>
          <DiffusSlope>35.4</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.700</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.850</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">12</NO3>
            <NH4 units="ppm">16.3</NH4>
            <SW units="mm/mm">0.05</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>4</NO3>
            <NH4>15.5</NH4>
            <SW>0.13</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3</NO3>
            <NH4>12.3</NH4>
            <SW>0.26</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3</NO3>
            <NH4>12.7</NH4>
            <SW>0.23</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock26">
    <clock name="Clock" />
    <metfile name="met">
      <filename>77056.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Malcolm Knight^Cotnells.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">20-Apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">05-Jun</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">06-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">11</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('20-Apr')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('05-Jun')
StationNumber=77056
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock26 Yearly.out</filename>
        <Title>2004^Malcolm Knight^Cotnells</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Malcolm Knight^Cotnells</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.330</BD>
            <AirDry units="mm/mm">0.075</AirDry>
            <LL15 units="mm/mm">0.150</LL15>
            <DUL units="mm/mm">0.320</DUL>
            <SAT units="mm/mm">0.468</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.125</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.154</LL>
              <KL>0.060</KL>
              <XF>0.342</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.154</LL>
              <KL>0.040</KL>
              <XF>0.342</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.265</LL>
              <KL>0.040</KL>
              <XF>0.195</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.265</LL>
              <KL>0.040</KL>
              <XF>0.195</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.284</LL>
              <KL>0.040</KL>
              <XF>0.157</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.284</LL>
              <KL>0.020</KL>
              <XF>0.157</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.284</LL>
              <KL>0.020</KL>
              <XF>0.157</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.375</BD>
            <AirDry>0.123</AirDry>
            <LL15>0.154</LL15>
            <DUL>0.324</DUL>
            <SAT>0.451</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.375</BD>
            <AirDry>0.154</AirDry>
            <LL15>0.154</LL15>
            <DUL>0.324</DUL>
            <SAT>0.451</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.424</BD>
            <AirDry>0.265</AirDry>
            <LL15>0.265</LL15>
            <DUL>0.330</DUL>
            <SAT>0.439</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.424</BD>
            <AirDry>0.265</AirDry>
            <LL15>0.265</LL15>
            <DUL>0.330</DUL>
            <SAT>0.439</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.419</BD>
            <AirDry>0.284</AirDry>
            <LL15>0.284</LL15>
            <DUL>0.320</DUL>
            <SAT>0.436</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.400</BD>
            <AirDry>0.284</AirDry>
            <LL15>0.284</LL15>
            <DUL>0.310</DUL>
            <SAT>0.442</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.400</BD>
            <AirDry>0.284</AirDry>
            <LL15>0.284</LL15>
            <DUL>0.310</DUL>
            <SAT>0.442</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>88</DiffusConst>
          <DiffusSlope>35.4</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.700</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1.050</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.450</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.450</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.300</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.300</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.300</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.250</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.250</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">8.300</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.300</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.300</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.600</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.600</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.400</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">31</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.14</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>13</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.24</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>5</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.31</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.29</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.19</EC>
            <PH units="CaCl2">7.5</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.41</EC>
            <PH>8</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.91</EC>
            <PH>8.4</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>1.05</EC>
            <PH>8.3</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock27">
    <clock name="Clock" />
    <metfile name="met">
      <filename>53115.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Manchee^Gil Gil South.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">19-Apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">20-Apr</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Sunbrook</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">06-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">11</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('19-Apr')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('20-Apr')
StationNumber=53115
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock27 Yearly.out</filename>
        <Title>2004^Manchee^Gil Gil South</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Manchee^Gil Gil South</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.360</BD>
            <AirDry units="mm/mm">0.109</AirDry>
            <LL15 units="mm/mm">0.217</LL15>
            <DUL units="mm/mm">0.409</DUL>
            <SAT units="mm/mm">0.459</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">150</Thickness>
              <LL units="mm/mm">0.217</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.220</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.226</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.242</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.290</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.328</LL>
              <KL>0.020</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.396</LL>
              <KL>0.010</KL>
              <XF>1</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.400</BD>
            <AirDry>0.176</AirDry>
            <LL15>0.220</LL15>
            <DUL>0.392</DUL>
            <SAT>0.442</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.400</BD>
            <AirDry>0.226</AirDry>
            <LL15>0.226</LL15>
            <DUL>0.391</DUL>
            <SAT>0.441</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.390</BD>
            <AirDry>0.242</AirDry>
            <LL15>0.242</LL15>
            <DUL>0.389</DUL>
            <SAT>0.439</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.370</BD>
            <AirDry>0.290</AirDry>
            <LL15>0.290</LL15>
            <DUL>0.404</DUL>
            <SAT>0.454</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.360</BD>
            <AirDry>0.328</AirDry>
            <LL15>0.328</LL15>
            <DUL>0.408</DUL>
            <SAT>0.458</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.340</BD>
            <AirDry>0.396</AirDry>
            <LL15>0.396</LL15>
            <DUL>0.415</DUL>
            <SAT>0.465</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>3.5</SummerCona>
          <SummerU>6</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>3.5</WinterCona>
          <WinterU>6</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>40</DiffusConst>
          <DiffusSlope>16</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <SWCON units="0-1">0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>40</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <OC units="Total %">1.200</OC>
            <FBiom units="0-1">0.020</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.800</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.300</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.200</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.100</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.100</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">7.500</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7.600</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7.750</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.200</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">150</Thickness>
            <NO3 units="ppm">19.8</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.35</SW>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <NO3>10.8</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.36</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>15.1</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.36</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>16.4</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.34</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>6.1</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.33</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3.5</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.29</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3.8</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.3</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">150</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <OC units="Total %">0.5</OC>
            <EC units="1:5 dS/m">0</EC>
            <PH units="CaCl2">7.3</PH>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.2</EC>
            <PH>7.9</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock28">
    <clock name="Clock" />
    <metfile name="met">
      <filename>8051.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Mark Appleyard^Appleyard.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">02-Jun</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">15-May</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Annuello</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">15-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">20</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('02-Jun')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('15-May')
StationNumber=8051
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">15-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">30</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise2">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">14-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">50</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise3">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">05-Jul</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">28</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock28 Yearly.out</filename>
        <Title>2004^Mark Appleyard^Appleyard</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Mark Appleyard^Appleyard</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.600</BD>
            <AirDry units="mm/mm">0.040</AirDry>
            <LL15 units="mm/mm">0.080</LL15>
            <DUL units="mm/mm">0.250</DUL>
            <SAT units="mm/mm">0.370</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">150</Thickness>
              <LL units="mm/mm">0.080</LL>
              <KL units="/day">0.080</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.080</LL>
              <KL>0.080</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.130</LL>
              <KL>0.080</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.140</LL>
              <KL>0.080</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.200</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.210</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.220</LL>
              <KL>0.030</KL>
              <XF>1</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.640</BD>
            <AirDry>0.072</AirDry>
            <LL15>0.080</LL15>
            <DUL>0.300</DUL>
            <SAT>0.350</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.540</BD>
            <AirDry>0.130</AirDry>
            <LL15>0.130</LL15>
            <DUL>0.340</DUL>
            <SAT>0.390</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.650</BD>
            <AirDry>0.140</AirDry>
            <LL15>0.140</LL15>
            <DUL>0.300</DUL>
            <SAT>0.350</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.690</BD>
            <AirDry>0.200</AirDry>
            <LL15>0.200</LL15>
            <DUL>0.280</DUL>
            <SAT>0.330</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.650</BD>
            <AirDry>0.210</AirDry>
            <LL15>0.210</LL15>
            <DUL>0.300</DUL>
            <SAT>0.350</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.640</BD>
            <AirDry>0.220</AirDry>
            <LL15>0.220</LL15>
            <DUL>0.300</DUL>
            <SAT>0.350</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>88</DiffusConst>
          <DiffusSlope>35</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <SWCON units="0-1">0.700</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.700</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.700</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.700</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.700</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.700</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.700</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <OC units="Total %">0.830</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.560</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.350</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.240</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.180</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.140</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.130</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">6.500</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7.700</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.400</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.700</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.700</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.700</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">22</NO3>
            <NH4 units="ppm">0.1</NH4>
            <SW units="mm/mm">0.13</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>8</NO3>
            <NH4>0.1</NH4>
            <SW>0.16</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3</NO3>
            <NH4>0.1</NH4>
            <SW>0.13</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>2</NO3>
            <NH4>0.1</NH4>
            <SW>0.13</SW>
          </Layer>
          <Layer>
            <Thickness>500</Thickness>
            <NO3>1</NO3>
            <NH4>0.1</NH4>
            <SW>0.21</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>1</NO3>
            <NH4>0.1</NH4>
            <SW>0.22</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <OC units="Total %">0.7</OC>
            <EC units="1:5 dS/m">0.1</EC>
            <PH units="CaCl2">6</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.1</EC>
            <PH>5.7</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.1</EC>
            <PH>6.9</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.1</EC>
            <PH>7.5</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock29">
    <clock name="Clock" />
    <metfile name="met">
      <filename>81013.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Mark Harmer^Yabba 8.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">27-May</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">04-Jun</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Whistler</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">04-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">37</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('27-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('04-Jun')
StationNumber=81013
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">05-Sep</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">30</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock29 Yearly.out</filename>
        <Title>2004^Mark Harmer^Yabba 8</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Mark Harmer^Yabba 8</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.480</BD>
            <AirDry units="mm/mm">0.055</AirDry>
            <LL15 units="mm/mm">0.110</LL15>
            <DUL units="mm/mm">0.288</DUL>
            <SAT units="mm/mm">0.350</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.110</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.132</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.147</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.170</LL>
              <KL>0.040</KL>
              <XF>0.893</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.186</LL>
              <KL>0.040</KL>
              <XF>0.893</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.222</LL>
              <KL>0.040</KL>
              <XF>0.865</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.257</LL>
              <KL>0.020</KL>
              <XF>0.865</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.275</LL>
              <KL>0.020</KL>
              <XF>0.828</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.500</BD>
            <AirDry>0.110</AirDry>
            <LL15>0.132</LL15>
            <DUL>0.269</DUL>
            <SAT>0.335</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.450</BD>
            <AirDry>0.132</AirDry>
            <LL15>0.147</LL15>
            <DUL>0.252</DUL>
            <SAT>0.323</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.370</BD>
            <AirDry>0.170</AirDry>
            <LL15>0.170</LL15>
            <DUL>0.285</DUL>
            <SAT>0.355</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.430</BD>
            <AirDry>0.186</AirDry>
            <LL15>0.186</LL15>
            <DUL>0.292</DUL>
            <SAT>0.352</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.550</BD>
            <AirDry>0.222</AirDry>
            <LL15>0.222</LL15>
            <DUL>0.310</DUL>
            <SAT>0.342</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.670</BD>
            <AirDry>0.257</AirDry>
            <LL15>0.257</LL15>
            <DUL>0.314</DUL>
            <SAT>0.339</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.620</BD>
            <AirDry>0.275</AirDry>
            <LL15>0.275</LL15>
            <DUL>0.319</DUL>
            <SAT>0.353</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>44</DiffusConst>
          <DiffusSlope>16</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>84</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.500</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.400</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.200</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.100</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.100</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.100</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.700</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.850</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">6</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>6</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>6</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>6</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>6</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>6</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>6</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>6</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">25</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.14</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.08</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.15</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.19</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.1</EC>
            <PH units="CaCl2">5.1</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0</EC>
            <PH>5.2</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.1</EC>
            <PH>6.5</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.1</EC>
            <PH>6.6</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock30">
    <clock name="Clock" />
    <metfile name="met">
      <filename>77056.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Mary Paula Williamson^Cannie Turnoff.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">28-May</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">28-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">5</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('28-May')
StationNumber=77056
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock30 Yearly.out</filename>
        <Title>2004^Mary Paula Williamson^Cannie Turnoff</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Mary Paula Williamson^Cannie Turnoff</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.360</BD>
            <AirDry units="mm/mm">0.073</AirDry>
            <LL15 units="mm/mm">0.123</LL15>
            <DUL units="mm/mm">0.334</DUL>
            <SAT units="mm/mm">0.487</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.123</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.172</LL>
              <KL>0.060</KL>
              <XF>0.912</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.173</LL>
              <KL>0.040</KL>
              <XF>0.912</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.206</LL>
              <KL>0.040</KL>
              <XF>0.671</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.210</LL>
              <KL>0.040</KL>
              <XF>0.671</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.238</LL>
              <KL>0.040</KL>
              <XF>0.484</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.249</LL>
              <KL>0.020</KL>
              <XF>0.486</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.276</LL>
              <KL>0.020</KL>
              <XF>0.382</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.293</BD>
            <AirDry>0.146</AirDry>
            <LL15>0.172</LL15>
            <DUL>0.341</DUL>
            <SAT>0.512</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.293</BD>
            <AirDry>0.165</AirDry>
            <LL15>0.173</LL15>
            <DUL>0.341</DUL>
            <SAT>0.512</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.374</BD>
            <AirDry>0.206</AirDry>
            <LL15>0.206</LL15>
            <DUL>0.352</DUL>
            <SAT>0.482</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.374</BD>
            <AirDry>0.210</AirDry>
            <LL15>0.210</LL15>
            <DUL>0.350</DUL>
            <SAT>0.482</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.412</BD>
            <AirDry>0.238</AirDry>
            <LL15>0.238</LL15>
            <DUL>0.351</DUL>
            <SAT>0.467</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.423</BD>
            <AirDry>0.249</AirDry>
            <LL15>0.249</LL15>
            <DUL>0.350</DUL>
            <SAT>0.463</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.455</BD>
            <AirDry>0.276</AirDry>
            <LL15>0.276</LL15>
            <DUL>0.344</DUL>
            <SAT>0.451</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>88</DiffusConst>
          <DiffusSlope>35.4</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.700</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.850</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">15</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.08</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>5</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.2</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.28</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>2</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.32</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.19</EC>
            <PH units="CaCl2">7.3</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.31</EC>
            <PH>8</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.5</EC>
            <PH>8.5</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.73</EC>
            <PH>8.6</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock31">
    <clock name="Clock" />
    <metfile name="met">
      <filename>79035.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Nathan Gellatly^Leahs.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">20-Jun</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Mitre</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">20-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">5</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('20-Jun')
StationNumber=79035
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock31 Yearly.out</filename>
        <Title>2004^Nathan Gellatly^Leahs</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Nathan Gellatly^Leahs</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.173</BD>
            <AirDry units="mm/mm">0.120</AirDry>
            <LL15 units="mm/mm">0.200</LL15>
            <DUL units="mm/mm">0.410</DUL>
            <SAT units="mm/mm">0.490</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.200</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.190</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.200</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.240</LL>
              <KL>0.040</KL>
              <XF>0.960</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.270</LL>
              <KL>0.040</KL>
              <XF>0.917</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.280</LL>
              <KL>0.040</KL>
              <XF>0.809</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.321</LL>
              <KL>0.020</KL>
              <XF>0.791</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.332</LL>
              <KL>0.020</KL>
              <XF>0.679</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.231</BD>
            <AirDry>0.170</AirDry>
            <LL15>0.190</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.231</BD>
            <AirDry>0.200</AirDry>
            <LL15>0.200</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.175</BD>
            <AirDry>0.240</AirDry>
            <LL15>0.240</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.175</BD>
            <AirDry>0.270</AirDry>
            <LL15>0.270</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.201</BD>
            <AirDry>0.280</AirDry>
            <LL15>0.280</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.252</BD>
            <AirDry>0.321</AirDry>
            <LL15>0.321</LL15>
            <DUL>0.400</DUL>
            <SAT>0.480</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.278</BD>
            <AirDry>0.332</AirDry>
            <LL15>0.332</LL15>
            <DUL>0.400</DUL>
            <SAT>0.480</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>40</DiffusConst>
          <DiffusSlope>16</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.700</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.850</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">14</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.17</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>7</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.18</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>5</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.23</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>6</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.27</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.2</EC>
            <PH units="CaCl2">6.9</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.2</EC>
            <PH>7.4</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.2</EC>
            <PH>7.7</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.4</EC>
            <PH>8.2</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock32">
    <clock name="Clock" />
    <metfile name="met">
      <filename>78005.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Peter Martin^prickle 3.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">04-Jun</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">06-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">11</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('04-Jun')
StationNumber=78005
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock32 Yearly.out</filename>
        <Title>2004^Peter Martin^prickle 3</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Peter Martin^prickle 3</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.450</BD>
            <AirDry units="mm/mm">0.075</AirDry>
            <LL15 units="mm/mm">0.140</LL15>
            <DUL units="mm/mm">0.334</DUL>
            <SAT units="mm/mm">0.414</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.125</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.152</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.152</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.165</LL>
              <KL>0.040</KL>
              <XF>0.355</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.165</LL>
              <KL>0.040</KL>
              <XF>0.355</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.271</LL>
              <KL>0.040</KL>
              <XF>0.323</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.271</LL>
              <KL>0.020</KL>
              <XF>0.323</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.316</LL>
              <KL>0.020</KL>
              <XF>0.323</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.260</BD>
            <AirDry>0.122</AirDry>
            <LL15>0.152</LL15>
            <DUL>0.341</DUL>
            <SAT>0.421</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.260</BD>
            <AirDry>0.152</AirDry>
            <LL15>0.152</LL15>
            <DUL>0.341</DUL>
            <SAT>0.421</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.281</BD>
            <AirDry>0.165</AirDry>
            <LL15>0.165</LL15>
            <DUL>0.352</DUL>
            <SAT>0.432</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.281</BD>
            <AirDry>0.165</AirDry>
            <LL15>0.165</LL15>
            <DUL>0.350</DUL>
            <SAT>0.430</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.243</BD>
            <AirDry>0.271</AirDry>
            <LL15>0.271</LL15>
            <DUL>0.351</DUL>
            <SAT>0.431</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.242</BD>
            <AirDry>0.271</AirDry>
            <LL15>0.271</LL15>
            <DUL>0.350</DUL>
            <SAT>0.430</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.338</BD>
            <AirDry>0.316</AirDry>
            <LL15>0.316</LL15>
            <DUL>0.344</DUL>
            <SAT>0.424</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>88</DiffusConst>
          <DiffusSlope>35.4</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.700</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1.050</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.450</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.450</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.300</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.300</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.300</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.250</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.250</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">8.500</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.800</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.800</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">15</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.08</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>16</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.14</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>10</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.17</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>5</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.21</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.21</EC>
            <PH units="CaCl2">7.9</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.5</EC>
            <PH>8.4</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.72</EC>
            <PH>8.6</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>1.02</EC>
            <PH>8.8</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock33">
    <clock name="Clock" />
    <metfile name="met">
      <filename>78005.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Peter Quick^TQ02.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">26-Jun</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">27-Apr</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">41</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('26-Jun')
StationNumber=78005
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">26-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">5.5</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock33 Yearly.out</filename>
        <Title>2004^Peter Quick^TQ02</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Peter Quick^TQ02</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.360</BD>
            <AirDry units="mm/mm">0.073</AirDry>
            <LL15 units="mm/mm">0.123</LL15>
            <DUL units="mm/mm">0.334</DUL>
            <SAT units="mm/mm">0.487</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.123</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.172</LL>
              <KL>0.060</KL>
              <XF>0.912</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.173</LL>
              <KL>0.040</KL>
              <XF>0.912</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.206</LL>
              <KL>0.040</KL>
              <XF>0.671</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.210</LL>
              <KL>0.040</KL>
              <XF>0.671</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.238</LL>
              <KL>0.040</KL>
              <XF>0.484</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.249</LL>
              <KL>0.020</KL>
              <XF>0.486</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.276</LL>
              <KL>0.020</KL>
              <XF>0.382</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.293</BD>
            <AirDry>0.146</AirDry>
            <LL15>0.172</LL15>
            <DUL>0.341</DUL>
            <SAT>0.512</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.293</BD>
            <AirDry>0.165</AirDry>
            <LL15>0.173</LL15>
            <DUL>0.341</DUL>
            <SAT>0.512</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.374</BD>
            <AirDry>0.206</AirDry>
            <LL15>0.206</LL15>
            <DUL>0.352</DUL>
            <SAT>0.482</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.374</BD>
            <AirDry>0.210</AirDry>
            <LL15>0.210</LL15>
            <DUL>0.350</DUL>
            <SAT>0.482</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.412</BD>
            <AirDry>0.238</AirDry>
            <LL15>0.238</LL15>
            <DUL>0.351</DUL>
            <SAT>0.467</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.423</BD>
            <AirDry>0.249</AirDry>
            <LL15>0.249</LL15>
            <DUL>0.350</DUL>
            <SAT>0.463</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.455</BD>
            <AirDry>0.276</AirDry>
            <LL15>0.276</LL15>
            <DUL>0.344</DUL>
            <SAT>0.451</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>88</DiffusConst>
          <DiffusSlope>35.4</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.700</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.850</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">6</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.09</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.17</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>2</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.23</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.3</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.22</EC>
            <PH units="CaCl2">7.9</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.51</EC>
            <PH>8.3</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>1.02</EC>
            <PH>8.7</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>1.58</EC>
            <PH>8.8</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock34">
    <clock name="Clock" />
    <metfile name="met">
      <filename>79028.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Peter Taylor^Sheepyards.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">20-Apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">08-Jun</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Frame</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">01-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">30</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('20-Apr')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('08-Jun')
StationNumber=79028
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">08-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">5</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise2">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">29-Aug</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">40</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock34 Yearly.out</filename>
        <Title>2004^Peter Taylor^Sheepyards</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Peter Taylor^Sheepyards</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.230</BD>
            <AirDry units="mm/mm">0.135</AirDry>
            <LL15 units="mm/mm">0.270</LL15>
            <DUL units="mm/mm">0.396</DUL>
            <SAT units="mm/mm">0.506</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.185</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">0.420</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.266</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.266</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.361</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.361</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.311</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.294</LL>
              <KL>0.020</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.294</LL>
              <KL>0.020</KL>
              <XF>1</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.510</BD>
            <AirDry>0.213</AirDry>
            <LL15>0.266</LL15>
            <DUL>0.357</DUL>
            <SAT>0.400</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.510</BD>
            <AirDry>0.266</AirDry>
            <LL15>0.266</LL15>
            <DUL>0.357</DUL>
            <SAT>0.400</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.286</BD>
            <AirDry>0.361</AirDry>
            <LL15>0.361</LL15>
            <DUL>0.435</DUL>
            <SAT>0.485</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.286</BD>
            <AirDry>0.361</AirDry>
            <LL15>0.361</LL15>
            <DUL>0.435</DUL>
            <SAT>0.485</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.272</BD>
            <AirDry>0.311</AirDry>
            <LL15>0.311</LL15>
            <DUL>0.436</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.341</BD>
            <AirDry>0.294</AirDry>
            <LL15>0.294</LL15>
            <DUL>0.392</DUL>
            <SAT>0.464</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.427</BD>
            <AirDry>0.294</AirDry>
            <LL15>0.294</LL15>
            <DUL>0.382</DUL>
            <SAT>0.432</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>40</DiffusConst>
          <DiffusSlope>16</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.700</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1.050</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.450</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.450</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.300</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.300</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.300</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.250</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.250</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">7.800</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.100</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.100</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.100</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.100</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.200</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">19</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.13</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>4</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.11</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.22</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>2</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.24</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.2</EC>
            <PH units="CaCl2">7.3</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.3</EC>
            <PH>7.7</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.6</EC>
            <PH>8.1</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.8</EC>
            <PH>8.2</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock35">
    <clock name="Clock" />
    <metfile name="met">
      <filename>76064.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Peter Walch^Mat W.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">14-Jun</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">06-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">11</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('14-Jun')
StationNumber=76064
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock35 Yearly.out</filename>
        <Title>2004^Peter Walch^Mat W</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Peter Walch^Mat W</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.621</BD>
            <AirDry units="mm/mm">0.055</AirDry>
            <LL15 units="mm/mm">0.110</LL15>
            <DUL units="mm/mm">0.139</DUL>
            <SAT units="mm/mm">0.358</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.105</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.107</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.107</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.105</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.105</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.137</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.222</LL>
              <KL>0.020</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.222</LL>
              <KL>0.020</KL>
              <XF>1</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.608</BD>
            <AirDry>0.086</AirDry>
            <LL15>0.107</LL15>
            <DUL>0.183</DUL>
            <SAT>0.363</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.608</BD>
            <AirDry>0.107</AirDry>
            <LL15>0.107</LL15>
            <DUL>0.183</DUL>
            <SAT>0.363</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.631</BD>
            <AirDry>0.105</AirDry>
            <LL15>0.105</LL15>
            <DUL>0.183</DUL>
            <SAT>0.363</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.631</BD>
            <AirDry>0.105</AirDry>
            <LL15>0.105</LL15>
            <DUL>0.183</DUL>
            <SAT>0.363</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.695</BD>
            <AirDry>0.137</AirDry>
            <LL15>0.137</LL15>
            <DUL>0.236</DUL>
            <SAT>0.330</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.700</BD>
            <AirDry>0.222</AirDry>
            <LL15>0.222</LL15>
            <DUL>0.236</DUL>
            <SAT>0.330</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.700</BD>
            <AirDry>0.222</AirDry>
            <LL15>0.222</LL15>
            <DUL>0.236</DUL>
            <SAT>0.330</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>220</DiffusConst>
          <DiffusSlope>22</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.700</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1.050</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.450</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.450</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.450</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.450</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.300</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.250</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.250</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">8.500</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.800</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.800</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.800</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.800</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">8</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.03</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>4</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.08</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>2</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.16</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>4</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.15</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.1</EC>
            <PH units="CaCl2">7.2</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.1</EC>
            <PH>7.7</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.1</EC>
            <PH>8.1</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.1</EC>
            <PH>7.9</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock36">
    <clock name="Clock" />
    <metfile name="met">
      <filename>80006.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">R and J Postlethwaite^River.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">05-Jul</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Annuello</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">04-Jul</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">37.7999992370605</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('05-Jul')
StationNumber=80006
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock36 Yearly.out</filename>
        <Title>2004^R and J Postlethwaite^River</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^R and J Postlethwaite^River</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.350</BD>
            <AirDry units="mm/mm">0.065</AirDry>
            <LL15 units="mm/mm">0.130</LL15>
            <DUL units="mm/mm">0.300</DUL>
            <SAT units="mm/mm">0.491</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.115</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.152</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.152</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.308</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.308</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.324</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.330</LL>
              <KL>0.020</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.330</LL>
              <KL>0.020</KL>
              <XF>1</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.369</BD>
            <AirDry>0.122</AirDry>
            <LL15>0.152</LL15>
            <DUL>0.330</DUL>
            <SAT>0.483</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.369</BD>
            <AirDry>0.152</AirDry>
            <LL15>0.152</LL15>
            <DUL>0.370</DUL>
            <SAT>0.483</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.383</BD>
            <AirDry>0.308</AirDry>
            <LL15>0.308</LL15>
            <DUL>0.370</DUL>
            <SAT>0.478</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.383</BD>
            <AirDry>0.308</AirDry>
            <LL15>0.308</LL15>
            <DUL>0.370</DUL>
            <SAT>0.478</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.375</BD>
            <AirDry>0.324</AirDry>
            <LL15>0.324</LL15>
            <DUL>0.370</DUL>
            <SAT>0.481</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.384</BD>
            <AirDry>0.330</AirDry>
            <LL15>0.330</LL15>
            <DUL>0.370</DUL>
            <SAT>0.478</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.391</BD>
            <AirDry>0.330</AirDry>
            <LL15>0.330</LL15>
            <DUL>0.370</DUL>
            <SAT>0.475</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>88</DiffusConst>
          <DiffusSlope>35.4</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>84</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.700</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1.050</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.450</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.450</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.300</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.300</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.300</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.250</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.250</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">8.500</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.800</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.800</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>8.900</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">16</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.04</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.06</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.19</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>6</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.24</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.1</EC>
            <PH units="CaCl2">5.9</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.1</EC>
            <PH>6.6</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.1</EC>
            <PH>7.1</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.1</EC>
            <PH>7.4</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock37">
    <clock name="Clock" />
    <metfile name="met">
      <filename>74034.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Roger Matthews^Veslos-George.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">27-Apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">29-Apr</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Whistler</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">29-Apr</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">12</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('27-Apr')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('29-Apr')
StationNumber=74034
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">03-Aug</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">36.5</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock37 Yearly.out</filename>
        <Title>2004^Roger Matthews^Veslos-George</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Roger Matthews^Veslos-George</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.480</BD>
            <AirDry units="mm/mm">0.055</AirDry>
            <LL15 units="mm/mm">0.110</LL15>
            <DUL units="mm/mm">0.288</DUL>
            <SAT units="mm/mm">0.350</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.110</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.132</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.147</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.170</LL>
              <KL>0.040</KL>
              <XF>0.893</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.186</LL>
              <KL>0.040</KL>
              <XF>0.893</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.222</LL>
              <KL>0.040</KL>
              <XF>0.865</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.257</LL>
              <KL>0.020</KL>
              <XF>0.865</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.275</LL>
              <KL>0.020</KL>
              <XF>0.828</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.500</BD>
            <AirDry>0.110</AirDry>
            <LL15>0.132</LL15>
            <DUL>0.269</DUL>
            <SAT>0.335</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.450</BD>
            <AirDry>0.132</AirDry>
            <LL15>0.147</LL15>
            <DUL>0.252</DUL>
            <SAT>0.323</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.370</BD>
            <AirDry>0.170</AirDry>
            <LL15>0.170</LL15>
            <DUL>0.285</DUL>
            <SAT>0.355</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.430</BD>
            <AirDry>0.186</AirDry>
            <LL15>0.186</LL15>
            <DUL>0.292</DUL>
            <SAT>0.352</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.550</BD>
            <AirDry>0.222</AirDry>
            <LL15>0.222</LL15>
            <DUL>0.310</DUL>
            <SAT>0.342</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.670</BD>
            <AirDry>0.257</AirDry>
            <LL15>0.257</LL15>
            <DUL>0.314</DUL>
            <SAT>0.339</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.620</BD>
            <AirDry>0.275</AirDry>
            <LL15>0.275</LL15>
            <DUL>0.319</DUL>
            <SAT>0.353</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>44</DiffusConst>
          <DiffusSlope>16</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>84</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.500</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.400</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.200</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.100</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.100</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.100</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.700</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.850</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">6</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>6</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>6</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>6</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>6</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>6</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>6</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>6</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">13</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.15</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>7</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.08</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>9</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.21</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>6</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.23</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.1</EC>
            <PH units="CaCl2">5.2</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0</EC>
            <PH>5.4</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.1</EC>
            <PH>7</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.1</EC>
            <PH>7.7</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock38">
    <clock name="Clock" />
    <metfile name="met">
      <filename>78029.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Rolf Hedt^Kalkee nth-sth.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">09-Jun</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">07-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25.6000003814697</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('09-Jun')
StationNumber=78029
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock38 Yearly.out</filename>
        <Title>2004^Rolf Hedt^Kalkee nth-sth</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Rolf Hedt^Kalkee nth-sth</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.173</BD>
            <AirDry units="mm/mm">0.120</AirDry>
            <LL15 units="mm/mm">0.200</LL15>
            <DUL units="mm/mm">0.410</DUL>
            <SAT units="mm/mm">0.490</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.200</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.190</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.200</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.240</LL>
              <KL>0.040</KL>
              <XF>0.960</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.270</LL>
              <KL>0.040</KL>
              <XF>0.917</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.280</LL>
              <KL>0.040</KL>
              <XF>0.809</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.321</LL>
              <KL>0.020</KL>
              <XF>0.791</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.332</LL>
              <KL>0.020</KL>
              <XF>0.679</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.231</BD>
            <AirDry>0.170</AirDry>
            <LL15>0.190</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.231</BD>
            <AirDry>0.200</AirDry>
            <LL15>0.200</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.175</BD>
            <AirDry>0.240</AirDry>
            <LL15>0.240</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.175</BD>
            <AirDry>0.270</AirDry>
            <LL15>0.270</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.201</BD>
            <AirDry>0.280</AirDry>
            <LL15>0.280</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.252</BD>
            <AirDry>0.321</AirDry>
            <LL15>0.321</LL15>
            <DUL>0.400</DUL>
            <SAT>0.480</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.278</BD>
            <AirDry>0.332</AirDry>
            <LL15>0.332</LL15>
            <DUL>0.400</DUL>
            <SAT>0.480</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>40</DiffusConst>
          <DiffusSlope>16</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.700</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.850</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">15</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.08</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>4</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.17</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>5</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.24</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>5</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.24</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.2</EC>
            <PH units="CaCl2">7.5</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.2</EC>
            <PH>7.9</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.5</EC>
            <PH>8.1</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.8</EC>
            <PH>8.3</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock39">
    <clock name="Clock" />
    <metfile name="met">
      <filename>80024.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Ron and Deid Schlitz^Uondo 9.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">19-Apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">23-Jun</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">07-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">14</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('19-Apr')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('23-Jun')
StationNumber=80024
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">30-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">50</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise2">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">01-Jul</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">30</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock39 Yearly.out</filename>
        <Title>2004^Ron and Deid Schlitz^Uondo 9</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Ron and Deid Schlitz^Uondo 9</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.360</BD>
            <AirDry units="mm/mm">0.073</AirDry>
            <LL15 units="mm/mm">0.123</LL15>
            <DUL units="mm/mm">0.334</DUL>
            <SAT units="mm/mm">0.487</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.123</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.172</LL>
              <KL>0.060</KL>
              <XF>0.912</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.173</LL>
              <KL>0.040</KL>
              <XF>0.912</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.206</LL>
              <KL>0.040</KL>
              <XF>0.671</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.210</LL>
              <KL>0.040</KL>
              <XF>0.671</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.238</LL>
              <KL>0.040</KL>
              <XF>0.484</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.249</LL>
              <KL>0.020</KL>
              <XF>0.486</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.276</LL>
              <KL>0.020</KL>
              <XF>0.382</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.293</BD>
            <AirDry>0.146</AirDry>
            <LL15>0.172</LL15>
            <DUL>0.341</DUL>
            <SAT>0.512</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.293</BD>
            <AirDry>0.165</AirDry>
            <LL15>0.173</LL15>
            <DUL>0.341</DUL>
            <SAT>0.512</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.374</BD>
            <AirDry>0.206</AirDry>
            <LL15>0.206</LL15>
            <DUL>0.352</DUL>
            <SAT>0.482</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.374</BD>
            <AirDry>0.210</AirDry>
            <LL15>0.210</LL15>
            <DUL>0.350</DUL>
            <SAT>0.482</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.412</BD>
            <AirDry>0.238</AirDry>
            <LL15>0.238</LL15>
            <DUL>0.351</DUL>
            <SAT>0.467</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.423</BD>
            <AirDry>0.249</AirDry>
            <LL15>0.249</LL15>
            <DUL>0.350</DUL>
            <SAT>0.463</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.455</BD>
            <AirDry>0.276</AirDry>
            <LL15>0.276</LL15>
            <DUL>0.344</DUL>
            <SAT>0.451</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>88</DiffusConst>
          <DiffusSlope>35.4</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.700</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.850</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">4</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.1</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>2</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.19</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>2</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.24</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>2</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.28</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.2</EC>
            <PH units="CaCl2">8</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.5</EC>
            <PH>8.4</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.8</EC>
            <PH>8.6</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>1.2</EC>
            <PH>8.7</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock40">
    <clock name="Clock" />
    <metfile name="met">
      <filename>79075.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Russell Dunlop^Barneys.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">26-Apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">05-Jun</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">22-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('26-Apr')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('05-Jun')
StationNumber=79075
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">05-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">6</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise2">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">22-Jul</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">30</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock40 Yearly.out</filename>
        <Title>2004^Russell Dunlop^Barneys</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Russell Dunlop^Barneys</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.173</BD>
            <AirDry units="mm/mm">0.120</AirDry>
            <LL15 units="mm/mm">0.200</LL15>
            <DUL units="mm/mm">0.410</DUL>
            <SAT units="mm/mm">0.490</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.200</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.190</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.200</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.240</LL>
              <KL>0.040</KL>
              <XF>0.960</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.270</LL>
              <KL>0.040</KL>
              <XF>0.917</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.280</LL>
              <KL>0.040</KL>
              <XF>0.809</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.321</LL>
              <KL>0.020</KL>
              <XF>0.791</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.332</LL>
              <KL>0.020</KL>
              <XF>0.679</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.231</BD>
            <AirDry>0.170</AirDry>
            <LL15>0.190</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.231</BD>
            <AirDry>0.200</AirDry>
            <LL15>0.200</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.175</BD>
            <AirDry>0.240</AirDry>
            <LL15>0.240</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.175</BD>
            <AirDry>0.270</AirDry>
            <LL15>0.270</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.201</BD>
            <AirDry>0.280</AirDry>
            <LL15>0.280</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.252</BD>
            <AirDry>0.321</AirDry>
            <LL15>0.321</LL15>
            <DUL>0.400</DUL>
            <SAT>0.480</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.278</BD>
            <AirDry>0.332</AirDry>
            <LL15>0.332</LL15>
            <DUL>0.400</DUL>
            <SAT>0.480</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>40</DiffusConst>
          <DiffusSlope>16</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.700</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.850</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">11</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.12</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>4</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.2</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.27</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>4</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.29</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.2</EC>
            <PH units="CaCl2">7.6</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.2</EC>
            <PH>7.7</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.3</EC>
            <PH>8</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.5</EC>
            <PH>8.2</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock41">
    <clock name="Clock" />
    <metfile name="met">
      <filename>18087.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Steve Nankevill^Paddock 9.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-Apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">02-Jul</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Silverstar</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">02-Jul</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">11</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-Apr')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('02-Jul')
StationNumber=18087
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock41 Yearly.out</filename>
        <Title>2004^Steve Nankevill^Paddock 9</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Steve Nankevill^Paddock 9</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.300</BD>
            <AirDry units="mm/mm">0.027</AirDry>
            <LL15 units="mm/mm">0.053</LL15>
            <DUL units="mm/mm">0.133</DUL>
            <SAT units="mm/mm">0.200</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.053</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.072</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.104</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.127</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.182</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.183</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.183</LL>
              <KL>0.020</KL>
              <XF>1</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.300</BD>
            <AirDry>0.036</AirDry>
            <LL15>0.072</LL15>
            <DUL>0.133</DUL>
            <SAT>0.200</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.300</BD>
            <AirDry>0.063</AirDry>
            <LL15>0.104</LL15>
            <DUL>0.153</DUL>
            <SAT>0.210</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.500</BD>
            <AirDry>0.079</AirDry>
            <LL15>0.127</LL15>
            <DUL>0.223</DUL>
            <SAT>0.280</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.500</BD>
            <AirDry>0.089</AirDry>
            <LL15>0.182</LL15>
            <DUL>0.260</DUL>
            <SAT>0.320</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.500</BD>
            <AirDry>0.162</AirDry>
            <LL15>0.183</LL15>
            <DUL>0.260</DUL>
            <SAT>0.320</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.500</BD>
            <AirDry>0.171</AirDry>
            <LL15>0.183</LL15>
            <DUL>0.260</DUL>
            <SAT>0.320</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>220</DiffusConst>
          <DiffusSlope>22</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1.520</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.700</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.700</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.400</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.300</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.850</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.200</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.200</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">8.200</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.300</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.300</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.600</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>9.600</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">32.3</NO3>
            <NH4 units="ppm">9</NH4>
            <SW units="mm/mm">0.03</SW>
          </Layer>
          <Layer>
            <Thickness>100</Thickness>
            <NO3>32.3</NO3>
            <NH4>9</NH4>
            <SW>0.04</SW>
          </Layer>
          <Layer>
            <Thickness>100</Thickness>
            <NO3>32.3</NO3>
            <NH4>9</NH4>
            <SW>0.03</SW>
          </Layer>
          <Layer>
            <Thickness>100</Thickness>
            <NO3>4.4</NO3>
            <NH4>2</NH4>
            <SW>0.06</SW>
          </Layer>
          <Layer>
            <Thickness>100</Thickness>
            <NO3>3.8</NO3>
            <NH4>2</NH4>
            <SW>0.08</SW>
          </Layer>
          <Layer>
            <Thickness>100</Thickness>
            <NO3>3.8</NO3>
            <NH4>2</NH4>
            <SW>0.09</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <OC units="Total %">1.5</OC>
            <EC units="1:5 dS/m">0.1</EC>
          </Layer>
          <Layer>
            <Thickness>100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.1</EC>
          </Layer>
          <Layer>
            <Thickness>100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.1</EC>
          </Layer>
          <Layer>
            <Thickness>100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.3</EC>
          </Layer>
          <Layer>
            <Thickness>100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.5</EC>
          </Layer>
          <Layer>
            <Thickness>100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.8</EC>
          </Layer>
          <Layer>
            <Thickness>100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.7</EC>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock42">
    <clock name="Clock" />
    <metfile name="met">
      <filename>76025.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Stuart McQueen^PERS.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">19-Apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">01-Jun</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">01-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">15.6000003814697</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('19-Apr')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('01-Jun')
StationNumber=76025
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">16-Jul</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">23</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock42 Yearly.out</filename>
        <Title>2004^Stuart McQueen^PERS</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Stuart McQueen^PERS</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.716</BD>
            <AirDry units="mm/mm">0.064</AirDry>
            <LL15 units="mm/mm">0.114</LL15>
            <DUL units="mm/mm">0.219</DUL>
            <SAT units="mm/mm">0.352</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.114</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.131</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.131</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.146</LL>
              <KL>0.040</KL>
              <XF>0.924</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.146</LL>
              <KL>0.040</KL>
              <XF>0.867</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.164</LL>
              <KL>0.040</KL>
              <XF>0.679</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.208</LL>
              <KL>0.020</KL>
              <XF>0.679</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.235</LL>
              <KL>0.020</KL>
              <XF>0.587</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.694</BD>
            <AirDry>0.111</AirDry>
            <LL15>0.131</LL15>
            <DUL>0.227</DUL>
            <SAT>0.361</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.694</BD>
            <AirDry>0.125</AirDry>
            <LL15>0.131</LL15>
            <DUL>0.227</DUL>
            <SAT>0.361</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.650</BD>
            <AirDry>0.146</AirDry>
            <LL15>0.146</LL15>
            <DUL>0.244</DUL>
            <SAT>0.377</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.650</BD>
            <AirDry>0.146</AirDry>
            <LL15>0.146</LL15>
            <DUL>0.244</DUL>
            <SAT>0.377</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.647</BD>
            <AirDry>0.164</AirDry>
            <LL15>0.164</LL15>
            <DUL>0.257</DUL>
            <SAT>0.378</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.657</BD>
            <AirDry>0.208</AirDry>
            <LL15>0.208</LL15>
            <DUL>0.259</DUL>
            <SAT>0.375</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.677</BD>
            <AirDry>0.235</AirDry>
            <LL15>0.235</LL15>
            <DUL>0.269</DUL>
            <SAT>0.367</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>220</DiffusConst>
          <DiffusSlope>22</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.500</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.500</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.500</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.500</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.500</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.500</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.500</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.500</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.700</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.850</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">7</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.03</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.17</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.21</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>7</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.22</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.45</EC>
            <PH units="CaCl2">8.3</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.15</EC>
            <PH>8.2</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.29</EC>
            <PH>8.4</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.54</EC>
            <PH>8.6</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock43">
    <clock name="Clock" />
    <metfile name="met">
      <filename>78010.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Tony Gregson^Paddock 14.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">15-Apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">11-Jun</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Mitre</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">16-Apr</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">42</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate" enabled="no">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1/1/1800</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">0</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">1</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('15-Apr')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('11-Jun')
StationNumber=78010
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">11-Jun</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">4</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock43 Yearly.out</filename>
        <Title>2004^Tony Gregson^Paddock 14</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Tony Gregson^Paddock 14</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.173</BD>
            <AirDry units="mm/mm">0.120</AirDry>
            <LL15 units="mm/mm">0.200</LL15>
            <DUL units="mm/mm">0.410</DUL>
            <SAT units="mm/mm">0.490</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.200</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.190</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.200</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.240</LL>
              <KL>0.040</KL>
              <XF>0.960</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.270</LL>
              <KL>0.040</KL>
              <XF>0.917</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.280</LL>
              <KL>0.040</KL>
              <XF>0.809</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.321</LL>
              <KL>0.020</KL>
              <XF>0.791</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.332</LL>
              <KL>0.020</KL>
              <XF>0.679</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.231</BD>
            <AirDry>0.170</AirDry>
            <LL15>0.190</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.231</BD>
            <AirDry>0.200</AirDry>
            <LL15>0.200</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.175</BD>
            <AirDry>0.240</AirDry>
            <LL15>0.240</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.175</BD>
            <AirDry>0.270</AirDry>
            <LL15>0.270</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.201</BD>
            <AirDry>0.280</AirDry>
            <LL15>0.280</LL15>
            <DUL>0.410</DUL>
            <SAT>0.490</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.252</BD>
            <AirDry>0.321</AirDry>
            <LL15>0.321</LL15>
            <DUL>0.400</DUL>
            <SAT>0.480</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.278</BD>
            <AirDry>0.332</AirDry>
            <LL15>0.332</LL15>
            <DUL>0.400</DUL>
            <SAT>0.480</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>40</DiffusConst>
          <DiffusSlope>16</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>73</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.700</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.850</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">3</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.09</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>1</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.18</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>1</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.27</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>2</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.29</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.2</EC>
            <PH units="CaCl2">7.8</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.2</EC>
            <PH>8.1</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.5</EC>
            <PH>8.4</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.6</EC>
            <PH>8.6</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
  <simulation name="Paddock44">
    <clock name="Clock" />
    <metfile name="met">
      <filename>80051.met</filename>
    </metfile>
    <patchinput name="PatchInput">
      <filename name="filename">Trevor James^1 East.rain</filename>
    </patchinput>
    <summaryfile name="SummaryFile" />
    <area name="Paddock">
      <folder name="Management">
        <manager name="GrossMargin">
          <ui>
            <category description="Cost properties" type="category" />
            <FertiliserCost type="text" description="Cost of N fertiliser ($/ha) : ">1.2</FertiliserCost>
            <FertiliserApplicationCost type="text" description="Cost of N application ($/ha) : ">15</FertiliserApplicationCost>
            <WaterCost type="text" description="Cost of water ($/Ml) : ">0</WaterCost>
            <category description="Price properties" type="category" />
            <Price type="text" description="Price ($/t) : ">140</Price>
            <ProteinContent type="text" description="Minimum protein for classification ($/t) : ">10.5</ProteinContent>
            <ProteinIncrement type="text" description="Protein increment payment ($/t) : ">2</ProteinIncrement>
          </ui>
          <script name="post">
            <text><![CDATA[   ! Reset the bank to zero the day after harvest.
   if (ResetBank = 1 or today = met_start_date) then
      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
   endif

   ! Keep track of the number of fertiliser applications.
   if (fertiliser > 0)then
      Cost = [FertiliserCost] * fertiliser + [FertiliserApplicationCost]
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Keep track of the number of irrigation applications.
   if (irrig_tot > 0)then
      Cost = [WaterCost] * (irrig_tot / 100)
      Bank = Bank - Cost
      if ScenarioApplication = 'yes' then
         TwoTimesCost = TwoTimesCost + 2 * Cost
      endif
   endif

   ! Calculate gross margin at harvest.
   if StageName = 'harvest_ripe' or plant_status = 'dead' then
      if (grain_protein > [ProteinContent]) then
         FullPrice = [Price] + (grain_protein - [ProteinContent]) * 2 * [ProteinIncrement]
      else
         FullPrice = [Price]
      endif
      Bank = Bank + FullPrice * WetYield
      ResetBank = 1
   endif
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Reset">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">01-May</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
            <surfaceommodule type="modulename" description="Name of your surface organic matter module : ">SurfaceOM</surfaceommodule>
            <resetWater type="yesno" description="Reset soil water?">yes</resetWater>
            <resetNitrogen type="yesno" description="Reset soil nitrogen?">yes</resetNitrogen>
            <resetSurfaceOM type="yesno" description="Reset surface organic matter?">yes</resetSurfaceOM>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
      resetWater = '[resetWater]'
      resetNitrogen  = '[resetNitrogen]'
      resetSurfaceOM = '[resetSurfaceOM]'
      if (resetWater = 'yes') then
          '[soilmodule] Water' reset
      endif
      if (resetNitrogen = 'yes') then
          '[soilmodule] Nitrogen' reset
      endif
      if (resetSurfaceOM = 'yes') then
          '[surfaceommodule]' reset
      endif
      act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sow">
          <ui>
            <category description="Sowing criteria" type="category" />
            <sowdate type="text" description="Enter sowing date (dd-mmm) : ">19-May</sowdate>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">Wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">Chara</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" listvalues="solid, single, double" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text>   CropSown  = '[crop]'
   if (today = date('[sowdate]') then
      sow_year = year
      if ('[FurrowIrrigation]' = 'yes') then
         skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
      else
         [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
      endif
   endif
               </text>
            <event>start_of_day</event>
          </script>
          <script name="init">
            <text>   sow_year = 0</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="Sowing tillage">
          <ui>
            <category description="Tillage details" type="category" />
            <surfaceommodule type="modulename" description="Module used to apply the tillage : ">SurfaceOM</surfaceommodule>
            <tillage_type type="list" description="Tillage type : "> planter</tillage_type>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">50</tillage_depth>
            <tillage_f_incorp type="text" description="User_defined fraction of surface residues to incorporate (0-1): ">0.1</tillage_f_incorp>
          </ui>
          <script name="sowing">
            <text>
         '[surfaceommodule]' tillage type = [tillage_type], f_incorp = [tillage_f_incorp] (), tillage_depth = [tillage_depth]
   </text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="Harvest">
          <ui>
            <category description="Harvesting criteria" type="category" />
            <crop type="crop" description="Enter name of crop to harvest when ripe : ">Wheat</crop>
          </ui>
          <script name="end_of_day">
            <text>

           if [crop].StageName = 'harvest_ripe' or [crop].plant_status = 'dead' then
              [crop]  harvest
              [crop]  end_crop
              harvesttoday = 1
           else
              harvesttoday = 0
           endif

            </text>
            <event>end_of_day</event>
          </script>
        </manager>
        <manager name="Yield moisture correction">
          <script name="start_of_day">
            <text>   if CropSown = 'canola' then
      MoistureContent = 8       ! %
   else
      MoistureContent = 12     ! %
   endif
   WetYield = yield / (1 - MoistureContent/100) / 1000
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Hay">
          <ui>
            <category description="Cost properties" type="category" />
            <HayCost type="text" description="Cost of Hay production ($/ha) : ">120</HayCost>
            <BalingCost type="text" description="Cost of baling hay ($/ha) : ">0</BalingCost>
            <GrainCost type="text" description="Cost of Grain production ($/ha);">30</GrainCost>
            <category description="Price properties" type="category" />
            <HayPrice type="text" description="Hay Price ($/t) : ">100</HayPrice>
            <GrainPrice type="text" description="Grain Price ($/t) :">200</GrainPrice>
          </ui>
          <script name="post">
            <text><![CDATA[
   ! Calculate hay biomass and convert kg/ha to t/ha - assume 13% moisture
   CropBiomass =  (biomass / (1 - 13/100) / 1000)
   HayBiomassPercent = 70
   if (biomass >= 2000 and biomass <= 12000) then
      HayBiomassPercent = 70 + (biomass-2000) / (12000-2000) * 5
   elseif (biomass > 12000) then
      HayBiomassPercent = 75 + (biomass-12000) / (25000-12000) * 5
   endif
   HayBiomass = (HayBiomassPercent / 100) * CropBiomass

   ! HayGrossMargin calculation


   HayGrossMargin = HayBiomass * [HayPrice] - [HayCost] - ([BalingCost] * HayBiomass)
   GrainGrossMargin = WetYield * [GrainPrice] - [GrainCost]
]]></text>
            <event>post</event>
          </script>
          <script name="init">
            <text>      Bank = 0
      ResetBank = 0
      TwoTimesCost = 0
      ScenarioApplication = 'no'</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="MildFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">69.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">0</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">75.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-2</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">0</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereFrost">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">60</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">mint</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">-100</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">-2</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereFrost</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="MildHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">32</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">34</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">MildHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="ModerateHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">34</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">36</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">ModerateHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="SevereHeatShock">
          <ui>
            <category description="Condition1 properties" type="category" />
            <VariableName1 type="text" description="Name of 1st APSIM variable to check (e.g. StageName) : ">Z</VariableName1>
            <LowerBound1 type="text" description="Lower bound of variable1 : ">70</LowerBound1>
            <UpperBound1 type="text" description="Upper bound of variable1 : ">79.99</UpperBound1>
            <category description="Condition2 properties" type="category" />
            <VariableName2 type="text" description="Name of 2nd APSIM variable to bound check (e.g. maxt, mint, avtemp) : ">maxt</VariableName2>
            <LowerBound2 type="text" description="Lower bound of variable2 : ">36</LowerBound2>
            <UpperBound2 type="text" description="Upper bound of variable2 : ">100</UpperBound2>
            <category description="Event properties" type="category" />
            <EventName type="text" description="Name of event to publish when above 2 conditions are met : ">SevereHeatShock</EventName>
          </ui>
          <script name="post">
            <text><![CDATA[
   if (DaysAfterSowing = 1) then
      [EventName]Count = 0
   endif

          if ([VariableName1] >= [LowerBound1] and
              [VariableName1] <= [UpperBound1] and
              [VariableName2] >= [LowerBound2] and
              [VariableName2] < [UpperBound2]) then
             act_mods [EventName]
             [EventName]Count =  [EventName]Count +1
          endif
]]></text>
            <event>post</event>
          </script>
        </manager>
        <manager name="Fertilise">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">19-May</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">6</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">10-May</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">35</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">0.75</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Tillage" enabled="no">
          <ui>
            <category description="When should tillage be done" type="category" />
            <TillageDate type="ddmmmdate" description="Enter tillage date (dd-mmm) : ">1/1/1800</TillageDate>
            <TillageDateFull type="text" description="Tillage date full (not used) :" />
            <category description="Tillage application details" type="category" />
            <Disturbance type="text" description="Disturbance :">low</Disturbance>
            <tillage_depth type="text" description="User_defined depth of seedbed preparation (mm) : ">100</tillage_depth>
            <Scenario type="text" description="Scenario application? (not used)" />
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[TillageDate]') then
      if ('[Disturbance]' = 'low') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.2, tillage_depth = [tillage_depth]
      elseif ('[Disturbance]' = 'medium') then
         SurfaceOM tillage type = user_defined, f_incorp = 0.5, tillage_depth = [tillage_depth]
      else
         SurfaceOM tillage type = user_defined, f_incorp = 0.8, tillage_depth = [tillage_depth]
      endif
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Constants">
          <script>
            <text>TodayDate = 0
TodayDateFull = 0
StartSeasonDate = 0
StartSeasonDateFull = 0
ResetDate = 0
ResetDateFull = 0
SowDateFull = 0
SowDate = 0
</text>
            <event>init</event>
          </script>
          <script>
            <text>TodayDate=date('02-Jul')
TodayDateFull=date('02/07/2008')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('01/04/2008')
ResetDate=date('23-May')
ResetDateFull=date('23/05/2008')
SowDateFull=date('06/05/2008')
SowDate=date('06-May')
</text>
            <event>start_of_day</event>
          </script>
          <start_of_day>
            <text>
TodayDate=date('')
TodayDateFull=date('')
StartSeasonDate=date('01-Apr')
StartSeasonDateFull=date('')
ResetDate=date('01-May')
ResetDateFull=date('')
SowDateFull=date('')
SowDate=date('19-May')
StationNumber=80051
</text>
          </start_of_day>
        </manager>
        <manager name="Script">
          <script>
            <text>

   if (CropSown = 'sorghum') then
      if (DaysAfterSowing &lt; 3) then   ! There's a bug in Sorghum when swdef_expan=0 before das = 3
         sw_stress_expan = 0
         sw_stress_photo = 0
         n_stress_expan = 0
         n_stress_photo = 0
      else
         sw_stress_expan = 1 - swdef_expan
         sw_stress_photo = 1 - swdef_photo
         n_stress_expan = 1 - nfact_expan
         n_stress_photo = 1 - nfact_photo
      endif
      leaf_no = LeafNo
      grain_no = GrainNo
      grain_n = GrainGreenN
      flowering_das = FloweringDAS
      maturity_das = MaturityDAS
   endif

   ! Work out when to start doing a daily output of variables.
   ! = min(start season date, reset date, sow date)
   if (StartDailyDate = 0) then
      if (StartSeasonDateFull &lt;= SowDateFull and StartSeasonDateFull &lt;= ResetDateFull) then
         StartDailyDate = StartSeasonDateFull)
      elseif (SowDateFull &lt;= ResetDateFull) then
         StartDailyDate = SowDateFull
      else
         StartDailyDate = ResetDateFull
      endif
   endif

   if (today &gt;= StartDailyDate) then
      act_mods OnDailyOutput

      ! Create a variable that = 1 during the current fallow and has a value
      ! of 0 when not in current fallow.
      if (DaysAfterSowing &gt; 0) then
         CurrentCropFound = 1
      endif
      if (CurrentCropFound = 1 and DaysAfterSowing = 0) then
         CurrentFallow = 1
      endif

   endif

   ! -------------------------------------------------------------
   ! Create a special decile date that starts at
   ! this years start of growing season date
   ! and steps up month at a time
   ! -------------------------------------------------------------
   if (today = StartSeasonDate) then
      DecileDate = StartSeasonDateFull
      DoDecileOutput = 1
   elseif (start_month = 1) then
      DecileDate = add_months('DecileDate, 1')
   endif
   if (DoDecileOutput = 1 and today &lt; StartSeasonDateFull and start_month = 1) then
      act_mods OnDecileOutput
   endif

   ! -------------------------------------------------------------
   ! Create 2 new events for growing season
   ! rainfall calculation - start and end dates.
   ! -------------------------------------------------------------
   if (today = date('1-apr')) then
      act_mods GSRStart      ! Growing season rainfall start.
   endif
   if (today = date('31-oct')) then
      act_mods GSREnd      ! Growing season rainfall end.
   endif

   ! -------------------------------------------------------------
   ! Create 'thismonth' and 'threemonthstime'
   ! events so that Tracker can do its future
   ! rain calculations
   ! -------------------------------------------------------------
   if (sow_year &gt; 0 and month = month(TodayDateFull)) then
      act_mods ThisMonth
      ThreeMonthsTimeDate = today + 90
   endif
   if (today = ThreeMonthsTimeDate) then
      act_mods ThreeMonthsTime
   endif

   ! -----------------------------------------
   ! Improved Zadok_stage
   ! -----------------------------------------
   if (zadok_stage &lt; 30) then
      Z = node_no + 9
      if (Z &gt; 16) then
         Z = 16
      endif
   else
      Z = zadok_stage
   endif

   ! -----------------------------------------
   ! Calculate a state.
   ! -----------------------------------------
   if (StationNumber &lt;= 013999 ) then
      AustState = 'wa'
   elseif (StationNumber &lt;= 015999) then
      AustState = 'nt'
   elseif (StationNumber &lt;= 026999) then
      AustState = 'sa'
   elseif (StationNumber &lt;= 045999) then
      AustState = 'qld'
   elseif (StationNumber &lt;= 075999) then
      AustState = 'nsw/act'
   elseif (StationNumber &lt;= 090999) then
      AustState = 'vic'
   elseif (StationNumber &lt;= 099999) then
      AustState = 'tas'
   else
      AustState = 'unknown'
   endif

   ! -----------------------------------------
   ! Calculate a sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   ! -----------------------------------------
   ! Calculate a pre-sowing fertiliser variable.
   ! -----------------------------------------
   if (today = SowDate) then
      SowingFertiliser = fertiliser
   endif

   if (DaysAfterSowing = 0) then
      PreSowingFertiliser = PreSowingFertiliser + fertiliser
   elseif (harvesttoday = 1) then
      PreSowingFertiliser = 0
   endif

   ! -----------------------------------------
   ! Calculate additive frost risk and heat shock variables.
   ! -----------------------------------------

   MildHeatShockAdditiveCount = MildHeatShockCount + ModerateHeatShockCount + SevereHeatShockCount
   ModerateHeatShockAdditiveCount = ModerateHeatShockCount + SevereHeatShockCount

   MildFrostAdditiveCount = MildFrostCount + ModerateFrostCount + SevereFrostCount
   ModerateFrostAdditiveCount = ModerateFrostCount + SevereFrostCount


   ! -----------------------------------------
   ! Count waterlogging events in crop
   ! -----------------------------------------
   if (runoff &gt; 0 and DaysAfterSowing &gt; 0 and today &gt;= TodayDate) then
      NumConsecWaterLoggedDays = NumConsecWaterLoggedDays + 1
   else
      ! At the end of the water logging event, publish the appropriate events so that tracker can count them.
      if (NumConsecWaterLoggedDays &gt;= 1) then
         act_mods WaterLog1OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 2) then
         act_mods WaterLog2OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 3) then
         act_mods WaterLog3OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 4) then
         act_mods WaterLog4OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 5) then
         act_mods WaterLog5OrMore
      endif
      if (NumConsecWaterLoggedDays &gt;= 6) then
         act_mods WaterLog6OrMore
      endif
      NumConsecWaterLoggedDays = 0
   endif

</text>
            <event>post</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>end_of_day</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>sowing</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>harvesting</event>
          </script>
          <script>
            <text>   AvTemp = (maxt + mint) / 2
   AmountWaterLeft = SwToday - CritSWToday
   AmountWaterAboveCLL = SwToday - CLLToday
   if (AmountWaterAboveCLL &lt; 0) then
      AmountWaterAboveCLL = 0
   endif
   Nitrogen = no3() + nh4()
   NitrogenAvailToRoots = NToday
   AvailableWater = sw_dep() - ll_dep()

   PAWC = dul_dep() - ll_dep()
   NUptakeKgHa = no3_uptake() * -1                            ! convert to positive number
   NInPlant = (biomass_n * 10) + (RootGreenN * 10)    ! unit conversion g/m2 to kg/ha
   NInGrain = GrainTotalN * 10     ! unit conversion g/m2 to kg/ha


   if (DaysAfterSowing = 1) then
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
   endif
   if (Z &gt;= 11 and Zadok11Das = 0) then
      Zadok11Das = DaysAfterSowing
   elseif (Z &gt;= 12 and Zadok12Das = 0) then
      Zadok12Das = DaysAfterSowing
   elseif (Z &gt;= 13 and Zadok13Das = 0) then
      Zadok13Das = DaysAfterSowing
   elseif (Z &gt;= 14 and Zadok14Das = 0) then
      Zadok14Das = DaysAfterSowing
   elseif (Z &gt;= 15 and Zadok15Das = 0) then
      Zadok15Das = DaysAfterSowing
   elseif (Z &gt;= 16 and Zadok16Das = 0) then
      Zadok16Das = DaysAfterSowing
   elseif (Z &gt;= 30 and Zadok30Das = 0) then
      Zadok30Das = DaysAfterSowing
   elseif (Z &gt;= 31 and Zadok31Das = 0) then
      Zadok31Das = DaysAfterSowing
   elseif (Z &gt;= 32 and Zadok32Das = 0) then
      Zadok32Das = DaysAfterSowing
   elseif (Z &gt;= 37 and Zadok37Das = 0) then
      Zadok37Das = DaysAfterSowing
   elseif (Z &gt;= 39 and Zadok39Das = 0) then
      Zadok39Das = DaysAfterSowing
   elseif (Z &gt;= 45 and Zadok45Das = 0) then
      Zadok45Das = DaysAfterSowing
   elseif (Z &gt;= 55 and Zadok55Das = 0) then
      Zadok55Das = DaysAfterSowing
   elseif (Z &gt;= 65 and Zadok65Das = 0) then
      Zadok65Das = DaysAfterSowing
   elseif (Z &gt;= 75 and Zadok75Das = 0) then
      Zadok75Das = DaysAfterSowing
   endif

</text>
            <event>reseting</event>
          </script>
          <script>
            <text>   if (today = StartSeasonDate-1) then
      act_mods EndSeason
   elseif (today = StartSeasonDate) then
      act_mods StartSeason
   endif

   if (today = TodayDate or today = simulation_start_date) then
      act_mods CurrentDay
   endif

   ! ----------------------------------------------------
   ! StartOfYear and EndOfYear events
   ! ----------------------------------------------------
   if (today = date('1-jan')) then
      act_mods StartOfYear
   endif

</text>
            <event>start_of_day</event>
          </script>
          <script>
            <text>      CurrentFallow = 0
      Z = 0
      Zadok11Das = 0
      Zadok12Das = 0
      Zadok13Das = 0
      Zadok14Das = 0
      Zadok15Das = 0
      Zadok16Das = 0
      Zadok30Das = 0
      Zadok31Das = 0
      Zadok32Das = 0
      Zadok37Das = 0
      Zadok39Das = 0
      Zadok45Das = 0
      Zadok55Das = 0
      Zadok65Das = 0
      Zadok75Das = 0
      StartDailyDate = 0
      CurrentCropFound = 0
      DecileDate  = 0
      DoDecileOutput  = 0
      ThreeMonthsTimeDate  = 0
      PreSowingFertiliser = 0
      Nitrogen = 0
      FloweringDate = 0

   NumConsecWaterLoggedDays = 0
 </text>
            <event>init</event>
          </script>
          <script>
            <text>
! Calculate a flowering date where the date is always relative to the sowing date this year
! Used on the sowing opportunity report.
FloweringDate = SowDateFull + DaysAfterSowing</text>
            <event>flowering</event>
          </script>
        </manager>
        <manager name="CanolaOilConc">
          <script name="start_of_day">
            <text><![CDATA[   if (DaysAfterSowing = 1) then
      cum_temp = 0
      cum_swdef = 0
      cum_days = 0

   elseif (StageName = 'start_grain_fill' or
                StageName = 'end_grain_fill' or
                StageName = 'maturity' or
                StageName = 'harvest_ripe') then
      cum_temp = cum_temp + (maxt + mint) / 2
      cum_swdef = cum_swdef + swdef_photo
      cum_days = cum_days + 1
   endif

   ! calculate canola oil content
   if (cum_days > 0) then
      avg_temp = cum_temp / cum_days
      avg_swdef = cum_swdef / cum_days
      if (avg_temp <= 14) then
         oil_conc =  47
      else
         oil_conc = (47 - ((avg_temp - 14)*1.21)) - (1.91*(1 - avg_swdef^2))
      endif
   else
      oil_conc = 0
   endif
]]></text>
            <event>start_of_day</event>
          </script>
          <script name="end_of_day">
            <text>
            </text>
            <event>end_of_day</event>
          </script>
          <script name="init">
            <text>      cum_temp = 0
      cum_swdef = 0
      cum_days = 0
</text>
            <event>init</event>
          </script>
        </manager>
        <manager name="StubbleRemoved" enabled="no">
          <ui>
            <StubbleRemovedDate type="ddmmmdate" description="Enter date to remove stubble on : ">1/1/1800</StubbleRemovedDate>
            <StubbleRemovedDateFull type="ddmmmdate" description="Enter full date to remove stubble on (not used):">1/1/1800</StubbleRemovedDateFull>
            <StubbleRemovedAmount type="text" description="Amount of stubble removed (%)">30</StubbleRemovedAmount>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[StubbleRemovedDate]') then
      [Name]Percent = [StubbleRemovedAmount] / 100
      SurfaceOM tillage type = user_defined, f_incorp = [Name]Percent , tillage_depth = 0
   endif
      </text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="VariableSowing" enabled="no">
          <ui>
            <category description="Sowing criteria" type="category" />
            <date1 type="ddmmmdate" description="Enter sowing window START date (dd-mmm) : ">15-may</date1>
            <date2 type="ddmmmdate" description="Enter sowing window END date (dd-mmm) : ">10-jul</date2>
            <must_sow type="yesno" description="Must sow? : ">no</must_sow>
            <raincrit type="text" description="Amount of rainfall : ">30</raincrit>
            <rainnumdays type="text" description="Number of days of rainfall : ">3</rainnumdays>
            <category description="Sowing parameters" type="category" />
            <crop type="crop" description="Enter name of crop to sow : ">wheat</crop>
            <SowingDensity type="text" description="Enter sowing density  (plants/m2) : ">100</SowingDensity>
            <depth type="text" description="Enter sowing depth  (mm) : ">30</depth>
            <cultivar type="cultivars" description="Enter cultivar : ">yitpi</cultivar>
            <class type="classes" description="Enter crop growth class : ">plant</class>
            <RowSpacing type="text" description="Enter row spacing (mm, m for sorghum) : ">250</RowSpacing>
            <skiprow type="list" description="Skip row (sorghum only) : ">solid</skiprow>
            <ftn type="text" description="Enter Fertile Tiller No. (sorghum only) : ">1</ftn>
            <category description="Furrow irrigation hack" type="category" />
            <FurrowIrrigation type="yesno" description="Turn furrow irrigation hack on?">no</FurrowIrrigation>
            <FurrowRowSpacing type="text" description="Furrow row spacing (m):" />
            <BedRowSpacing type="text" description="Bed row spacing (m):" />
            <BedWidth type="test" description="Bed width (m):" />
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   if (paddock_is_fallow()) then
         if (date_within('[date1], [date2]') = 1) then
            if (rain[[rainnumdays]] >= [raincrit]) OR
                ('[must_sow]' = 'yes' AND today = date('[date2]'))) THEN

              sow_year = year
              if ('[FurrowIrrigation]' = 'yes') then
                 skiprow = (4 * (([BedRowSpacing] - 0.2)^2) + 3 * (([FurrowRowSpacing] - 0.2)^2) ) / (1 + (([BedRowSpacing] - [FurrowRowSpacing]) * [BedWidth])^2)
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow], skiprow = skiprow
              else
                 [crop] sow plants =[SowingDensity], sowing_depth = [depth], cultivar = [cultivar], row_spacing = [RowSpacing], crop_class = [class], tiller_no_fertile = [ftn] (), skip = [skiprow]
              endif

            endif
         endif
    endif]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="NTopUp" enabled="no">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <GrowthStage type="text" description="From Sowing to Zadok stage number:   ">49</GrowthStage>
            <Threshold type="text" description="When nitrogen falls below (kg/ha):">40</Threshold>
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">Fertiliser</FertModule>
            <Amount type="text" description="Amount of fertiliser to apply (kg/ha) : ">25</Amount>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[
   if (DaysAfterSowing > 0 AND Z <= [GrowthStage]  AND Nitrogen < [Threshold]) then
        [FertModule] apply amount = [Amount] (kg/ha), depth = 20 (mm), type = no3_n ()
   endif
         ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Sowing irrigation" enabled="no">
          <ui>
            <category description="Details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) :">10</IrrigateAmount>
          </ui>
          <script name="sowing">
            <text>   '[IrrigateModule]' set irrigation_efficiency = 1
   '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
</text>
            <event>sowing</event>
          </script>
        </manager>
        <manager name="ResetNitrogen" enabled="no">
          <ui>
            <category description="When should a reset be done" type="category" />
            <ResetDate type="ddmmmdate" description="Enter date of reset (dd-mmm) : ">1-apr</ResetDate>
            <category description="Reset details" type="category" />
            <soilmodule type="modulename" description="Name of your soil module : ">Soil</soilmodule>
          </ui>
          <script name="start_of_day">
            <text><![CDATA[   ! If the reset date is after the sow date then we want to reset on both sowing and on the reset date.
   ! Otherwise, just reset on the reset date.
   DoReset = 0
   if (date('[ResetDate]')> SowDate) then
      if (today = date('[ResetDate]') or (today = SowDate and ResetDate - SowDate < 90)) then
         DoReset = 1
      endif
   elseif (today = date('[ResetDate]')) then
         DoReset = 1
   endif

   if (DoReset = 1) then
       '[soilmodule] Nitrogen' reset
       act_mods reseting
   endif
      ]]></text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise1">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">14-Jul</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">46</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise2">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">27-Aug</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">46</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise3">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">07-Sep</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">46</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Fertilise4">
          <ui>
            <category description="When should fertiliser be applied" type="category" />
            <FertDate type="ddmmmdate" description="Enter fertiliser date (dd-mmm) : ">25-Sep</FertDate>
            <FertDateFull type="text" description="Fertiliser date (not used)" />
            <category description="Fertiliser application details" type="category" />
            <FertModule type="modulename" description="Module used to apply the fertiliser : ">fertiliser</FertModule>
            <FertAmount type="text" description="Amount of fertiliser to apply (kg/ha) : ">46</FertAmount>
            <FertType type="list" description="Fertiliser type : ">NO3_N</FertType>
            <Scenario type="text" description="Is this a scenario fertiliser? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[FertDate]') then
      ScenarioApplication = '[Scenario]'
      [FertModule] apply amount = [FertAmount] (kg/ha), depth = 20 (mm), type = [FertType] ()
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate1">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">25-May</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">28</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">0.75</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate2">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">25-Sep</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">14</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">0.75</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate3">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">29-Sep</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">17.5</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">0.75</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate4">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">11-Oct</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">17.5</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">0.75</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate5">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">20-Oct</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">17.5</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">0.75</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate6">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">26-Oct</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">17.5</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">0.75</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
        <manager name="Irrigate7">
          <ui>
            <category description="When should irrigation be applied" type="category" />
            <IrrigateDate type="ddmmmdate" description="Enter irrigation date (dd-mmm) : ">1-Nov</IrrigateDate>
            <IrrigateDateFull type="text" description="Full irrigation date (not used) :" />
            <category description="Irrigation application details" type="category" />
            <IrrigateModule type="modulename" description="Module used to apply the irrigation : ">Irrigation</IrrigateModule>
            <IrrigateAmount type="text" description="Amount of irrigation to apply (mm) : ">17.5</IrrigateAmount>
            <IrrigateEfficiency type="text" description="Irrigation efficiency (0-1) : ">0.75</IrrigateEfficiency>
            <Scenario type="text" description="Is this a scenario irrigation? :">no</Scenario>
          </ui>
          <script name="start_of_day">
            <text>   if (today = date('[IrrigateDate]') then
      ScenarioApplication = '[Scenario]'
      '[IrrigateModule]' set irrigation_efficiency = [IrrigateEfficiency]
      '[IrrigateModule]' apply amount = [IrrigateAmount] (mm)
   endif
</text>
            <event>start_of_day</event>
          </script>
        </manager>
      </folder>
      <fertiliser name="Fertiliser" />
      <irrigation name="Irrigation">
        <automatic_irrigation type="list" listvalues="on,off" description="Automatic irrigation">off</automatic_irrigation>
        <asw_depth type="text" description="Depth to which ASW is calculated. (mm)">600.0</asw_depth>
        <crit_fr_asw type="text" description="Fraction of ASW below which irrigation is applied (0-1.0)">0.5</crit_fr_asw>
        <irrigation_efficiency description="Efficiency of the irrigation. (0-1.0)">1.0</irrigation_efficiency>
        <default_no3_conc type="text" description="Nitrate concentration (ppm N)">0.0</default_no3_conc>
        <default_nh4_conc type="text" description="Ammonium concentration (ppm N)">0.0</default_nh4_conc>
        <default_cl_conc type="text" description="Chloride concentration (ppm Cl)">0.0</default_cl_conc>
      </irrigation>
      <surfaceom name="SurfaceOM">
        <PoolName type="text" description="Organic Matter pool name">wheat</PoolName>
        <type type="list" listvalues="inert,manure,fym,bambatsi,barley,broccoli,camaldulensis,canola,chickpea,cowpea,danthonia,globulus,grandis,fababean,fieldpea,grass,lablab,lucerne,lupin,maize,millet,mucuna,mungbean,horsegram,navybean,cotton,orobanche,peanut,pigeonpea,rice,soybean,sorghum,stylo,sugar,sunflower,sweetcorn,sweetsorghum,weed,wheat" description="Organic Matter type">wheat</type>
        <mass type="text" description="Initial surface residue (kg/ha)">1000</mass>
        <cnr type="text" description="C:N ratio of initial residue">80</cnr>
        <standing_fraction type="text" description="Fraction of residue standing">0</standing_fraction>
      </surfaceom>
      <wheat name="Wheat" />
      <barley enabled="no" />
      <canola enabled="no" />
      <oats enabled="no" />
      <sorghum enabled="no" />
      <outputfile name="Yearly">
        <filename output="yes">Paddock44 Yearly.out</filename>
        <Title>2004^Trevor James^1 East</Title>
        <events name="Reporting Frequency">
          <event name="harvesting" />
        </events>
        <variables name="Variables">
          <variable name="dd/mm/yyyy as Date" />
          <variable name="sow_year" />
          <variable name="DaysAfterSowing" />
          <variable name="simulation_end_date format dd/mm/yyyy" />
          <variable name="biomass" />
          <variable name="wetyield" />
          <variable name="Grain_protein" />
          <variable name="grain_n" />
          <variable name="grain_no" />
          <variable name="oil_conc" />
          <variable name="leaf_no" />
          <variable name="sw_stress_expan" />
          <variable name="sw_stress_photo" />
          <variable name="n_stress_expan" />
          <variable name="n_stress_photo" />
          <variable name="Hay" />
          <variable name="Z" />
          <variable name="Zadok11Das" />
          <variable name="Zadok12Das" />
          <variable name="Zadok13Das" />
          <variable name="Zadok14Das" />
          <variable name="Zadok15Das" />
          <variable name="Zadok16Das" />
          <variable name="Zadok30Das" />
          <variable name="Zadok31Das" />
          <variable name="Zadok32Das" />
          <variable name="Zadok37Das" />
          <variable name="Zadok39Das" />
          <variable name="Zadok45Das" />
          <variable name="Zadok55Das" />
          <variable name="Zadok65Das" />
          <variable name="Zadok75Das" />
          <variable name="flowering_das" />
          <variable name="maturity_das" />
          <variable name="root_depth" />
          <variable name="Bank" />
          <variable name="TwoTimesCost " />
          <variable name="CurrentFallow" />
          <variable name="MildFrostCount" />
          <variable name="ModerateFrostCount" />
          <variable name="SevereFrostCount" />
          <variable name="MildHeatShockCount" />
          <variable name="ModerateHeatShockCount" />
          <variable name="SevereHeatShockCount" />
          <variable name="InCropRain" />
          <variable name="InCropIrrigation" />
          <variable name="rain" />
          <variable name="runoff" />
          <variable name="SumRunoffToSowing" />
          <variable name="drain" />
          <variable name="es" />
          <variable name="ep" />
          <variable name="sw_dep()" />
          <variable name="AvailableWater" />
          <variable name="AmountWaterAboveCLL" />
          <variable name="AvailableWaterAtSowing" />
          <variable name="AmountWaterLeft" />
          <variable name="ll_dep()" />
          <variable name="no3() format 3" />
          <variable name="nh4() format 3" />
          <variable name="Nitrogen" />
          <variable name="NitrogenAtSowing" />
          <variable name="NUptakeKgHa" />
          <variable name="soil_loss" />
          <variable name="SumSoilLossToSowing" />
          <variable name="dlt_n_min_tot() format 3" />
          <variable name="dnit() format 3" />
          <variable name="leach_no3 format 3" />
          <variable name="NInPlant" />
          <variable name="NToday" />
          <variable name="CLLToday" />
          <variable name="DulToday" />
          <variable name="SwToday" />
          <variable name="CritSWToday" />
          <variable name="SowDate format dd/mmm" />
          <variable name="AustState" />
          <variable name="plants" />
          <variable name="TopDressFertiliser" />
          <variable name="PreSowingFertiliser" />
          <variable name="SowingFertiliser" />
          <variable name="GSR" />
          <variable name="pawc" />
          <variable name="CumNStressExpan" />
          <variable name="CumNStressPhoto" />
          <variable name="TotalNUptake" />
          <variable name="TotalES" />
          <variable name="TotalEP" />
          <variable name="MildHeatShockAdditiveCount " />
          <variable name="ModerateHeatShockAdditiveCount " />
          <variable name="MildFrostAdditiveCount " />
          <variable name="ModerateFrostAdditiveCount " />
          <variable name="NumWaterLoggingEventsFor1OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor2OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor3OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor4OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor5OrMoreDays" />
          <variable name="NumWaterLoggingEventsFor6OrMoreDays" />
          <variable name="NInGrain" />
          <variable name="InCropMineralisation format 3" />
          <variable name="InCropNitrification format 3" />
          <variable name="InCropNLeaching format 3" />
          <variable name="CumSWStressExpan" />
          <variable name="CumSWStressPhoto" />
          <variable name="CumSWStressPhotoSowToFI" />
          <variable name="CumSWStressPhotoFIToFlowering" />
          <variable name="CumSWStressPhotoFloweringToHarvesting" />
          <variable name="CumNStressPhotoSowToFI" />
          <variable name="CumNStressPhotoFIToFlowering" />
          <variable name="CumNStressPhotoFloweringToHarvesting" />
          <variable name="FloweringDate format dd/mm/yyyy" />
          <variable name="CropBiomass " />
          <variable name="HayGrossMargin " />
          <variable name="GrainGrossMargin " />
          <variable name="RainToMaturity" />
          <variable name="HayBiomass" />
          <Constants>
            <Title>2004^Trevor James^1 East</Title>
            <Crop>Wheat</Crop>
          </Constants>
        </variables>
      </outputfile>
      <tracker name="Tracker">
        <variable name="sum of unpatched_rain on start_of_day from StartSeason to EndSeason as SeasonalRainUnPatched" />
        <variable name="sum of unpatched_rain on start_of_day from ThisMonth to ThreeMonthsTime as RainInComingMonths" />
        <variable name="value of HayBiomass on flowering as Hay" />
        <variable name="sum of runoff on end_of_day from CurrentDay to sowing as SumRunoffToSowing" />
        <variable name="sum of soil_loss on end_of_day  from CurrentDay to sowing as SumSoilLossToSowing" />
        <variable name="value of AvailableWater on sowing as AvailableWaterAtSowing" />
        <variable name="value of Nitrogen on sowing as NitrogenAtSowing" />
        <variable name="sum of rain on end_of_day from sowing to harvesting as InCropRain" />
        <variable name="sum of irrigation on end_of_day from sowing to harvesting as InCropIrrigation" />
        <variable name="sum of fertiliser on end_of_day from emergence to harvesting as TopDressFertiliser" />
        <variable name="sum of rain on end_of_day from GSRStart to GSREnd as GSR" />
        <variable name="sum of n_stress_expan on end_of_day from sowing to harvesting as CumNStressExpan" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to harvesting as CumNStressPhoto" />
        <variable name="sum of NUptakeKgHa on end_of_day from sowing to harvesting as TotalNUptake" />
        <variable name="sum of es on end_of_day from sowing to harvesting as TotalES" />
        <variable name="sum of ep on end_of_day from sowing to harvesting as TotalEP" />
        <variable name="sum of rain on end_of_day from startofyear to endofyear as AnnualRain" />
        <variable name="count of WaterLog1OrMore from sowing to harvesting as NumWaterLoggingEventsFor1OrMoreDays" />
        <variable name="count of WaterLog2OrMore from sowing to harvesting as NumWaterLoggingEventsFor2OrMoreDays" />
        <variable name="count of WaterLog3OrMore from sowing to harvesting as NumWaterLoggingEventsFor3OrMoreDays" />
        <variable name="count of WaterLog4OrMore from sowing to harvesting as NumWaterLoggingEventsFor4OrMoreDays" />
        <variable name="count of WaterLog5OrMore from sowing to harvesting as NumWaterLoggingEventsFor5OrMoreDays" />
        <variable name="count of WaterLog6OrMore from sowing to harvesting as NumWaterLoggingEventsFor6OrMoreDays" />
        <variable name="sum of dlt_n_min_tot() on end_of_day from sowing to harvesting as InCropMineralisation" />
        <variable name="sum of dnit() on end_of_day from sowing to harvesting as InCropNitrification" />
        <variable name="sum of leach_no3 on end_of_day from sowing to harvesting as InCropNLeaching" />
        <variable name="sum of sw_stress_expan on end_of_day from sowing to harvesting as CumSWStressExpan" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to harvesting as CumSWStressPhoto" />
        <variable name="sum of sw_stress_photo on end_of_day from sowing to floral_initiation as CumSWStressPhotoSowToFI" />
        <variable name="sum of sw_stress_photo on end_of_day from floral_initiation to flowering as CumSWStressPhotoFIToFlowering" />
        <variable name="sum of sw_stress_photo on end_of_day from flowering to harvesting as CumSWStressPhotoFloweringToHarvesting" />
        <variable name="sum of n_stress_photo on end_of_day from sowing to floral_initiation as CumNStressPhotoSowToFI" />
        <variable name="sum of n_stress_photo on end_of_day from floral_initiation to flowering as CumNStressPhotoFIToFlowering" />
        <variable name="sum of n_stress_photo on end_of_day from flowering to harvesting as CumNStressPhotoFloweringToHarvesting" />
        <variable name="sum of rain on end_of_day from CurrentDay to harvesting as RainToMaturity" />
      </tracker>
      <soil name="Soil">
        <Country />
        <Site />
        <Region />
        <LocalName />
        <SoilType description="Classification">
        </SoilType>
        <NearestTown description="Nearest town" />
        <NaturalVegetation description="Natural vegetation" />
        <State />
        <ApsoilNumber description="Apsoil number" />
        <Latitude description="Latitude (WGS84)" />
        <Longitude />
        <LocationAccuracy description="Location accuracy" />
        <DataSource type="multiedit" description="Data source" />
        <Comments />
        <Water>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <KS units="mm/day" />
            <BD units="g/cc">1.350</BD>
            <AirDry units="mm/mm">0.070</AirDry>
            <LL15 units="mm/mm">0.120</LL15>
            <DUL units="mm/mm">0.300</DUL>
            <SAT units="mm/mm">0.491</SAT>
          </Layer>
          <SoilCrop name="wheat">
            <Layer>
              <Thickness units="mm">100</Thickness>
              <LL units="mm/mm">0.120</LL>
              <KL units="/day">0.060</KL>
              <XF units="0-1">1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.130</LL>
              <KL>0.060</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.140</LL>
              <KL>0.040</KL>
              <XF>1</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.150</LL>
              <KL>0.040</KL>
              <XF>0.893</XF>
            </Layer>
            <Layer>
              <Thickness>150</Thickness>
              <LL>0.250</LL>
              <KL>0.040</KL>
              <XF>0.893</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.270</LL>
              <KL>0.040</KL>
              <XF>0.865</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.270</LL>
              <KL>0.020</KL>
              <XF>0.865</XF>
            </Layer>
            <Layer>
              <Thickness>300</Thickness>
              <LL>0.342</LL>
              <KL>0.020</KL>
              <XF>0.828</XF>
            </Layer>
          </SoilCrop>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.369</BD>
            <AirDry>0.111</AirDry>
            <LL15>0.130</LL15>
            <DUL>0.330</DUL>
            <SAT>0.483</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.369</BD>
            <AirDry>0.140</AirDry>
            <LL15>0.140</LL15>
            <DUL>0.370</DUL>
            <SAT>0.483</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.383</BD>
            <AirDry>0.150</AirDry>
            <LL15>0.150</LL15>
            <DUL>0.370</DUL>
            <SAT>0.478</SAT>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <KS units="mm/day" />
            <BD>1.383</BD>
            <AirDry>0.250</AirDry>
            <LL15>0.250</LL15>
            <DUL>0.370</DUL>
            <SAT>0.478</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.375</BD>
            <AirDry>0.270</AirDry>
            <LL15>0.270</LL15>
            <DUL>0.370</DUL>
            <SAT>0.481</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.384</BD>
            <AirDry>0.270</AirDry>
            <LL15>0.270</LL15>
            <DUL>0.370</DUL>
            <SAT>0.478</SAT>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <KS units="mm/day" />
            <BD>1.391</BD>
            <AirDry>0.342</AirDry>
            <LL15>0.342</LL15>
            <DUL>0.370</DUL>
            <SAT>0.475</SAT>
          </Layer>
        </Water>
        <SoilWat>
          <SummerCona>2</SummerCona>
          <SummerU>2</SummerU>
          <SummerDate>1-Nov</SummerDate>
          <WinterCona>2</WinterCona>
          <WinterU>2</WinterU>
          <WinterDate>1-Apr</WinterDate>
          <DiffusConst>88</DiffusConst>
          <DiffusSlope>35.4</DiffusSlope>
          <Salb>0.13</Salb>
          <Cn2Bare>84</Cn2Bare>
          <CnRed>20</CnRed>
          <CnCov>0.8</CnCov>
          <Slope>
          </Slope>
          <DischargeWidth>
          </DischargeWidth>
          <CatchmentArea>
          </CatchmentArea>
          <MaxPond>
          </MaxPond>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <SWCON units="0-1">0.700</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <SWCON>0.300</SWCON>
            <MWCON units="0-1" />
            <KLAT units="mm/d" />
          </Layer>
        </SoilWat>
        <SoilOrganicMatter>
          <RootCn>45</RootCn>
          <RootWt>1500</RootWt>
          <SoilCn>12.5</SoilCn>
          <EnrACoeff>7.4</EnrACoeff>
          <EnrBCoeff>0.2</EnrBCoeff>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <OC units="Total %">1</OC>
            <FBiom units="0-1">0.025</FBiom>
            <FInert units="0-1">0.400</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.020</FBiom>
            <FInert>0.600</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.700</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.015</FBiom>
            <FInert>0.800</FInert>
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.850</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.900</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <OC>0.500</OC>
            <FBiom>0.010</FBiom>
            <FInert>0.950</FInert>
          </Layer>
        </SoilOrganicMatter>
        <Analysis>
          <Layer>
            <Thickness units="mm">100</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH units="1:5 water">7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>150</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <Rocks units="%" />
            <Texture />
            <MunsellColour />
            <EC units="1:5 dS/m" />
            <PH>7</PH>
            <CL units="mg/kg" />
            <Boron units="Hot water mg/kg" />
            <CEC units="cmol+/kg" />
            <Ca units="cmol+/kg" />
            <Mg units="cmol+/kg" />
            <Na units="cmol+/kg" />
            <K units="cmol+/kg" />
            <ESP units="%" />
            <Mn units="mg/kg" />
            <Al units="cmol+/kg" />
            <ParticleSizeSand units="%" />
            <ParticleSizeSilt units="%" />
            <ParticleSizeClay units="%" />
          </Layer>
        </Analysis>
        <Langitude description="Longitude (WGS84)" />
        <Comment type="multiedit" description="Comments" />
        <Sample name="Initial nitrogen">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Initial water">
          <Date type="date" description="Sample date:" />
        </Sample>
        <Sample name="Soil sample 1">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm">21</NO3>
            <NH4 units="ppm">0</NH4>
            <SW units="mm/mm">0.09</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>4</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.17</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>3</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.31</SW>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3>4</NO3>
            <NH4 units="ppm">0</NH4>
            <SW>0.25</SW>
          </Layer>
        </Sample>
        <Sample name="Soil sample 2">
          <Date type="date" description="Sample date:" />
          <Layer>
            <Thickness units="mm">100</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC units="1:5 dS/m">0.6</EC>
            <PH units="CaCl2">6.7</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.3</EC>
            <PH>6.8</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.5</EC>
            <PH>7.7</PH>
          </Layer>
          <Layer>
            <Thickness>300</Thickness>
            <NO3 units="ppm" />
            <NH4 units="ppm" />
            <SW units="mm/mm" />
            <EC>0.2</EC>
            <PH>8</PH>
          </Layer>
        </Sample>
      </soil>
      <erosion name="Erosion">
        <model type="text" description="Model Name">freebairn</model>
        <slope type="text" description="Slope of plot in percent (%)">0</slope>
        <slope_length type="text" description="Length of plot (m)">60</slope_length>
        <k_factor type="text" description="Soil erodibility factor (t/ha/EI 30 )">0.4</k_factor>
        <p_factor type="text" description="Supporting practise factor (unitless)">1</p_factor>
        <bed_depth type="text" description="Depth to bedrock (mm)">5000</bed_depth>
        <profile_reduction type="list" listvalues="off,on" description="Profile Reduction">off</profile_reduction>
        <profile_layer_merge type="text" description="Fraction of original size in which the lowest layer is merged into the layer above (0-1)">0.05</profile_layer_merge>
        <minimum_depth type="text" description="If the profile erodes to this depth, the simulation is stopped (mm)">100</minimum_depth>
      </erosion>
      <YPCalc />
    </area>
  </simulation>
</folder>