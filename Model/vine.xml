<Type version="27" name="vine">
  <MetaData>
    <UItype>APSIMUI.EmptyUI</UItype>
    <IsCrop>Yes</IsCrop>
    <ShowInMainTree>Yes</ShowInMainTree>
    <Image>%apsim%\UserInterface\Images\GrapeVine.jpg</Image>
    <Description>NOTE: Prototype only.  This module is not to be used in model applications.  Most APSIM crop or plant modules do not require extra user input.  Crop specific parameters are either provided for your chosen soil, or are captured as part of the standard model validation process.</Description>
    <LargeIcon>%apsim%\UserInterface\Images\Leaf32.bmp</LargeIcon>
    <SmallIcon>%apsim%\UserInterface\Images\Leaf16.bmp</SmallIcon>
    <dll>%apsim%\Model\Plant2.dll</dll>
    <drops>
      <drop>toolbox</drop>
      <drop>area</drop>
      <drop>simulation</drop>
      <drop>folder</drop>
    </drops>
    <ApsimToSim>
      <component name="[InstanceName]" executable="[dll]">
        <executable name="[dll]" version="1.0" />
        <componentinterface>%apsim%\Model\dotnetcomponentinterface.dll</componentinterface>
        <initdata>
               [Model]
               <ll>[soil.[InstanceName] ll(mm/mm)]</ll><kl>[soil.[InstanceName] kl(/day)]</kl><xf>[soil.[InstanceName] xf(0-1)]</xf></initdata>
      </component>
    </ApsimToSim>
  </MetaData>
  
  <Model>
    <Cultivar name="Shiraz">
      <Construct>Plant</Construct>
    </Cultivar>
    <Plant>
      <CropType>vine</CropType>
      <Population>
        <Value>14</Value>
      </Population>
      <SimpleArbitrator name="Arbitrator">
        <Constant name="DMSink">
          <Value>Reserve</Value>
        </Constant>
        <Constant name="NSink">
          <Value>Stem</Value>
        </Constant>
      </SimpleArbitrator>
      <Phenology>
        <TemperatureFunction name="ThermalTime">
          <XYPairs>
            <XY>7 0.0</XY>
            <XY>22 15.0</XY>
            <XY>30 15.0</XY>
            <XY>35 0.0</XY>
          </XYPairs>
        </TemperatureFunction>
        <GenericPhase name="Dormant">
          <Start>StartDormancy</Start>
          <End>EndDormancy</End>
          <Constant name="Target">
            <Value>30</Value>
          </Constant>
          <TemperatureFunction name="ThermalTime">
            <XYPairs>
              <XY>0 0.0</XY>
              <XY>1 1.0</XY>
              <XY>2 1.0</XY>
              <XY>15 0.0</XY>
            </XYPairs>
          </TemperatureFunction>
        </GenericPhase>
        <GenericPhase name="Budding">
          <Start>EndDormancy</Start>
          <End>BudBurst</End>
          <Constant name="Target">
            <Value>200</Value>
          </Constant>
          <TemperatureFunction shortcut="/vine/Model/Plant/Phenology/ThermalTime" />
        </GenericPhase>
        <GenericPhase name="ShootGrowth">
          <Start>BudBurst</Start>
          <End>Flowering</End>
          <Constant name="Target">
            <Value>442</Value>
          </Constant>
          <TemperatureFunction shortcut="/vine/Model/Plant/Phenology/ThermalTime" />
        </GenericPhase>
        <GenericPhase name="FlowerDevelopment">
          <Start>Flowering</Start>
          <End>Set</End>
          <Constant name="Target">
            <Value>150</Value>
          </Constant>
          <TemperatureFunction shortcut="/vine/Model/Plant/Phenology/ThermalTime" />
        </GenericPhase>
        <GenericPhase name="BerryDevelopment">
          <Start>Set</Start>
          <End>Veraison</End>
          <Constant name="Target">
            <Value>600</Value>
          </Constant>
          <TemperatureFunction shortcut="/vine/Model/Plant/Phenology/ThermalTime" />
        </GenericPhase>
        <GenericPhase name="Ripening">
          <Start>Veraison</Start>
          <End>Ripe</End>
          <Constant name="Target">
            <Value>510</Value>
          </Constant>
          <TemperatureFunction shortcut="/vine/Model/Plant/Phenology/ThermalTime" />
        </GenericPhase>
        <LeafDeathPhase name="Senescent">
          <Start>Ripe</Start>
          <End>LeafFall</End>
          <TemperatureFunction shortcut="/vine/Model/Plant/Phenology/ThermalTime" />
        </LeafDeathPhase>
        <GotoPhase name="Rewind">
          <Start>LeafFall</Start>
          <End>Unused</End>
          <PhaseNameToGoto>Dormant</PhaseNameToGoto>
        </GotoPhase>
      </Phenology>
      <Leaf>
        <InitialiseStage>BudBurst</InitialiseStage>
        <PrimaryBudNo>1</PrimaryBudNo>
        <MaxCover>0.5</MaxCover>
        <KDead>0.5</KDead>
        <LeafCohort name="Leaves[1]">
           <Rank>1</Rank>
           <Area>1000</Area>
           <Age>1</Age>
        </LeafCohort>
        <CompositeBiomass name="Live">
           <Property>Leaf.Leaves[].Live</Property>
        </CompositeBiomass>
        <CompositeBiomass name="Dead">
           <Property>Leaf.Leaves[].Dead</Property>
        </CompositeBiomass>
        <FinalNodeNumber name = "FinalNodeNumber">
		   <MaxNodeNo>24</MaxNodeNo>
		   <InitialLeafPrimordia>1</InitialLeafPrimordia>
           <PhaseLookupValue name="NodeInitiationRate">
             <Start>BudBurst</Start>
             <End>Veraison</End>
             <Constant name="Function">
               <Value>30.0</Value>
             </Constant>
           </PhaseLookupValue>
           <TemperatureFunction shortcut="/Vine/Model/Plant/Leaf/ThermalTime" />
		</FinalNodeNumber>
		<Constant name="ExtinctionCoeff">
          <Value>0.5</Value>
        </Constant>
        <LinearInterpolationFunction name="Height">
          <XProperty>Stem.Live.Wt</XProperty>
          <XYPairs>
            <XY>0 1800.0</XY>
            <XY>500 1800.0</XY>
          </XYPairs>
        </LinearInterpolationFunction>
        <LinearInterpolationFunction name="FrostFraction">
          <XProperty>Leaf.MinT</XProperty>
          <XYPairs>
            <XY>-1 0.0</XY>
            <XY>0 0.0</XY>
          </XYPairs>
        </LinearInterpolationFunction>
        <RUEModel name="Photosynthesis">
          <Constant name="RUE">
            <Value type="text" description="Value">0.8</Value>
          </Constant>
          <WeightedTemperatureFunction name="FT">
            <MaximumTemperatureWeighting>0.75</MaximumTemperatureWeighting>
            <XYPairs>
              <XY>5 0.0</XY>
              <XY>20 1.0</XY>
              <XY>30 1.0</XY>
              <XY>45 0.0</XY>
            </XYPairs>
          </WeightedTemperatureFunction>
          <LinearInterpolationFunction name="FVPD">
            <XProperty type="text" description="XProperty">Leaf.Photosynthesis.VPD</XProperty>
            <XYPairs>
              <XY>0 1.0</XY>
              <XY>10 1.0</XY>
              <XY>50 1.0</XY>
            </XYPairs>
          </LinearInterpolationFunction>
          <LinearInterpolationFunction name="FN">
            <XProperty type="text" description="XProperty">Leaf.Fn</XProperty>
            <XYPairs>
              <XY>0 0</XY>
              <XY>1 1</XY>
              <XY>1.5 1</XY>
            </XYPairs>
          </LinearInterpolationFunction>
          <LinearInterpolationFunction name="FW">
            <XProperty type="text" description="XProperty">Leaf.Fw</XProperty>
            <XYPairs>
              <XY>0 0</XY>
              <XY>1 1</XY>
              <XY>1.5 1</XY>
            </XYPairs>
          </LinearInterpolationFunction>
          <RUECO2Function name="Fco2">
          	 <PhotosyntheticPathway>C3</PhotosyntheticPathway>
          </RUECO2Function>

        </RUEModel>
        <TemperatureFunction name="ThermalTime">
          <XYPairs>
            <XY>7 0.0</XY>
            <XY>22 15.0</XY>
            <XY>30 15.0</XY>
            <XY>35 0.0</XY>
          </XYPairs>
        </TemperatureFunction>
        <PhaseLookupValue name="NodeInitiationRate">
          <Start>BudBurst</Start>
          <End>Veraison</End>
          <Constant name="Function">
            <Value>30.0</Value>
          </Constant>
        </PhaseLookupValue>
        <PhaseLookupValue name="NodeAppearanceRate">
          <Start>BudBurst</Start>
          <End>Veraison</End>
          <Constant name="Function">
            <Value>30.0</Value>
          </Constant>
        </PhaseLookupValue>
        <LinearInterpolationFunction name="MaxArea">
          <XProperty>Leaf.NodeNo</XProperty>
          <XYPairs>
            <XY>1 5000.0</XY>
            <XY>4 15000.0</XY>
            <XY>30 10000.0</XY>
          </XYPairs>
        </LinearInterpolationFunction>
        <LinearInterpolationFunction name="SpecificLeafAreaMax">
          <XProperty>Leaf.NodeNo</XProperty>
          <XYPairs>
            <XY>1 20000.0</XY>
            <XY>30 19000.0</XY>
          </XYPairs>
        </LinearInterpolationFunction>
        <LinearInterpolationFunction name="GrowthDuration">
          <XProperty>Leaf.NodeNo</XProperty>
          <XYPairs>
            <XY>4 150.0</XY>
            <XY>5 150.0</XY>
          </XYPairs>
        </LinearInterpolationFunction>
        <LinearInterpolationFunction name="LagDuration">
          <XProperty>Leaf.NodeNo</XProperty>
          <XYPairs>
            <XY>5 1500.0</XY>
            <XY>20 2500.0</XY>
          </XYPairs>
        </LinearInterpolationFunction>
        <LinearInterpolationFunction name="SenescenceDuration">
          <XProperty>Leaf.NodeNo</XProperty>
          <XYPairs>
            <XY>5 500.0</XY>
            <XY>30 500.0</XY>
          </XYPairs>
        </LinearInterpolationFunction>
        <LinearInterpolationFunction name="BranchingRate">
          <XProperty>Leaf.NodeNo</XProperty>
          <XYPairs>
            <XY>5 0.0</XY>
            <XY>10 0.0</XY>
            <XY>11 0.0</XY>
          </XYPairs>
        </LinearInterpolationFunction>
        <PhaseLookup name="PartitionFraction">
          <PhaseLookupValue name="Early">
            <Start>BudBurst</Start>
            <End>Veraison</End>
            <Constant name="Function">
              <Value>0.4</Value>
            </Constant>
          </PhaseLookupValue>
        </PhaseLookup>
        <LinearInterpolationFunction name="ExpansionStress">
          <XProperty>WaterSupplyDemandRatio</XProperty>
          <XYPairs>
            <XY> 0.0 1</XY>
            <XY> 1.0 1</XY>
          </XYPairs>
        </LinearInterpolationFunction>
        <Constant name="MaximumNConc">
          <Value>0.0001</Value>
        </Constant>
        <Constant name="MinimumNConc">
          <Value>0.000</Value>
        </Constant>
        <Constant name="StructuralNConc">
          <Value>0.000</Value>
        </Constant>
        <Constant name="InitialNConc">
          <Value>0.0005</Value>
        </Constant>
      </Leaf>
      <GenericOrgan name="Stem">
        <Biomass name="Live" />
        <Biomass name="Dead" />
        <PhaseLookup name="PartitionFraction">
          <PhaseLookupValue name="Early">
            <Start>BudBurst</Start>
            <End>Veraison</End>
            <Constant name="Function">
              <Value>0.4</Value>
            </Constant>
          </PhaseLookupValue>
        </PhaseLookup>
        <PhaseLookup name="StructuralFraction">
          <PhaseLookupValue name="PreFlowering">
            <Start>BudBurst</Start>
            <End>Flowering</End>
            <Constant name="Function">
              <Value>1.0</Value>
            </Constant>
          </PhaseLookupValue>
          <PhaseLookupValue name="PostFlowering">
            <Start>Flowering</Start>
            <End>Veraison</End>
            <Constant name="Function">
              <Value>1.0</Value>
            </Constant>
          </PhaseLookupValue>
        </PhaseLookup>
        <Constant name="MaximumNConc">
          <Value>0.0001</Value>
        </Constant>
        <Constant name="StructuralNConc">
          <Value>0.003</Value>
        </Constant>
      </GenericOrgan>
      <Root>
        <ll>0.29 0.29 0.29 0.29 0.3 0.31 0.32 0.33 0.34 0.35
            0.36</ll>
        <kl>0.07 0.07 0.07 0.07 0.05 0.05 0.04 0.04 0.04 0.04
            0.04</kl>
        <xf>1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00 1.00
            1.00</xf>
        <InitialWt>0.01</InitialWt>
        <SpecificRootLength>105000</SpecificRootLength>
        <KNO3>0.02</KNO3>
        <KNH4>0.0</KNH4>
        <Constant name="KLModifier">
          <Value>1.0</Value>
        </Constant>
        <Constant name="SoilWaterEffect">
          <Value>1.0</Value>
        </Constant>
        
        <Constant name="MaxDailyNUptake">
          <Value>6.0</Value>
        </Constant>
        <Constant name="SenescenceRate">
          <Value>0.0</Value>
        </Constant>
        <Constant name="MaximumNConc">
          <Value>0.0001</Value>
        </Constant>
        <Constant name="RootFrontVelocity">
          <Value>10.0</Value>
        </Constant>
        <Constant name="PartitionFraction">
          <Value>0.2</Value>
        </Constant>
        <TemperatureFunction name="TemperatureEffect">
          <XYPairs>
            <XY>0 0.0</XY>
            <XY>26 1.0</XY>
            <XY>35 0.0</XY>
          </XYPairs>
        </TemperatureFunction>
        <Constant name="StructuralNConc">
          <Value>0.003</Value>
        </Constant>
      </Root>
      <ReproductiveOrgan name="Berry">
        <MaximumSize>0.33</MaximumSize>
        <RipeStage>Ripe</RipeStage>
        <Biomass name="Live" />
        <Biomass name="Dead" />
        <LinearInterpolationFunction name="NumberFunction">
          <XProperty>Stem.Live.Wt</XProperty>
          <XYPairs>
            <XY>0 0</XY>
            <XY>1000 150000</XY>
          </XYPairs>
        </LinearInterpolationFunction>
        <PhaseLookup name="FillingRate">
          <PhaseLookupValue name="EarlyBerryGrowth">
            <Start>Flowering</Start>
            <End>Veraison</End>
            <TemperatureFunction name="Function">
              <XYPairs>
                <XY>7 0.0</XY>
                <XY>22 0.00133</XY>
                <XY>30 0.00133</XY>
                <XY>35 0.0</XY>
              </XYPairs>
            </TemperatureFunction>
          </PhaseLookupValue>
          <PhaseLookupValue name="LateBerryGrowth">
            <Start>Veraison</Start>
            <End>Ripe</End>
            <TemperatureFunction name="Function">
              <XYPairs>
                <XY>7 0.0</XY>
                <XY>22 0.0072</XY>
                <XY>30 0.0072</XY>
                <XY>35 0.0</XY>
              </XYPairs>
            </TemperatureFunction>
          </PhaseLookupValue>
        </PhaseLookup>
        <Constant name="NFillingRate">
          <Value>0.00</Value>
        </Constant>
        <Constant name="MaxNConcDailyGrowth">
          <Value>0.03</Value>
        </Constant>
        <StageBasedInterpolation name="WaterContent">
          <Stages>StartDormancy EndDormancy BudBurst Flowering Set Veraison Ripe LeafFall</Stages>
          <Values>  0.93           0.93        0.93       0.93  0.93   0.85   0.7 0.7</Values>
        </StageBasedInterpolation>
      </ReproductiveOrgan>
      <ReserveOrgan name="Reserve">
        <InitialDM>100</InitialDM>
        <DailyRetransFraction>0.1</DailyRetransFraction>
        <Biomass name="Live" />
        <Biomass name="Dead" />
      </ReserveOrgan>
      <StageBasedInterpolation name="StageCode">
        <Stages>StartDormancy EndDormancy BudBurst Flowering Set Veraison Ripe LeafFall</Stages>
        <Values>     1            2           7        23     27   35      38     47</Values>
      </StageBasedInterpolation>
      <Summary />
      <CompositeBiomass name="AboveGround">
        <Property>Organs[AboveGround].Live</Property>
        <Property>Organs[AboveGround].Dead</Property>
      </CompositeBiomass>
      <CompositeBiomass name="BelowGround">
        <Property>Organs[BelowGround].Live</Property>
        <Property>Organs[BelowGround].Dead</Property>
      </CompositeBiomass>
      <CompositeBiomass name="Total">
        <Property>Organs[].Live</Property>
        <Property>Organs[].Dead</Property>
      </CompositeBiomass>
      <CompositeBiomass name="TotalLive">
          <Property>Organs[].Live</Property>
      </CompositeBiomass>       
      <CompositeBiomass name="TotalDead">
          <Property>Organs[].Dead</Property>
      </CompositeBiomass>      
    </Plant>
  </Model>
</Type>