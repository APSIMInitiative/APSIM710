<Type name="SoilNitrogen">
  
  <!-- _________________________________________________________________________________________________________
  This is a copy of parts of soil.xml (extracted and rearranged by RCichota)
  It is meant to be used when using SWIM2 in the graphic user interface.
 __________________________________________________________________________________________________________ -->

  <MetaData>
    <UItype>CSUserInterface.GenericUI</UItype>
    <ShowInMainTree>Yes</ShowInMainTree>
    <Image>%apsim%\UserInterface\Images\banner2.jpg</Image>
    <Documentation name="Nitrogen science documentation">%apsim%\Documentation\4 Module Reference\SoilN.htm</Documentation>
    <LargeIcon>%apsim%\UserInterface\Images\note_pinned32.png</LargeIcon>
    <SmallIcon>%apsim%\UserInterface\Images\note_pinned16.png</SmallIcon>
    <dll>%apsim%/Model/SoilNitrogen.dll</dll>
    <drops>
      <drop>toolbox</drop>
      <drop>area</drop>
      <drop>simulation</drop>
      <drop>folder</drop>
      <drop>factor</drop>
    </drops>
    <ApsimToSim>
      <component name="SoilNitrogen" executable="%apsim%/Model/SoilNitrogen.dll" class="SoilN">
        <executable name="%apsim%/Model/SoilNitrogen.dll" version="1.0" />
        <initdata>
          [Model]
          [SoilNitrogen.innerxml]
        </initdata>
      </component>
    </ApsimToSim>
  </MetaData>
  <Model>
    <SoilNitrogen>

      <!-- Values typically read from soil's interface  -->
      <soiltype> default </soiltype>
      <root_cn> 30 </root_cn>
      <root_wt> 0.0 </root_wt>
      <soil_cn> 12.0 </soil_cn>
      <enr_a_coeff> 7.4 </enr_a_coeff>
      <enr_b_coeff> 0.2 </enr_b_coeff>
      <oc> 3.0  1.0 </oc>
      <ph> 6.0  6.0 </ph>
      <fbiom> 0.05  0.01 </fbiom>
      <finert> 0.50  0.95 </finert>
      <no3ppm> 5.0  2.0 </no3ppm>
      <nh4ppm> 1.0  0.5 </nh4ppm>

      <!-- additions by RCichota -->
      <functions2use description="the set of function to use (original or new) - for develop/debugging"> original </functions2use>

      <!-- General setting parameters -->
      <SoilParamSet description="the parameter set used to initialise SoilNitrogen"> standard </SoilParamSet>
      <allow_simpleSoilTemp description="whether internal soilTemp can be used, otherwise the SoilTemp has to be present"> yes </allow_simpleSoilTemp>
      <profile_reduction description="whether soil profle rediction is on or off"> off </profile_reduction>
      <use_organic_solutes description="whether organic solute are on or off"> off </use_organic_solutes>
      <ureappm_min description="minimum allowable urea content (ppm)"> 0.0 </ureappm_min>
      <nh4ppm_min description="minimum allowable NH4 (ppm)"> 0.0 </nh4ppm_min>
      <no3ppm_min description="minimum allowable NO3 (ppm)"> 0.0 </no3ppm_min>
      <fom_min description="minimum allowable FOM (kg/ha)"> 0.5 </fom_min>
      <OC2OM_factor description="factor to convert organic carbon to organic matter"> 1.7 </OC2OM_factor>
      <C_in_FOM description="Carbon weight fraction in FOM (0-1)"> 0.40 </C_in_FOM>
      <minPatchArea description="minimum allowable relative area for a patch (0-1)"> 0.001 </minPatchArea>

      <!-- Parameters for handling soil loss process -->
      <!-- 
                <enr_a_coeff>[soil.EnrACoeff]</enr_a_coeff>
                <enr_b_coeff>[soil.EnrBCoeff]</enr_b_coeff>   -->

      <!-- Parameters for setting soil organic matter -->
      <mcn description="C:N ratio of microbes ()"> 8.0 </mcn>
      <!-- 
                <soil_cn>[soil.SoilCN]</soil_cn>
                <fbiom>[soil.FBIOM(0-1)]</fbiom>
                <finert>[soil.FINERT(0-1)]</finert>   -->

      <!-- Parameters for setting fresh organic matter (FOM) -->
      <!-- 
                <root_cn>[soil.RootCN]</root_cn>
                <root_wt>[soil.RootWT]</root_wt>  -->
      <fom_type>                                                   default  manure  mucuna  lablab  shemp  stable </fom_type>
      <fract_carb description="carbohydrate fraction of FOM (0-1)">0.2      0.3     0.54    0.57    0.45   0.0    </fract_carb>
      <fract_cell description="cellulose fraction of FOM (0-1)">   0.7      0.3     0.37    0.37    0.47   0.1    </fract_cell>
      <fract_lign description="lignin fraction of FOM (0-1)">      0.1      0.4     0.09    0.06    0.08   0.9    </fract_lign>

      <!-- Parameters for FOM and SurfOM mineralisation process -->
      <!-- For Surface OM -->
      <ef_res description="fraction of residue C mineralized retained in system (0-1)"> 0.4 </ef_res>
      <fr_res_biom description="fraction of retained residue C transferred to biomass (0-1)"> 0.9 </fr_res_biom>
      <min_depth description="depth of soil from which N can be immobilised by decomposing surface residues (mm)"> 100.0 </min_depth>
      <!-- For fresh OM -->
      <!-- Old parameters -->
      <rd_carb description="maximum rate constant for decomposition of FPool1 (0-1)"> 0.2   0.1 </rd_carb>
      <rd_cell description="maximum rate constant for decomposition of FPool2 (0-1)"> 0.05   0.25 </rd_cell>
      <rd_lign description="maximum rate constant for  decomposition of FPool3 (0-1)"> 0.0095   0.003 </rd_lign>
      <ef_fom description="fraction of FOM C mineralized retained in system (0-1)"> 0.4 </ef_fom>
      <fr_fom_biom description="fraction of retained FOM C transferred to biomass (0-1)"> 0.9 </fr_fom_biom>
      <cnrf_coeff description="coeff. to determine the magnitude of C:N effects on decomposition of FOM"> 0.693 </cnrf_coeff>
      <cnrf_optcn description="C:N above which decomposition rate of FOM declines"> 25.0 </cnrf_optcn>
      <!-- New parameters -->
      <stfMinerFOM_Topt description="parameter for temp factor, optimum temperature (aerobic and anaerobic)"> 32.0  32.0 </stfMinerFOM_Topt>
      <stfMinerFOM_FctrZero description="parameter for temp factor, value of factor at zero degrees (aerobic and anaerobic)"> 0.20  0.20 </stfMinerFOM_FctrZero>
      <stfMinerFOM_CvExp description="parameter for temp factor, curve exponent (aerobic and anaerobic)"> 2.0  2.0 </stfMinerFOM_CvExp>
      <swfMinerFOM_x description="parameter for moist factor, values of modified swc (0-3)"> 0.0 1.0 1.5 2.0 3.0 </swfMinerFOM_x>
      <swfMinerFOM_y description="parameter for moist factor, swf values corresponding to x"> 0.0 0.0 1.0 1.0 0.5 </swfMinerFOM_y>
      <cnfMinerFOM_OptCN description="parameter for C:N ratio factor, variation rate"> 0.693 </cnfMinerFOM_OptCN>
      <cnfMinerFOM_RateCN description="parameter for C:N ratio factor, optimum CN value"> 25.0 </cnfMinerFOM_RateCN>

      <rc_stf_minerFomCH_Topt description="parameter for FOM's carbohydrate mineralisation temp factor, stf at zero"> 0.0 </rc_stf_minerFomCH_Topt>
      <rc_stf_minerFomCH_FctrZero description="parameter for FOM's carbohydrate mineralisation temp factor, optimum temp"> 32 </rc_stf_minerFomCH_FctrZero>
      <rc_stf_minerFomCH_CvExp description="parameter for FOM's carbohydrate mineralisation temp factor, exponent"> 2.0 </rc_stf_minerFomCH_CvExp>
      <rc_stf_minerFomCl_Topt description="parameter for FOM's celulose mineralisation temp factor, stf at zero"> 0.0 </rc_stf_minerFomCl_Topt>
      <rc_stf_minerFomCl_FctrZero description="parameter for FOM's celulose mineralisation temp factor, optimum temp"> 32 </rc_stf_minerFomCl_FctrZero>
      <rc_stf_minerFomCl_CvExp description="parameter for FOM's celulose mineralisation temp factor, exponent"> 2.0 </rc_stf_minerFomCl_CvExp>
      <rc_stf_minerFomLg_Topt description="parameter for FOM's lignine mineralisation temp factor, stf at zero"> 0.0 </rc_stf_minerFomLg_Topt>
      <rc_stf_minerFomLg_FctrZero description="parameter for FOM's lignine mineralisation temp factor, optimum temp"> 32 </rc_stf_minerFomLg_FctrZero>
      <rc_stf_minerFomLg_CvExp description="parameter for FOM's lignine mineralisation temp factor, exponent"> 2.0 </rc_stf_minerFomLg_CvExp>

      <!-- Parameters for SOM mineralisation/immobilisation process -->
      <!-- Old parameters -->
      <!-- dsg 200509 ****** the following constants are for (a) aerobic AND (b)anaerobic conditions ***** -->
      <rd_biom description="potential daily rate of soil biomass mineralization (aerobic and anaerobic conditions)"> 0.0081  0.004 </rd_biom>
      <ef_biom description="fraction of biomass C mineralized retained in system (0-1)"> 0.4 </ef_biom>
      <fr_biom_biom description="fraction of retained biomass C returned to biomass (0-1)"> 0.6 </fr_biom_biom>
      <rd_hum description="potential daily rate of humus mineralization (aerobic and anaerobic conditions)"> 0.00015   0.00007 </rd_hum>
      <ef_hum description="fraction of humic C mineralized retained in system (0-1)"> 0.4 </ef_hum>

      <opt_temp description="Soil temperature above which there is no further effect on mineralisation and nitrification (aerobic and anaerobic)"> 32.0   32.0 </opt_temp>
      <wfmin_index description="index specifying water content for water factor for mineralization"> 0.0  0.5  1.0  2.0 </wfmin_index>
      <wfmin_values description="value of water factor function at given index values(mineralization)"> 0.0  1.0  1.0  0.5 </wfmin_values>
      <!--
                      ______________________________________________________________________-
                      Specifying the water factor for Nitrogen Transformations is
                      by referring to water content via an indexing system and linear interpolation
                      between specified coordinates.
                      (see example)

                        1.0 |     ______
                            |    /.     \                In this example
                        0.5 |   / .      -               wf_index = 0.0 0.5 1.0 2.0
                            |  /  .        \             wf_values= 0.0 1.0 1.0 0.25
                            | /   .
                        0.0 |/______________________-
                            LL       DUL   SAT
                            =0       =1    =2
                        -->

      <!-- New parameters -->
      <useSingleFactors description="whether mineralisation factors are calculated single or for each pool"> yes </useSingleFactors>
      <stfMiner_Topt description="parameter for temp factor, optimum temperature (aerobic and anaerobic conditions)"> 32.0  32.0 </stfMiner_Topt>
      <stfMiner_FctrZero description="parameter for temp factor, value of factor at zero degrees (aerobic and anaerobic)"> 0.20  0.20 </stfMiner_FctrZero>
      <stfMiner_CvExp description="parameter for temp factor, curve exponent (aerobic and anaerobic conditions)"> 2.0  2.0 </stfMiner_CvExp>
      <swfMiner_x description="parameter for moist factor, values of modified swc (0-3)"> 0.0 1.0 1.5 2.0 3.0 </swfMiner_x>
      <swfMiner_y description="parameter for moist factor, swf values corresponding to x"> 0.0 0.0 1.0 1.0 0.5 </swfMiner_y>

      <stfMinerHum_Topt description="parameter for temp factor, optimum temperature (aerobic and anaerobic conditions)"> 32.0  32.0 </stfMinerHum_Topt>
      <stfMinerHum_FctrZero description="parameter for temp factor, value of factor at zero degrees (aerobic and anaerobic)"> 0.20  0.20 </stfMinerHum_FctrZero>
      <stfMinerHum_CvExp description="parameter for temp factor, curve exponent (aerobic and anaerobic conditions)"> 2.0  2.0 </stfMinerHum_CvExp>
      <swfMinerHum_x description="parameter for moist factor, values of modified swc (0-3)"> 0.0 1.0 1.5 2.0 3.0 </swfMinerHum_x>
      <swfMinerHum_y description="parameter for moist factor, swf values corresponding to x"> 0.0 0.0 1.0 1.0 0.5 </swfMinerHum_y>
      <stfMinerBiom_Topt description="parameter for temp factor, optimum temperature (aerobic and anaerobic)"> 32.0  32.0 </stfMinerBiom_Topt>
      <stfMinerBiom_FctrZero description="parameter for temp factor, value of factor at zero degrees (aerobic and anaerobic)"> 0.20  0.20 </stfMinerBiom_FctrZero>
      <stfMinerBiom_CvExp description="parameter for temp factor, curve exponent (aerobic and anaerobic)"> 2.0  2.0 </stfMinerBiom_CvExp>
      <swfMinerBiom_x description="parameter for moist factor, values of modified swc (0-3)"> 0.0 1.0 1.5 2.0 3.0 </swfMinerBiom_x>
      <swfMinerBiom_y description="parameter for moist factor, swf values corresponding to x"> 0.0 0.0 1.0 1.0 0.5 </swfMinerBiom_y>

      <!-- Parameters for urea hydrolisys -->
      <potHydrol_min description="parameter for potential hydrol function - minimum potential"> 0.25 </potHydrol_min>
      <potHydrol_parmA description="parameter A for potential hydrol function"> -1.12 </potHydrol_parmA>
      <potHydrol_parmB description="parameter B for potential hydrol function"> 1.31 </potHydrol_parmB>
      <potHydrol_parmC description="parameter C for potential hydrol function"> 0.203 </potHydrol_parmC>
      <potHydrol_parmD description="parameter D for potential hydrol function"> -0.155 </potHydrol_parmD>
      <stfHydrol_Topt description="parameter for temp factor, optimum temperature (aerobic and anaerobic)"> 32.0  32.0 </stfHydrol_Topt>
      <stfHydrol_FctrZero description="parameter for temp factor, value of factor at zero degrees (aerobic and anaerobic)"> 0.20  0.20 </stfHydrol_FctrZero>
      <stfHydrol_CvExp description="parameter for temp factor, curve exponent (aerobic and anaerobic)"> 1.0  1.0 </stfHydrol_CvExp>
      <swfHydrol_x description="parameter for moist factor, values of modified swc (0-3)"> 0.0 1.0 1.5 2.0 3.0 </swfHydrol_x>
      <swfHydrol_y description="parameter for moist factor, swf values corresponding to x"> 0.0 0.0 1.0 1.0 0.5 </swfHydrol_y>

      <!-- Parameters for nitrification -->
      <nitrification_pot units="ppm" description="Soil Nitrification potential (ug NH4/g soil)"> 40.0 </nitrification_pot>
      <nh4_at_half_pot units="ppm" description="NH4 concentration at half potential nitrification (Michaelis-Menten kinetics)"> 90.0 </nh4_at_half_pot>
      <!-- Old parameters -->
      <wfnit_index description="index specifying water content for water factor for nitrification"> 0.0 .25 1.0 2.0 </wfnit_index>
      <wfnit_values description="value of water factor function at given index values(nitrification)"> 0.0 1.0 1.0 0.0 </wfnit_values>
      <pHf_nit_pH description="pH for specifying factor for nitrification"> 4.5 6.0 8.0 9.0 </pHf_nit_pH>
      <pHf_nit_values description="value of pH factor for nitrification"> 0.0 1.0 1.0 0.0 </pHf_nit_values>
      <!-- New parameters -->
      <stfNitrif_Topt description="parameter for temp factor, optimum temperature (aerobic and anaerobic)"> 32.0  32.0 </stfNitrif_Topt>
      <stfNitrif_FctrZero description="parameter for temp factor, value of factor at zero degrees (aerobic and anaerobic)"> 0.00  0.00 </stfNitrif_FctrZero>
      <stfNitrif_CvExp description="parameter for temp factor, curve exponent (aerobic and anaerobic)"> 2.0  2.0 </stfNitrif_CvExp>
      <swfNitrif_x description="parameter for moist factor, values of modified swc (0-3)"> 0.0 1.0 1.25 2.0 3.0 </swfNitrif_x>
      <swfNitrif_y description="parameter for moist factor, swf values corresponding to x"> 0.0 0.0 1.0 1.0 0.0 </swfNitrif_y>
      <sphfNitrif_x description="parameter for pH factor, values of soil ph (0-14)"> 0.0 4.5 6.0 8.0 9.0 14.0 </sphfNitrif_x>
      <sphfNitrif_y description="parameter for pH factor, sphf values corresponding to x"> 0.0 0.0 1.0 1.0 0.0 0.0 </sphfNitrif_y>

      <!-- Denitrification from nitrification -->
      <dnit_nitrf_loss description="Fraction of nitrification lost as denitrifcation"> 0.0 </dnit_nitrf_loss>

      <!-- Parameters for denitrification -->
      <dnit_rate_coeff description="denitrification rate coefficient (kg soil/mg C per day)"> 0.0006 </dnit_rate_coeff>
      <dnit_k1 description="K1 parameter from Thorburn et al(2010) for N2O model"> 25.1 </dnit_k1>
      <!-- Old parameters -->
      <dnit_wf_power description="power term for calculation of water factor for denitrification where wf = ((SW-DUL)/(SAT-DUL))^P"> 1.0 </dnit_wf_power>
      <dnit_wfps description="WFPS for calculating n2o fraction of denitrification"> 21.33333 100.0 </dnit_wfps>
      <dnit_n2o_factor description="WFPS factor for n2o fraction of denitrification"> 0.0   1.18 </dnit_n2o_factor>

      <!-- New parameters -->
      <stfDenit_Topt description="parameter for temp factor, optimum temperature (aerobic and anaerobic)"> 50.0  50.0 </stfDenit_Topt>
      <stfDenit_FctrZero description="parameter for temp factor, value of factor at zero degrees (aerobic and anaerobic)"> 0.09958  0.09958 </stfDenit_FctrZero>
      <stfDenit_CvExp description="parameter for temp factor, curve exponent (aerobic and anaerobic)"> 1000.0  1000.0 </stfDenit_CvExp>
      <swfDenit_x description="parameter for moist factor, values of modified swc (0-3)"> 0.0 2.0 3.0 </swfDenit_x>
      <swfDenit_y description="parameter for moist factor, swf values corresponding to x"> 0.0 0.0 1.0 </swfDenit_y>
      <actC_parmA description="parameter 1 to compute active carbon"> 0.0031 </actC_parmA>
      <actC_parmB description="parameter 2 to compute active carbon"> 24.5 </actC_parmB>
      <N2N2O_parmA description="parameter for TermA in N2N2O function"> 0.16 </N2N2O_parmA>
      <N2N2O_parmB description="parameter for TermB in N2N2O function"> 0.80 </N2N2O_parmB>
      <N2N2O_parmC description="parameter for TermC in N2N2O function"> 1.0 </N2N2O_parmC>

    </SoilNitrogen>
  </Model>
</Type>
